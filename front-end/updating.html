<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Site is getting updates!</title>
<style>
  :root{
    --accent:#6D4DF6;
    --accent-600:#5b3fec;
    --text:#111827;
    --muted:#6b7280;
    --bg:#f5f7fb;
    --card:#ffffff;
    --shadow:0 18px 40px rgba(2,6,23,.12);
    --radius:22px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0;
    font:16px/1.5 -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,system-ui;
    color:var(--text);
    background:var(--bg);
    display:grid;
    place-items:center;
    padding:24px;
  }
  .card{
    width:min(92vw,560px);
    background:var(--card);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:36px 28px 28px;
    text-align:center;
  }
  .gears{
    margin:0 auto 12px;
    width:96px; height:52px;
    color:var(--accent);
    display:block;
  }
  h1{
    margin:12px 0 10px;
    font-size:clamp(26px,3.2vw,36px);
    line-height:1.2;
    font-weight:800;
  }
  p.sub{
    margin:0 0 22px;
    color:var(--muted);
    font-size:18px;
  }

  /* Spinner */
  .spinner{
    width:34px;height:34px;margin:8px auto 24px;border-radius:9999px;
    border:3px solid rgba(109,77,246,.25);
    border-top-color:var(--accent);
    animation:spin 1s linear infinite;
  }
  @keyframes spin{to{transform:rotate(360deg)}}
  @media (prefers-reduced-motion:reduce){
    .spinner{animation:none}
  }

  /* Button */
  .btn{
    display:inline-flex;align-items:center;justify-content:center;
    width:100%;max-width:420px;height:54px;
    margin:0 auto 18px;padding:0 20px;
    border:0;border-radius:14px;cursor:pointer;
    background:var(--accent);
    color:#fff;font-weight:700;font-size:16px;
    box-shadow:0 6px 16px rgba(109,77,246,.35);
    transition:transform .06s ease, filter .15s ease;
  }
  .btn:active{transform:translateY(1px)}
  .btn:hover{filter:brightness(.98)}
  .btn:focus-visible{outline:3px solid #c7b8ff;outline-offset:3px}

  /* Progress line */
  .track{
    width:100%;max-width:420px;margin:0 auto;height:6px;border-radius:999px;
    background:#e5e7eb;
    overflow:hidden;
  }
  .bar{
    height:100%;width:0;background:var(--accent);
    border-radius:inherit;
    transition:width .2s linear;
    animation:fill 20s linear forwards;
  }
  @keyframes fill{from{width:0}to{width:100%}}
  @media (prefers-reduced-motion:reduce){
    .bar{animation:none;transition:none}
  }
</style>
</head>
<body>
  <main class="card" role="region" aria-labelledby="title">
    <!-- Three interlocking gears (stroke uses currentColor = --accent) -->
    <svg class="gears" viewBox="0 0 200 90" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
      <defs>
        <g id="gear">
          <circle r="14" cx="0" cy="0" fill="none" stroke="currentColor" stroke-width="4"/>
          <g id="tooth"><rect x="-2" y="-22" width="4" height="8" rx="1" fill="currentColor"/></g>
          <use href="#tooth" transform="rotate(30)"/><use href="#tooth" transform="rotate(60)"/>
          <use href="#tooth" transform="rotate(90)"/><use href="#tooth" transform="rotate(120)"/>
          <use href="#tooth" transform="rotate(150)"/><use href="#tooth" transform="rotate(180)"/>
          <use href="#tooth" transform="rotate(210)"/><use href="#tooth" transform="rotate(240)"/>
          <use href="#tooth" transform="rotate(270)"/><use href="#tooth" transform="rotate(300)"/>
          <use href="#tooth" transform="rotate(330)"/>
          <circle r="6" fill="currentColor"/>
        </g>
      </defs>
      <!-- Left gear -->
      <g transform="translate(58,45) scale(1.15)">
        <use href="#gear"/>
        <animateTransform attributeName="transform" type="rotate"
          values="0 0 0;-360 0 0" dur="8s" repeatCount="indefinite" additive="sum"/>
      </g>
      <!-- Center gear -->
      <g transform="translate(100,45) scale(1.7)">
        <use href="#gear"/>
        <animateTransform attributeName="transform" type="rotate"
          values="0 0 0;360 0 0" dur="8s" repeatCount="indefinite" additive="sum"/>
      </g>
      <!-- Right gear -->
      <g transform="translate(142,45) scale(1.15)">
        <use href="#gear"/>
        <animateTransform attributeName="transform" type="rotate"
          values="0 0 0;-360 0 0" dur="8s" repeatCount="indefinite" additive="sum"/>
      </g>
    </svg>

    <h1 id="title">Site is getting<br/>updates!</h1>
    <p class="sub">OrthodoxMetrics is being updated.</p>

    <div class="spinner" role="status" aria-live="polite" aria-label="Applying updates"></div>

    <button id="retryBtn" class="btn" type="button" aria-live="polite">
      Retrying in 20s…
    </button>

    <div class="track" aria-hidden="true">
      <div id="bar" class="bar"></div>
    </div>
  </main>

<script>
(function(){
  const TOTAL = 20; // seconds
  let remaining = TOTAL;
  const btn = document.getElementById('retryBtn');
  const bar = document.getElementById('bar');

  function label(s){ return `Retrying in ${s}s…`; }

  // Click = immediate refresh
  btn.addEventListener('click', () => { location.reload(); });

  // Countdown
  btn.textContent = label(remaining);
  btn.setAttribute('aria-label', btn.textContent);

  const iv = setInterval(() => {
    remaining -= 1;
    if (remaining <= 0) {
      clearInterval(iv);
      location.reload();
      return;
    }
    btn.textContent = label(remaining);
    btn.setAttribute('aria-label', btn.textContent);

    // Keep progress in sync (also works when reduced-motion disables CSS anim)
    const pct = ((TOTAL - remaining) / TOTAL) * 100;
    bar.style.width = pct + '%';
  }, 1000);

  // Respect reduced motion: stop spinner rotation (handled via CSS). Keep progress width updates via JS above.
})();
</script>
</body>
</html>
