{"version":3,"file":"InteractiveReportReview-BrsW5v3r.js","sources":["../../src/features/records-centralized/components/interactiveReport/InteractiveReportReview.tsx"],"sourcesContent":["/**\r\n * InteractiveReportReview Component\r\n * \r\n * Review page for interactive reports submitted by recipients.\r\n * Allows administrators to review, approve, and manage interactive report submissions.\r\n * \r\n * Route: /apps/interactive-reports/review\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Chip,\r\n  Button,\r\n  IconButton,\r\n  Tooltip,\r\n  CircularProgress,\r\n  Alert,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n} from '@mui/material';\r\nimport {\r\n  Visibility as ViewIcon,\r\n  CheckCircle as ApproveIcon,\r\n  Cancel as RejectIcon,\r\n  Refresh as RefreshIcon,\r\n} from '@mui/icons-material';\r\n\r\ninterface InteractiveReport {\r\n  id: string;\r\n  token: string;\r\n  submittedAt: string;\r\n  status: 'pending' | 'approved' | 'rejected';\r\n  recipientName?: string;\r\n  recipientEmail?: string;\r\n  data: Record<string, any>;\r\n}\r\n\r\nconst InteractiveReportReview: React.FC = () => {\r\n  const [reports, setReports] = useState<InteractiveReport[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [selectedReport, setSelectedReport] = useState<InteractiveReport | null>(null);\r\n  const [viewDialogOpen, setViewDialogOpen] = useState(false);\r\n\r\n  const fetchReports = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      // TODO: Replace with actual API call\r\n      // const response = await fetch('/api/interactive-reports/review');\r\n      // const data = await response.json();\r\n      // setReports(data.reports || []);\r\n      \r\n      // Placeholder data\r\n      setReports([]);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to load reports');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleApprove = async (reportId: string) => {\r\n    try {\r\n      // TODO: Implement approval API call\r\n      // await fetch(`/api/interactive-reports/${reportId}/approve`, { method: 'POST' });\r\n      fetchReports();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to approve report');\r\n    }\r\n  };\r\n\r\n  const handleReject = async (reportId: string) => {\r\n    try {\r\n      // TODO: Implement rejection API call\r\n      // await fetch(`/api/interactive-reports/${reportId}/reject`, { method: 'POST' });\r\n      fetchReports();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to reject report');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchReports();\r\n  }, []);\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'approved':\r\n        return 'success';\r\n      case 'rejected':\r\n        return 'error';\r\n      default:\r\n        return 'warning';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ p: 3 }}>\r\n      <Paper sx={{ p: 3 }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 3 }}>\r\n          <Typography variant=\"h4\" gutterBottom>\r\n            Interactive Report Review\r\n          </Typography>\r\n          <Button\r\n            startIcon={<RefreshIcon />}\r\n            onClick={fetchReports}\r\n            disabled={loading}\r\n          >\r\n            Refresh\r\n          </Button>\r\n        </Box>\r\n\r\n        {error && (\r\n          <Alert severity=\"error\" sx={{ mb: 3 }} onClose={() => setError(null)}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n\r\n        {loading && reports.length === 0 ? (\r\n          <Box sx={{ display: 'flex', justifyContent: 'center', p: 3 }}>\r\n            <CircularProgress />\r\n          </Box>\r\n        ) : reports.length === 0 ? (\r\n          <Alert severity=\"info\">\r\n            No interactive reports to review at this time.\r\n          </Alert>\r\n        ) : (\r\n          <TableContainer>\r\n            <Table>\r\n              <TableHead>\r\n                <TableRow>\r\n                  <TableCell>Token</TableCell>\r\n                  <TableCell>Submitted</TableCell>\r\n                  <TableCell>Recipient</TableCell>\r\n                  <TableCell>Status</TableCell>\r\n                  <TableCell align=\"right\">Actions</TableCell>\r\n                </TableRow>\r\n              </TableHead>\r\n              <TableBody>\r\n                {reports.map((report) => (\r\n                  <TableRow key={report.id}>\r\n                    <TableCell>{report.token.substring(0, 8)}...</TableCell>\r\n                    <TableCell>\r\n                      {new Date(report.submittedAt).toLocaleString()}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      {report.recipientName || report.recipientEmail || 'N/A'}\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <Chip\r\n                        label={report.status}\r\n                        color={getStatusColor(report.status) as any}\r\n                        size=\"small\"\r\n                      />\r\n                    </TableCell>\r\n                    <TableCell align=\"right\">\r\n                      <Tooltip title=\"View Details\">\r\n                        <IconButton\r\n                          size=\"small\"\r\n                          onClick={() => {\r\n                            setSelectedReport(report);\r\n                            setViewDialogOpen(true);\r\n                          }}\r\n                        >\r\n                          <ViewIcon />\r\n                        </IconButton>\r\n                      </Tooltip>\r\n                      {report.status === 'pending' && (\r\n                        <>\r\n                          <Tooltip title=\"Approve\">\r\n                            <IconButton\r\n                              size=\"small\"\r\n                              color=\"success\"\r\n                              onClick={() => handleApprove(report.id)}\r\n                            >\r\n                              <ApproveIcon />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                          <Tooltip title=\"Reject\">\r\n                            <IconButton\r\n                              size=\"small\"\r\n                              color=\"error\"\r\n                              onClick={() => handleReject(report.id)}\r\n                            >\r\n                              <RejectIcon />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                        </>\r\n                      )}\r\n                    </TableCell>\r\n                  </TableRow>\r\n                ))}\r\n              </TableBody>\r\n            </Table>\r\n          </TableContainer>\r\n        )}\r\n      </Paper>\r\n\r\n      {/* View Report Dialog */}\r\n      <Dialog\r\n        open={viewDialogOpen}\r\n        onClose={() => setViewDialogOpen(false)}\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>\r\n          Report Details - {selectedReport?.token.substring(0, 8)}...\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {selectedReport && (\r\n            <Box sx={{ mt: 2 }}>\r\n              <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                Submitted: {new Date(selectedReport.submittedAt).toLocaleString()}\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                Status: <Chip\r\n                  label={selectedReport.status}\r\n                  color={getStatusColor(selectedReport.status) as any}\r\n                  size=\"small\"\r\n                />\r\n              </Typography>\r\n              <Box sx={{ mt: 2 }}>\r\n                <Typography variant=\"subtitle2\" gutterBottom>\r\n                  Report Data:\r\n                </Typography>\r\n                <TextField\r\n                  fullWidth\r\n                  multiline\r\n                  rows={10}\r\n                  value={JSON.stringify(selectedReport.data, null, 2)}\r\n                  InputProps={{\r\n                    readOnly: true,\r\n                  }}\r\n                  variant=\"outlined\"\r\n                />\r\n              </Box>\r\n            </Box>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setViewDialogOpen(false)}>Close</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default InteractiveReportReview;\r\n"],"names":["InteractiveReportReview","reports","setReports","useState","loading","setLoading","error","setError","selectedReport","setSelectedReport","viewDialogOpen","setViewDialogOpen","fetchReports","__async","err","handleApprove","reportId","handleReject","useEffect","getStatusColor","status","Box","jsxs","Paper","jsx","Typography","Button","RefreshIcon","Alert","CircularProgress","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","report","Chip","Tooltip","IconButton","ViewIcon","Fragment","ApproveIcon","RejectIcon","Dialog","DialogTitle","DialogContent","TextField","DialogActions"],"mappings":"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"}