{"version":3,"file":"BuildInfoPage-Cm1MfxSR.js","sources":["../../src/shared/lib/buildInfo.ts","../../src/features/devel-tools/build-info/BuildInfoPage.tsx"],"sourcesContent":["/**\r\n * Build Info Module\r\n * \r\n * Provides build information including version, git SHA, and build time.\r\n * This information is typically injected during the build process.\r\n */\r\n\r\nexport interface BuildInfo {\r\n  version: string;\r\n  gitSha: string;\r\n  buildTime: string;\r\n  environment?: string;\r\n  nodeVersion?: string;\r\n}\r\n\r\n/**\r\n * Get build information\r\n * Tries to read from environment variables (injected at build time)\r\n * Falls back to runtime values if not available\r\n */\r\nexport function getBuildInfo(): BuildInfo {\r\n  // Try to get version from package.json via import.meta.env\r\n  // In Vite, you can inject this via define in vite.config.ts\r\n  const version = \r\n    import.meta.env.VITE_APP_VERSION ||\r\n    import.meta.env.APP_VERSION ||\r\n    '5.0.0'; // Fallback to package.json version\r\n\r\n  // Git SHA - typically injected during build\r\n  const gitSha = \r\n    import.meta.env.VITE_GIT_SHA ||\r\n    import.meta.env.GIT_SHA ||\r\n    import.meta.env.VITE_COMMIT_HASH ||\r\n    'unknown';\r\n\r\n  // Build time - injected at build time or use current time\r\n  const buildTime = \r\n    import.meta.env.VITE_BUILD_TIME ||\r\n    import.meta.env.BUILD_TIME ||\r\n    new Date().toISOString();\r\n\r\n  // Environment\r\n  const environment = \r\n    import.meta.env.MODE ||\r\n    import.meta.env.NODE_ENV ||\r\n    'development';\r\n\r\n  // Node version (if available)\r\n  const nodeVersion = \r\n    import.meta.env.VITE_NODE_VERSION ||\r\n    undefined;\r\n\r\n  return {\r\n    version,\r\n    gitSha: gitSha && gitSha.length > 7 ? gitSha.substring(0, 7) : gitSha, // Short SHA (7 chars) if available\r\n    buildTime,\r\n    environment,\r\n    nodeVersion,\r\n  };\r\n}\r\n\r\n/**\r\n * Get formatted build version string\r\n * Format: version-gitSha (e.g., \"5.0.0-a1b2c3d\")\r\n */\r\nexport function getBuildVersionString(): string {\r\n  const info = getBuildInfo();\r\n  return `${info.version}-${info.gitSha}`;\r\n}\r\n\r\n/**\r\n * Get full build info as a formatted string\r\n */\r\nexport function getBuildInfoString(): string {\r\n  const info = getBuildInfo();\r\n  return `v${info.version} (${info.gitSha}) - Built ${new Date(info.buildTime).toLocaleString()}`;\r\n}\r\n\r\n// Export default for convenience\r\nexport default {\r\n  getBuildInfo,\r\n  getBuildVersionString,\r\n  getBuildInfoString,\r\n};\r\n","/**\r\n * Build Info Page\r\n * Displays build version information for cache-busting verification\r\n */\r\n\r\nimport React from 'react';\r\nimport {\r\n  Box,\r\n  Card,\r\n  CardContent,\r\n  Typography,\r\n  Paper,\r\n  Chip,\r\n  Stack,\r\n  Divider,\r\n} from '@mui/material';\r\nimport {\r\n  IconGitBranch,\r\n  IconCalendar,\r\n  IconCode,\r\n  IconInfoCircle,\r\n} from '@tabler/icons-react';\r\nimport { getBuildInfo, getBuildVersionString } from '@/shared/lib/buildInfo';\r\n\r\nconst BuildInfoPage: React.FC = () => {\r\n  const buildInfo = getBuildInfo();\r\n\r\n  return (\r\n    <Box sx={{ p: 3 }}>\r\n      <Typography variant=\"h4\" gutterBottom sx={{ mb: 3 }}>\r\n        Build Information\r\n      </Typography>\r\n\r\n      <Card>\r\n        <CardContent>\r\n          <Stack spacing={3}>\r\n            <Box>\r\n              <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                <IconInfoCircle size={20} />\r\n                Version Information\r\n              </Typography>\r\n              <Divider sx={{ my: 2 }} />\r\n              \r\n              <Stack spacing={2}>\r\n                <Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                    Full Version String\r\n                  </Typography>\r\n                  <Chip \r\n                    label={getBuildVersionString()} \r\n                    color=\"primary\" \r\n                    sx={{ fontFamily: 'monospace', fontSize: '0.875rem' }}\r\n                  />\r\n                </Box>\r\n\r\n                <Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                    Git SHA\r\n                  </Typography>\r\n                  <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n                    <IconGitBranch size={16} />\r\n                    <Chip \r\n                      label={buildInfo.gitSha} \r\n                      variant=\"outlined\"\r\n                      sx={{ fontFamily: 'monospace' }}\r\n                    />\r\n                  </Stack>\r\n                </Box>\r\n\r\n                <Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                    Build Time\r\n                  </Typography>\r\n                  <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n                    <IconCalendar size={16} />\r\n                    <Typography variant=\"body1\" sx={{ fontFamily: 'monospace' }}>\r\n                      {new Date(buildInfo.buildTime).toLocaleString()}\r\n                    </Typography>\r\n                  </Stack>\r\n                </Box>\r\n\r\n                <Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                    Package Version\r\n                  </Typography>\r\n                  <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n                    <IconCode size={16} />\r\n                    <Chip \r\n                      label={buildInfo.version} \r\n                      variant=\"outlined\"\r\n                    />\r\n                  </Stack>\r\n                </Box>\r\n              </Stack>\r\n            </Box>\r\n\r\n            <Divider />\r\n\r\n            <Box>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                Cache Verification\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\r\n                This page helps verify that the latest build is being served. \r\n                After a deployment, check that the Git SHA and Build Time match the latest commit.\r\n              </Typography>\r\n              \r\n              <Paper \r\n                variant=\"outlined\" \r\n                sx={{ \r\n                  p: 2, \r\n                  mt: 2, \r\n                  bgcolor: 'background.default',\r\n                  fontFamily: 'monospace',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n              >\r\n                <pre style={{ margin: 0 }}>\r\n                  {JSON.stringify(buildInfo, null, 2)}\r\n                </pre>\r\n              </Paper>\r\n            </Box>\r\n\r\n            <Divider />\r\n\r\n            <Box>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                <strong>Note:</strong> If you see old build information after a deployment, \r\n                clear your browser cache or perform a hard refresh (Ctrl+Shift+R / Cmd+Shift+R).\r\n              </Typography>\r\n            </Box>\r\n          </Stack>\r\n        </CardContent>\r\n      </Card>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default BuildInfoPage;\r\n"],"names":["getBuildInfo","version","gitSha","buildTime","getBuildVersionString","info","BuildInfoPage","buildInfo","Box","jsx","Typography","Card","CardContent","jsxs","Stack","IconInfoCircle","Divider","Chip","IconGitBranch","IconCalendar","IconCode","Paper"],"mappings":"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"}