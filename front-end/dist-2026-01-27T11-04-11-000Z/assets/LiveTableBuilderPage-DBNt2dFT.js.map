{"version":3,"file":"LiveTableBuilderPage-DBNt2dFT.js","sources":["../../node_modules/@mui/icons-material/esm/FileDownload.js","../../node_modules/@mui/icons-material/esm/FileUpload.js","../../node_modules/@mui/icons-material/esm/Redo.js","../../node_modules/@mui/icons-material/esm/Remove.js","../../node_modules/@mui/icons-material/esm/SwapHoriz.js","../../node_modules/@mui/icons-material/esm/Undo.js","../../node_modules/ag-grid-react/dist/package/index.esm.mjs","../../src/features/devel-tools/live-table-builder/utils/clipboard.ts","../../src/features/devel-tools/live-table-builder/components/EditableHeader.tsx","../../src/features/devel-tools/live-table-builder/utils/normalize.ts","../../src/features/devel-tools/live-table-builder/components/LiveTableBuilder.tsx","../../src/features/devel-tools/live-table-builder/utils/csvExport.ts","../../src/features/devel-tools/live-table-builder/utils/csvImport.ts","../../src/features/devel-tools/live-table-builder/utils/history.ts","../../src/features/devel-tools/live-table-builder/LiveTableBuilderPage.tsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z\"\n}), 'FileDownload');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z\"\n}), 'FileUpload');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z\"\n}), 'Redo');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M19 13H5v-2h14z\"\n}), 'Remove');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M6.99 11 3 15l3.99 4v-3H14v-2H6.99zM21 9l-3.99-4v3H10v2h7.01v3z\"\n}), 'SwapHoriz');","\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8\"\n}), 'Undo');","// packages/ag-grid-react/src/agGridReact.tsx\nimport React20, { Component } from \"react\";\n\n// packages/ag-grid-react/src/reactUi/agGridReactUi.tsx\nimport React19, {\n  forwardRef as forwardRef3,\n  useCallback as useCallback15,\n  useContext as useContext15,\n  useEffect as useEffect10,\n  useImperativeHandle as useImperativeHandle3,\n  useMemo as useMemo13,\n  useRef as useRef16,\n  useState as useState16\n} from \"react\";\nimport {\n  BaseComponentWrapper,\n  GridCoreCreator,\n  VanillaFrameworkOverrides,\n  _combineAttributesAndGridOptions,\n  _getGridOption,\n  _getGridRegisteredModules,\n  _isClientSideRowModel,\n  _isServerSideRowModel,\n  _observeResize as _observeResize2,\n  _processOnChange,\n  _warn as _warn2\n} from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/reactUi/cellRenderer/groupCellRenderer.tsx\nimport React3, {\n  forwardRef,\n  useCallback,\n  useContext,\n  useImperativeHandle,\n  useLayoutEffect,\n  useMemo,\n  useRef,\n  useState\n} from \"react\";\nimport { _toString } from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/reactUi/beansContext.tsx\nimport React from \"react\";\nvar BeansContext = React.createContext({});\nvar RenderModeContext = React.createContext(\"default\");\n\n// packages/ag-grid-react/src/reactUi/jsComp.tsx\nvar showJsComp = (compDetails, context, eParent, ref) => {\n  const doNothing = !compDetails || compDetails.componentFromFramework || context.isDestroyed();\n  if (doNothing) {\n    return;\n  }\n  const promise = compDetails.newAgStackInstance();\n  let comp;\n  let compGui;\n  let destroyed = false;\n  promise.then((c) => {\n    if (destroyed) {\n      context.destroyBean(c);\n      return;\n    }\n    comp = c;\n    compGui = comp.getGui();\n    eParent.appendChild(compGui);\n    setRef(ref, comp);\n  });\n  return () => {\n    destroyed = true;\n    if (!comp) {\n      return;\n    }\n    compGui?.parentElement?.removeChild(compGui);\n    context.destroyBean(comp);\n    if (ref) {\n      setRef(ref, void 0);\n    }\n  };\n};\nvar setRef = (ref, value) => {\n  if (!ref) {\n    return;\n  }\n  if (ref instanceof Function) {\n    const refCallback = ref;\n    refCallback(value);\n  } else {\n    const refObj = ref;\n    refObj.current = value;\n  }\n};\n\n// packages/ag-grid-react/src/reactUi/utils.tsx\nimport React2 from \"react\";\nimport ReactDOM from \"react-dom\";\nvar classesList = (...list) => {\n  const filtered = list.filter((s) => s != null && s !== \"\");\n  return filtered.join(\" \");\n};\nvar CssClasses = class _CssClasses {\n  constructor(...initialClasses) {\n    this.classesMap = {};\n    initialClasses.forEach((className) => {\n      this.classesMap[className] = true;\n    });\n  }\n  setClass(className, on) {\n    const nothingHasChanged = !!this.classesMap[className] == on;\n    if (nothingHasChanged) {\n      return this;\n    }\n    const res = new _CssClasses();\n    res.classesMap = { ...this.classesMap };\n    res.classesMap[className] = on;\n    return res;\n  }\n  toString() {\n    const res = Object.keys(this.classesMap).filter((key) => this.classesMap[key]).join(\" \");\n    return res;\n  }\n};\nvar isComponentStateless = (Component2) => {\n  const hasSymbol = () => typeof Symbol === \"function\" && Symbol.for;\n  const getMemoType = () => hasSymbol() ? Symbol.for(\"react.memo\") : 60115;\n  return typeof Component2 === \"function\" && !(Component2.prototype && Component2.prototype.isReactComponent) || typeof Component2 === \"object\" && Component2.$$typeof === getMemoType();\n};\nvar reactVersion = React2.version?.split(\".\")[0];\nvar isReactVersion17Minus = reactVersion === \"16\" || reactVersion === \"17\";\nfunction isReact19() {\n  return reactVersion === \"19\";\n}\nvar disableFlushSync = false;\nfunction runWithoutFlushSync(func) {\n  if (!disableFlushSync) {\n    setTimeout(() => disableFlushSync = false, 0);\n  }\n  disableFlushSync = true;\n  return func();\n}\nvar agFlushSync = (useFlushSync, fn) => {\n  if (!isReactVersion17Minus && useFlushSync && !disableFlushSync) {\n    ReactDOM.flushSync(fn);\n  } else {\n    fn();\n  }\n};\nvar agStartTransition = (fn) => {\n  if (!isReactVersion17Minus) {\n    React2.startTransition(fn);\n  } else {\n    fn();\n  }\n};\nfunction agUseSyncExternalStore(subscribe, getSnapshot, defaultSnapshot) {\n  if (React2.useSyncExternalStore) {\n    return React2.useSyncExternalStore(subscribe, getSnapshot);\n  } else {\n    return defaultSnapshot;\n  }\n}\nfunction getNextValueIfDifferent(prev, next, maintainOrder) {\n  if (next == null || prev == null) {\n    return next;\n  }\n  if (prev === next || next.length === 0 && prev.length === 0) {\n    return prev;\n  }\n  if (maintainOrder || prev.length === 0 && next.length > 0 || prev.length > 0 && next.length === 0) {\n    return next;\n  }\n  const oldValues = [];\n  const newValues = [];\n  const prevMap = /* @__PURE__ */ new Map();\n  const nextMap = /* @__PURE__ */ new Map();\n  for (let i = 0; i < next.length; i++) {\n    const c = next[i];\n    nextMap.set(c.instanceId, c);\n  }\n  for (let i = 0; i < prev.length; i++) {\n    const c = prev[i];\n    prevMap.set(c.instanceId, c);\n    if (nextMap.has(c.instanceId)) {\n      oldValues.push(c);\n    }\n  }\n  for (let i = 0; i < next.length; i++) {\n    const c = next[i];\n    const instanceId = c.instanceId;\n    if (!prevMap.has(instanceId)) {\n      newValues.push(c);\n    }\n  }\n  if (oldValues.length === prev.length && newValues.length === 0) {\n    return prev;\n  }\n  if (oldValues.length === 0 && newValues.length === next.length) {\n    return next;\n  }\n  if (oldValues.length === 0) {\n    return newValues;\n  }\n  if (newValues.length === 0) {\n    return oldValues;\n  }\n  return [...oldValues, ...newValues];\n}\n\n// packages/ag-grid-react/src/reactUi/cellRenderer/groupCellRenderer.tsx\nvar GroupCellRenderer = forwardRef((props, ref) => {\n  const { registry, context } = useContext(BeansContext);\n  const eGui = useRef(null);\n  const eValueRef = useRef(null);\n  const eCheckboxRef = useRef(null);\n  const eExpandedRef = useRef(null);\n  const eContractedRef = useRef(null);\n  const ctrlRef = useRef();\n  const [innerCompDetails, setInnerCompDetails] = useState();\n  const [childCount, setChildCount] = useState();\n  const [value, setValue] = useState();\n  const [cssClasses, setCssClasses] = useState(() => new CssClasses());\n  const [expandedCssClasses, setExpandedCssClasses] = useState(() => new CssClasses(\"ag-hidden\"));\n  const [contractedCssClasses, setContractedCssClasses] = useState(() => new CssClasses(\"ag-hidden\"));\n  const [checkboxCssClasses, setCheckboxCssClasses] = useState(() => new CssClasses(\"ag-invisible\"));\n  useImperativeHandle(ref, () => {\n    return {\n      // force new instance when grid tries to refresh\n      refresh() {\n        return false;\n      }\n    };\n  });\n  useLayoutEffect(() => {\n    return showJsComp(innerCompDetails, context, eValueRef.current);\n  }, [innerCompDetails]);\n  const setRef2 = useCallback((eRef) => {\n    eGui.current = eRef;\n    if (!eRef) {\n      ctrlRef.current = context.destroyBean(ctrlRef.current);\n      return;\n    }\n    const compProxy = {\n      setInnerRenderer: (details, valueToDisplay) => {\n        setInnerCompDetails(details);\n        setValue(valueToDisplay);\n      },\n      setChildCount: (count) => setChildCount(count),\n      toggleCss: (name, on) => setCssClasses((prev) => prev.setClass(name, on)),\n      setContractedDisplayed: (displayed) => setContractedCssClasses((prev) => prev.setClass(\"ag-hidden\", !displayed)),\n      setExpandedDisplayed: (displayed) => setExpandedCssClasses((prev) => prev.setClass(\"ag-hidden\", !displayed)),\n      setCheckboxVisible: (visible) => setCheckboxCssClasses((prev) => prev.setClass(\"ag-invisible\", !visible)),\n      setCheckboxSpacing: (add) => setCheckboxCssClasses((prev) => prev.setClass(\"ag-group-checkbox-spacing\", add))\n    };\n    const groupCellRendererCtrl = registry.createDynamicBean(\"groupCellRendererCtrl\", true);\n    if (groupCellRendererCtrl) {\n      ctrlRef.current = context.createBean(groupCellRendererCtrl);\n      ctrlRef.current.init(\n        compProxy,\n        eRef,\n        eCheckboxRef.current,\n        eExpandedRef.current,\n        eContractedRef.current,\n        GroupCellRenderer,\n        props\n      );\n    }\n  }, []);\n  const className = useMemo(() => `ag-cell-wrapper ${cssClasses.toString()}`, [cssClasses]);\n  const expandedClassName = useMemo(() => `ag-group-expanded ${expandedCssClasses.toString()}`, [expandedCssClasses]);\n  const contractedClassName = useMemo(\n    () => `ag-group-contracted ${contractedCssClasses.toString()}`,\n    [contractedCssClasses]\n  );\n  const checkboxClassName = useMemo(() => `ag-group-checkbox ${checkboxCssClasses.toString()}`, [checkboxCssClasses]);\n  const useFwRenderer = innerCompDetails?.componentFromFramework;\n  const FwRenderer = useFwRenderer ? innerCompDetails.componentClass : void 0;\n  const useValue = innerCompDetails == null && value != null;\n  const escapedValue = _toString(value);\n  return /* @__PURE__ */ React3.createElement(\n    \"span\",\n    {\n      className,\n      ref: setRef2,\n      ...!props.colDef ? { role: ctrlRef.current?.getCellAriaRole() } : {}\n    },\n    /* @__PURE__ */ React3.createElement(\"span\", { className: expandedClassName, ref: eExpandedRef }),\n    /* @__PURE__ */ React3.createElement(\"span\", { className: contractedClassName, ref: eContractedRef }),\n    /* @__PURE__ */ React3.createElement(\"span\", { className: checkboxClassName, ref: eCheckboxRef }),\n    /* @__PURE__ */ React3.createElement(\"span\", { className: \"ag-group-value\", ref: eValueRef }, useValue ? escapedValue : useFwRenderer ? /* @__PURE__ */ React3.createElement(FwRenderer, { ...innerCompDetails.params }) : null),\n    /* @__PURE__ */ React3.createElement(\"span\", { className: \"ag-group-child-count\" }, childCount)\n  );\n});\nvar groupCellRenderer_default = GroupCellRenderer;\n\n// packages/ag-grid-react/src/shared/customComp/customComponentWrapper.ts\nimport { AgPromise as AgPromise2 } from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/reactUi/customComp/customWrapperComp.tsx\nimport React4, { memo, useEffect, useState as useState2 } from \"react\";\n\n// packages/ag-grid-react/src/shared/customComp/customContext.ts\nimport { createContext } from \"react\";\nvar CustomContext = createContext({\n  setMethods: () => {\n  }\n});\n\n// packages/ag-grid-react/src/reactUi/customComp/customWrapperComp.tsx\nvar CustomWrapperComp = (params) => {\n  const { initialProps, addUpdateCallback, CustomComponentClass, setMethods } = params;\n  const [{ key, ...props }, setProps] = useState2(initialProps);\n  useEffect(() => {\n    addUpdateCallback((newProps) => setProps(newProps));\n  }, []);\n  return /* @__PURE__ */ React4.createElement(CustomContext.Provider, { value: { setMethods } }, /* @__PURE__ */ React4.createElement(CustomComponentClass, { key, ...props }));\n};\nvar customWrapperComp_default = memo(CustomWrapperComp);\n\n// packages/ag-grid-react/src/shared/reactComponent.ts\nimport { createElement } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport { AgPromise } from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/shared/keyGenerator.ts\nvar counter = 0;\nfunction generateNewKey() {\n  return `agPortalKey_${++counter}`;\n}\n\n// packages/ag-grid-react/src/shared/reactComponent.ts\nvar ReactComponent = class {\n  constructor(reactComponent, portalManager, componentType, suppressFallbackMethods) {\n    this.portal = null;\n    this.oldPortal = null;\n    this.reactComponent = reactComponent;\n    this.portalManager = portalManager;\n    this.componentType = componentType;\n    this.suppressFallbackMethods = !!suppressFallbackMethods;\n    this.statelessComponent = this.isStateless(this.reactComponent);\n    this.key = generateNewKey();\n    this.portalKey = generateNewKey();\n    this.instanceCreated = this.isStatelessComponent() ? AgPromise.resolve(false) : new AgPromise((resolve) => {\n      this.resolveInstanceCreated = resolve;\n    });\n  }\n  getGui() {\n    return this.eParentElement;\n  }\n  /** `getGui()` returns the parent element. This returns the actual root element. */\n  getRootElement() {\n    const firstChild = this.eParentElement.firstChild;\n    return firstChild;\n  }\n  destroy() {\n    if (this.componentInstance && typeof this.componentInstance.destroy == \"function\") {\n      this.componentInstance.destroy();\n    }\n    const portal = this.portal;\n    if (portal) {\n      this.portalManager.destroyPortal(portal);\n    }\n  }\n  createParentElement(params) {\n    const componentWrappingElement = this.portalManager.getComponentWrappingElement();\n    const eParentElement = document.createElement(componentWrappingElement || \"div\");\n    eParentElement.classList.add(\"ag-react-container\");\n    params.reactContainer = eParentElement;\n    return eParentElement;\n  }\n  statelessComponentRendered() {\n    return this.eParentElement.childElementCount > 0 || this.eParentElement.childNodes.length > 0;\n  }\n  getFrameworkComponentInstance() {\n    return this.componentInstance;\n  }\n  isStatelessComponent() {\n    return this.statelessComponent;\n  }\n  getReactComponentName() {\n    return this.reactComponent.name;\n  }\n  getMemoType() {\n    return this.hasSymbol() ? Symbol.for(\"react.memo\") : 60115;\n  }\n  hasSymbol() {\n    return typeof Symbol === \"function\" && Symbol.for;\n  }\n  isStateless(Component2) {\n    return typeof Component2 === \"function\" && !(Component2.prototype && Component2.prototype.isReactComponent) || typeof Component2 === \"object\" && Component2.$$typeof === this.getMemoType();\n  }\n  hasMethod(name) {\n    const frameworkComponentInstance = this.getFrameworkComponentInstance();\n    return !!frameworkComponentInstance && frameworkComponentInstance[name] != null || this.fallbackMethodAvailable(name);\n  }\n  callMethod(name, args) {\n    const frameworkComponentInstance = this.getFrameworkComponentInstance();\n    if (this.isStatelessComponent()) {\n      return this.fallbackMethod(name, !!args && args[0] ? args[0] : {});\n    } else if (!frameworkComponentInstance) {\n      setTimeout(() => this.callMethod(name, args));\n      return;\n    }\n    const method = frameworkComponentInstance[name];\n    if (method) {\n      return method.apply(frameworkComponentInstance, args);\n    }\n    if (this.fallbackMethodAvailable(name)) {\n      return this.fallbackMethod(name, !!args && args[0] ? args[0] : {});\n    }\n  }\n  addMethod(name, callback) {\n    this[name] = callback;\n  }\n  init(params) {\n    this.eParentElement = this.createParentElement(params);\n    this.createOrUpdatePortal(params);\n    return new AgPromise((resolve) => this.createReactComponent(resolve));\n  }\n  createOrUpdatePortal(params) {\n    if (!this.isStatelessComponent()) {\n      this.ref = (element) => {\n        this.componentInstance = element;\n        this.resolveInstanceCreated?.(true);\n        this.resolveInstanceCreated = void 0;\n      };\n      params.ref = this.ref;\n    }\n    this.reactElement = this.createElement(this.reactComponent, { ...params, key: this.key });\n    this.portal = createPortal(\n      this.reactElement,\n      this.eParentElement,\n      this.portalKey\n      // fixed deltaRowModeRefreshCompRenderer\n    );\n  }\n  createElement(reactComponent, props) {\n    return createElement(reactComponent, props);\n  }\n  createReactComponent(resolve) {\n    this.portalManager.mountReactPortal(this.portal, this, resolve);\n  }\n  rendered() {\n    return this.isStatelessComponent() && this.statelessComponentRendered() || !!(!this.isStatelessComponent() && this.getFrameworkComponentInstance());\n  }\n  /*\n   * fallback methods - these will be invoked if a corresponding instance method is not present\n   * for example if refresh is called and is not available on the component instance, then refreshComponent on this\n   * class will be invoked instead\n   *\n   * Currently only refresh is supported\n   */\n  refreshComponent(args) {\n    this.oldPortal = this.portal;\n    this.createOrUpdatePortal(args);\n    this.portalManager.updateReactPortal(this.oldPortal, this.portal);\n  }\n  fallbackMethod(name, params) {\n    const method = this[`${name}Component`];\n    if (!this.suppressFallbackMethods && !!method) {\n      return method.bind(this)(params);\n    }\n  }\n  fallbackMethodAvailable(name) {\n    if (this.suppressFallbackMethods) {\n      return false;\n    }\n    const method = this[`${name}Component`];\n    return !!method;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/customComponentWrapper.ts\nfunction addOptionalMethods(optionalMethodNames, providedMethods, component) {\n  optionalMethodNames.forEach((methodName) => {\n    const providedMethod = providedMethods[methodName];\n    if (providedMethod) {\n      component[methodName] = providedMethod;\n    }\n  });\n}\nvar CustomComponentWrapper = class extends ReactComponent {\n  constructor() {\n    super(...arguments);\n    this.awaitUpdateCallback = new AgPromise2((resolve) => {\n      this.resolveUpdateCallback = resolve;\n    });\n    this.wrapperComponent = customWrapperComp_default;\n  }\n  init(params) {\n    this.sourceParams = params;\n    return super.init(this.getProps());\n  }\n  addMethod() {\n  }\n  getInstance() {\n    return this.instanceCreated.then(() => this.componentInstance);\n  }\n  getFrameworkComponentInstance() {\n    return this;\n  }\n  createElement(reactComponent, props) {\n    return super.createElement(this.wrapperComponent, {\n      initialProps: props,\n      CustomComponentClass: reactComponent,\n      setMethods: (methods) => this.setMethods(methods),\n      addUpdateCallback: (callback) => {\n        this.updateCallback = () => {\n          callback(this.getProps());\n          return new AgPromise2((resolve) => {\n            setTimeout(() => {\n              resolve();\n            });\n          });\n        };\n        this.resolveUpdateCallback();\n      }\n    });\n  }\n  setMethods(methods) {\n    this.providedMethods = methods;\n    addOptionalMethods(this.getOptionalMethods(), this.providedMethods, this);\n  }\n  getOptionalMethods() {\n    return [];\n  }\n  getProps() {\n    return {\n      ...this.sourceParams,\n      key: this.key,\n      ref: this.ref\n    };\n  }\n  refreshProps() {\n    if (this.updateCallback) {\n      return this.updateCallback();\n    }\n    return new AgPromise2(\n      (resolve) => this.awaitUpdateCallback.then(() => {\n        this.updateCallback().then(() => resolve());\n      })\n    );\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/cellRendererComponentWrapper.ts\nvar CellRendererComponentWrapper = class extends CustomComponentWrapper {\n  refresh(params) {\n    this.sourceParams = params;\n    this.refreshProps();\n    return true;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/dateComponentWrapper.ts\nvar DateComponentWrapper = class extends CustomComponentWrapper {\n  constructor() {\n    super(...arguments);\n    this.date = null;\n    this.onDateChange = (date) => this.updateDate(date);\n  }\n  getDate() {\n    return this.date;\n  }\n  setDate(date) {\n    this.date = date;\n    this.refreshProps();\n  }\n  refresh(params) {\n    this.sourceParams = params;\n    this.refreshProps();\n  }\n  getOptionalMethods() {\n    return [\"afterGuiAttached\", \"setInputPlaceholder\", \"setInputAriaLabel\", \"setDisabled\"];\n  }\n  updateDate(date) {\n    this.setDate(date);\n    this.sourceParams.onDateChanged();\n  }\n  getProps() {\n    const props = super.getProps();\n    props.date = this.date;\n    props.onDateChange = this.onDateChange;\n    delete props.onDateChanged;\n    return props;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/dragAndDropImageComponentWrapper.ts\nvar DragAndDropImageComponentWrapper = class extends CustomComponentWrapper {\n  constructor() {\n    super(...arguments);\n    this.label = \"\";\n    this.icon = null;\n    this.shake = false;\n  }\n  setIcon(iconName, shake) {\n    this.icon = iconName;\n    this.shake = shake;\n    this.refreshProps();\n  }\n  setLabel(label) {\n    this.label = label;\n    this.refreshProps();\n  }\n  getProps() {\n    const props = super.getProps();\n    const { label, icon, shake } = this;\n    props.label = label;\n    props.icon = icon;\n    props.shake = shake;\n    return props;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/filterComponentWrapper.ts\nimport { AgPromise as AgPromise3 } from \"ag-grid-community\";\nvar FilterComponentWrapper = class extends CustomComponentWrapper {\n  constructor() {\n    super(...arguments);\n    this.model = null;\n    this.onModelChange = (model) => this.updateModel(model);\n    this.onUiChange = () => this.sourceParams.filterModifiedCallback();\n    this.expectingNewMethods = true;\n    this.hasBeenActive = false;\n    this.awaitSetMethodsCallback = new AgPromise3((resolve) => {\n      this.resolveSetMethodsCallback = resolve;\n    });\n  }\n  isFilterActive() {\n    return this.model != null;\n  }\n  doesFilterPass(params) {\n    return this.providedMethods.doesFilterPass(params);\n  }\n  getModel() {\n    return this.model;\n  }\n  setModel(model) {\n    this.expectingNewMethods = true;\n    this.model = model;\n    this.hasBeenActive || (this.hasBeenActive = this.isFilterActive());\n    return this.refreshProps();\n  }\n  refresh(newParams) {\n    this.sourceParams = newParams;\n    this.refreshProps();\n    return true;\n  }\n  afterGuiAttached(params) {\n    const providedMethods = this.providedMethods;\n    if (!providedMethods) {\n      this.awaitSetMethodsCallback.then(() => this.providedMethods?.afterGuiAttached?.(params));\n    } else {\n      providedMethods.afterGuiAttached?.(params);\n    }\n  }\n  getOptionalMethods() {\n    return [\"afterGuiDetached\", \"onNewRowsLoaded\", \"getModelAsString\", \"onAnyFilterChanged\"];\n  }\n  setMethods(methods) {\n    if (this.expectingNewMethods === false && this.hasBeenActive && this.providedMethods?.doesFilterPass !== methods?.doesFilterPass) {\n      setTimeout(() => {\n        this.sourceParams.filterChangedCallback();\n      });\n    }\n    this.expectingNewMethods = false;\n    super.setMethods(methods);\n    this.resolveSetMethodsCallback();\n    this.resolveFilterPassCallback?.();\n    this.resolveFilterPassCallback = void 0;\n  }\n  updateModel(model) {\n    this.resolveFilterPassCallback?.();\n    const awaitFilterPassCallback = new AgPromise3((resolve) => {\n      this.resolveFilterPassCallback = resolve;\n    });\n    this.setModel(model).then(() => {\n      awaitFilterPassCallback.then(() => {\n        this.sourceParams.filterChangedCallback();\n      });\n    });\n  }\n  getProps() {\n    const props = super.getProps();\n    props.model = this.model;\n    props.onModelChange = this.onModelChange;\n    props.onUiChange = this.onUiChange;\n    delete props.filterChangedCallback;\n    return props;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/filterDisplayComponentWrapper.ts\nimport { AgPromise as AgPromise4 } from \"ag-grid-community\";\nvar FilterDisplayComponentWrapper = class extends CustomComponentWrapper {\n  constructor() {\n    super(...arguments);\n    this.awaitSetMethodsCallback = new AgPromise4((resolve) => {\n      this.resolveSetMethodsCallback = resolve;\n    });\n  }\n  refresh(newParams) {\n    this.sourceParams = newParams;\n    this.refreshProps();\n    return true;\n  }\n  afterGuiAttached(params) {\n    const providedMethods = this.providedMethods;\n    if (!providedMethods) {\n      this.awaitSetMethodsCallback.then(() => this.providedMethods?.afterGuiAttached?.(params));\n    } else {\n      providedMethods.afterGuiAttached?.(params);\n    }\n  }\n  getOptionalMethods() {\n    return [\"afterGuiDetached\", \"onNewRowsLoaded\", \"onAnyFilterChanged\"];\n  }\n  setMethods(methods) {\n    super.setMethods(methods);\n    this.resolveSetMethodsCallback();\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/floatingFilterComponentProxy.ts\nimport { AgPromise as AgPromise5 } from \"ag-grid-community\";\nfunction updateFloatingFilterParent(params, model) {\n  params.parentFilterInstance((instance) => {\n    (instance.setModel(model) || AgPromise5.resolve()).then(() => {\n      params.filterParams.filterChangedCallback();\n    });\n  });\n}\nvar FloatingFilterComponentProxy = class {\n  constructor(floatingFilterParams, refreshProps) {\n    this.floatingFilterParams = floatingFilterParams;\n    this.refreshProps = refreshProps;\n    this.model = null;\n    this.onModelChange = (model) => this.updateModel(model);\n  }\n  getProps() {\n    return {\n      ...this.floatingFilterParams,\n      model: this.model,\n      onModelChange: this.onModelChange\n    };\n  }\n  onParentModelChanged(parentModel) {\n    this.model = parentModel;\n    this.refreshProps();\n  }\n  refresh(params) {\n    this.floatingFilterParams = params;\n    this.refreshProps();\n  }\n  setMethods(methods) {\n    addOptionalMethods(this.getOptionalMethods(), methods, this);\n  }\n  getOptionalMethods() {\n    return [\"afterGuiAttached\"];\n  }\n  updateModel(model) {\n    this.model = model;\n    this.refreshProps();\n    updateFloatingFilterParent(this.floatingFilterParams, model);\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/floatingFilterComponentWrapper.ts\nvar FloatingFilterComponentWrapper = class extends CustomComponentWrapper {\n  constructor() {\n    super(...arguments);\n    this.model = null;\n    this.onModelChange = (model) => this.updateModel(model);\n  }\n  onParentModelChanged(parentModel) {\n    this.model = parentModel;\n    this.refreshProps();\n  }\n  refresh(newParams) {\n    this.sourceParams = newParams;\n    this.refreshProps();\n  }\n  getOptionalMethods() {\n    return [\"afterGuiAttached\"];\n  }\n  updateModel(model) {\n    this.model = model;\n    this.refreshProps();\n    updateFloatingFilterParent(this.sourceParams, model);\n  }\n  getProps() {\n    const props = super.getProps();\n    props.model = this.model;\n    props.onModelChange = this.onModelChange;\n    return props;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/floatingFilterDisplayComponentWrapper.ts\nvar FloatingFilterDisplayComponentWrapper = class extends CustomComponentWrapper {\n  refresh(newParams) {\n    this.sourceParams = newParams;\n    this.refreshProps();\n  }\n  getOptionalMethods() {\n    return [\"afterGuiAttached\"];\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/innerHeaderComponentWrapper.ts\nvar InnerHeaderComponentWrapper = class extends CustomComponentWrapper {\n  refresh(params) {\n    this.sourceParams = params;\n    this.refreshProps();\n    return true;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/loadingOverlayComponentWrapper.ts\nvar LoadingOverlayComponentWrapper = class extends CustomComponentWrapper {\n  refresh(params) {\n    this.sourceParams = params;\n    this.refreshProps();\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/menuItemComponentWrapper.ts\nvar MenuItemComponentWrapper = class extends CustomComponentWrapper {\n  constructor() {\n    super(...arguments);\n    this.active = false;\n    this.expanded = false;\n    this.onActiveChange = (active) => this.updateActive(active);\n  }\n  setActive(active) {\n    this.awaitSetActive(active);\n  }\n  setExpanded(expanded) {\n    this.expanded = expanded;\n    this.refreshProps();\n  }\n  getOptionalMethods() {\n    return [\"select\", \"configureDefaults\"];\n  }\n  awaitSetActive(active) {\n    this.active = active;\n    return this.refreshProps();\n  }\n  updateActive(active) {\n    const result = this.awaitSetActive(active);\n    if (active) {\n      result.then(() => this.sourceParams.onItemActivated());\n    }\n  }\n  getProps() {\n    const props = super.getProps();\n    props.active = this.active;\n    props.expanded = this.expanded;\n    props.onActiveChange = this.onActiveChange;\n    delete props.onItemActivated;\n    return props;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/noRowsOverlayComponentWrapper.ts\nvar NoRowsOverlayComponentWrapper = class extends CustomComponentWrapper {\n  refresh(params) {\n    this.sourceParams = params;\n    this.refreshProps();\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/statusPanelComponentWrapper.ts\nvar StatusPanelComponentWrapper = class extends CustomComponentWrapper {\n  refresh(params) {\n    this.sourceParams = params;\n    this.refreshProps();\n    return true;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/toolPanelComponentWrapper.ts\nvar ToolPanelComponentWrapper = class extends CustomComponentWrapper {\n  constructor() {\n    super(...arguments);\n    this.onStateChange = (state) => this.updateState(state);\n  }\n  refresh(params) {\n    this.sourceParams = params;\n    this.refreshProps();\n    return true;\n  }\n  getState() {\n    return this.state;\n  }\n  updateState(state) {\n    this.state = state;\n    this.refreshProps();\n    this.sourceParams.onStateUpdated();\n  }\n  getProps() {\n    const props = super.getProps();\n    props.state = this.state;\n    props.onStateChange = this.onStateChange;\n    return props;\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/util.ts\nimport { AgPromise as AgPromise6, _warn } from \"ag-grid-community\";\nfunction getInstance(wrapperComponent, callback) {\n  const promise = wrapperComponent?.getInstance?.() ?? AgPromise6.resolve(void 0);\n  promise.then((comp) => callback(comp));\n}\nfunction warnReactiveCustomComponents() {\n  _warn(231);\n}\n\n// packages/ag-grid-react/src/shared/portalManager.ts\nvar MAX_COMPONENT_CREATION_TIME_IN_MS = 1e3;\nvar PortalManager = class {\n  constructor(refresher, wrappingElement, maxComponentCreationTimeMs) {\n    this.destroyed = false;\n    this.portals = [];\n    this.hasPendingPortalUpdate = false;\n    this.wrappingElement = wrappingElement ? wrappingElement : \"div\";\n    this.refresher = refresher;\n    this.maxComponentCreationTimeMs = maxComponentCreationTimeMs ? maxComponentCreationTimeMs : MAX_COMPONENT_CREATION_TIME_IN_MS;\n  }\n  getPortals() {\n    return this.portals;\n  }\n  destroy() {\n    this.destroyed = true;\n  }\n  destroyPortal(portal) {\n    this.portals = this.portals.filter((curPortal) => curPortal !== portal);\n    this.batchUpdate();\n  }\n  getComponentWrappingElement() {\n    return this.wrappingElement;\n  }\n  mountReactPortal(portal, reactComponent, resolve) {\n    this.portals = [...this.portals, portal];\n    this.waitForInstance(reactComponent, resolve);\n    this.batchUpdate();\n  }\n  updateReactPortal(oldPortal, newPortal) {\n    this.portals[this.portals.indexOf(oldPortal)] = newPortal;\n    this.batchUpdate();\n  }\n  batchUpdate() {\n    if (this.hasPendingPortalUpdate) {\n      return;\n    }\n    setTimeout(() => {\n      if (!this.destroyed) {\n        this.refresher();\n        this.hasPendingPortalUpdate = false;\n      }\n    });\n    this.hasPendingPortalUpdate = true;\n  }\n  waitForInstance(reactComponent, resolve, startTime = Date.now()) {\n    if (this.destroyed) {\n      resolve(null);\n      return;\n    }\n    if (reactComponent.rendered()) {\n      resolve(reactComponent);\n    } else {\n      if (Date.now() - startTime >= this.maxComponentCreationTimeMs && !this.hasPendingPortalUpdate) {\n        agFlushSync(true, () => this.refresher());\n        if (reactComponent.rendered()) {\n          resolve(reactComponent);\n        }\n        return;\n      }\n      window.setTimeout(() => {\n        this.waitForInstance(reactComponent, resolve, startTime);\n      });\n    }\n  }\n};\n\n// packages/ag-grid-react/src/reactUi/gridComp.tsx\nimport React18, { memo as memo14, useCallback as useCallback14, useEffect as useEffect9, useMemo as useMemo12, useRef as useRef15, useState as useState15 } from \"react\";\nimport { GridCtrl } from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/reactUi/gridBodyComp.tsx\nimport React16, { memo as memo12, useCallback as useCallback12, useContext as useContext13, useMemo as useMemo11, useRef as useRef13, useState as useState14 } from \"react\";\nimport {\n  CssClassManager as CssClassManager4,\n  FakeHScrollComp,\n  FakeVScrollComp,\n  GridBodyCtrl,\n  _observeResize,\n  _setAriaColCount,\n  _setAriaRowCount\n} from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/reactUi/header/gridHeaderComp.tsx\nimport React10, { memo as memo7, useCallback as useCallback7, useContext as useContext7, useMemo as useMemo6, useRef as useRef7, useState as useState8 } from \"react\";\nimport { GridHeaderCtrl } from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/reactUi/header/headerRowContainerComp.tsx\nimport React9, { memo as memo6, useCallback as useCallback6, useContext as useContext6, useRef as useRef6, useState as useState7 } from \"react\";\nimport { HeaderRowContainerCtrl } from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/reactUi/header/headerRowComp.tsx\nimport React8, { memo as memo5, useCallback as useCallback5, useContext as useContext5, useMemo as useMemo5, useRef as useRef5, useState as useState6 } from \"react\";\nimport { _EmptyBean as _EmptyBean4 } from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/reactUi/header/headerCellComp.tsx\nimport React5, { memo as memo2, useCallback as useCallback2, useContext as useContext2, useEffect as useEffect2, useLayoutEffect as useLayoutEffect2, useMemo as useMemo2, useRef as useRef2, useState as useState3 } from \"react\";\nimport { CssClassManager, _EmptyBean, _removeAriaSort, _setAriaSort } from \"ag-grid-community\";\nvar HeaderCellComp = ({ ctrl }) => {\n  const isAlive = ctrl.isAlive();\n  const { context } = useContext2(BeansContext);\n  const colId = isAlive ? ctrl.column.getColId() : void 0;\n  const [userCompDetails, setUserCompDetails] = useState3();\n  const [userStyles, setUserStyles] = useState3();\n  const compBean = useRef2();\n  const eGui = useRef2(null);\n  const eResize = useRef2(null);\n  const eHeaderCompWrapper = useRef2(null);\n  const userCompRef = useRef2();\n  const cssManager = useRef2();\n  if (isAlive && !cssManager.current) {\n    cssManager.current = new CssClassManager(() => eGui.current);\n  }\n  const setRef2 = useCallback2((eRef) => {\n    eGui.current = eRef;\n    compBean.current = eRef ? context.createBean(new _EmptyBean()) : context.destroyBean(compBean.current);\n    if (!eRef || !ctrl.isAlive()) {\n      return;\n    }\n    const refreshSelectAllGui = () => {\n      const selectAllGui = ctrl.getSelectAllGui();\n      if (selectAllGui) {\n        eResize.current?.insertAdjacentElement(\"afterend\", selectAllGui);\n        compBean.current.addDestroyFunc(() => selectAllGui.remove());\n      }\n    };\n    const compProxy = {\n      setWidth: (width) => {\n        if (eGui.current) {\n          eGui.current.style.width = width;\n        }\n      },\n      toggleCss: (name, on) => cssManager.current.toggleCss(name, on),\n      setUserStyles: (styles) => setUserStyles(styles),\n      setAriaSort: (sort) => {\n        if (eGui.current) {\n          sort ? _setAriaSort(eGui.current, sort) : _removeAriaSort(eGui.current);\n        }\n      },\n      setUserCompDetails: (compDetails) => setUserCompDetails(compDetails),\n      getUserCompInstance: () => userCompRef.current || void 0,\n      refreshSelectAllGui,\n      removeSelectAllGui: () => ctrl.getSelectAllGui()?.remove()\n    };\n    ctrl.setComp(compProxy, eRef, eResize.current, eHeaderCompWrapper.current, compBean.current);\n    refreshSelectAllGui();\n  }, []);\n  useLayoutEffect2(\n    () => showJsComp(userCompDetails, context, eHeaderCompWrapper.current, userCompRef),\n    [userCompDetails]\n  );\n  useEffect2(() => {\n    ctrl.setDragSource(eGui.current);\n  }, [userCompDetails]);\n  const userCompStateless = useMemo2(() => {\n    const res = userCompDetails?.componentFromFramework && isComponentStateless(userCompDetails.componentClass);\n    return !!res;\n  }, [userCompDetails]);\n  const reactUserComp = userCompDetails?.componentFromFramework;\n  const UserCompClass = userCompDetails?.componentClass;\n  return /* @__PURE__ */ React5.createElement(\"div\", { ref: setRef2, style: userStyles, className: \"ag-header-cell\", \"col-id\": colId, role: \"columnheader\" }, /* @__PURE__ */ React5.createElement(\"div\", { ref: eResize, className: \"ag-header-cell-resize\", role: \"presentation\" }), /* @__PURE__ */ React5.createElement(\"div\", { ref: eHeaderCompWrapper, className: \"ag-header-cell-comp-wrapper\", role: \"presentation\" }, reactUserComp ? userCompStateless ? /* @__PURE__ */ React5.createElement(UserCompClass, { ...userCompDetails.params }) : /* @__PURE__ */ React5.createElement(UserCompClass, { ...userCompDetails.params, ref: userCompRef }) : null));\n};\nvar headerCellComp_default = memo2(HeaderCellComp);\n\n// packages/ag-grid-react/src/reactUi/header/headerFilterCellComp.tsx\nimport React6, { memo as memo3, useCallback as useCallback3, useContext as useContext3, useLayoutEffect as useLayoutEffect3, useMemo as useMemo3, useRef as useRef3, useState as useState4 } from \"react\";\nimport { useEffect as useEffect3 } from \"react\";\nimport { AgPromise as AgPromise7, _EmptyBean as _EmptyBean2 } from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/shared/customComp/floatingFilterDisplayComponentProxy.ts\nvar FloatingFilterDisplayComponentProxy = class {\n  constructor(floatingFilterParams, refreshProps) {\n    this.floatingFilterParams = floatingFilterParams;\n    this.refreshProps = refreshProps;\n  }\n  getProps() {\n    return this.floatingFilterParams;\n  }\n  refresh(params) {\n    this.floatingFilterParams = params;\n    this.refreshProps();\n  }\n  setMethods(methods) {\n    addOptionalMethods(this.getOptionalMethods(), methods, this);\n  }\n  getOptionalMethods() {\n    return [\"afterGuiAttached\"];\n  }\n};\n\n// packages/ag-grid-react/src/reactUi/header/headerFilterCellComp.tsx\nvar HeaderFilterCellComp = ({ ctrl }) => {\n  const { context, gos } = useContext3(BeansContext);\n  const [userStyles, setUserStyles] = useState4();\n  const [cssClasses, setCssClasses] = useState4(\n    () => new CssClasses(\"ag-header-cell\", \"ag-floating-filter\")\n  );\n  const [cssBodyClasses, setBodyCssClasses] = useState4(() => new CssClasses());\n  const [cssButtonWrapperClasses, setButtonWrapperCssClasses] = useState4(\n    () => new CssClasses(\"ag-floating-filter-button\", \"ag-hidden\")\n  );\n  const [buttonWrapperAriaHidden, setButtonWrapperAriaHidden] = useState4(\"false\");\n  const [userCompDetails, setUserCompDetails] = useState4();\n  const [, setRenderKey] = useState4(1);\n  const compBean = useRef3();\n  const eGui = useRef3(null);\n  const eFloatingFilterBody = useRef3(null);\n  const eButtonWrapper = useRef3(null);\n  const eButtonShowMainFilter = useRef3(null);\n  const userCompResolve = useRef3();\n  const userCompPromise = useRef3();\n  const userCompRef = (value) => {\n    if (value == null) {\n      return;\n    }\n    userCompResolve.current && userCompResolve.current(value);\n  };\n  const setRef2 = useCallback3((eRef) => {\n    eGui.current = eRef;\n    compBean.current = eRef ? context.createBean(new _EmptyBean2()) : context.destroyBean(compBean.current);\n    if (!eRef || !ctrl.isAlive()) {\n      return;\n    }\n    userCompPromise.current = new AgPromise7((resolve) => {\n      userCompResolve.current = resolve;\n    });\n    const compProxy = {\n      toggleCss: (name, on) => setCssClasses((prev) => prev.setClass(name, on)),\n      setUserStyles: (styles) => setUserStyles(styles),\n      addOrRemoveBodyCssClass: (name, on) => setBodyCssClasses((prev) => prev.setClass(name, on)),\n      setButtonWrapperDisplayed: (displayed) => {\n        setButtonWrapperCssClasses((prev) => prev.setClass(\"ag-hidden\", !displayed));\n        setButtonWrapperAriaHidden(!displayed ? \"true\" : \"false\");\n      },\n      setWidth: (width) => {\n        if (eGui.current) {\n          eGui.current.style.width = width;\n        }\n      },\n      setCompDetails: (compDetails) => setUserCompDetails(compDetails),\n      getFloatingFilterComp: () => userCompPromise.current ? userCompPromise.current : null,\n      setMenuIcon: (eIcon) => eButtonShowMainFilter.current?.appendChild(eIcon)\n    };\n    ctrl.setComp(compProxy, eRef, eButtonShowMainFilter.current, eFloatingFilterBody.current, compBean.current);\n  }, []);\n  useLayoutEffect3(\n    () => showJsComp(userCompDetails, context, eFloatingFilterBody.current, userCompRef),\n    [userCompDetails]\n  );\n  const className = useMemo3(() => cssClasses.toString(), [cssClasses]);\n  const bodyClassName = useMemo3(() => cssBodyClasses.toString(), [cssBodyClasses]);\n  const buttonWrapperClassName = useMemo3(() => cssButtonWrapperClasses.toString(), [cssButtonWrapperClasses]);\n  const userCompStateless = useMemo3(() => {\n    const res = userCompDetails && userCompDetails.componentFromFramework && isComponentStateless(userCompDetails.componentClass);\n    return !!res;\n  }, [userCompDetails]);\n  const reactiveCustomComponents = useMemo3(() => gos.get(\"reactiveCustomComponents\"), []);\n  const enableFilterHandlers = useMemo3(() => gos.get(\"enableFilterHandlers\"), []);\n  const [floatingFilterCompProxy, setFloatingFilterCompProxy] = useState4();\n  useEffect3(() => {\n    if (userCompDetails?.componentFromFramework) {\n      if (reactiveCustomComponents) {\n        const ProxyClass = enableFilterHandlers ? FloatingFilterDisplayComponentProxy : FloatingFilterComponentProxy;\n        const compProxy = new ProxyClass(userCompDetails.params, () => setRenderKey((prev) => prev + 1));\n        userCompRef(compProxy);\n        setFloatingFilterCompProxy(compProxy);\n      } else {\n        warnReactiveCustomComponents();\n      }\n    }\n  }, [userCompDetails]);\n  const floatingFilterProps = floatingFilterCompProxy?.getProps();\n  const reactUserComp = userCompDetails?.componentFromFramework;\n  const UserCompClass = userCompDetails?.componentClass;\n  return /* @__PURE__ */ React6.createElement(\"div\", { ref: setRef2, style: userStyles, className, role: \"gridcell\" }, /* @__PURE__ */ React6.createElement(\"div\", { ref: eFloatingFilterBody, className: bodyClassName, role: \"presentation\" }, reactUserComp ? reactiveCustomComponents ? floatingFilterProps && /* @__PURE__ */ React6.createElement(\n    CustomContext.Provider,\n    {\n      value: {\n        setMethods: (methods) => floatingFilterCompProxy.setMethods(methods)\n      }\n    },\n    /* @__PURE__ */ React6.createElement(UserCompClass, { ...floatingFilterProps })\n  ) : /* @__PURE__ */ React6.createElement(UserCompClass, { ...userCompDetails.params, ref: userCompStateless ? () => {\n  } : userCompRef }) : null), /* @__PURE__ */ React6.createElement(\n    \"div\",\n    {\n      ref: eButtonWrapper,\n      \"aria-hidden\": buttonWrapperAriaHidden,\n      className: buttonWrapperClassName,\n      role: \"presentation\"\n    },\n    /* @__PURE__ */ React6.createElement(\n      \"button\",\n      {\n        ref: eButtonShowMainFilter,\n        type: \"button\",\n        className: \"ag-button ag-floating-filter-button-button\",\n        tabIndex: -1\n      }\n    )\n  ));\n};\nvar headerFilterCellComp_default = memo3(HeaderFilterCellComp);\n\n// packages/ag-grid-react/src/reactUi/header/headerGroupCellComp.tsx\nimport React7, { memo as memo4, useCallback as useCallback4, useContext as useContext4, useEffect as useEffect4, useLayoutEffect as useLayoutEffect4, useMemo as useMemo4, useRef as useRef4, useState as useState5 } from \"react\";\nimport { _EmptyBean as _EmptyBean3 } from \"ag-grid-community\";\nvar HeaderGroupCellComp = ({ ctrl }) => {\n  const { context } = useContext4(BeansContext);\n  const [userStyles, setUserStyles] = useState5();\n  const [cssClasses, setCssClasses] = useState5(() => new CssClasses());\n  const [cssResizableClasses, setResizableCssClasses] = useState5(() => new CssClasses());\n  const [resizableAriaHidden, setResizableAriaHidden] = useState5(\"false\");\n  const [ariaExpanded, setAriaExpanded] = useState5();\n  const [userCompDetails, setUserCompDetails] = useState5();\n  const colId = useMemo4(() => ctrl.column.getUniqueId(), []);\n  const compBean = useRef4();\n  const eGui = useRef4(null);\n  const eResize = useRef4(null);\n  const eHeaderCompWrapper = useRef4(null);\n  const userCompRef = useRef4();\n  const setRef2 = useCallback4((eRef) => {\n    eGui.current = eRef;\n    compBean.current = eRef ? context.createBean(new _EmptyBean3()) : context.destroyBean(compBean.current);\n    if (!eRef || !ctrl.isAlive()) {\n      return;\n    }\n    const compProxy = {\n      setWidth: (width) => {\n        if (eGui.current) {\n          eGui.current.style.width = width;\n        }\n      },\n      toggleCss: (name, on) => setCssClasses((prev) => prev.setClass(name, on)),\n      setUserStyles: (styles) => setUserStyles(styles),\n      setHeaderWrapperHidden: (hidden) => {\n        const headerCompWrapper = eHeaderCompWrapper.current;\n        if (!headerCompWrapper) {\n          return;\n        }\n        if (hidden) {\n          headerCompWrapper.style.setProperty(\"display\", \"none\");\n        } else {\n          headerCompWrapper.style.removeProperty(\"display\");\n        }\n      },\n      setHeaderWrapperMaxHeight: (value) => {\n        const headerCompWrapper = eHeaderCompWrapper.current;\n        if (!headerCompWrapper) {\n          return;\n        }\n        if (value != null) {\n          headerCompWrapper.style.setProperty(\"max-height\", `${value}px`);\n        } else {\n          headerCompWrapper.style.removeProperty(\"max-height\");\n        }\n        headerCompWrapper.classList.toggle(\"ag-header-cell-comp-wrapper-limited-height\", value != null);\n      },\n      setUserCompDetails: (compDetails) => setUserCompDetails(compDetails),\n      setResizableDisplayed: (displayed) => {\n        setResizableCssClasses((prev) => prev.setClass(\"ag-hidden\", !displayed));\n        setResizableAriaHidden(!displayed ? \"true\" : \"false\");\n      },\n      setAriaExpanded: (expanded) => setAriaExpanded(expanded),\n      getUserCompInstance: () => userCompRef.current || void 0\n    };\n    ctrl.setComp(compProxy, eRef, eResize.current, eHeaderCompWrapper.current, compBean.current);\n  }, []);\n  useLayoutEffect4(() => showJsComp(userCompDetails, context, eHeaderCompWrapper.current), [userCompDetails]);\n  useEffect4(() => {\n    if (eGui.current) {\n      ctrl.setDragSource(eGui.current);\n    }\n  }, [userCompDetails]);\n  const userCompStateless = useMemo4(() => {\n    const res = userCompDetails?.componentFromFramework && isComponentStateless(userCompDetails.componentClass);\n    return !!res;\n  }, [userCompDetails]);\n  const className = useMemo4(() => \"ag-header-group-cell \" + cssClasses.toString(), [cssClasses]);\n  const resizableClassName = useMemo4(\n    () => \"ag-header-cell-resize \" + cssResizableClasses.toString(),\n    [cssResizableClasses]\n  );\n  const reactUserComp = userCompDetails?.componentFromFramework;\n  const UserCompClass = userCompDetails?.componentClass;\n  return /* @__PURE__ */ React7.createElement(\n    \"div\",\n    {\n      ref: setRef2,\n      style: userStyles,\n      className,\n      \"col-id\": colId,\n      role: \"columnheader\",\n      \"aria-expanded\": ariaExpanded\n    },\n    /* @__PURE__ */ React7.createElement(\"div\", { ref: eHeaderCompWrapper, className: \"ag-header-cell-comp-wrapper\", role: \"presentation\" }, reactUserComp ? userCompStateless ? /* @__PURE__ */ React7.createElement(UserCompClass, { ...userCompDetails.params }) : /* @__PURE__ */ React7.createElement(UserCompClass, { ...userCompDetails.params, ref: userCompRef }) : null),\n    /* @__PURE__ */ React7.createElement(\"div\", { ref: eResize, \"aria-hidden\": resizableAriaHidden, className: resizableClassName })\n  );\n};\nvar headerGroupCellComp_default = memo4(HeaderGroupCellComp);\n\n// packages/ag-grid-react/src/reactUi/header/headerRowComp.tsx\nvar HeaderRowComp = ({ ctrl }) => {\n  const { context } = useContext5(BeansContext);\n  const { topOffset, rowHeight } = useMemo5(() => ctrl.getTopAndHeight(), []);\n  const [ariaRowIndex, setAriaRowIndex] = useState6(ctrl.getAriaRowIndex());\n  const className = ctrl.headerRowClass;\n  const [height, setHeight] = useState6(() => rowHeight + \"px\");\n  const [top, setTop] = useState6(() => topOffset + \"px\");\n  const cellCtrlsRef = useRef5([]);\n  const [cellCtrls, setCellCtrls] = useState6(() => ctrl.getUpdatedHeaderCtrls());\n  const compBean = useRef5();\n  const eGui = useRef5(null);\n  const setRef2 = useCallback5((eRef) => {\n    eGui.current = eRef;\n    compBean.current = eRef ? context.createBean(new _EmptyBean4()) : context.destroyBean(compBean.current);\n    if (!eRef) {\n      return;\n    }\n    const compProxy = {\n      setHeight: (height2) => setHeight(height2),\n      setTop: (top2) => setTop(top2),\n      setHeaderCtrls: (ctrls, forceOrder, afterScroll) => {\n        const prevCellCtrls = cellCtrlsRef.current;\n        const nextCells = getNextValueIfDifferent(prevCellCtrls, ctrls, forceOrder);\n        if (nextCells !== prevCellCtrls) {\n          cellCtrlsRef.current = nextCells;\n          agFlushSync(afterScroll, () => setCellCtrls(nextCells));\n        }\n      },\n      setWidth: (width) => {\n        if (eGui.current) {\n          eGui.current.style.width = width;\n        }\n      },\n      setRowIndex: (rowIndex) => {\n        setAriaRowIndex(rowIndex);\n      }\n    };\n    ctrl.setComp(compProxy, compBean.current, false);\n  }, []);\n  const style = useMemo5(\n    () => ({\n      height,\n      top\n    }),\n    [height, top]\n  );\n  const createCellJsx = useCallback5((cellCtrl) => {\n    switch (ctrl.type) {\n      case \"group\":\n        return /* @__PURE__ */ React8.createElement(headerGroupCellComp_default, { ctrl: cellCtrl, key: cellCtrl.instanceId });\n      case \"filter\":\n        return /* @__PURE__ */ React8.createElement(headerFilterCellComp_default, { ctrl: cellCtrl, key: cellCtrl.instanceId });\n      default:\n        return /* @__PURE__ */ React8.createElement(headerCellComp_default, { ctrl: cellCtrl, key: cellCtrl.instanceId });\n    }\n  }, []);\n  return /* @__PURE__ */ React8.createElement(\"div\", { ref: setRef2, className, role: \"row\", style, \"aria-rowindex\": ariaRowIndex }, cellCtrls.map(createCellJsx));\n};\nvar headerRowComp_default = memo5(HeaderRowComp);\n\n// packages/ag-grid-react/src/reactUi/header/headerRowContainerComp.tsx\nvar HeaderRowContainerComp = ({ pinned }) => {\n  const [displayed, setDisplayed] = useState7(true);\n  const [headerRowCtrls, setHeaderRowCtrls] = useState7([]);\n  const { context } = useContext6(BeansContext);\n  const eGui = useRef6(null);\n  const eCenterContainer = useRef6(null);\n  const headerRowCtrlRef = useRef6();\n  const pinnedLeft = pinned === \"left\";\n  const pinnedRight = pinned === \"right\";\n  const centre = !pinnedLeft && !pinnedRight;\n  const setRef2 = useCallback6((eRef) => {\n    eGui.current = eRef;\n    headerRowCtrlRef.current = eRef ? context.createBean(new HeaderRowContainerCtrl(pinned)) : context.destroyBean(headerRowCtrlRef.current);\n    if (!eRef) {\n      return;\n    }\n    const compProxy = {\n      setDisplayed,\n      setCtrls: (ctrls) => setHeaderRowCtrls(ctrls),\n      // centre only\n      setCenterWidth: (width) => {\n        if (eCenterContainer.current) {\n          eCenterContainer.current.style.width = width;\n        }\n      },\n      setViewportScrollLeft: (left) => {\n        if (eGui.current) {\n          eGui.current.scrollLeft = left;\n        }\n      },\n      // pinned only\n      setPinnedContainerWidth: (width) => {\n        if (eGui.current) {\n          eGui.current.style.width = width;\n          eGui.current.style.minWidth = width;\n          eGui.current.style.maxWidth = width;\n        }\n      }\n    };\n    headerRowCtrlRef.current.setComp(compProxy, eGui.current);\n  }, []);\n  const className = !displayed ? \"ag-hidden\" : \"\";\n  const insertRowsJsx = () => headerRowCtrls.map((ctrl) => /* @__PURE__ */ React9.createElement(headerRowComp_default, { ctrl, key: ctrl.instanceId }));\n  return pinnedLeft ? /* @__PURE__ */ React9.createElement(\"div\", { ref: setRef2, className: \"ag-pinned-left-header \" + className, \"aria-hidden\": !displayed, role: \"rowgroup\" }, insertRowsJsx()) : pinnedRight ? /* @__PURE__ */ React9.createElement(\"div\", { ref: setRef2, className: \"ag-pinned-right-header \" + className, \"aria-hidden\": !displayed, role: \"rowgroup\" }, insertRowsJsx()) : centre ? /* @__PURE__ */ React9.createElement(\"div\", { ref: setRef2, className: \"ag-header-viewport \" + className, role: \"presentation\", tabIndex: -1 }, /* @__PURE__ */ React9.createElement(\"div\", { ref: eCenterContainer, className: \"ag-header-container\", role: \"rowgroup\" }, insertRowsJsx())) : null;\n};\nvar headerRowContainerComp_default = memo6(HeaderRowContainerComp);\n\n// packages/ag-grid-react/src/reactUi/header/gridHeaderComp.tsx\nvar GridHeaderComp = () => {\n  const [cssClasses, setCssClasses] = useState8(() => new CssClasses());\n  const [height, setHeight] = useState8();\n  const { context } = useContext7(BeansContext);\n  const eGui = useRef7(null);\n  const gridCtrlRef = useRef7();\n  const setRef2 = useCallback7((eRef) => {\n    eGui.current = eRef;\n    gridCtrlRef.current = eRef ? context.createBean(new GridHeaderCtrl()) : context.destroyBean(gridCtrlRef.current);\n    if (!eRef)\n      return;\n    const compProxy = {\n      toggleCss: (name, on) => setCssClasses((prev) => prev.setClass(name, on)),\n      setHeightAndMinHeight: (height2) => setHeight(height2)\n    };\n    gridCtrlRef.current.setComp(compProxy, eRef, eRef);\n  }, []);\n  const className = useMemo6(() => {\n    const res = cssClasses.toString();\n    return \"ag-header \" + res;\n  }, [cssClasses]);\n  const style = useMemo6(\n    () => ({\n      height,\n      minHeight: height\n    }),\n    [height]\n  );\n  return /* @__PURE__ */ React10.createElement(\"div\", { ref: setRef2, className, style, role: \"presentation\" }, /* @__PURE__ */ React10.createElement(headerRowContainerComp_default, { pinned: \"left\" }), /* @__PURE__ */ React10.createElement(headerRowContainerComp_default, { pinned: null }), /* @__PURE__ */ React10.createElement(headerRowContainerComp_default, { pinned: \"right\" }));\n};\nvar gridHeaderComp_default = memo7(GridHeaderComp);\n\n// packages/ag-grid-react/src/reactUi/reactComment.tsx\nimport { useEffect as useEffect5 } from \"react\";\nvar useReactCommentEffect = (comment, eForCommentRef) => {\n  useEffect5(() => {\n    const eForComment = eForCommentRef.current;\n    if (eForComment) {\n      const eParent = eForComment.parentElement;\n      if (eParent) {\n        const eComment = document.createComment(comment);\n        eParent.insertBefore(eComment, eForComment);\n        return () => {\n          eParent.removeChild(eComment);\n        };\n      }\n    }\n  }, [comment]);\n};\nvar reactComment_default = useReactCommentEffect;\n\n// packages/ag-grid-react/src/reactUi/rows/rowContainerComp.tsx\nimport React15, { memo as memo11, useCallback as useCallback11, useContext as useContext12, useMemo as useMemo10, useRef as useRef12, useState as useState13 } from \"react\";\nimport {\n  RowContainerCtrl,\n  _getRowContainerClass,\n  _getRowContainerOptions,\n  _getRowSpanContainerClass,\n  _getRowViewportClass\n} from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/reactUi/rows/rowComp.tsx\nimport React14, { memo as memo10, useCallback as useCallback10, useContext as useContext11, useEffect as useEffect8, useLayoutEffect as useLayoutEffect7, useMemo as useMemo9, useRef as useRef11, useState as useState12 } from \"react\";\nimport { CssClassManager as CssClassManager3, _EmptyBean as _EmptyBean6 } from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/reactUi/cells/cellComp.tsx\nimport React13, { Suspense, memo as memo9, useCallback as useCallback9, useContext as useContext10, useLayoutEffect as useLayoutEffect6, useMemo as useMemo8, useRef as useRef10, useState as useState11 } from \"react\";\nimport { CssClassManager as CssClassManager2, _EmptyBean as _EmptyBean5, _removeFromParent } from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/shared/customComp/cellEditorComponentProxy.ts\nimport { AgPromise as AgPromise8 } from \"ag-grid-community\";\nvar CellEditorComponentProxy = class {\n  constructor(cellEditorParams, refreshProps) {\n    this.cellEditorParams = cellEditorParams;\n    this.refreshProps = refreshProps;\n    this.instanceCreated = new AgPromise8((resolve) => {\n      this.resolveInstanceCreated = resolve;\n    });\n    this.onValueChange = (value) => this.updateValue(value);\n    this.value = cellEditorParams.value;\n  }\n  getProps() {\n    return {\n      ...this.cellEditorParams,\n      initialValue: this.cellEditorParams.value,\n      value: this.value,\n      onValueChange: this.onValueChange\n    };\n  }\n  getValue() {\n    return this.value;\n  }\n  refresh(params) {\n    this.cellEditorParams = params;\n    this.refreshProps();\n  }\n  setMethods(methods) {\n    addOptionalMethods(this.getOptionalMethods(), methods, this);\n  }\n  getInstance() {\n    return this.instanceCreated.then(() => this.componentInstance);\n  }\n  setRef(componentInstance) {\n    this.componentInstance = componentInstance;\n    this.resolveInstanceCreated?.();\n    this.resolveInstanceCreated = void 0;\n  }\n  getOptionalMethods() {\n    return [\n      \"isCancelBeforeStart\",\n      \"isCancelAfterEnd\",\n      \"focusIn\",\n      \"focusOut\",\n      \"afterGuiAttached\",\n      \"getValidationErrors\",\n      \"getValidationElement\"\n    ];\n  }\n  updateValue(value) {\n    this.value = value;\n    this.refreshProps();\n  }\n};\n\n// packages/ag-grid-react/src/reactUi/cells/cellEditorComp.tsx\nimport React11 from \"react\";\n\n// packages/ag-grid-react/src/reactUi/cells/popupEditorComp.tsx\nimport { memo as memo8, useContext as useContext8, useLayoutEffect as useLayoutEffect5, useState as useState10 } from \"react\";\nimport { createPortal as createPortal2 } from \"react-dom\";\nimport { _getActiveDomElement } from \"ag-grid-community\";\n\n// packages/ag-grid-react/src/reactUi/useEffectOnce.tsx\nimport { useEffect as useEffect6, useRef as useRef8, useState as useState9 } from \"react\";\nvar useEffectOnce = (effect) => {\n  const effectFn = useRef8(effect);\n  const destroyFn = useRef8();\n  const effectCalled = useRef8(false);\n  const rendered = useRef8(false);\n  const [, setVal] = useState9(0);\n  if (effectCalled.current) {\n    rendered.current = true;\n  }\n  useEffect6(() => {\n    if (!effectCalled.current) {\n      destroyFn.current = effectFn.current();\n      effectCalled.current = true;\n    }\n    setVal((val) => val + 1);\n    return () => {\n      if (!rendered.current) {\n        return;\n      }\n      destroyFn.current?.();\n    };\n  }, []);\n};\n\n// packages/ag-grid-react/src/reactUi/cells/popupEditorComp.tsx\nvar PopupEditorComp = (props) => {\n  const [popupEditorWrapper, setPopupEditorWrapper] = useState10();\n  const beans = useContext8(BeansContext);\n  const { context, popupSvc, gos, editSvc } = beans;\n  const { editDetails, cellCtrl, eParentCell } = props;\n  useEffectOnce(() => {\n    const { compDetails } = editDetails;\n    const useModelPopup = gos.get(\"stopEditingWhenCellsLoseFocus\");\n    const wrapper = context.createBean(editSvc.createPopupEditorWrapper(compDetails.params));\n    const ePopupGui = wrapper.getGui();\n    if (props.jsChildComp) {\n      const eChildGui = props.jsChildComp.getGui();\n      if (eChildGui) {\n        ePopupGui.appendChild(eChildGui);\n      }\n    }\n    const { column, rowNode } = cellCtrl;\n    const positionParams = {\n      column,\n      rowNode,\n      type: \"popupCellEditor\",\n      eventSource: eParentCell,\n      ePopup: ePopupGui,\n      position: editDetails.popupPosition,\n      keepWithinBounds: true\n    };\n    const positionCallback = popupSvc?.positionPopupByComponent.bind(popupSvc, positionParams);\n    const addPopupRes = popupSvc?.addPopup({\n      modal: useModelPopup,\n      eChild: ePopupGui,\n      closeOnEsc: true,\n      closedCallback: () => {\n        cellCtrl.onPopupEditorClosed();\n      },\n      anchorToElement: eParentCell,\n      positionCallback,\n      ariaOwns: eParentCell\n    });\n    const hideEditorPopup = addPopupRes ? addPopupRes.hideFunc : void 0;\n    setPopupEditorWrapper(wrapper);\n    props.jsChildComp?.afterGuiAttached?.();\n    return () => {\n      hideEditorPopup?.();\n      context.destroyBean(wrapper);\n    };\n  });\n  useLayoutEffect5(() => {\n    return () => {\n      if (cellCtrl.isCellFocused() && popupEditorWrapper?.getGui().contains(_getActiveDomElement(beans))) {\n        eParentCell.focus({ preventScroll: true });\n      }\n    };\n  }, [popupEditorWrapper]);\n  return popupEditorWrapper && props.wrappedContent ? createPortal2(props.wrappedContent, popupEditorWrapper.getGui()) : null;\n};\nvar popupEditorComp_default = memo8(PopupEditorComp);\n\n// packages/ag-grid-react/src/reactUi/cells/cellEditorComp.tsx\nvar jsxEditorProxy = (editDetails, CellEditorClass, setRef2) => {\n  const { compProxy } = editDetails;\n  setRef2(compProxy);\n  const props = compProxy.getProps();\n  const isStateless = isComponentStateless(CellEditorClass);\n  return /* @__PURE__ */ React11.createElement(\n    CustomContext.Provider,\n    {\n      value: {\n        setMethods: (methods) => compProxy.setMethods(methods)\n      }\n    },\n    isStateless ? /* @__PURE__ */ React11.createElement(CellEditorClass, { ...props }) : /* @__PURE__ */ React11.createElement(CellEditorClass, { ...props, ref: (ref) => compProxy.setRef(ref) })\n  );\n};\nvar jsxEditor = (editDetails, CellEditorClass, setRef2) => {\n  const newFormat = editDetails.compProxy;\n  return newFormat ? jsxEditorProxy(editDetails, CellEditorClass, setRef2) : /* @__PURE__ */ React11.createElement(CellEditorClass, { ...editDetails.compDetails.params, ref: setRef2 });\n};\nvar jsxEditValue = (editDetails, setCellEditorRef, eGui, cellCtrl, jsEditorComp) => {\n  const compDetails = editDetails.compDetails;\n  const CellEditorClass = compDetails.componentClass;\n  const reactInlineEditor = compDetails.componentFromFramework && !editDetails.popup;\n  const reactPopupEditor = compDetails.componentFromFramework && editDetails.popup;\n  const jsPopupEditor = !compDetails.componentFromFramework && editDetails.popup;\n  return reactInlineEditor ? jsxEditor(editDetails, CellEditorClass, setCellEditorRef) : reactPopupEditor ? /* @__PURE__ */ React11.createElement(\n    popupEditorComp_default,\n    {\n      editDetails,\n      cellCtrl,\n      eParentCell: eGui,\n      wrappedContent: jsxEditor(editDetails, CellEditorClass, setCellEditorRef)\n    }\n  ) : jsPopupEditor && jsEditorComp ? /* @__PURE__ */ React11.createElement(popupEditorComp_default, { editDetails, cellCtrl, eParentCell: eGui, jsChildComp: jsEditorComp }) : null;\n};\n\n// packages/ag-grid-react/src/reactUi/cells/showJsRenderer.tsx\nimport { useCallback as useCallback8, useContext as useContext9, useEffect as useEffect7 } from \"react\";\nvar useJsCellRenderer = (showDetails, showTools, eCellValue, cellValueVersion, jsCellRendererRef, eGui) => {\n  const { context } = useContext9(BeansContext);\n  const destroyCellRenderer = useCallback8(() => {\n    const comp = jsCellRendererRef.current;\n    if (!comp) {\n      return;\n    }\n    const compGui = comp.getGui();\n    if (compGui && compGui.parentElement) {\n      compGui.parentElement.removeChild(compGui);\n    }\n    context.destroyBean(comp);\n    jsCellRendererRef.current = void 0;\n  }, []);\n  useEffect7(() => {\n    const showValue = showDetails != null;\n    const jsCompDetails = showDetails?.compDetails && !showDetails.compDetails.componentFromFramework;\n    const waitingForToolsSetup = showTools && eCellValue == null;\n    const showComp = showValue && jsCompDetails && !waitingForToolsSetup;\n    if (!showComp) {\n      destroyCellRenderer();\n      return;\n    }\n    const compDetails = showDetails.compDetails;\n    if (jsCellRendererRef.current) {\n      const comp = jsCellRendererRef.current;\n      const attemptRefresh = comp.refresh != null && showDetails.force == false;\n      const refreshResult = attemptRefresh ? comp.refresh(compDetails.params) : false;\n      const refreshWorked = refreshResult === true || refreshResult === void 0;\n      if (refreshWorked) {\n        return;\n      }\n      destroyCellRenderer();\n    }\n    const promise = compDetails.newAgStackInstance();\n    promise.then((comp) => {\n      if (!comp) {\n        return;\n      }\n      const compGui = comp.getGui();\n      if (!compGui) {\n        return;\n      }\n      const parent = showTools ? eCellValue : eGui.current;\n      parent.appendChild(compGui);\n      jsCellRendererRef.current = comp;\n    });\n  }, [showDetails, showTools, cellValueVersion]);\n  useEffect7(() => {\n    return destroyCellRenderer;\n  }, []);\n};\nvar showJsRenderer_default = useJsCellRenderer;\n\n// packages/ag-grid-react/src/reactUi/cells/skeletonCellComp.tsx\nimport React12, { useMemo as useMemo7, useRef as useRef9 } from \"react\";\nvar SkeletonCellRenderer = ({\n  cellCtrl,\n  parent\n}) => {\n  const jsCellRendererRef = useRef9();\n  const renderDetails = useMemo7(() => {\n    const { loadingComp } = cellCtrl.getDeferLoadingCellRenderer();\n    return loadingComp ? {\n      value: void 0,\n      compDetails: loadingComp,\n      force: false\n    } : void 0;\n  }, [cellCtrl]);\n  showJsRenderer_default(renderDetails, false, void 0, 1, jsCellRendererRef, parent);\n  if (renderDetails?.compDetails?.componentFromFramework) {\n    const CellRendererClass = renderDetails.compDetails.componentClass;\n    return /* @__PURE__ */ React12.createElement(CellRendererClass, { ...renderDetails.compDetails.params });\n  }\n  return /* @__PURE__ */ React12.createElement(React12.Fragment, null);\n};\n\n// packages/ag-grid-react/src/reactUi/cells/cellComp.tsx\nvar CellComp = ({\n  cellCtrl,\n  printLayout,\n  editingCell\n}) => {\n  const beans = useContext10(BeansContext);\n  const { context } = beans;\n  const {\n    column: { colIdSanitised },\n    instanceId\n  } = cellCtrl;\n  const compBean = useRef10();\n  const [renderDetails, setRenderDetails] = useState11(\n    () => cellCtrl.isCellRenderer() ? void 0 : { compDetails: void 0, value: cellCtrl.getValueToDisplay(), force: false }\n  );\n  const [editDetails, setEditDetails] = useState11();\n  const [renderKey, setRenderKey] = useState11(1);\n  const [userStyles, setUserStyles] = useState11();\n  const [includeSelection, setIncludeSelection] = useState11(false);\n  const [includeRowDrag, setIncludeRowDrag] = useState11(false);\n  const [includeDndSource, setIncludeDndSource] = useState11(false);\n  const [jsEditorComp, setJsEditorComp] = useState11();\n  const forceWrapper = useMemo8(() => cellCtrl.isForceWrapper(), [cellCtrl]);\n  const cellAriaRole = useMemo8(() => cellCtrl.getCellAriaRole(), [cellCtrl]);\n  const eGui = useRef10(null);\n  const eWrapper = useRef10(null);\n  const cellRendererRef = useRef10(null);\n  const jsCellRendererRef = useRef10();\n  const cellEditorRef = useRef10();\n  const eCellWrapper = useRef10();\n  const cellWrapperDestroyFuncs = useRef10([]);\n  const eCellValue = useRef10();\n  const [cellValueVersion, setCellValueVersion] = useState11(0);\n  const setCellValueRef = useCallback9((ref) => {\n    eCellValue.current = ref;\n    setCellValueVersion((v) => v + 1);\n  }, []);\n  const showTools = renderDetails != null && (includeSelection || includeDndSource || includeRowDrag) && (editDetails == null || !!editDetails.popup);\n  const showCellWrapper = forceWrapper || showTools;\n  const setCellEditorRef = useCallback9(\n    (cellEditor) => {\n      cellEditorRef.current = cellEditor;\n      if (cellEditor) {\n        const editingCancelledByUserComp = cellEditor.isCancelBeforeStart && cellEditor.isCancelBeforeStart();\n        setTimeout(() => {\n          if (editingCancelledByUserComp) {\n            cellCtrl.stopEditing(true);\n            cellCtrl.focusCell(true);\n          } else {\n            cellCtrl.cellEditorAttached();\n            cellCtrl.enableEditorTooltipFeature(cellEditor);\n          }\n        });\n      }\n    },\n    [cellCtrl]\n  );\n  const cssManager = useRef10();\n  if (!cssManager.current) {\n    cssManager.current = new CssClassManager2(() => eGui.current);\n  }\n  showJsRenderer_default(renderDetails, showCellWrapper, eCellValue.current, cellValueVersion, jsCellRendererRef, eGui);\n  const lastRenderDetails = useRef10();\n  useLayoutEffect6(() => {\n    const oldDetails = lastRenderDetails.current;\n    const newDetails = renderDetails;\n    lastRenderDetails.current = renderDetails;\n    if (oldDetails == null || oldDetails.compDetails == null || newDetails == null || newDetails.compDetails == null) {\n      return;\n    }\n    const oldCompDetails = oldDetails.compDetails;\n    const newCompDetails = newDetails.compDetails;\n    if (oldCompDetails.componentClass != newCompDetails.componentClass) {\n      return;\n    }\n    if (cellRendererRef.current?.refresh == null) {\n      return;\n    }\n    const result = cellRendererRef.current.refresh(newCompDetails.params);\n    if (result != true) {\n      setRenderKey((prev) => prev + 1);\n    }\n  }, [renderDetails]);\n  useLayoutEffect6(() => {\n    const doingJsEditor = editDetails && !editDetails.compDetails.componentFromFramework;\n    if (!doingJsEditor) {\n      return;\n    }\n    const compDetails = editDetails.compDetails;\n    const isPopup = editDetails.popup === true;\n    const cellEditorPromise = compDetails.newAgStackInstance();\n    cellEditorPromise.then((cellEditor) => {\n      if (!cellEditor) {\n        return;\n      }\n      const compGui = cellEditor.getGui();\n      setCellEditorRef(cellEditor);\n      if (!isPopup) {\n        const parentEl = (forceWrapper ? eCellWrapper : eGui).current;\n        parentEl?.appendChild(compGui);\n        cellEditor.afterGuiAttached && cellEditor.afterGuiAttached();\n      }\n      setJsEditorComp(cellEditor);\n    });\n    return () => {\n      cellEditorPromise.then((cellEditor) => {\n        const compGui = cellEditor.getGui();\n        cellCtrl.disableEditorTooltipFeature();\n        context.destroyBean(cellEditor);\n        setCellEditorRef(void 0);\n        setJsEditorComp(void 0);\n        compGui?.parentElement?.removeChild(compGui);\n      });\n    };\n  }, [editDetails]);\n  const setCellWrapperRef = useCallback9(\n    (eRef) => {\n      eCellWrapper.current = eRef;\n      if (!eRef) {\n        cellWrapperDestroyFuncs.current.forEach((f) => f());\n        cellWrapperDestroyFuncs.current = [];\n        return;\n      }\n      const addComp = (comp) => {\n        if (comp) {\n          const eGui2 = comp.getGui();\n          eRef.insertAdjacentElement(\"afterbegin\", eGui2);\n          cellWrapperDestroyFuncs.current.push(() => {\n            context.destroyBean(comp);\n            _removeFromParent(eGui2);\n          });\n        }\n        return comp;\n      };\n      if (includeSelection) {\n        const checkboxSelectionComp = cellCtrl.createSelectionCheckbox();\n        addComp(checkboxSelectionComp);\n      }\n      if (includeDndSource) {\n        addComp(cellCtrl.createDndSource());\n      }\n      if (includeRowDrag) {\n        addComp(cellCtrl.createRowDragComp());\n      }\n    },\n    [cellCtrl, context, includeDndSource, includeRowDrag, includeSelection]\n  );\n  const init = useCallback9(() => {\n    const spanReady = !cellCtrl.isCellSpanning() || eWrapper.current;\n    const eRef = eGui.current;\n    compBean.current = eRef ? context.createBean(new _EmptyBean5()) : context.destroyBean(compBean.current);\n    if (!eRef || !spanReady || !cellCtrl) {\n      return;\n    }\n    const compProxy = {\n      toggleCss: (name, on) => cssManager.current.toggleCss(name, on),\n      setUserStyles: (styles) => setUserStyles(styles),\n      getFocusableElement: () => eGui.current,\n      setIncludeSelection: (include) => setIncludeSelection(include),\n      setIncludeRowDrag: (include) => setIncludeRowDrag(include),\n      setIncludeDndSource: (include) => setIncludeDndSource(include),\n      getCellEditor: () => cellEditorRef.current || null,\n      getCellRenderer: () => cellRendererRef.current ?? jsCellRendererRef.current,\n      getParentOfValue: () => eCellValue.current ?? eCellWrapper.current ?? eGui.current,\n      setRenderDetails: (compDetails, value, force) => {\n        const setDetails = () => {\n          setRenderDetails((prev) => {\n            if (prev?.compDetails !== compDetails || prev?.value !== value || prev?.force !== force) {\n              return {\n                value,\n                compDetails,\n                force\n              };\n            } else {\n              return prev;\n            }\n          });\n        };\n        if (compDetails?.params?.deferRender && !cellCtrl.rowNode.group) {\n          const { loadingComp, onReady } = cellCtrl.getDeferLoadingCellRenderer();\n          if (loadingComp) {\n            setRenderDetails({\n              value: void 0,\n              compDetails: loadingComp,\n              force: false\n            });\n            onReady.then(() => agStartTransition(setDetails));\n            return;\n          }\n        }\n        setDetails();\n      },\n      setEditDetails: (compDetails, popup, popupPosition, reactiveCustomComponents) => {\n        if (compDetails) {\n          let compProxy2 = void 0;\n          if (compDetails.componentFromFramework) {\n            if (reactiveCustomComponents) {\n              compProxy2 = new CellEditorComponentProxy(\n                compDetails.params,\n                () => setRenderKey((prev) => prev + 1)\n              );\n            } else {\n              warnReactiveCustomComponents();\n            }\n          }\n          setEditDetails({\n            compDetails,\n            popup,\n            popupPosition,\n            compProxy: compProxy2\n          });\n          if (!popup) {\n            setRenderDetails(void 0);\n          }\n        } else {\n          const recoverFocus = cellCtrl.hasBrowserFocus();\n          if (recoverFocus) {\n            compProxy.getFocusableElement().focus({ preventScroll: true });\n          }\n          setEditDetails((editDetails2) => {\n            if (editDetails2?.compProxy) {\n              cellEditorRef.current = void 0;\n            }\n            return void 0;\n          });\n        }\n      },\n      refreshEditStyles: (editing, isPopup) => {\n        if (!eGui.current) {\n          return;\n        }\n        const { current } = cssManager;\n        current.toggleCss(\"ag-cell-value\", !showCellWrapper);\n        current.toggleCss(\"ag-cell-inline-editing\", !!editing && !isPopup);\n        current.toggleCss(\"ag-cell-popup-editing\", !!editing && !!isPopup);\n        current.toggleCss(\"ag-cell-not-inline-editing\", !editing || !!isPopup);\n      }\n    };\n    const cellWrapperOrUndefined = eCellWrapper.current || void 0;\n    cellCtrl.setComp(\n      compProxy,\n      eRef,\n      eWrapper.current ?? void 0,\n      cellWrapperOrUndefined,\n      printLayout,\n      editingCell,\n      compBean.current\n    );\n  }, []);\n  const setGuiRef = useCallback9((ref) => {\n    eGui.current = ref;\n    init();\n  }, []);\n  const setWrapperRef = useCallback9((ref) => {\n    eWrapper.current = ref;\n    init();\n  }, []);\n  const reactCellRendererStateless = useMemo8(() => {\n    const res = renderDetails?.compDetails?.componentFromFramework && isComponentStateless(renderDetails.compDetails.componentClass);\n    return !!res;\n  }, [renderDetails]);\n  useLayoutEffect6(() => {\n    if (!eGui.current) {\n      return;\n    }\n    const { current } = cssManager;\n    current.toggleCss(\"ag-cell-value\", !showCellWrapper);\n    current.toggleCss(\"ag-cell-inline-editing\", !!editDetails && !editDetails.popup);\n    current.toggleCss(\"ag-cell-popup-editing\", !!editDetails && !!editDetails.popup);\n    current.toggleCss(\"ag-cell-not-inline-editing\", !editDetails || !!editDetails.popup);\n  });\n  const valueOrCellComp = () => {\n    const { compDetails, value } = renderDetails;\n    if (!compDetails) {\n      return value?.toString?.() ?? value;\n    }\n    if (compDetails.componentFromFramework) {\n      const CellRendererClass = compDetails.componentClass;\n      return /* @__PURE__ */ React13.createElement(Suspense, { fallback: /* @__PURE__ */ React13.createElement(SkeletonCellRenderer, { cellCtrl, parent: eGui }) }, reactCellRendererStateless ? /* @__PURE__ */ React13.createElement(CellRendererClass, { ...compDetails.params, key: renderKey }) : /* @__PURE__ */ React13.createElement(CellRendererClass, { ...compDetails.params, key: renderKey, ref: cellRendererRef }));\n    }\n  };\n  const showCellOrEditor = () => {\n    const showCellValue = () => {\n      if (renderDetails == null) {\n        return null;\n      }\n      return showCellWrapper ? /* @__PURE__ */ React13.createElement(\"span\", { role: \"presentation\", id: `cell-${instanceId}`, className: \"ag-cell-value\", ref: setCellValueRef }, valueOrCellComp()) : valueOrCellComp();\n    };\n    const showEditValue = (details) => jsxEditValue(details, setCellEditorRef, eGui.current, cellCtrl, jsEditorComp);\n    if (editDetails != null) {\n      if (editDetails.popup) {\n        return /* @__PURE__ */ React13.createElement(React13.Fragment, null, showCellValue(), showEditValue(editDetails));\n      }\n      return showEditValue(editDetails);\n    }\n    return showCellValue();\n  };\n  const renderCell = () => /* @__PURE__ */ React13.createElement(\"div\", { ref: setGuiRef, style: userStyles, role: cellAriaRole, \"col-id\": colIdSanitised }, showCellWrapper ? /* @__PURE__ */ React13.createElement(\"div\", { className: \"ag-cell-wrapper\", role: \"presentation\", ref: setCellWrapperRef }, showCellOrEditor()) : showCellOrEditor());\n  if (cellCtrl.isCellSpanning()) {\n    return /* @__PURE__ */ React13.createElement(\"div\", { ref: setWrapperRef, className: \"ag-spanned-cell-wrapper\", role: \"presentation\" }, renderCell());\n  }\n  return renderCell();\n};\nvar cellComp_default = memo9(CellComp);\n\n// packages/ag-grid-react/src/reactUi/rows/rowComp.tsx\nvar RowComp = ({ rowCtrl, containerType }) => {\n  const { context, gos, editSvc } = useContext11(BeansContext);\n  const enableUses = useContext11(RenderModeContext) === \"default\";\n  const compBean = useRef11();\n  const domOrderRef = useRef11(rowCtrl.getDomOrder());\n  const isFullWidth = rowCtrl.isFullWidth();\n  const isDisplayed = rowCtrl.rowNode.displayed;\n  const [rowIndex, setRowIndex] = useState12(\n    () => isDisplayed ? rowCtrl.rowNode.getRowIndexString() : null\n  );\n  const [rowId, setRowId] = useState12(() => rowCtrl.rowId);\n  const [rowBusinessKey, setRowBusinessKey] = useState12(() => rowCtrl.businessKey);\n  const [userStyles, setUserStyles] = useState12(() => rowCtrl.rowStyles);\n  const cellCtrlsRef = useRef11(null);\n  const [cellCtrlsFlushSync, setCellCtrlsFlushSync] = useState12(() => null);\n  const [fullWidthCompDetails, setFullWidthCompDetails] = useState12();\n  const [top, setTop] = useState12(\n    () => isDisplayed ? rowCtrl.getInitialRowTop(containerType) : void 0\n  );\n  const [transform, setTransform] = useState12(\n    () => isDisplayed ? rowCtrl.getInitialTransform(containerType) : void 0\n  );\n  const eGui = useRef11(null);\n  const fullWidthCompRef = useRef11();\n  const autoHeightSetup = useRef11(false);\n  const [autoHeightSetupAttempt, setAutoHeightSetupAttempt] = useState12(0);\n  useEffect8(() => {\n    if (autoHeightSetup.current || !fullWidthCompDetails || autoHeightSetupAttempt > 10) {\n      return;\n    }\n    const eChild = eGui.current?.firstChild;\n    if (eChild) {\n      rowCtrl.setupDetailRowAutoHeight(eChild);\n      autoHeightSetup.current = true;\n    } else {\n      setAutoHeightSetupAttempt((prev) => prev + 1);\n    }\n  }, [fullWidthCompDetails, autoHeightSetupAttempt]);\n  const cssManager = useRef11();\n  if (!cssManager.current) {\n    cssManager.current = new CssClassManager3(() => eGui.current);\n  }\n  const cellsChanged = useRef11(() => {\n  });\n  const sub = useCallback10((onStoreChange) => {\n    cellsChanged.current = onStoreChange;\n    return () => {\n      cellsChanged.current = () => {\n      };\n    };\n  }, []);\n  const cellCtrlsUses = agUseSyncExternalStore(\n    sub,\n    () => {\n      return cellCtrlsRef.current;\n    },\n    []\n  );\n  const cellCtrlsMerged = enableUses ? cellCtrlsUses : cellCtrlsFlushSync;\n  const setRef2 = useCallback10((eRef) => {\n    eGui.current = eRef;\n    compBean.current = eRef ? context.createBean(new _EmptyBean6()) : context.destroyBean(compBean.current);\n    if (!eRef) {\n      rowCtrl.unsetComp(containerType);\n      return;\n    }\n    if (!rowCtrl.isAlive()) {\n      return;\n    }\n    const compProxy = {\n      // the rowTop is managed by state, instead of direct style manipulation by rowCtrl (like all the other styles)\n      // as we need to have an initial value when it's placed into he DOM for the first time, for animation to work.\n      setTop,\n      setTransform,\n      // i found using React for managing classes at the row level was to slow, as modifying classes caused a lot of\n      // React code to execute, so avoiding React for managing CSS Classes made the grid go much faster.\n      toggleCss: (name, on) => cssManager.current.toggleCss(name, on),\n      setDomOrder: (domOrder) => domOrderRef.current = domOrder,\n      setRowIndex,\n      setRowId,\n      setRowBusinessKey,\n      setUserStyles,\n      // if we don't maintain the order, then cols will be ripped out and into the dom\n      // when cols reordered, which would stop the CSS transitions from working\n      setCellCtrls: (next, useFlushSync) => {\n        const prevCellCtrls = cellCtrlsRef.current;\n        const nextCells = getNextValueIfDifferent(prevCellCtrls, next, domOrderRef.current);\n        if (nextCells !== prevCellCtrls) {\n          cellCtrlsRef.current = nextCells;\n          if (enableUses) {\n            cellsChanged.current();\n          } else {\n            agFlushSync(useFlushSync, () => setCellCtrlsFlushSync(nextCells));\n          }\n        }\n      },\n      showFullWidth: (compDetails) => setFullWidthCompDetails(compDetails),\n      getFullWidthCellRenderer: () => fullWidthCompRef.current,\n      refreshFullWidth: (getUpdatedParams) => {\n        if (canRefreshFullWidthRef.current) {\n          setFullWidthCompDetails((prevFullWidthCompDetails) => ({\n            ...prevFullWidthCompDetails,\n            params: getUpdatedParams()\n          }));\n          return true;\n        } else {\n          if (!fullWidthCompRef.current || !fullWidthCompRef.current.refresh) {\n            return false;\n          }\n          return fullWidthCompRef.current.refresh(getUpdatedParams());\n        }\n      }\n    };\n    rowCtrl.setComp(compProxy, eRef, containerType, compBean.current);\n  }, []);\n  useLayoutEffect7(\n    () => showJsComp(fullWidthCompDetails, context, eGui.current, fullWidthCompRef),\n    [fullWidthCompDetails]\n  );\n  const rowStyles = useMemo9(() => {\n    const res = { top, transform };\n    Object.assign(res, userStyles);\n    return res;\n  }, [top, transform, userStyles]);\n  const showFullWidthFramework = isFullWidth && fullWidthCompDetails?.componentFromFramework;\n  const showCells = !isFullWidth && cellCtrlsMerged != null;\n  const reactFullWidthCellRendererStateless = useMemo9(() => {\n    const res = fullWidthCompDetails?.componentFromFramework && isComponentStateless(fullWidthCompDetails.componentClass);\n    return !!res;\n  }, [fullWidthCompDetails]);\n  const canRefreshFullWidthRef = useRef11(false);\n  useEffect8(() => {\n    canRefreshFullWidthRef.current = reactFullWidthCellRendererStateless && !!fullWidthCompDetails && !!gos.get(\"reactiveCustomComponents\");\n  }, [reactFullWidthCellRendererStateless, fullWidthCompDetails]);\n  const showCellsJsx = () => cellCtrlsMerged?.map((cellCtrl) => /* @__PURE__ */ React14.createElement(\n    cellComp_default,\n    {\n      cellCtrl,\n      editingCell: editSvc?.isEditing(cellCtrl, { withOpenEditor: true }) ?? false,\n      printLayout: rowCtrl.printLayout,\n      key: cellCtrl.instanceId\n    }\n  ));\n  const showFullWidthFrameworkJsx = () => {\n    const FullWidthComp = fullWidthCompDetails.componentClass;\n    return reactFullWidthCellRendererStateless ? /* @__PURE__ */ React14.createElement(FullWidthComp, { ...fullWidthCompDetails.params }) : /* @__PURE__ */ React14.createElement(FullWidthComp, { ...fullWidthCompDetails.params, ref: fullWidthCompRef });\n  };\n  return /* @__PURE__ */ React14.createElement(\n    \"div\",\n    {\n      ref: setRef2,\n      role: \"row\",\n      style: rowStyles,\n      \"row-index\": rowIndex,\n      \"row-id\": rowId,\n      \"row-business-key\": rowBusinessKey\n    },\n    showCells ? showCellsJsx() : showFullWidthFramework ? showFullWidthFrameworkJsx() : null\n  );\n};\nvar rowComp_default = memo10(RowComp);\n\n// packages/ag-grid-react/src/reactUi/rows/rowContainerComp.tsx\nvar RowContainerComp = ({ name }) => {\n  const { context, gos } = useContext12(BeansContext);\n  const containerOptions = useMemo10(() => _getRowContainerOptions(name), [name]);\n  const eViewport = useRef12(null);\n  const eContainer = useRef12(null);\n  const eSpanContainer = useRef12(null);\n  const rowCtrlsRef = useRef12([]);\n  const prevRowCtrlsRef = useRef12([]);\n  const [rowCtrlsOrdered, setRowCtrlsOrdered] = useState13(() => []);\n  const isSpanning = !!gos.get(\"enableCellSpan\") && !!containerOptions.getSpannedRowCtrls;\n  const spannedRowCtrlsRef = useRef12([]);\n  const prevSpannedRowCtrlsRef = useRef12([]);\n  const [spannedRowCtrlsOrdered, setSpannedRowCtrlsOrdered] = useState13(() => []);\n  const domOrderRef = useRef12(false);\n  const rowContainerCtrlRef = useRef12();\n  const viewportClasses = useMemo10(() => classesList(\"ag-viewport\", _getRowViewportClass(name)), [name]);\n  const containerClasses = useMemo10(() => classesList(_getRowContainerClass(name)), [name]);\n  const spanClasses = useMemo10(() => classesList(\"ag-spanning-container\", _getRowSpanContainerClass(name)), [name]);\n  const shouldRenderViewport = containerOptions.type === \"center\" || isSpanning;\n  const topLevelRef = shouldRenderViewport ? eViewport : eContainer;\n  reactComment_default(\" AG Row Container \" + name + \" \", topLevelRef);\n  const areElementsReady = useCallback11(() => {\n    const viewportReady = !shouldRenderViewport || eViewport.current != null;\n    const containerReady = eContainer.current != null;\n    const spanContainerReady = !isSpanning || eSpanContainer.current != null;\n    return viewportReady && containerReady && spanContainerReady;\n  }, []);\n  const areElementsRemoved = useCallback11(() => {\n    return eViewport.current == null && eContainer.current == null && eSpanContainer.current == null;\n  }, []);\n  const setRef2 = useCallback11(() => {\n    if (areElementsRemoved()) {\n      rowContainerCtrlRef.current = context.destroyBean(rowContainerCtrlRef.current);\n    }\n    if (areElementsReady()) {\n      const updateRowCtrlsOrdered = (useFlushSync) => {\n        const next = getNextValueIfDifferent(\n          prevRowCtrlsRef.current,\n          rowCtrlsRef.current,\n          domOrderRef.current\n        );\n        if (next !== prevRowCtrlsRef.current) {\n          prevRowCtrlsRef.current = next;\n          agFlushSync(useFlushSync, () => setRowCtrlsOrdered(next));\n        }\n      };\n      const updateSpannedRowCtrlsOrdered = (useFlushSync) => {\n        const next = getNextValueIfDifferent(\n          prevSpannedRowCtrlsRef.current,\n          spannedRowCtrlsRef.current,\n          domOrderRef.current\n        );\n        if (next !== prevSpannedRowCtrlsRef.current) {\n          prevSpannedRowCtrlsRef.current = next;\n          agFlushSync(useFlushSync, () => setSpannedRowCtrlsOrdered(next));\n        }\n      };\n      const compProxy = {\n        setHorizontalScroll: (offset) => {\n          if (eViewport.current) {\n            eViewport.current.scrollLeft = offset;\n          }\n        },\n        setViewportHeight: (height) => {\n          if (eViewport.current) {\n            eViewport.current.style.height = height;\n          }\n        },\n        setRowCtrls: ({ rowCtrls, useFlushSync }) => {\n          const useFlush = !!useFlushSync && rowCtrlsRef.current.length > 0 && rowCtrls.length > 0;\n          rowCtrlsRef.current = rowCtrls;\n          updateRowCtrlsOrdered(useFlush);\n        },\n        setSpannedRowCtrls: (rowCtrls, useFlushSync) => {\n          const useFlush = !!useFlushSync && spannedRowCtrlsRef.current.length > 0 && rowCtrls.length > 0;\n          spannedRowCtrlsRef.current = rowCtrls;\n          updateSpannedRowCtrlsOrdered(useFlush);\n        },\n        setDomOrder: (domOrder) => {\n          if (domOrderRef.current != domOrder) {\n            domOrderRef.current = domOrder;\n            updateRowCtrlsOrdered(false);\n          }\n        },\n        setContainerWidth: (width) => {\n          if (eContainer.current) {\n            eContainer.current.style.width = width;\n          }\n        },\n        setOffsetTop: (offset) => {\n          if (eContainer.current) {\n            eContainer.current.style.transform = `translateY(${offset})`;\n          }\n        }\n      };\n      rowContainerCtrlRef.current = context.createBean(new RowContainerCtrl(name));\n      rowContainerCtrlRef.current.setComp(\n        compProxy,\n        eContainer.current,\n        eSpanContainer.current ?? void 0,\n        eViewport.current\n      );\n    }\n  }, [areElementsReady, areElementsRemoved]);\n  const setContainerRef = useCallback11(\n    (e) => {\n      eContainer.current = e;\n      setRef2();\n    },\n    [setRef2]\n  );\n  const setSpanContainerRef = useCallback11(\n    (e) => {\n      eSpanContainer.current = e;\n      setRef2();\n    },\n    [setRef2]\n  );\n  const setViewportRef = useCallback11(\n    (e) => {\n      eViewport.current = e;\n      setRef2();\n    },\n    [setRef2]\n  );\n  const buildContainer = () => /* @__PURE__ */ React15.createElement(\"div\", { className: containerClasses, ref: setContainerRef, role: \"rowgroup\" }, rowCtrlsOrdered.map((rowCtrl) => /* @__PURE__ */ React15.createElement(rowComp_default, { rowCtrl, containerType: containerOptions.type, key: rowCtrl.instanceId })));\n  if (!shouldRenderViewport) {\n    return buildContainer();\n  }\n  const buildSpanContainer = () => /* @__PURE__ */ React15.createElement(\"div\", { className: spanClasses, ref: setSpanContainerRef, role: \"rowgroup\" }, spannedRowCtrlsOrdered.map((rowCtrl) => /* @__PURE__ */ React15.createElement(rowComp_default, { rowCtrl, containerType: containerOptions.type, key: rowCtrl.instanceId })));\n  return /* @__PURE__ */ React15.createElement(\"div\", { className: viewportClasses, ref: setViewportRef, role: \"presentation\" }, buildContainer(), isSpanning ? buildSpanContainer() : null);\n};\nvar rowContainerComp_default = memo11(RowContainerComp);\n\n// packages/ag-grid-react/src/reactUi/gridBodyComp.tsx\nvar GridBodyComp = () => {\n  const beans = useContext13(BeansContext);\n  const { context, overlays } = beans;\n  const [rowAnimationClass, setRowAnimationClass] = useState14(\"\");\n  const [topHeight, setTopHeight] = useState14(0);\n  const [bottomHeight, setBottomHeight] = useState14(0);\n  const [stickyTopHeight, setStickyTopHeight] = useState14(\"0px\");\n  const [stickyTopTop, setStickyTopTop] = useState14(\"0px\");\n  const [stickyTopWidth, setStickyTopWidth] = useState14(\"100%\");\n  const [stickyBottomHeight, setStickyBottomHeight] = useState14(\"0px\");\n  const [stickyBottomBottom, setStickyBottomBottom] = useState14(\"0px\");\n  const [stickyBottomWidth, setStickyBottomWidth] = useState14(\"100%\");\n  const [topInvisible, setTopInvisible] = useState14(true);\n  const [bottomInvisible, setBottomInvisible] = useState14(true);\n  const [forceVerticalScrollClass, setForceVerticalScrollClass] = useState14(null);\n  const [topAndBottomOverflowY, setTopAndBottomOverflowY] = useState14(\"\");\n  const [cellSelectableCss, setCellSelectableCss] = useState14(null);\n  const [layoutClass, setLayoutClass] = useState14(\"ag-layout-normal\");\n  const cssManager = useRef13();\n  if (!cssManager.current) {\n    cssManager.current = new CssClassManager4(() => eRoot.current);\n  }\n  const eRoot = useRef13(null);\n  const eTop = useRef13(null);\n  const eStickyTop = useRef13(null);\n  const eStickyBottom = useRef13(null);\n  const eBody = useRef13(null);\n  const eBodyViewport = useRef13(null);\n  const eBottom = useRef13(null);\n  const beansToDestroy = useRef13([]);\n  const destroyFuncs = useRef13([]);\n  reactComment_default(\" AG Grid Body \", eRoot);\n  reactComment_default(\" AG Pinned Top \", eTop);\n  reactComment_default(\" AG Sticky Top \", eStickyTop);\n  reactComment_default(\" AG Middle \", eBodyViewport);\n  reactComment_default(\" AG Pinned Bottom \", eBottom);\n  const setRef2 = useCallback12((eRef) => {\n    eRoot.current = eRef;\n    if (!eRef) {\n      beansToDestroy.current = context.destroyBeans(beansToDestroy.current);\n      destroyFuncs.current.forEach((f) => f());\n      destroyFuncs.current = [];\n      return;\n    }\n    if (!context) {\n      return;\n    }\n    const attachToDom = (eParent, eChild) => {\n      eParent.appendChild(eChild);\n      destroyFuncs.current.push(() => eParent.removeChild(eChild));\n    };\n    const newComp = (compClass) => {\n      const comp = context.createBean(new compClass());\n      beansToDestroy.current.push(comp);\n      return comp;\n    };\n    const addComp = (eParent, compClass, comment) => {\n      attachToDom(eParent, document.createComment(comment));\n      attachToDom(eParent, newComp(compClass).getGui());\n    };\n    addComp(eRef, FakeHScrollComp, \" AG Fake Horizontal Scroll \");\n    const overlayComp = overlays?.getOverlayWrapperCompClass();\n    if (overlayComp) {\n      addComp(eRef, overlayComp, \" AG Overlay Wrapper \");\n    }\n    if (eBody.current) {\n      addComp(eBody.current, FakeVScrollComp, \" AG Fake Vertical Scroll \");\n    }\n    const compProxy = {\n      setRowAnimationCssOnBodyViewport: setRowAnimationClass,\n      setColumnCount: (count) => {\n        if (eRoot.current) {\n          _setAriaColCount(eRoot.current, count);\n        }\n      },\n      setRowCount: (count) => {\n        if (eRoot.current) {\n          _setAriaRowCount(eRoot.current, count);\n        }\n      },\n      setTopHeight,\n      setBottomHeight,\n      setStickyTopHeight,\n      setStickyTopTop,\n      setStickyTopWidth,\n      setTopInvisible,\n      setBottomInvisible,\n      setColumnMovingCss: (cssClass, flag) => cssManager.current.toggleCss(cssClass, flag),\n      updateLayoutClasses: setLayoutClass,\n      setAlwaysVerticalScrollClass: setForceVerticalScrollClass,\n      setPinnedTopBottomOverflowY: setTopAndBottomOverflowY,\n      setCellSelectableCss: (cssClass, flag) => setCellSelectableCss(flag ? cssClass : null),\n      setBodyViewportWidth: (width) => {\n        if (eBodyViewport.current) {\n          eBodyViewport.current.style.width = width;\n        }\n      },\n      registerBodyViewportResizeListener: (listener) => {\n        if (eBodyViewport.current) {\n          const unsubscribeFromResize = _observeResize(beans, eBodyViewport.current, listener);\n          destroyFuncs.current.push(() => unsubscribeFromResize());\n        }\n      },\n      setStickyBottomHeight,\n      setStickyBottomBottom,\n      setStickyBottomWidth,\n      setGridRootRole: (role) => eRef.setAttribute(\"role\", role)\n    };\n    const ctrl = context.createBean(new GridBodyCtrl());\n    beansToDestroy.current.push(ctrl);\n    ctrl.setComp(\n      compProxy,\n      eRef,\n      eBodyViewport.current,\n      eTop.current,\n      eBottom.current,\n      eStickyTop.current,\n      eStickyBottom.current\n    );\n  }, []);\n  const rootClasses = useMemo11(() => classesList(\"ag-root\", \"ag-unselectable\", layoutClass), [layoutClass]);\n  const bodyViewportClasses = useMemo11(\n    () => classesList(\n      \"ag-body-viewport\",\n      rowAnimationClass,\n      layoutClass,\n      forceVerticalScrollClass,\n      cellSelectableCss\n    ),\n    [rowAnimationClass, layoutClass, forceVerticalScrollClass, cellSelectableCss]\n  );\n  const bodyClasses = useMemo11(() => classesList(\"ag-body\", layoutClass), [layoutClass]);\n  const topClasses = useMemo11(\n    () => classesList(\"ag-floating-top\", topInvisible ? \"ag-invisible\" : null, cellSelectableCss),\n    [cellSelectableCss, topInvisible]\n  );\n  const stickyTopClasses = useMemo11(() => classesList(\"ag-sticky-top\", cellSelectableCss), [cellSelectableCss]);\n  const stickyBottomClasses = useMemo11(\n    () => classesList(\"ag-sticky-bottom\", stickyBottomHeight === \"0px\" ? \"ag-invisible\" : null, cellSelectableCss),\n    [cellSelectableCss, stickyBottomHeight]\n  );\n  const bottomClasses = useMemo11(\n    () => classesList(\"ag-floating-bottom\", bottomInvisible ? \"ag-invisible\" : null, cellSelectableCss),\n    [cellSelectableCss, bottomInvisible]\n  );\n  const topStyle = useMemo11(\n    () => ({\n      height: topHeight,\n      minHeight: topHeight,\n      overflowY: topAndBottomOverflowY\n    }),\n    [topHeight, topAndBottomOverflowY]\n  );\n  const stickyTopStyle = useMemo11(\n    () => ({\n      height: stickyTopHeight,\n      top: stickyTopTop,\n      width: stickyTopWidth\n    }),\n    [stickyTopHeight, stickyTopTop, stickyTopWidth]\n  );\n  const stickyBottomStyle = useMemo11(\n    () => ({\n      height: stickyBottomHeight,\n      bottom: stickyBottomBottom,\n      width: stickyBottomWidth\n    }),\n    [stickyBottomHeight, stickyBottomBottom, stickyBottomWidth]\n  );\n  const bottomStyle = useMemo11(\n    () => ({\n      height: bottomHeight,\n      minHeight: bottomHeight,\n      overflowY: topAndBottomOverflowY\n    }),\n    [bottomHeight, topAndBottomOverflowY]\n  );\n  const createRowContainer = (container) => /* @__PURE__ */ React16.createElement(rowContainerComp_default, { name: container, key: `${container}-container` });\n  const createSection = ({\n    section,\n    children,\n    className,\n    style\n  }) => /* @__PURE__ */ React16.createElement(\"div\", { ref: section, className, role: \"presentation\", style }, children.map(createRowContainer));\n  return /* @__PURE__ */ React16.createElement(\"div\", { ref: setRef2, className: rootClasses }, /* @__PURE__ */ React16.createElement(gridHeaderComp_default, null), createSection({\n    section: eTop,\n    className: topClasses,\n    style: topStyle,\n    children: [\"topLeft\", \"topCenter\", \"topRight\", \"topFullWidth\"]\n  }), /* @__PURE__ */ React16.createElement(\"div\", { className: bodyClasses, ref: eBody, role: \"presentation\" }, createSection({\n    section: eBodyViewport,\n    className: bodyViewportClasses,\n    children: [\"left\", \"center\", \"right\", \"fullWidth\"]\n  })), createSection({\n    section: eStickyTop,\n    className: stickyTopClasses,\n    style: stickyTopStyle,\n    children: [\"stickyTopLeft\", \"stickyTopCenter\", \"stickyTopRight\", \"stickyTopFullWidth\"]\n  }), createSection({\n    section: eStickyBottom,\n    className: stickyBottomClasses,\n    style: stickyBottomStyle,\n    children: [\"stickyBottomLeft\", \"stickyBottomCenter\", \"stickyBottomRight\", \"stickyBottomFullWidth\"]\n  }), createSection({\n    section: eBottom,\n    className: bottomClasses,\n    style: bottomStyle,\n    children: [\"bottomLeft\", \"bottomCenter\", \"bottomRight\", \"bottomFullWidth\"]\n  }));\n};\nvar gridBodyComp_default = memo12(GridBodyComp);\n\n// packages/ag-grid-react/src/reactUi/tabGuardComp.tsx\nimport React17, { forwardRef as forwardRef2, memo as memo13, useCallback as useCallback13, useContext as useContext14, useImperativeHandle as useImperativeHandle2, useRef as useRef14 } from \"react\";\nimport { TabGuardClassNames, TabGuardCtrl } from \"ag-grid-community\";\nvar TabGuardCompRef = (props, forwardRef4) => {\n  const { children, eFocusableElement, onTabKeyDown, gridCtrl, forceFocusOutWhenTabGuardsAreEmpty, isEmpty } = props;\n  const { context } = useContext14(BeansContext);\n  const topTabGuardRef = useRef14(null);\n  const bottomTabGuardRef = useRef14(null);\n  const tabGuardCtrlRef = useRef14();\n  const setTabIndex = (value) => {\n    const processedValue = value == null ? void 0 : parseInt(value, 10).toString();\n    [topTabGuardRef, bottomTabGuardRef].forEach((tabGuard) => {\n      if (processedValue === void 0) {\n        tabGuard.current?.removeAttribute(\"tabindex\");\n      } else {\n        tabGuard.current?.setAttribute(\"tabindex\", processedValue);\n      }\n    });\n  };\n  useImperativeHandle2(forwardRef4, () => ({\n    forceFocusOutOfContainer(up) {\n      tabGuardCtrlRef.current?.forceFocusOutOfContainer(up);\n    }\n  }));\n  const setupCtrl = useCallback13(() => {\n    const topTabGuard = topTabGuardRef.current;\n    const bottomTabGuard = bottomTabGuardRef.current;\n    if (!topTabGuard && !bottomTabGuard) {\n      tabGuardCtrlRef.current = context.destroyBean(tabGuardCtrlRef.current);\n      return;\n    }\n    if (topTabGuard && bottomTabGuard) {\n      const compProxy = {\n        setTabIndex\n      };\n      tabGuardCtrlRef.current = context.createBean(\n        new TabGuardCtrl({\n          comp: compProxy,\n          eTopGuard: topTabGuard,\n          eBottomGuard: bottomTabGuard,\n          eFocusableElement,\n          onTabKeyDown,\n          forceFocusOutWhenTabGuardsAreEmpty,\n          focusInnerElement: (fromBottom) => gridCtrl.focusInnerElement(fromBottom),\n          isEmpty\n        })\n      );\n    }\n  }, []);\n  const setTopRef = useCallback13(\n    (e) => {\n      topTabGuardRef.current = e;\n      setupCtrl();\n    },\n    [setupCtrl]\n  );\n  const setBottomRef = useCallback13(\n    (e) => {\n      bottomTabGuardRef.current = e;\n      setupCtrl();\n    },\n    [setupCtrl]\n  );\n  const createTabGuard = (side) => {\n    const className = side === \"top\" ? TabGuardClassNames.TAB_GUARD_TOP : TabGuardClassNames.TAB_GUARD_BOTTOM;\n    return /* @__PURE__ */ React17.createElement(\n      \"div\",\n      {\n        className: `${TabGuardClassNames.TAB_GUARD} ${className}`,\n        role: \"presentation\",\n        ref: side === \"top\" ? setTopRef : setBottomRef\n      }\n    );\n  };\n  return /* @__PURE__ */ React17.createElement(React17.Fragment, null, createTabGuard(\"top\"), children, createTabGuard(\"bottom\"));\n};\nvar TabGuardComp = forwardRef2(TabGuardCompRef);\nvar tabGuardComp_default = memo13(TabGuardComp);\n\n// packages/ag-grid-react/src/reactUi/gridComp.tsx\nvar GridComp = ({ context }) => {\n  const [rtlClass, setRtlClass] = useState15(\"\");\n  const [layoutClass, setLayoutClass] = useState15(\"\");\n  const [cursor, setCursor] = useState15(null);\n  const [userSelect, setUserSelect] = useState15(null);\n  const [initialised, setInitialised] = useState15(false);\n  const [tabGuardReady, setTabGuardReady] = useState15();\n  const gridCtrlRef = useRef15();\n  const eRootWrapperRef = useRef15(null);\n  const tabGuardRef = useRef15();\n  const [eGridBodyParent, setGridBodyParent] = useState15(null);\n  const focusInnerElementRef = useRef15(() => void 0);\n  const paginationCompRef = useRef15();\n  const focusableContainersRef = useRef15([]);\n  const onTabKeyDown = useCallback14(() => void 0, []);\n  const beans = useMemo12(() => {\n    if (context.isDestroyed()) {\n      return null;\n    }\n    return context.getBeans();\n  }, [context]);\n  reactComment_default(\" AG Grid \", eRootWrapperRef);\n  const setRef2 = useCallback14((eRef) => {\n    eRootWrapperRef.current = eRef;\n    gridCtrlRef.current = eRef ? context.createBean(new GridCtrl()) : context.destroyBean(gridCtrlRef.current);\n    if (!eRef || context.isDestroyed()) {\n      return;\n    }\n    const gridCtrl = gridCtrlRef.current;\n    focusInnerElementRef.current = gridCtrl.focusInnerElement.bind(gridCtrl);\n    const compProxy = {\n      destroyGridUi: () => {\n      },\n      // do nothing, as framework users destroy grid by removing the comp\n      setRtlClass,\n      forceFocusOutOfContainer: (up) => {\n        if (!up && paginationCompRef.current?.isDisplayed()) {\n          paginationCompRef.current.forceFocusOutOfContainer(up);\n          return;\n        }\n        tabGuardRef.current?.forceFocusOutOfContainer(up);\n      },\n      updateLayoutClasses: setLayoutClass,\n      getFocusableContainers: () => {\n        const comps = [];\n        const gridBodyCompEl = eRootWrapperRef.current?.querySelector(\".ag-root\");\n        if (gridBodyCompEl) {\n          comps.push({ getGui: () => gridBodyCompEl });\n        }\n        focusableContainersRef.current.forEach((comp) => {\n          if (comp.isDisplayed()) {\n            comps.push(comp);\n          }\n        });\n        return comps;\n      },\n      setCursor,\n      setUserSelect\n    };\n    gridCtrl.setComp(compProxy, eRef, eRef);\n    setInitialised(true);\n  }, []);\n  useEffect9(() => {\n    const gridCtrl = gridCtrlRef.current;\n    const eRootWrapper = eRootWrapperRef.current;\n    if (!tabGuardReady || !beans || !gridCtrl || !eGridBodyParent || !eRootWrapper || context.isDestroyed()) {\n      return;\n    }\n    const beansToDestroy = [];\n    const {\n      watermarkSelector,\n      paginationSelector,\n      sideBarSelector,\n      statusBarSelector,\n      gridHeaderDropZonesSelector\n    } = gridCtrl.getOptionalSelectors();\n    const additionalEls = [];\n    if (gridHeaderDropZonesSelector) {\n      const headerDropZonesComp = context.createBean(new gridHeaderDropZonesSelector.component());\n      const eGui = headerDropZonesComp.getGui();\n      eRootWrapper.insertAdjacentElement(\"afterbegin\", eGui);\n      additionalEls.push(eGui);\n      beansToDestroy.push(headerDropZonesComp);\n    }\n    if (sideBarSelector) {\n      const sideBarComp = context.createBean(new sideBarSelector.component());\n      const eGui = sideBarComp.getGui();\n      const bottomTabGuard = eGridBodyParent.querySelector(\".ag-tab-guard-bottom\");\n      if (bottomTabGuard) {\n        bottomTabGuard.insertAdjacentElement(\"beforebegin\", eGui);\n        additionalEls.push(eGui);\n      }\n      beansToDestroy.push(sideBarComp);\n      focusableContainersRef.current.push(sideBarComp);\n    }\n    const addComponentToDom = (component) => {\n      const comp = context.createBean(new component());\n      const eGui = comp.getGui();\n      eRootWrapper.insertAdjacentElement(\"beforeend\", eGui);\n      additionalEls.push(eGui);\n      beansToDestroy.push(comp);\n      return comp;\n    };\n    if (statusBarSelector) {\n      addComponentToDom(statusBarSelector.component);\n    }\n    if (paginationSelector) {\n      const paginationComp = addComponentToDom(paginationSelector.component);\n      paginationCompRef.current = paginationComp;\n      focusableContainersRef.current.push(paginationComp);\n    }\n    if (watermarkSelector) {\n      addComponentToDom(watermarkSelector.component);\n    }\n    return () => {\n      context.destroyBeans(beansToDestroy);\n      additionalEls.forEach((el) => {\n        el.parentElement?.removeChild(el);\n      });\n    };\n  }, [tabGuardReady, eGridBodyParent, beans]);\n  const rootWrapperClasses = useMemo12(\n    () => classesList(\"ag-root-wrapper\", rtlClass, layoutClass),\n    [rtlClass, layoutClass]\n  );\n  const rootWrapperBodyClasses = useMemo12(\n    () => classesList(\"ag-root-wrapper-body\", \"ag-focus-managed\", layoutClass),\n    [layoutClass]\n  );\n  const topStyle = useMemo12(\n    () => ({\n      userSelect: userSelect != null ? userSelect : \"\",\n      WebkitUserSelect: userSelect != null ? userSelect : \"\",\n      cursor: cursor != null ? cursor : \"\"\n    }),\n    [userSelect, cursor]\n  );\n  const setTabGuardCompRef = useCallback14((ref) => {\n    tabGuardRef.current = ref;\n    setTabGuardReady(ref !== null);\n  }, []);\n  const isFocusable = useCallback14(() => !gridCtrlRef.current?.isFocusable(), []);\n  return /* @__PURE__ */ React18.createElement(\"div\", { ref: setRef2, className: rootWrapperClasses, style: topStyle, role: \"presentation\" }, /* @__PURE__ */ React18.createElement(\"div\", { className: rootWrapperBodyClasses, ref: setGridBodyParent, role: \"presentation\" }, initialised && eGridBodyParent && beans && /* @__PURE__ */ React18.createElement(BeansContext.Provider, { value: beans }, /* @__PURE__ */ React18.createElement(\n    tabGuardComp_default,\n    {\n      ref: setTabGuardCompRef,\n      eFocusableElement: eGridBodyParent,\n      onTabKeyDown,\n      gridCtrl: gridCtrlRef.current,\n      forceFocusOutWhenTabGuardsAreEmpty: true,\n      isEmpty: isFocusable\n    },\n    // we wait for initialised before rending the children, so GridComp has created and registered with it's\n    // GridCtrl before we create the child GridBodyComp. Otherwise the GridBodyComp would initialise first,\n    // before we have set the the Layout CSS classes, causing the GridBodyComp to render rows to a grid that\n    // doesn't have it's height specified, which would result if all the rows getting rendered (and if many rows,\n    // hangs the UI)\n    /* @__PURE__ */ React18.createElement(gridBodyComp_default, null)\n  ))));\n};\nvar gridComp_default = memo14(GridComp);\n\n// packages/ag-grid-react/src/reactUi/renderStatusService.tsx\nimport { BeanStub } from \"ag-grid-community\";\nvar RenderStatusService = class extends BeanStub {\n  wireBeans(beans) {\n    this.ctrlsSvc = beans.ctrlsSvc;\n  }\n  areHeaderCellsRendered() {\n    return this.ctrlsSvc.getHeaderRowContainerCtrls().every((container) => container.getAllCtrls().every((ctrl) => ctrl.areCellsRendered()));\n  }\n};\n\n// packages/ag-grid-react/src/reactUi/agGridReactUi.tsx\nvar deprecatedProps = {\n  setGridApi: void 0,\n  maxComponentCreationTimeMs: void 0,\n  children: void 0\n};\nvar reactPropsNotGridOptions = {\n  gridOptions: void 0,\n  modules: void 0,\n  containerStyle: void 0,\n  className: void 0,\n  passGridApi: void 0,\n  componentWrappingElement: void 0,\n  ...deprecatedProps\n};\nvar excludeReactCompProps = new Set(Object.keys(reactPropsNotGridOptions));\nvar deprecatedReactCompProps = new Set(Object.keys(deprecatedProps));\nvar AgGridReactUi = (props) => {\n  const apiRef = useRef16();\n  const eGui = useRef16(null);\n  const portalManager = useRef16(null);\n  const destroyFuncs = useRef16([]);\n  const whenReadyFuncs = useRef16([]);\n  const prevProps = useRef16(props);\n  const frameworkOverridesRef = useRef16();\n  const gridIdRef = useRef16();\n  const ready = useRef16(false);\n  const [context, setContext] = useState16(void 0);\n  const [, setPortalRefresher] = useState16(0);\n  const setRef2 = useCallback15((eRef) => {\n    eGui.current = eRef;\n    if (!eRef) {\n      destroyFuncs.current.forEach((f) => f());\n      destroyFuncs.current.length = 0;\n      return;\n    }\n    const modules = props.modules || [];\n    if (!portalManager.current) {\n      portalManager.current = new PortalManager(\n        () => setPortalRefresher((prev) => prev + 1),\n        props.componentWrappingElement,\n        props.maxComponentCreationTimeMs\n      );\n      destroyFuncs.current.push(() => {\n        portalManager.current?.destroy();\n        portalManager.current = null;\n      });\n    }\n    const mergedGridOps = _combineAttributesAndGridOptions(\n      props.gridOptions,\n      props,\n      Object.keys(props).filter((key) => !excludeReactCompProps.has(key))\n    );\n    const processQueuedUpdates = () => {\n      if (ready.current) {\n        const getFn = () => frameworkOverridesRef.current?.shouldQueueUpdates() ? void 0 : whenReadyFuncs.current.shift();\n        let fn = getFn();\n        while (fn) {\n          fn();\n          fn = getFn();\n        }\n      }\n    };\n    const frameworkOverrides = new ReactFrameworkOverrides(processQueuedUpdates);\n    frameworkOverridesRef.current = frameworkOverrides;\n    const renderStatus = new RenderStatusService();\n    const gridParams = {\n      providedBeanInstances: {\n        frameworkCompWrapper: new ReactFrameworkComponentWrapper(portalManager.current, mergedGridOps),\n        renderStatus\n      },\n      modules,\n      frameworkOverrides,\n      setThemeOnGridDiv: true\n    };\n    const createUiCallback = (context2) => {\n      setContext(context2);\n      context2.createBean(renderStatus);\n      destroyFuncs.current.push(() => {\n        context2.destroy();\n      });\n      context2.getBean(\"ctrlsSvc\").whenReady(\n        {\n          addDestroyFunc: (func) => {\n            destroyFuncs.current.push(func);\n          }\n        },\n        () => {\n          if (context2.isDestroyed()) {\n            return;\n          }\n          const api = apiRef.current;\n          if (api) {\n            props.passGridApi?.(api);\n          }\n        }\n      );\n    };\n    const acceptChangesCallback = (context2) => {\n      context2.getBean(\"ctrlsSvc\").whenReady(\n        {\n          addDestroyFunc: (func) => {\n            destroyFuncs.current.push(func);\n          }\n        },\n        () => {\n          whenReadyFuncs.current.forEach((f) => f());\n          whenReadyFuncs.current.length = 0;\n          ready.current = true;\n        }\n      );\n    };\n    const gridCoreCreator = new GridCoreCreator();\n    mergedGridOps.gridId ?? (mergedGridOps.gridId = gridIdRef.current);\n    apiRef.current = gridCoreCreator.create(\n      eRef,\n      mergedGridOps,\n      createUiCallback,\n      acceptChangesCallback,\n      gridParams\n    );\n    destroyFuncs.current.push(() => {\n      apiRef.current = void 0;\n    });\n    if (apiRef.current) {\n      gridIdRef.current = apiRef.current.getGridId();\n    }\n  }, []);\n  const style = useMemo13(() => {\n    return {\n      height: \"100%\",\n      ...props.containerStyle || {}\n    };\n  }, [props.containerStyle]);\n  const processWhenReady = useCallback15((func) => {\n    if (ready.current && !frameworkOverridesRef.current?.shouldQueueUpdates()) {\n      func();\n    } else {\n      whenReadyFuncs.current.push(func);\n    }\n  }, []);\n  useEffect10(() => {\n    const changes = extractGridPropertyChanges(prevProps.current, props);\n    prevProps.current = props;\n    processWhenReady(() => {\n      if (apiRef.current) {\n        _processOnChange(changes, apiRef.current);\n      }\n    });\n  }, [props]);\n  const renderMode = !React19.useSyncExternalStore || _getGridOption(props, \"renderingMode\") === \"legacy\" ? \"legacy\" : \"default\";\n  return /* @__PURE__ */ React19.createElement(\"div\", { style, className: props.className, ref: setRef2 }, /* @__PURE__ */ React19.createElement(RenderModeContext.Provider, { value: renderMode }, context && !context.isDestroyed() ? /* @__PURE__ */ React19.createElement(gridComp_default, { context }) : null, portalManager.current?.getPortals() ?? null));\n};\nfunction extractGridPropertyChanges(prevProps, nextProps) {\n  const changes = {};\n  Object.keys(nextProps).forEach((propKey) => {\n    if (excludeReactCompProps.has(propKey)) {\n      if (deprecatedReactCompProps.has(propKey)) {\n        _warn2(274, { prop: propKey });\n      }\n      return;\n    }\n    const propValue = nextProps[propKey];\n    if (prevProps[propKey] !== propValue) {\n      changes[propKey] = propValue;\n    }\n  });\n  return changes;\n}\nvar ReactFrameworkComponentWrapper = class extends BaseComponentWrapper {\n  constructor(parent, gridOptions) {\n    super();\n    this.parent = parent;\n    this.gridOptions = gridOptions;\n  }\n  createWrapper(UserReactComponent, componentType) {\n    const gridOptions = this.gridOptions;\n    const reactiveCustomComponents = _getGridOption(gridOptions, \"reactiveCustomComponents\");\n    if (reactiveCustomComponents) {\n      const getComponentClass = (propertyName) => {\n        switch (propertyName) {\n          case \"filter\":\n            return _getGridOption(gridOptions, \"enableFilterHandlers\") ? FilterDisplayComponentWrapper : FilterComponentWrapper;\n          case \"floatingFilterComponent\":\n            return _getGridOption(gridOptions, \"enableFilterHandlers\") ? FloatingFilterDisplayComponentWrapper : FloatingFilterComponentWrapper;\n          case \"dateComponent\":\n            return DateComponentWrapper;\n          case \"dragAndDropImageComponent\":\n            return DragAndDropImageComponentWrapper;\n          case \"loadingOverlayComponent\":\n            return LoadingOverlayComponentWrapper;\n          case \"noRowsOverlayComponent\":\n            return NoRowsOverlayComponentWrapper;\n          case \"statusPanel\":\n            return StatusPanelComponentWrapper;\n          case \"toolPanel\":\n            return ToolPanelComponentWrapper;\n          case \"menuItem\":\n            return MenuItemComponentWrapper;\n          case \"cellRenderer\":\n            return CellRendererComponentWrapper;\n          case \"innerHeaderComponent\":\n            return InnerHeaderComponentWrapper;\n        }\n      };\n      const ComponentClass = getComponentClass(componentType.name);\n      if (ComponentClass) {\n        return new ComponentClass(UserReactComponent, this.parent, componentType);\n      }\n    } else {\n      switch (componentType.name) {\n        case \"filter\":\n        case \"floatingFilterComponent\":\n        case \"dateComponent\":\n        case \"dragAndDropImageComponent\":\n        case \"loadingOverlayComponent\":\n        case \"noRowsOverlayComponent\":\n        case \"statusPanel\":\n        case \"toolPanel\":\n        case \"menuItem\":\n        case \"cellRenderer\":\n          warnReactiveCustomComponents();\n          break;\n      }\n    }\n    const suppressFallbackMethods = !componentType.cellRenderer && componentType.name !== \"toolPanel\";\n    return new ReactComponent(UserReactComponent, this.parent, componentType, suppressFallbackMethods);\n  }\n};\nvar DetailCellRenderer = forwardRef3((props, ref) => {\n  const beans = useContext15(BeansContext);\n  const { registry, context, gos, rowModel } = beans;\n  const [cssClasses, setCssClasses] = useState16(() => new CssClasses());\n  const [gridCssClasses, setGridCssClasses] = useState16(() => new CssClasses());\n  const [detailGridOptions, setDetailGridOptions] = useState16();\n  const [detailRowData, setDetailRowData] = useState16();\n  const ctrlRef = useRef16();\n  const eGuiRef = useRef16(null);\n  const resizeObserverDestroyFunc = useRef16();\n  const parentModules = useMemo13(\n    () => _getGridRegisteredModules(props.api.getGridId(), detailGridOptions?.rowModelType ?? \"clientSide\"),\n    [props]\n  );\n  const topClassName = useMemo13(() => cssClasses.toString() + \" ag-details-row\", [cssClasses]);\n  const gridClassName = useMemo13(() => gridCssClasses.toString() + \" ag-details-grid\", [gridCssClasses]);\n  if (ref) {\n    useImperativeHandle3(ref, () => ({\n      refresh() {\n        return ctrlRef.current?.refresh() ?? false;\n      }\n    }));\n  }\n  if (props.template) {\n    _warn2(230);\n  }\n  const setRef2 = useCallback15((eRef) => {\n    eGuiRef.current = eRef;\n    if (!eRef) {\n      ctrlRef.current = context.destroyBean(ctrlRef.current);\n      resizeObserverDestroyFunc.current?.();\n      return;\n    }\n    const compProxy = {\n      toggleCss: (name, on) => setCssClasses((prev) => prev.setClass(name, on)),\n      toggleDetailGridCss: (name, on) => setGridCssClasses((prev) => prev.setClass(name, on)),\n      setDetailGrid: (gridOptions) => setDetailGridOptions(gridOptions),\n      setRowData: (rowData) => setDetailRowData(rowData),\n      getGui: () => eGuiRef.current\n    };\n    const ctrl = registry.createDynamicBean(\"detailCellRendererCtrl\", true);\n    if (!ctrl) {\n      return;\n    }\n    context.createBean(ctrl);\n    ctrl.init(compProxy, props);\n    ctrlRef.current = ctrl;\n    if (gos.get(\"detailRowAutoHeight\")) {\n      const checkRowSizeFunc = () => {\n        if (eGuiRef.current == null) {\n          return;\n        }\n        const clientHeight = eGuiRef.current.clientHeight;\n        if (clientHeight != null && clientHeight > 0) {\n          const updateRowHeightFunc = () => {\n            props.node.setRowHeight(clientHeight);\n            if (_isClientSideRowModel(gos, rowModel) || _isServerSideRowModel(gos, rowModel)) {\n              rowModel.onRowHeightChanged();\n            }\n          };\n          setTimeout(updateRowHeightFunc, 0);\n        }\n      };\n      resizeObserverDestroyFunc.current = _observeResize2(beans, eRef, checkRowSizeFunc);\n      checkRowSizeFunc();\n    }\n  }, []);\n  const registerGridApi = useCallback15((api) => {\n    ctrlRef.current?.registerDetailWithMaster(api);\n  }, []);\n  return /* @__PURE__ */ React19.createElement(\"div\", { className: topClassName, ref: setRef2 }, detailGridOptions && /* @__PURE__ */ React19.createElement(\n    AgGridReactUi,\n    {\n      className: gridClassName,\n      ...detailGridOptions,\n      modules: parentModules,\n      rowData: detailRowData,\n      passGridApi: registerGridApi\n    }\n  ));\n});\nvar ReactFrameworkOverrides = class extends VanillaFrameworkOverrides {\n  constructor(processQueuedUpdates) {\n    super(\"react\");\n    this.processQueuedUpdates = processQueuedUpdates;\n    this.queueUpdates = false;\n    this.renderingEngine = \"react\";\n    this.frameworkComponents = {\n      agGroupCellRenderer: groupCellRenderer_default,\n      agGroupRowRenderer: groupCellRenderer_default,\n      agDetailCellRenderer: DetailCellRenderer\n    };\n    this.wrapIncoming = (callback, source) => {\n      if (source === \"ensureVisible\") {\n        return runWithoutFlushSync(callback);\n      }\n      return callback();\n    };\n  }\n  frameworkComponent(name) {\n    return this.frameworkComponents[name];\n  }\n  isFrameworkComponent(comp) {\n    if (!comp) {\n      return false;\n    }\n    const prototype = comp.prototype;\n    const isJsComp = prototype && \"getGui\" in prototype;\n    return !isJsComp;\n  }\n  getLockOnRefresh() {\n    this.queueUpdates = true;\n  }\n  releaseLockOnRefresh() {\n    this.queueUpdates = false;\n    this.processQueuedUpdates();\n  }\n  shouldQueueUpdates() {\n    return this.queueUpdates;\n  }\n  runWhenReadyAsync() {\n    return isReact19();\n  }\n};\n\n// packages/ag-grid-react/src/agGridReact.tsx\nvar AgGridReact = class extends Component {\n  constructor() {\n    super(...arguments);\n    this.apiListeners = [];\n    this.setGridApi = (api) => {\n      this.api = api;\n      this.apiListeners.forEach((listener) => listener(api));\n    };\n  }\n  registerApiListener(listener) {\n    this.apiListeners.push(listener);\n  }\n  componentWillUnmount() {\n    this.apiListeners.length = 0;\n  }\n  render() {\n    return /* @__PURE__ */ React20.createElement(AgGridReactUi, { ...this.props, passGridApi: this.setGridApi });\n  }\n};\n\n// packages/ag-grid-react/src/shared/customComp/interfaces.ts\nimport { useContext as useContext16 } from \"react\";\nfunction useGridCustomComponent(methods) {\n  const { setMethods } = useContext16(CustomContext);\n  setMethods(methods);\n}\nfunction useGridCellEditor(callbacks) {\n  useGridCustomComponent(callbacks);\n}\nfunction useGridDate(callbacks) {\n  return useGridCustomComponent(callbacks);\n}\nfunction useGridFilter(callbacks) {\n  return useGridCustomComponent(callbacks);\n}\nfunction useGridFilterDisplay(callbacks) {\n  return useGridCustomComponent(callbacks);\n}\nfunction useGridFloatingFilter(callbacks) {\n  useGridCustomComponent(callbacks);\n}\nfunction useGridMenuItem(callbacks) {\n  useGridCustomComponent(callbacks);\n}\nexport {\n  AgGridReact,\n  CustomContext as CustomComponentContext,\n  getInstance,\n  useGridCellEditor,\n  useGridDate,\n  useGridFilter,\n  useGridFilterDisplay,\n  useGridFloatingFilter,\n  useGridMenuItem,\n  warnReactiveCustomComponents\n};\n","/**\r\n * Live Table Builder - Clipboard Utilities\r\n * Handles parsing TSV/CSV data from clipboard\r\n */\r\n\r\nexport interface ParsedClipboardData {\r\n  rows: string[][];\r\n  rowCount: number;\r\n  colCount: number;\r\n}\r\n\r\n/**\r\n * Parse clipboard data (TSV or CSV)\r\n * Detects delimiter automatically (tab, comma, or semicolon)\r\n */\r\nexport function parseClipboardData(clipboardText: string): ParsedClipboardData {\r\n  if (!clipboardText || !clipboardText.trim()) {\r\n    return { rows: [], rowCount: 0, colCount: 0 };\r\n  }\r\n\r\n  // Normalize line endings\r\n  const normalized = clipboardText.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\r\n  \r\n  // Detect delimiter (tab, comma, or semicolon)\r\n  const lines = normalized.split('\\n').filter(line => line.trim());\r\n  if (lines.length === 0) {\r\n    return { rows: [], rowCount: 0, colCount: 0 };\r\n  }\r\n\r\n  // Count occurrences of each delimiter in first few lines\r\n  const sample = lines.slice(0, Math.min(5, lines.length)).join('\\n');\r\n  const tabCount = (sample.match(/\\t/g) || []).length;\r\n  const commaCount = (sample.match(/,/g) || []).length;\r\n  const semicolonCount = (sample.match(/;/g) || []).length;\r\n\r\n  let delimiter = '\\t'; // Default to tab\r\n  if (tabCount > commaCount && tabCount > semicolonCount) {\r\n    delimiter = '\\t';\r\n  } else if (commaCount > semicolonCount) {\r\n    delimiter = ',';\r\n  } else if (semicolonCount > 0) {\r\n    delimiter = ';';\r\n  }\r\n\r\n  // Parse rows\r\n  const rows: string[][] = [];\r\n  let maxCols = 0;\r\n\r\n  for (const line of lines) {\r\n    if (!line.trim()) continue;\r\n    \r\n    // Handle quoted fields\r\n    const parsedRow: string[] = [];\r\n    let currentField = '';\r\n    let inQuotes = false;\r\n    \r\n    for (let i = 0; i < line.length; i++) {\r\n      const char = line[i];\r\n      const nextChar = line[i + 1];\r\n\r\n      if (char === '\"') {\r\n        if (inQuotes && nextChar === '\"') {\r\n          // Escaped quote\r\n          currentField += '\"';\r\n          i++; // Skip next quote\r\n        } else {\r\n          // Toggle quote state\r\n          inQuotes = !inQuotes;\r\n        }\r\n      } else if ((char === delimiter || char === '\\n') && !inQuotes) {\r\n        // End of field\r\n        parsedRow.push(currentField.trim());\r\n        currentField = '';\r\n        if (char === '\\n') break;\r\n      } else {\r\n        currentField += char;\r\n      }\r\n    }\r\n    \r\n    // Add last field\r\n    if (currentField || parsedRow.length > 0) {\r\n      parsedRow.push(currentField.trim());\r\n    }\r\n\r\n    if (parsedRow.length > 0) {\r\n      rows.push(parsedRow);\r\n      maxCols = Math.max(maxCols, parsedRow.length);\r\n    }\r\n  }\r\n\r\n  // Normalize all rows to have the same number of columns\r\n  const normalizedRows = rows.map(row => {\r\n    const normalized = [...row];\r\n    while (normalized.length < maxCols) {\r\n      normalized.push('');\r\n    }\r\n    return normalized;\r\n  });\r\n\r\n  return {\r\n    rows: normalizedRows,\r\n    rowCount: normalizedRows.length,\r\n    colCount: maxCols,\r\n  };\r\n}\r\n\r\n/**\r\n * Convert parsed clipboard data to table cells\r\n * Returns a 2D array of cell values starting from the focused position\r\n */\r\nexport function convertToTableCells(\r\n  parsedData: ParsedClipboardData,\r\n  startRow: number,\r\n  startCol: number\r\n): string[][] {\r\n  return parsedData.rows.map(row => [...row]);\r\n}\r\n","/**\r\n * Editable Header Component for AG Grid\r\n * Provides inline editing of column headers\r\n */\r\n\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { TextField, IconButton } from '@mui/material';\r\nimport { Edit as EditIcon } from '@mui/icons-material';\r\nimport { IHeaderParams } from 'ag-grid-community';\r\n\r\ninterface EditableHeaderParams extends IHeaderParams {\r\n  onHeaderValueChange?: (newValue: string) => void;\r\n}\r\n\r\nexport const EditableHeader: React.FC<EditableHeaderParams> = (params) => {\r\n  const displayName = params.displayName || '';\r\n  const onHeaderValueChange = (params as EditableHeaderParams).onHeaderValueChange;\r\n\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editValue, setEditValue] = useState(displayName);\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n\r\n  useEffect(() => {\r\n    setEditValue(displayName);\r\n  }, [displayName]);\r\n\r\n  useEffect(() => {\r\n    if (isEditing && inputRef.current) {\r\n      inputRef.current.focus();\r\n      inputRef.current.select();\r\n    }\r\n  }, [isEditing]);\r\n\r\n  const handleStartEdit = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    setIsEditing(true);\r\n    setEditValue(displayName);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    const trimmed = editValue.trim();\r\n    if (trimmed && trimmed !== displayName && onHeaderValueChange) {\r\n      onHeaderValueChange(trimmed);\r\n    } else if (!trimmed) {\r\n      // Revert to original if empty\r\n      setEditValue(displayName);\r\n    }\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    setEditValue(displayName);\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const handleKeyDown = (e: React.KeyboardEvent) => {\r\n    if (e.key === 'Enter') {\r\n      e.preventDefault();\r\n      handleSave();\r\n    } else if (e.key === 'Escape') {\r\n      e.preventDefault();\r\n      handleCancel();\r\n    }\r\n  };\r\n\r\n  if (isEditing) {\r\n    return (\r\n      <div style={{ display: 'flex', alignItems: 'center', width: '100%', gap: 4, padding: '0 8px' }}>\r\n        <TextField\r\n          inputRef={inputRef}\r\n          value={editValue}\r\n          onChange={(e) => setEditValue(e.target.value)}\r\n          onBlur={handleSave}\r\n          onKeyDown={handleKeyDown}\r\n          size=\"small\"\r\n          variant=\"standard\"\r\n          sx={{\r\n            flex: 1,\r\n            '& .MuiInputBase-input': {\r\n              padding: '4px 8px',\r\n              fontSize: '14px',\r\n            },\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between',\r\n        width: '100%',\r\n        cursor: 'pointer',\r\n        padding: '0 8px',\r\n      }}\r\n      onDoubleClick={handleStartEdit}\r\n    >\r\n      <span style={{ flex: 1, overflow: 'hidden', textOverflow: 'ellipsis', whiteSpace: 'nowrap' }}>\r\n        {displayName}\r\n      </span>\r\n      <IconButton\r\n        size=\"small\"\r\n        onClick={handleStartEdit}\r\n        sx={{ padding: '4px', marginLeft: '4px' }}\r\n        title=\"Edit column name\"\r\n      >\r\n        <EditIcon fontSize=\"small\" />\r\n      </IconButton>\r\n    </div>\r\n  );\r\n};\r\n","/**\r\n * Table Normalization Utilities\r\n * Ensures consistent table state with proper dimensions and cell coverage\r\n */\r\n\r\nimport type { TableData, TableColumn, TableRow } from '../types';\r\n\r\nconst MIN_ROWS = 1;\r\nconst MAX_ROWS = 500;\r\nconst MIN_COLS = 1;\r\nconst MAX_COLS = 100;\r\n\r\n/**\r\n * Clamp a number to valid bounds\r\n */\r\nfunction clamp(value: number, min: number, max: number): number {\r\n  return Math.max(min, Math.min(max, Math.floor(value) || min));\r\n}\r\n\r\n/**\r\n * Generate a stable column ID based on index\r\n * Uses format: col_0, col_1, col_2, ... for stability\r\n */\r\nfunction generateStableColumnId(index: number): string {\r\n  return `col_${index}`;\r\n}\r\n\r\n/**\r\n * Generate a stable row ID based on index\r\n */\r\nfunction generateStableRowId(index: number): string {\r\n  return `row_${index}`;\r\n}\r\n\r\n/**\r\n * Generate default column label\r\n */\r\nfunction generateColumnLabel(index: number): string {\r\n  const colLetter = String.fromCharCode(65 + (index % 26));\r\n  return `Column ${colLetter}`;\r\n}\r\n\r\n/**\r\n * Normalize table data to ensure consistent dimensions\r\n * \r\n * Guarantees:\r\n * - columns.length === colCount\r\n * - rows.length === rowCount\r\n * - Each row has exactly colCount cells (all column IDs present)\r\n * - All cells are strings (empty string if missing)\r\n * \r\n * @param prevData Previous table data (can be empty/partial)\r\n * @param rowCount Target number of rows (clamped to MIN_ROWS..MAX_ROWS)\r\n * @param colCount Target number of columns (clamped to MIN_COLS..MAX_COLS)\r\n * @returns Normalized TableData\r\n */\r\nexport function normalizeTableData(\r\n  prevData: TableData | null | undefined,\r\n  rowCount: number,\r\n  colCount: number\r\n): TableData {\r\n  // Clamp to valid bounds\r\n  const safeRowCount = clamp(rowCount, MIN_ROWS, MAX_ROWS);\r\n  const safeColCount = clamp(colCount, MIN_COLS, MAX_COLS);\r\n\r\n  // Normalize columns\r\n  const columns: TableColumn[] = [];\r\n  const existingColumns = prevData?.columns || [];\r\n  \r\n  for (let i = 0; i < safeColCount; i++) {\r\n    const stableId = generateStableColumnId(i);\r\n    // Try to find by stable ID first, then by index (for migration from old IDs)\r\n    const existingCol = existingColumns.find((col) => col?.id === stableId) || \r\n                        (i < existingColumns.length ? existingColumns[i] : null);\r\n    \r\n    if (existingCol) {\r\n      // Preserve existing column label, but use stable ID\r\n      columns.push({\r\n        id: stableId,\r\n        label: existingCol.label || generateColumnLabel(i),\r\n      });\r\n    } else {\r\n      // Create new column\r\n      columns.push({\r\n        id: stableId,\r\n        label: generateColumnLabel(i),\r\n      });\r\n    }\r\n  }\r\n\r\n  // Normalize rows\r\n  const rows: TableRow[] = [];\r\n  const existingRows = prevData?.rows || [];\r\n  \r\n  // Build mapping from old column IDs to new stable IDs (for data migration)\r\n  // Map by index position: oldColumns[i] -> newColumns[i]\r\n  const oldToNewColMap: Record<string, string> = {};\r\n  existingColumns.forEach((oldCol, oldIndex) => {\r\n    if (oldIndex < columns.length) {\r\n      oldToNewColMap[oldCol.id] = columns[oldIndex].id;\r\n    }\r\n  });\r\n  \r\n  for (let i = 0; i < safeRowCount; i++) {\r\n    const stableId = generateStableRowId(i);\r\n    // Try to find by stable ID first, then by index\r\n    const existingRow = existingRows.find((row) => row?.id === stableId) ||\r\n                        (i < existingRows.length ? existingRows[i] : null);\r\n    \r\n    // Build cells object with all columns\r\n    const cells: Record<string, string> = {};\r\n    columns.forEach((col, colIndex) => {\r\n      // Try to preserve existing cell value\r\n      let cellValue = '';\r\n      \r\n      if (existingRow?.cells) {\r\n        // First try new stable ID directly\r\n        if (col.id in existingRow.cells) {\r\n          cellValue = String(existingRow.cells[col.id] || '');\r\n        } \r\n        // Then try old column at same index (for migration from old IDs)\r\n        else if (colIndex < existingColumns.length) {\r\n          const oldColId = existingColumns[colIndex].id;\r\n          if (oldColId && oldColId in existingRow.cells) {\r\n            cellValue = String(existingRow.cells[oldColId] || '');\r\n          }\r\n        }\r\n      }\r\n      \r\n      cells[col.id] = cellValue;\r\n    });\r\n    \r\n    rows.push({\r\n      id: stableId,\r\n      cells,\r\n    });\r\n  }\r\n\r\n  return { columns, rows };\r\n}\r\n\r\n/**\r\n * Validate and clamp row/column counts\r\n */\r\nexport function validateDimensions(\r\n  rowCount: number | string,\r\n  colCount: number | string\r\n): { rows: number; cols: number } {\r\n  const rows = clamp(Number(rowCount) || MIN_ROWS, MIN_ROWS, MAX_ROWS);\r\n  const cols = clamp(Number(colCount) || MIN_COLS, MIN_COLS, MAX_COLS);\r\n  return { rows, cols };\r\n}\r\n","/**\r\n * Live Table Builder - Main Component\r\n * AG Grid-based editable table with clipboard support\r\n */\r\n\r\nimport React, { useCallback, useEffect, useMemo, useRef, useState } from 'react';\r\nimport { AgGridReact } from 'ag-grid-react';\r\nimport {\r\n  ColDef,\r\n  GridApi,\r\n  GridReadyEvent,\r\n  CellValueChangedEvent,\r\n  PasteStartEvent,\r\n  PasteEndEvent,\r\n  RowDataUpdatedEvent,\r\n} from 'ag-grid-community';\r\nimport { Box, Button, TextField, IconButton, Tooltip } from '@mui/material';\r\nimport {\r\n  Add as AddIcon,\r\n  Remove as RemoveIcon,\r\n  SwapHoriz as TransposeIcon,\r\n} from '@mui/icons-material';\r\nimport 'ag-grid-community/styles/ag-grid.css';\r\nimport 'ag-grid-community/styles/ag-theme-alpine.css';\r\nimport type { TableColumn, TableRow, TableData } from '../types';\r\nimport { parseClipboardData } from '../utils/clipboard';\r\nimport { EditableHeader } from './EditableHeader';\r\nimport { normalizeTableData, validateDimensions } from '../utils/normalize';\r\n\r\ninterface LiveTableBuilderProps {\r\n  data: TableData;\r\n  onDataChange: (data: TableData) => void;\r\n  onToast: (message: string, severity?: 'success' | 'error' | 'warning' | 'info') => void;\r\n}\r\n\r\nconst DEFAULT_ROWS = 10;\r\nconst DEFAULT_COLS = 6;\r\n\r\nexport const LiveTableBuilder: React.FC<LiveTableBuilderProps> = ({\r\n  data,\r\n  onDataChange,\r\n  onToast,\r\n}) => {\r\n  const gridRef = useRef<AgGridReact>(null);\r\n  const gridWrapRef = useRef<HTMLDivElement>(null);\r\n  const [gridApi, setGridApi] = useState<GridApi | null>(null);\r\n\r\n  // Normalize data to ensure consistent dimensions\r\n  // Always ensure we have at least 1 row and 1 column for visible grid\r\n  const normalizedData = useMemo(() => {\r\n    if (!data?.columns || !Array.isArray(data.columns) || data.columns.length === 0 ||\r\n        !data?.rows || !Array.isArray(data.rows) || data.rows.length === 0) {\r\n      // Return minimal normalized data if invalid\r\n      return normalizeTableData(null, 1, 1);\r\n    }\r\n    \r\n    // Ensure data is normalized (all rows have all columns)\r\n    const colCount = Math.max(1, data.columns.length);\r\n    const rowCount = Math.max(1, data.rows.length);\r\n    return normalizeTableData(data, rowCount, colCount);\r\n  }, [data]);\r\n\r\n  // Convert table data to AG Grid format\r\n  const { rowData, columnDefs } = useMemo(() => {\r\n    if (!normalizedData?.columns || !normalizedData?.rows) {\r\n      // Fallback: create minimal grid\r\n      const fallback = normalizeTableData(null, 1, 1);\r\n      return {\r\n        rowData: [{ id: fallback.rows[0]?.id || 'row_0', [fallback.columns[0]?.id || 'col_0']: '' }],\r\n        columnDefs: [{\r\n          field: fallback.columns[0]?.id || 'col_0',\r\n          headerName: fallback.columns[0]?.label || 'Column A',\r\n          editable: true,\r\n          sortable: false,\r\n          filter: false,\r\n          resizable: true,\r\n          minWidth: 120,\r\n          flex: 1,\r\n        }],\r\n      };\r\n    }\r\n\r\n    const cols: ColDef[] = normalizedData.columns.map((col) => ({\r\n      field: col.id, // Use stable column ID as field key\r\n      headerName: col.label || '', // Display label\r\n      editable: true,\r\n      sortable: false,\r\n      filter: false,\r\n      resizable: true,\r\n      minWidth: 120,\r\n      flex: 1,\r\n      cellEditor: 'agTextCellEditor',\r\n      cellEditorParams: {\r\n        useFormatter: false,\r\n      },\r\n      headerComponent: EditableHeader,\r\n      headerComponentParams: {\r\n        onHeaderValueChange: (newValue: string) => {\r\n          if (newValue && newValue.trim() && col?.id) {\r\n            const updatedColumns = normalizedData.columns.map((c) =>\r\n              c.id === col.id ? { ...c, label: newValue.trim() } : c\r\n            );\r\n            onDataChange({\r\n              ...normalizedData,\r\n              columns: updatedColumns,\r\n            });\r\n          }\r\n        },\r\n      },\r\n    }));\r\n\r\n    // Build rowData ensuring all columns are present\r\n    const rows = normalizedData.rows.map((row) => {\r\n      const rowObj: Record<string, any> = { id: row.id };\r\n      normalizedData.columns.forEach((col) => {\r\n        // Always include all columns, defaulting to empty string\r\n        rowObj[col.id] = String(row.cells?.[col.id] || '');\r\n      });\r\n      return rowObj;\r\n    });\r\n\r\n    return { rowData: rows, columnDefs: cols };\r\n  }, [normalizedData, onDataChange]);\r\n\r\n  // Handle grid ready\r\n  const onGridReady = useCallback((params: GridReadyEvent) => {\r\n    setGridApi(params.api);\r\n  }, []);\r\n\r\n  // Handle cell value change\r\n  const onCellValueChanged = useCallback(\r\n    (event: CellValueChangedEvent) => {\r\n      if (!event?.data || !event?.colDef?.field) return;\r\n\r\n      const rowId = event.data.id;\r\n      const colId = event.colDef.field;\r\n      const newValue = event.newValue ?? '';\r\n\r\n      if (!normalizedData?.rows || !Array.isArray(normalizedData.rows)) return;\r\n\r\n      const updatedRows = normalizedData.rows.map((row) => {\r\n        if (row?.id === rowId) {\r\n          return {\r\n            ...row,\r\n            cells: {\r\n              ...(row.cells || {}),\r\n              [colId]: String(newValue),\r\n            },\r\n          };\r\n        }\r\n        return row;\r\n      });\r\n\r\n      onDataChange({\r\n        ...normalizedData,\r\n        rows: updatedRows,\r\n      });\r\n    },\r\n    [normalizedData, onDataChange]\r\n  );\r\n\r\n\r\n  // Add row\r\n  const handleAddRow = useCallback(() => {\r\n    if (!normalizedData?.columns || !normalizedData?.rows) return;\r\n\r\n    const newRowIndex = normalizedData.rows.length;\r\n    const newRowId = `row_${newRowIndex}`;\r\n    const newRow: TableRow = {\r\n      id: newRowId,\r\n      cells: {},\r\n    };\r\n\r\n    normalizedData.columns.forEach((col) => {\r\n      newRow.cells[col.id] = '';\r\n    });\r\n\r\n    const updatedData = {\r\n      ...normalizedData,\r\n      rows: [...normalizedData.rows, newRow],\r\n    };\r\n\r\n    // Normalize to ensure consistency\r\n    const normalized = normalizeTableData(updatedData, updatedData.rows.length, updatedData.columns.length);\r\n    onDataChange(normalized);\r\n\r\n    // Focus the first cell of the new row\r\n    setTimeout(() => {\r\n      if (gridApi && normalizedData.columns.length > 0) {\r\n        gridApi.setFocusedCell(newRowIndex, normalizedData.columns[0].id);\r\n        gridApi.startEditingCell({\r\n          rowIndex: newRowIndex,\r\n          colKey: normalizedData.columns[0].id,\r\n        });\r\n      }\r\n    }, 100);\r\n  }, [normalizedData, onDataChange, gridApi]);\r\n\r\n  // Remove last row\r\n  const handleRemoveRow = useCallback(() => {\r\n    if (!normalizedData?.rows || !Array.isArray(normalizedData.rows) || normalizedData.rows.length <= 1) {\r\n      onToast('Cannot remove the last row', 'warning');\r\n      return;\r\n    }\r\n\r\n    const updatedRows = normalizedData.rows.slice(0, -1);\r\n    const normalized = normalizeTableData(\r\n      { ...normalizedData, rows: updatedRows },\r\n      updatedRows.length,\r\n      normalizedData.columns.length\r\n    );\r\n    onDataChange(normalized);\r\n  }, [normalizedData, onDataChange, onToast]);\r\n\r\n  // Add column\r\n  const handleAddColumn = useCallback(() => {\r\n    if (!normalizedData?.columns || !normalizedData?.rows) return;\r\n\r\n    const newColCount = normalizedData.columns.length + 1;\r\n    const normalized = normalizeTableData(normalizedData, normalizedData.rows.length, newColCount);\r\n    onDataChange(normalized);\r\n  }, [normalizedData, onDataChange]);\r\n\r\n  // Remove last column\r\n  const handleRemoveColumn = useCallback(() => {\r\n    if (!normalizedData?.columns || !normalizedData?.rows || normalizedData.columns.length <= 1) {\r\n      onToast('Cannot remove the last column', 'warning');\r\n      return;\r\n    }\r\n\r\n    const newColCount = normalizedData.columns.length - 1;\r\n    const normalized = normalizeTableData(normalizedData, normalizedData.rows.length, newColCount);\r\n    onDataChange(normalized);\r\n  }, [normalizedData, onDataChange, onToast]);\r\n\r\n  // Enhanced paste handler using parseClipboardData\r\n  const handleEnhancedPaste = useCallback(\r\n    (clipboardText: string) => {\r\n      if (!gridApi || !normalizedData?.columns || !normalizedData?.rows) return false;\r\n\r\n      try {\r\n        const parsed = parseClipboardData(clipboardText);\r\n        if (parsed.rows.length === 0) return false;\r\n\r\n        // Get focused cell\r\n        const focusedCell = gridApi.getFocusedCell();\r\n        if (!focusedCell) return false;\r\n\r\n        const startRowIndex = focusedCell.rowIndex ?? 0;\r\n        const startColId = focusedCell.column?.getColId() || normalizedData.columns[0]?.id || '';\r\n\r\n        // Find column index\r\n        const startColIndex = normalizedData.columns.findIndex((col) => col?.id === startColId);\r\n        if (startColIndex === -1) return false;\r\n\r\n        // Expand table if needed\r\n        const neededRows = Math.max(normalizedData.rows.length, startRowIndex + parsed.rows.length);\r\n        const neededCols = Math.max(normalizedData.columns.length, startColIndex + parsed.colCount);\r\n\r\n        // Normalize to expanded size first\r\n        let expandedData = normalizeTableData(normalizedData, neededRows, neededCols);\r\n\r\n        // Apply pasted data\r\n        parsed.rows.forEach((parsedRow, rowOffset) => {\r\n          const targetRowIndex = startRowIndex + rowOffset;\r\n          if (targetRowIndex >= expandedData.rows.length) return;\r\n\r\n          const targetRow = expandedData.rows[targetRowIndex];\r\n          parsedRow.forEach((cellValue, colOffset) => {\r\n            const targetColIndex = startColIndex + colOffset;\r\n            if (targetColIndex < expandedData.columns.length) {\r\n              const colId = expandedData.columns[targetColIndex].id;\r\n              targetRow.cells[colId] = String(cellValue || '');\r\n            }\r\n          });\r\n        });\r\n\r\n        // Normalize again to ensure consistency\r\n        const normalized = normalizeTableData(expandedData, expandedData.rows.length, expandedData.columns.length);\r\n        onDataChange(normalized);\r\n\r\n        onToast(`Pasted ${parsed.rows.length} rows, ${parsed.colCount} columns`, 'success');\r\n        return true;\r\n      } catch (e) {\r\n        console.error('Paste error:', e);\r\n        return false;\r\n      }\r\n    },\r\n    [normalizedData, onDataChange, gridApi, onToast]\r\n  );\r\n\r\n  // Attach paste handler to grid using DOM ref\r\n  useEffect(() => {\r\n    if (!gridWrapRef.current) return;\r\n\r\n    const pasteHandler = (e: ClipboardEvent) => {\r\n      const clipboardText = e.clipboardData?.getData('text/plain') || '';\r\n      if (clipboardText.trim()) {\r\n        const handled = handleEnhancedPaste(clipboardText);\r\n        if (handled) {\r\n          e.preventDefault();\r\n          e.stopPropagation();\r\n        }\r\n      }\r\n    };\r\n\r\n    const gridElement = gridWrapRef.current;\r\n    gridElement.addEventListener('paste', pasteHandler);\r\n    return () => {\r\n      gridElement.removeEventListener('paste', pasteHandler);\r\n    };\r\n  }, [handleEnhancedPaste]);\r\n\r\n  // Handle paste\r\n  const onPasteStartEvent = useCallback(\r\n    (event: PasteStartEvent) => {\r\n      // Allow paste\r\n    },\r\n    []\r\n  );\r\n\r\n  const onPasteEnd = useCallback(\r\n    (event: PasteEndEvent) => {\r\n      // AG Grid handles paste automatically, but we need to sync our data\r\n      if (gridApi && normalizedData?.columns && normalizedData?.rows) {\r\n        setTimeout(() => {\r\n          const updatedRows: TableRow[] = [];\r\n          gridApi.forEachNode((node) => {\r\n            if (node?.data?.id) {\r\n              const cells: Record<string, string> = {};\r\n              normalizedData.columns.forEach((col) => {\r\n                cells[col.id] = String(node.data[col.id] || '');\r\n              });\r\n              updatedRows.push({\r\n                id: node.data.id,\r\n                cells,\r\n              });\r\n            }\r\n          });\r\n\r\n          if (updatedRows.length > 0) {\r\n            const updatedData = {\r\n              ...normalizedData,\r\n              rows: updatedRows,\r\n            };\r\n            // Normalize to ensure consistency\r\n            const normalized = normalizeTableData(\r\n              updatedData,\r\n              updatedRows.length,\r\n              normalizedData.columns.length\r\n            );\r\n            onDataChange(normalized);\r\n          }\r\n        }, 0);\r\n      }\r\n    },\r\n    [normalizedData, onDataChange, gridApi]\r\n  );\r\n\r\n  // Handle row data update (for paste operations)\r\n  const onRowDataUpdated = useCallback(\r\n    (event: RowDataUpdatedEvent) => {\r\n      // Sync data after paste\r\n      if (gridApi && normalizedData?.columns) {\r\n        const updatedRows: TableRow[] = [];\r\n        gridApi.forEachNode((node) => {\r\n          if (node?.data?.id) {\r\n            const cells: Record<string, string> = {};\r\n            normalizedData.columns.forEach((col) => {\r\n              cells[col.id] = String(node.data[col.id] || '');\r\n            });\r\n            updatedRows.push({\r\n              id: node.data.id,\r\n              cells,\r\n            });\r\n          }\r\n        });\r\n\r\n        if (updatedRows.length > 0) {\r\n          const updatedData = {\r\n            ...normalizedData,\r\n            rows: updatedRows,\r\n          };\r\n          // Normalize to ensure consistency\r\n          const normalized = normalizeTableData(\r\n            updatedData,\r\n            updatedRows.length,\r\n            normalizedData.columns.length\r\n          );\r\n          onDataChange(normalized);\r\n        }\r\n      }\r\n    },\r\n    [normalizedData, onDataChange, gridApi]\r\n  );\r\n\r\n  // Transpose table (swap rows and columns)\r\n  const handleTranspose = useCallback(() => {\r\n    if (!normalizedData?.rows || !normalizedData?.columns || \r\n        normalizedData.rows.length === 0 || normalizedData.columns.length === 0) {\r\n      onToast('Cannot transpose empty table', 'warning');\r\n      return;\r\n    }\r\n\r\n    // Get all cell values as a 2D array\r\n    const cellMatrix: string[][] = normalizedData.rows.map((row) =>\r\n      normalizedData.columns.map((col) => String(row.cells?.[col.id] || ''))\r\n    );\r\n\r\n    // Transpose the matrix\r\n    const transposedMatrix: string[][] = [];\r\n    for (let i = 0; i < normalizedData.columns.length; i++) {\r\n      transposedMatrix[i] = [];\r\n      for (let j = 0; j < normalizedData.rows.length; j++) {\r\n        transposedMatrix[i][j] = cellMatrix[j]?.[i] || '';\r\n      }\r\n    }\r\n\r\n    // New dimensions: old columns become rows, old rows become columns\r\n    const newRowCount = normalizedData.columns.length;\r\n    const newColCount = normalizedData.rows.length;\r\n\r\n    // Create transposed data structure\r\n    const transposedData: TableData = {\r\n      columns: normalizedData.rows.map((row, index) => ({\r\n        id: `col_${index}`, // Stable ID\r\n        label: normalizedData.columns[index]?.label || `Column ${String.fromCharCode(65 + (index % 26))}`,\r\n      })),\r\n      rows: normalizedData.columns.map((col, rowIndex) => {\r\n        const cells: Record<string, string> = {};\r\n        normalizedData.rows.forEach((_, colIndex) => {\r\n          cells[`col_${colIndex}`] = transposedMatrix[rowIndex]?.[colIndex] || '';\r\n        });\r\n        return {\r\n          id: `row_${rowIndex}`, // Stable ID\r\n          cells,\r\n        };\r\n      }),\r\n    };\r\n\r\n    // Normalize the transposed data\r\n    const normalized = normalizeTableData(transposedData, newRowCount, newColCount);\r\n    onDataChange(normalized);\r\n\r\n    const rowCount = normalized.rows.length;\r\n    const colCount = normalized.columns.length;\r\n    onToast(`Table transposed: ${rowCount} rows  ${colCount} columns`, 'success');\r\n  }, [normalizedData, onDataChange, onToast]);\r\n\r\n  // Expose undo/redo capability if needed (handled at page level)\r\n\r\n  // Set initial rows/cols - uses normalization to ensure consistent state\r\n  const handleSetDimensions = useCallback(\r\n    (rows: number | string, cols: number | string) => {\r\n      const { rows: safeRows, cols: safeCols } = validateDimensions(rows, cols);\r\n      \r\n      // Normalize current data to new dimensions\r\n      const normalized = normalizeTableData(normalizedData, safeRows, safeCols);\r\n      onDataChange(normalized);\r\n    },\r\n    [normalizedData, onDataChange]\r\n  );\r\n\r\n  return (\r\n    <Box sx={{ display: 'flex', flexDirection: 'column', height: '100%', gap: 2 }}>\r\n      {/* Toolbar */}\r\n      <Box\r\n        sx={{\r\n          display: 'flex',\r\n          gap: 1,\r\n          flexWrap: 'wrap',\r\n          alignItems: 'center',\r\n          p: 2,\r\n          borderBottom: 1,\r\n          borderColor: 'divider',\r\n        }}\r\n      >\r\n        <TextField\r\n          label=\"Rows\"\r\n          type=\"number\"\r\n          size=\"small\"\r\n          value={normalizedData?.rows?.length || 0}\r\n          onChange={(e) => {\r\n            const rows = e.target.value;\r\n            handleSetDimensions(rows, normalizedData?.columns?.length || 0);\r\n          }}\r\n          onBlur={(e) => {\r\n            // Ensure valid value on blur\r\n            const { rows } = validateDimensions(e.target.value, normalizedData?.columns?.length || 0);\r\n            handleSetDimensions(rows, normalizedData?.columns?.length || 0);\r\n          }}\r\n          sx={{ width: 100 }}\r\n          inputProps={{ min: 1, max: 500 }}\r\n        />\r\n        <TextField\r\n          label=\"Columns\"\r\n          type=\"number\"\r\n          size=\"small\"\r\n          value={normalizedData?.columns?.length || 0}\r\n          onChange={(e) => {\r\n            const cols = e.target.value;\r\n            handleSetDimensions(normalizedData?.rows?.length || 0, cols);\r\n          }}\r\n          onBlur={(e) => {\r\n            // Ensure valid value on blur\r\n            const { cols } = validateDimensions(normalizedData?.rows?.length || 0, e.target.value);\r\n            handleSetDimensions(normalizedData?.rows?.length || 0, cols);\r\n          }}\r\n          sx={{ width: 100 }}\r\n          inputProps={{ min: 1, max: 100 }}\r\n        />\r\n\r\n        <Box sx={{ flex: 1 }} />\r\n\r\n        <Tooltip title=\"Add Row\">\r\n          <IconButton onClick={handleAddRow} size=\"small\">\r\n            <AddIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n        <Tooltip title=\"Remove Last Row\">\r\n          <IconButton onClick={handleRemoveRow} size=\"small\">\r\n            <RemoveIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n        <Tooltip title=\"Add Column\">\r\n          <IconButton onClick={handleAddColumn} size=\"small\">\r\n            <AddIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n        <Tooltip title=\"Remove Last Column\">\r\n          <IconButton onClick={handleRemoveColumn} size=\"small\">\r\n            <RemoveIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n\r\n        <Box sx={{ width: 1, borderTop: 1, borderColor: 'divider', my: 1 }} />\r\n\r\n        <Tooltip title=\"Transpose Table (Swap Rows & Columns)\">\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<TransposeIcon />}\r\n            onClick={handleTranspose}\r\n            size=\"small\"\r\n          >\r\n            Transpose\r\n          </Button>\r\n        </Tooltip>\r\n      </Box>\r\n\r\n      {/* Grid */}\r\n      <Box sx={{ flex: 1, minHeight: 400, display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>\r\n        <div\r\n          className=\"ag-theme-alpine\"\r\n          ref={gridWrapRef}\r\n          style={{\r\n            height: '100%',\r\n            width: '100%',\r\n            minHeight: 400,\r\n            flex: 1,\r\n          }}\r\n        >\r\n          <AgGridReact\r\n            ref={gridRef}\r\n            columnDefs={columnDefs}\r\n            rowData={rowData}\r\n            onGridReady={onGridReady}\r\n            onCellValueChanged={onCellValueChanged}\r\n            onPasteStart={onPasteStartEvent}\r\n            onPasteEnd={onPasteEnd}\r\n            onRowDataUpdated={onRowDataUpdated}\r\n            defaultColDef={{\r\n              editable: true,\r\n              sortable: false,\r\n              filter: false,\r\n              resizable: true,\r\n            }}\r\n            theme=\"legacy\"\r\n            suppressClipboardPaste={false}\r\n            animateRows={false}\r\n            getRowId={(params) => params.data.id}\r\n            rowSelection={{\r\n              mode: 'multiRow',\r\n              enableClickSelection: true,\r\n            }}\r\n          />\r\n        </div>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n","/**\r\n * CSV Export Utilities\r\n * Handles proper CSV escaping and formatting\r\n */\r\n\r\nimport type { TableData } from '../types';\r\n\r\n/**\r\n * Escape a CSV field value\r\n * - Quotes fields containing commas, quotes, or newlines\r\n * - Doubles quotes for escaping\r\n */\r\nfunction escapeCsvField(field: string): string {\r\n  if (field === null || field === undefined) {\r\n    return '';\r\n  }\r\n\r\n  const str = String(field);\r\n  \r\n  // If field contains comma, quote, or newline, wrap in quotes and escape quotes\r\n  if (str.includes(',') || str.includes('\"') || str.includes('\\n') || str.includes('\\r')) {\r\n    return `\"${str.replace(/\"/g, '\"\"')}\"`;\r\n  }\r\n  \r\n  return str;\r\n}\r\n\r\n/**\r\n * Convert table data to CSV format\r\n * @param data Table data to export\r\n * @returns CSV string with \\r\\n line endings\r\n */\r\nexport function tableDataToCsv(data: TableData): string {\r\n  if (!data?.columns || !data?.rows) {\r\n    return '';\r\n  }\r\n\r\n  const lines: string[] = [];\r\n\r\n  // Header row\r\n  const headerRow = data.columns.map((col) => escapeCsvField(col?.label || '')).join(',');\r\n  lines.push(headerRow);\r\n\r\n  // Data rows\r\n  data.rows.forEach((row) => {\r\n    const rowValues = data.columns.map((col) => {\r\n      const cellValue = row?.cells?.[col?.id || ''] || '';\r\n      return escapeCsvField(String(cellValue));\r\n    });\r\n    lines.push(rowValues.join(','));\r\n  });\r\n\r\n  // Join with \\r\\n (Windows line endings for better compatibility)\r\n  return lines.join('\\r\\n');\r\n}\r\n\r\n/**\r\n * Generate filename with timestamp\r\n * Format: live-table-builder_YYYY-MM-DD_HHMM.csv\r\n */\r\nexport function generateCsvFilename(): string {\r\n  const now = new Date();\r\n  const year = now.getFullYear();\r\n  const month = String(now.getMonth() + 1).padStart(2, '0');\r\n  const day = String(now.getDate()).padStart(2, '0');\r\n  const hours = String(now.getHours()).padStart(2, '0');\r\n  const minutes = String(now.getMinutes()).padStart(2, '0');\r\n  \r\n  return `live-table-builder_${year}-${month}-${day}_${hours}${minutes}.csv`;\r\n}\r\n","/**\r\n * CSV Import Utilities\r\n * Handles parsing CSV/TSV data and converting to table format\r\n */\r\n\r\nimport type { TableData, TableColumn, TableRow } from '../types';\r\nimport { parseClipboardData } from './clipboard';\r\n\r\n/**\r\n * Convert parsed CSV data to TableData format\r\n * @param parsedData Parsed clipboard/CSV data\r\n * @param firstRowIsHeader Whether the first row should be treated as headers\r\n * @returns TableData object\r\n */\r\nexport function parsedDataToTableData(\r\n  parsedData: { rows: string[][]; rowCount: number; colCount: number },\r\n  firstRowIsHeader: boolean = true\r\n): TableData {\r\n  if (!parsedData.rows || parsedData.rows.length === 0) {\r\n    return { columns: [], rows: [] };\r\n  }\r\n\r\n  let headerRow: string[] = [];\r\n  let dataRows: string[][] = [];\r\n\r\n  if (firstRowIsHeader && parsedData.rows.length > 0) {\r\n    headerRow = parsedData.rows[0];\r\n    dataRows = parsedData.rows.slice(1);\r\n  } else {\r\n    // Generate default headers\r\n    const maxCols = Math.max(...parsedData.rows.map(row => row.length));\r\n    headerRow = Array.from({ length: maxCols }, (_, i) => {\r\n      const colLetter = String.fromCharCode(65 + (i % 26));\r\n      return `Column ${colLetter}`;\r\n    });\r\n    dataRows = parsedData.rows;\r\n  }\r\n\r\n  // Normalize all rows to have the same number of columns\r\n  const maxCols = Math.max(headerRow.length, ...dataRows.map(row => row.length));\r\n  \r\n  // Pad header row if needed\r\n  while (headerRow.length < maxCols) {\r\n    const colIndex = headerRow.length;\r\n    const colLetter = String.fromCharCode(65 + (colIndex % 26));\r\n    headerRow.push(`Column ${colLetter}`);\r\n  }\r\n\r\n  // Create columns with stable IDs\r\n  const columns: TableColumn[] = headerRow.map((label, index) => ({\r\n    id: `col_${index}`, // Stable ID based on index\r\n    label: label || `Column ${String.fromCharCode(65 + (index % 26))}`,\r\n  }));\r\n\r\n  // Create rows with stable IDs\r\n  const rows: TableRow[] = dataRows.map((rowData, rowIndex) => {\r\n    const rowId = `row_${rowIndex}`; // Stable ID based on index\r\n    const cells: Record<string, string> = {};\r\n    \r\n    columns.forEach((col, colIndex) => {\r\n      cells[col.id] = String(rowData[colIndex] || '');\r\n    });\r\n    \r\n    return {\r\n      id: rowId,\r\n      cells,\r\n    };\r\n  });\r\n\r\n  return { columns, rows };\r\n}\r\n\r\n/**\r\n * Parse CSV/TSV text and convert to TableData\r\n */\r\nexport function parseCsvTextToTableData(\r\n  csvText: string,\r\n  firstRowIsHeader: boolean = true\r\n): TableData {\r\n  const parsed = parseClipboardData(csvText);\r\n  return parsedDataToTableData(parsed, firstRowIsHeader);\r\n}\r\n","/**\r\n * History Management for Undo/Redo\r\n * Implements bounded snapshot history\r\n */\r\n\r\nimport type { TableData } from '../types';\r\n\r\nconst MAX_HISTORY_SIZE = 50;\r\n\r\nexport class HistoryManager {\r\n  private history: TableData[] = [];\r\n  private currentIndex: number = -1;\r\n\r\n  /**\r\n   * Add a new state to history\r\n   */\r\n  push(state: TableData): void {\r\n    // Remove any states after current index (when undoing then making new changes)\r\n    if (this.currentIndex < this.history.length - 1) {\r\n      this.history = this.history.slice(0, this.currentIndex + 1);\r\n    }\r\n\r\n    // Add new state\r\n    this.history.push(JSON.parse(JSON.stringify(state))); // Deep clone\r\n    this.currentIndex++;\r\n\r\n    // Limit history size\r\n    if (this.history.length > MAX_HISTORY_SIZE) {\r\n      this.history.shift();\r\n      this.currentIndex--;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get previous state (undo)\r\n   */\r\n  undo(): TableData | null {\r\n    if (this.currentIndex > 0) {\r\n      this.currentIndex--;\r\n      return JSON.parse(JSON.stringify(this.history[this.currentIndex]));\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Get next state (redo)\r\n   */\r\n  redo(): TableData | null {\r\n    if (this.currentIndex < this.history.length - 1) {\r\n      this.currentIndex++;\r\n      return JSON.parse(JSON.stringify(this.history[this.currentIndex]));\r\n    }\r\n    return null;\r\n  }\r\n\r\n  /**\r\n   * Check if undo is available\r\n   */\r\n  canUndo(): boolean {\r\n    return this.currentIndex > 0;\r\n  }\r\n\r\n  /**\r\n   * Check if redo is available\r\n   */\r\n  canRedo(): boolean {\r\n    return this.currentIndex < this.history.length - 1;\r\n  }\r\n\r\n  /**\r\n   * Clear history\r\n   */\r\n  clear(): void {\r\n    this.history = [];\r\n    this.currentIndex = -1;\r\n  }\r\n\r\n  /**\r\n   * Initialize with initial state\r\n   */\r\n  initialize(initialState: TableData): void {\r\n    this.history = [JSON.parse(JSON.stringify(initialState))];\r\n    this.currentIndex = 0;\r\n  }\r\n}\r\n","/**\r\n * Live Table Builder - Page Component\r\n * Main page wrapper with import/export, reset, and toast functionality\r\n */\r\n\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport {\r\n  Box,\r\n  Container,\r\n  Typography,\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  IconButton,\r\n  Tooltip,\r\n  Snackbar,\r\n  Alert,\r\n  FormControlLabel,\r\n  Checkbox,\r\n  Collapse,\r\n  Paper,\r\n  Divider,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n} from '@mui/material';\r\nimport {\r\n  FileDownload as ExportIcon,\r\n  FileUpload as ImportIcon,\r\n  Refresh as ResetIcon,\r\n  Undo as UndoIcon,\r\n  Redo as RedoIcon,\r\n  HelpOutline as HelpIcon,\r\n  ExpandMore as ExpandMoreIcon,\r\n  ExpandLess as ExpandLessIcon,\r\n  Save as SaveIcon,\r\n  Delete as DeleteIcon,\r\n  Add as AddIcon,\r\n} from '@mui/icons-material';\r\nimport { LiveTableBuilder } from './components/LiveTableBuilder';\r\nimport type { TableData, TableState } from './types';\r\nimport { tableDataToCsv, generateCsvFilename } from './utils/csvExport';\r\nimport { parseCsvTextToTableData } from './utils/csvImport';\r\nimport { HistoryManager } from './utils/history';\r\nimport { normalizeTableData } from './utils/normalize';\r\nimport { adminAPI } from '../../../api/admin.api';\r\n\r\nconst STORAGE_KEY = 'om_live_table_builder_state_v1';\r\nconst DEFAULT_ROWS = 10;\r\nconst DEFAULT_COLS = 6;\r\n\r\n// Generate default table data using normalization\r\nconst createDefaultData = (): TableData => {\r\n  return normalizeTableData(null, DEFAULT_ROWS, DEFAULT_COLS);\r\n};\r\n\r\nexport const LiveTableBuilderPage: React.FC = () => {\r\n  const [tableData, setTableData] = useState<TableData>(createDefaultData());\r\n  const [importDialogOpen, setImportDialogOpen] = useState(false);\r\n  const [resetDialogOpen, setResetDialogOpen] = useState(false);\r\n  const [importJson, setImportJson] = useState('');\r\n  const [importCsv, setImportCsv] = useState('');\r\n  const [csvFirstRowIsHeader, setCsvFirstRowIsHeader] = useState(true);\r\n  const [showTips, setShowTips] = useState(false);\r\n  const historyManagerRef = React.useRef<HistoryManager>(new HistoryManager());\r\n  const [canUndo, setCanUndo] = useState(false);\r\n  const [canRedo, setCanRedo] = useState(false);\r\n  const [toast, setToast] = useState<{\r\n    open: boolean;\r\n    message: string;\r\n    severity: 'success' | 'error' | 'warning' | 'info';\r\n  }>({\r\n    open: false,\r\n    message: '',\r\n    severity: 'info',\r\n  });\r\n  \r\n  // Template management state (DB-backed)\r\n  const [templateName, setTemplateName] = useState('');\r\n  const [selectedTemplate, setSelectedTemplate] = useState('');\r\n  const [templates, setTemplates] = useState<Array<{ slug: string; name: string; record_type: string; is_global?: boolean }>>([]);\r\n  const [saveTemplateDialogOpen, setSaveTemplateDialogOpen] = useState(false);\r\n  const [overwriteTemplateDialogOpen, setOverwriteTemplateDialogOpen] = useState(false);\r\n  const [deleteTemplateDialogOpen, setDeleteTemplateDialogOpen] = useState(false);\r\n  const [templateToDelete, setTemplateToDelete] = useState('');\r\n  const [loadTemplateDialogOpen, setLoadTemplateDialogOpen] = useState(false);\r\n  const [templateToLoad, setTemplateToLoad] = useState('');\r\n  const [importTemplatesDialogOpen, setImportTemplatesDialogOpen] = useState(false);\r\n  const [importTemplatesJson, setImportTemplatesJson] = useState('');\r\n  const [lastSavedState, setLastSavedState] = useState<string>('');\r\n  const [templateRecordType, setTemplateRecordType] = useState<'baptism' | 'marriage' | 'funeral' | 'custom'>('custom');\r\n  const [templateDescription, setTemplateDescription] = useState('');\r\n  const [templateIsGlobal, setTemplateIsGlobal] = useState(false);\r\n  const [loadingTemplates, setLoadingTemplates] = useState(false);\r\n\r\n  // Toast notification handler (defined early to avoid TDZ issues)\r\n  const showToast = useCallback(\r\n    (message: string, severity: 'success' | 'error' | 'warning' | 'info' = 'info') => {\r\n      setToast({ open: true, message, severity });\r\n    },\r\n    []\r\n  );\r\n\r\n  // Load templates from database\r\n  const loadTemplatesFromDb = useCallback(async () => {\r\n    setLoadingTemplates(true);\r\n    try {\r\n      const response = await adminAPI.templates.getAll();\r\n      if (response.success) {\r\n        setTemplates(response.templates.map((t: any) => ({\r\n          slug: t.slug,\r\n          name: t.name,\r\n          record_type: t.record_type,\r\n          is_global: t.is_global,\r\n        })));\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load templates from database:', error);\r\n      showToast('Failed to load templates', 'error');\r\n    } finally {\r\n      setLoadingTemplates(false);\r\n    }\r\n  }, [showToast]);\r\n\r\n  // Load from localStorage on mount\r\n  useEffect(() => {\r\n    try {\r\n      const saved = localStorage.getItem(STORAGE_KEY);\r\n      if (saved) {\r\n        const parsed: TableState = JSON.parse(saved);\r\n        if (parsed?.data?.columns && Array.isArray(parsed.data.columns) && \r\n            parsed?.data?.rows && Array.isArray(parsed.data.rows)) {\r\n          // Normalize loaded data to ensure consistency\r\n          const normalized = normalizeTableData(\r\n            parsed.data,\r\n            parsed.data.rows.length,\r\n            parsed.data.columns.length\r\n          );\r\n          setTableData(normalized);\r\n          historyManagerRef.current.initialize(normalized);\r\n          setLastSavedState(JSON.stringify(normalized));\r\n        } else {\r\n          showToast('Invalid saved data format, using defaults', 'warning');\r\n          const defaultData = createDefaultData();\r\n          setTableData(defaultData);\r\n          historyManagerRef.current.initialize(defaultData);\r\n          setLastSavedState(JSON.stringify(defaultData));\r\n        }\r\n      } else {\r\n        const defaultData = createDefaultData();\r\n        setTableData(defaultData);\r\n        historyManagerRef.current.initialize(defaultData);\r\n        setLastSavedState(JSON.stringify(defaultData));\r\n      }\r\n    } catch (e) {\r\n      console.error('Failed to load table data:', e);\r\n      showToast('Failed to load saved data, using defaults', 'warning');\r\n      const defaultData = createDefaultData();\r\n      setTableData(defaultData);\r\n      historyManagerRef.current.initialize(defaultData);\r\n      setLastSavedState(JSON.stringify(defaultData));\r\n    }\r\n    \r\n    // Load templates from database\r\n    loadTemplatesFromDb();\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [loadTemplatesFromDb]);\r\n\r\n  // Update undo/redo button states\r\n  useEffect(() => {\r\n    setCanUndo(historyManagerRef.current.canUndo());\r\n    setCanRedo(historyManagerRef.current.canRedo());\r\n  }, [tableData]);\r\n\r\n  // Save to localStorage whenever data changes\r\n  useEffect(() => {\r\n    try {\r\n      if (tableData?.columns && Array.isArray(tableData.columns) && \r\n          tableData?.rows && Array.isArray(tableData.rows)) {\r\n        const normalized = normalizeTableData(\r\n          tableData,\r\n          tableData.rows.length,\r\n          tableData.columns.length\r\n        );\r\n        const state: TableState = {\r\n          data: normalized,\r\n          version: '1',\r\n        };\r\n        localStorage.setItem(STORAGE_KEY, JSON.stringify(state));\r\n        setLastSavedState(JSON.stringify(normalized));\r\n      }\r\n    } catch (e) {\r\n      console.error('Failed to save table data:', e);\r\n      showToast('Failed to save data to localStorage', 'error');\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, [tableData]);\r\n  \r\n  // Update template names when templates change\r\n  useEffect(() => {\r\n    loadTemplatesFromDb();\r\n  }, [saveTemplateDialogOpen, deleteTemplateDialogOpen, importTemplatesDialogOpen, loadTemplatesFromDb]);\r\n\r\n  const handleDataChange = useCallback((data: TableData) => {\r\n    // Normalize data before storing\r\n    const normalized = normalizeTableData(\r\n      data,\r\n      data?.rows?.length || 0,\r\n      data?.columns?.length || 0\r\n    );\r\n    \r\n    // Only push to history if data actually changed\r\n    const currentDataStr = JSON.stringify(tableData);\r\n    const newDataStr = JSON.stringify(normalized);\r\n    \r\n    if (currentDataStr !== newDataStr) {\r\n      setTableData(normalized);\r\n      historyManagerRef.current.push(normalized);\r\n      setCanUndo(historyManagerRef.current.canUndo());\r\n      setCanRedo(historyManagerRef.current.canRedo());\r\n    }\r\n  }, [tableData]);\r\n\r\n  const handleUndo = useCallback(() => {\r\n    const previousState = historyManagerRef.current.undo();\r\n    if (previousState) {\r\n      setTableData(previousState);\r\n      setCanUndo(historyManagerRef.current.canUndo());\r\n      setCanRedo(historyManagerRef.current.canRedo());\r\n      showToast('Undone', 'info');\r\n    }\r\n  }, [showToast]);\r\n\r\n  const handleRedo = useCallback(() => {\r\n    const nextState = historyManagerRef.current.redo();\r\n    if (nextState) {\r\n      setTableData(nextState);\r\n      setCanUndo(historyManagerRef.current.canUndo());\r\n      setCanRedo(historyManagerRef.current.canRedo());\r\n      showToast('Redone', 'info');\r\n    }\r\n  }, [showToast]);\r\n\r\n  // Keyboard shortcuts\r\n  useEffect(() => {\r\n    const handleKeyDown = (e: KeyboardEvent) => {\r\n      // Check for Ctrl/Cmd + Z (undo)\r\n      if ((e.ctrlKey || e.metaKey) && e.key === 'z' && !e.shiftKey) {\r\n        e.preventDefault();\r\n        handleUndo();\r\n      }\r\n      // Check for Ctrl/Cmd + Y or Ctrl/Cmd + Shift + Z (redo)\r\n      if ((e.ctrlKey || e.metaKey) && (e.key === 'y' || (e.key === 'z' && e.shiftKey))) {\r\n        e.preventDefault();\r\n        handleRedo();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyDown);\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown);\r\n    };\r\n  }, [handleUndo, handleRedo]);\r\n\r\n  const handleExport = useCallback(() => {\r\n    try {\r\n      if (!tableData?.columns || !tableData?.rows) {\r\n        showToast('No data to export', 'warning');\r\n        return;\r\n      }\r\n\r\n      // Normalize before export to ensure consistency\r\n      const normalized = normalizeTableData(\r\n        tableData,\r\n        tableData.rows.length,\r\n        tableData.columns.length\r\n      );\r\n\r\n      const state: TableState = {\r\n        data: normalized,\r\n        version: '1',\r\n      };\r\n      const json = JSON.stringify(state, null, 2);\r\n\r\n      // Copy to clipboard\r\n      if (navigator.clipboard && navigator.clipboard.writeText) {\r\n        navigator.clipboard.writeText(json).then(() => {\r\n          showToast('JSON copied to clipboard', 'success');\r\n        }).catch(() => {\r\n          // Clipboard API may fail, continue with download\r\n        });\r\n      }\r\n\r\n      // Download file\r\n      const blob = new Blob([json], { type: 'application/json' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = `live-table-builder-${new Date().toISOString().split('T')[0]}.json`;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      URL.revokeObjectURL(url);\r\n      showToast('JSON exported and copied to clipboard', 'success');\r\n    } catch (e) {\r\n      showToast('Failed to export data', 'error');\r\n      console.error(e);\r\n    }\r\n  }, [tableData, showToast]);\r\n\r\n  const handleImport = useCallback(() => {\r\n    setImportDialogOpen(true);\r\n    setImportCsv('');\r\n  }, []);\r\n\r\n  const handleImportCsv = useCallback(() => {\r\n    setImportDialogOpen(true);\r\n    setImportJson('');\r\n  }, []);\r\n\r\n  const handleImportCsvConfirm = useCallback(() => {\r\n    try {\r\n      if (!importCsv || !importCsv.trim()) {\r\n      showToast('Please paste CSV data', 'warning');\r\n      return;\r\n    }\r\n\r\n      const importedData = parseCsvTextToTableData(importCsv, csvFirstRowIsHeader);\r\n      \r\n      if (!importedData.columns || importedData.columns.length === 0) {\r\n        showToast('Invalid CSV format: no columns found', 'error');\r\n        return;\r\n      }\r\n\r\n      // Normalize imported data\r\n      const normalized = normalizeTableData(\r\n        importedData,\r\n        importedData.rows?.length || 0,\r\n        importedData.columns.length\r\n      );\r\n\r\n      setTableData(normalized);\r\n      historyManagerRef.current.push(normalized);\r\n      setCanUndo(historyManagerRef.current.canUndo());\r\n      setCanRedo(historyManagerRef.current.canRedo());\r\n      setImportDialogOpen(false);\r\n      setImportCsv('');\r\n      const rowCount = normalized.rows.length;\r\n      const colCount = normalized.columns.length;\r\n      showToast(`Imported ${rowCount} rows, ${colCount} columns`, 'success');\r\n    } catch (e) {\r\n      const errorMsg = e instanceof Error ? e.message : 'Unknown error';\r\n      showToast('Failed to parse CSV: ' + errorMsg, 'error');\r\n      console.error(e);\r\n    }\r\n  }, [importCsv, csvFirstRowIsHeader, showToast]);\r\n\r\n  const handleImportConfirm = useCallback(() => {\r\n    try {\r\n      if (!importJson || !importJson.trim()) {\r\n        showToast('Please paste JSON data', 'warning');\r\n        return;\r\n      }\r\n\r\n      const parsed: TableState = JSON.parse(importJson);\r\n          if (parsed?.data?.columns && Array.isArray(parsed.data.columns) && \r\n              parsed?.data?.rows && Array.isArray(parsed.data.rows)) {\r\n            // Normalize imported data\r\n            const normalized = normalizeTableData(\r\n              parsed.data,\r\n              parsed.data.rows.length,\r\n              parsed.data.columns.length\r\n            );\r\n            setTableData(normalized);\r\n            historyManagerRef.current.push(normalized);\r\n            setCanUndo(historyManagerRef.current.canUndo());\r\n            setCanRedo(historyManagerRef.current.canRedo());\r\n            setImportDialogOpen(false);\r\n            setImportJson('');\r\n            const rowCount = normalized.rows.length;\r\n            const colCount = normalized.columns.length;\r\n            showToast(`JSON imported: ${rowCount} rows, ${colCount} columns`, 'success');\r\n          } else {\r\n            showToast('Invalid JSON format: missing columns or rows', 'error');\r\n          }\r\n    } catch (e) {\r\n      showToast('Failed to parse JSON: ' + (e instanceof Error ? e.message : 'Unknown error'), 'error');\r\n      console.error(e);\r\n    }\r\n  }, [importJson, showToast]);\r\n\r\n  const handleImportFile = useCallback(\r\n    (event: React.ChangeEvent<HTMLInputElement>) => {\r\n      const file = event.target.files?.[0];\r\n      if (!file) return;\r\n\r\n      const reader = new FileReader();\r\n      reader.onload = (e) => {\r\n        try {\r\n          const text = e.target?.result as string;\r\n          if (!text || !text.trim()) {\r\n            showToast('File is empty', 'error');\r\n            return;\r\n          }\r\n\r\n          const fileName = file.name.toLowerCase();\r\n          const isCsv = fileName.endsWith('.csv') || fileName.endsWith('.tsv');\r\n\r\n          if (isCsv) {\r\n            // Try CSV import\r\n            const importedData = parseCsvTextToTableData(text, csvFirstRowIsHeader);\r\n            if (!importedData.columns || importedData.columns.length === 0) {\r\n              showToast('Invalid CSV format: no columns found', 'error');\r\n              return;\r\n            }\r\n            // Normalize imported data\r\n            const normalized = normalizeTableData(\r\n              importedData,\r\n              importedData.rows?.length || 0,\r\n              importedData.columns.length\r\n            );\r\n            setTableData(normalized);\r\n            historyManagerRef.current.push(normalized);\r\n            setCanUndo(historyManagerRef.current.canUndo());\r\n            setCanRedo(historyManagerRef.current.canRedo());\r\n            const rowCount = normalized.rows.length;\r\n            const colCount = normalized.columns.length;\r\n            showToast(`Imported ${rowCount} rows, ${colCount} columns from CSV`, 'success');\r\n          } else {\r\n            // Try JSON import\r\n            const parsed: TableState = JSON.parse(text);\r\n            if (parsed?.data?.columns && Array.isArray(parsed.data.columns) && \r\n                parsed?.data?.rows && Array.isArray(parsed.data.rows)) {\r\n              // Normalize imported data\r\n              const normalizedJson = normalizeTableData(\r\n                parsed.data,\r\n                parsed.data.rows.length,\r\n                parsed.data.columns.length\r\n              );\r\n              setTableData(normalizedJson);\r\n              historyManagerRef.current.push(normalizedJson);\r\n              setCanUndo(historyManagerRef.current.canUndo());\r\n              setCanRedo(historyManagerRef.current.canRedo());\r\n              const rowCount = normalizedJson.rows.length;\r\n              const colCount = normalizedJson.columns.length;\r\n              showToast(`Imported ${rowCount} rows, ${colCount} columns from JSON`, 'success');\r\n            } else {\r\n              showToast('Invalid JSON format: missing columns or rows', 'error');\r\n            }\r\n          }\r\n        } catch (err) {\r\n          const errorMsg = err instanceof Error ? err.message : 'Unknown error';\r\n          showToast('Failed to parse file: ' + errorMsg, 'error');\r\n          console.error(err);\r\n        }\r\n      };\r\n      reader.onerror = () => {\r\n        showToast('Failed to read file', 'error');\r\n      };\r\n      reader.readAsText(file);\r\n    },\r\n    [showToast, csvFirstRowIsHeader]\r\n  );\r\n\r\n  const handleExportCsv = useCallback(() => {\r\n    try {\r\n      if (!tableData?.columns || !tableData?.rows) {\r\n        showToast('No data to export', 'warning');\r\n        return;\r\n      }\r\n\r\n      // Normalize before export to ensure consistency\r\n      const normalized = normalizeTableData(\r\n        tableData,\r\n        tableData.rows.length,\r\n        tableData.columns.length\r\n      );\r\n\r\n      const csv = tableDataToCsv(normalized);\r\n      if (!csv) {\r\n        showToast('Failed to generate CSV', 'error');\r\n        return;\r\n      }\r\n\r\n      // Download file\r\n      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = generateCsvFilename();\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      URL.revokeObjectURL(url);\r\n      showToast('CSV exported successfully', 'success');\r\n    } catch (e) {\r\n      showToast('Failed to export CSV', 'error');\r\n      console.error(e);\r\n    }\r\n  }, [tableData, showToast]);\r\n\r\n  const handleReset = useCallback(() => {\r\n    setResetDialogOpen(true);\r\n  }, []);\r\n\r\n  const handleResetConfirm = useCallback(() => {\r\n    try {\r\n      const defaultData = createDefaultData();\r\n      setTableData(defaultData);\r\n      historyManagerRef.current.clear();\r\n      historyManagerRef.current.initialize(defaultData);\r\n      setCanUndo(false);\r\n      setCanRedo(false);\r\n      setResetDialogOpen(false);\r\n      setLastSavedState(JSON.stringify(defaultData));\r\n      showToast('Grid reset to defaults', 'success');\r\n    } catch (e) {\r\n      showToast('Failed to reset table', 'error');\r\n      console.error(e);\r\n    }\r\n  }, [showToast]);\r\n  \r\n  // Check if current table is dirty (different from last saved state)\r\n  const isDirty = useCallback((): boolean => {\r\n    if (!tableData) return false;\r\n    const normalized = normalizeTableData(\r\n      tableData,\r\n      tableData.rows.length,\r\n      tableData.columns.length\r\n    );\r\n    const currentState = JSON.stringify(normalized);\r\n    return currentState !== lastSavedState;\r\n  }, [tableData, lastSavedState]);\r\n\r\n  // Convert table state to database template format (defined early to avoid TDZ issues)\r\n  const convertTableToDbTemplate = useCallback((tableData: TableData) => {\r\n    const fields = tableData.columns.map((col, colIdx) => {\r\n      // Try to infer type from column name or default to string\r\n      let type = 'string';\r\n      const colName = col.label.toLowerCase();\r\n      if (colName.includes('date') || colName.includes('time')) {\r\n        type = 'date';\r\n      } else if (colName.includes('id') || colName.includes('number') || colName.includes('count')) {\r\n        type = 'number';\r\n      } else if (colName.includes('email')) {\r\n        type = 'email';\r\n      } else if (colName.includes('phone')) {\r\n        type = 'tel';\r\n      }\r\n\r\n      return {\r\n        column: col.id, // Use stable column ID\r\n        label: col.label || `Column ${colIdx + 1}`,\r\n        type: type,\r\n        required: false, // Default to optional\r\n      };\r\n    });\r\n\r\n    return fields;\r\n  }, []);\r\n  \r\n  // Template management functions (DB-backed)\r\n  const handleSaveTemplate = useCallback(async () => {\r\n    if (!templateName.trim()) {\r\n      showToast('Template name is required', 'warning');\r\n      return;\r\n    }\r\n    \r\n    // Check if template exists in DB\r\n    const existing = templates.find(t => t.name === templateName.trim() || t.slug === templateName.trim().toLowerCase().replace(/[^\\w\\s-]/g, '').replace(/[\\s_-]+/g, '-'));\r\n    if (existing) {\r\n      setOverwriteTemplateDialogOpen(true);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const normalized = normalizeTableData(\r\n        tableData,\r\n        tableData.rows.length,\r\n        tableData.columns.length\r\n      );\r\n\r\n      const fields = convertTableToDbTemplate(normalized);\r\n      const slug = templateName.trim().toLowerCase().replace(/[^\\w\\s-]/g, '').replace(/[\\s_-]+/g, '-').replace(/^-+|-+$/g, '');\r\n\r\n      const templateData = {\r\n        name: templateName.trim(),\r\n        slug: slug,\r\n        record_type: templateRecordType,\r\n        description: templateDescription.trim() || null,\r\n        fields: fields,\r\n        grid_type: 'aggrid',\r\n        theme: 'liturgicalBlueGold',\r\n        layout_type: 'table',\r\n        is_editable: true,\r\n        church_id: null,\r\n        is_global: templateIsGlobal,\r\n      };\r\n\r\n      const response = await adminAPI.templates.create(templateData);\r\n      \r\n      if (response.success) {\r\n        const savedTemplateName = templateName.trim();\r\n        await loadTemplatesFromDb();\r\n        setTemplateName('');\r\n        setTemplateDescription('');\r\n        setTemplateRecordType('custom');\r\n        setTemplateIsGlobal(false);\r\n        setSaveTemplateDialogOpen(false);\r\n        showToast(`Saved template: ${savedTemplateName}`, 'success');\r\n      } else {\r\n        showToast('Failed to save template', 'error');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error saving template:', error);\r\n      const errorMessage = error?.response?.data?.error || error?.message || 'Unknown error';\r\n      showToast(`Failed to save template: ${errorMessage}`, 'error');\r\n    }\r\n  }, [templateName, templateRecordType, templateDescription, templateIsGlobal, tableData, templates, convertTableToDbTemplate, loadTemplatesFromDb, showToast]);\r\n  \r\n  const handleOverwriteTemplate = useCallback(async () => {\r\n    try {\r\n      const existing = templates.find(t => t.name === templateName.trim() || t.slug === templateName.trim().toLowerCase().replace(/[^\\w\\s-]/g, '').replace(/[\\s_-]+/g, '-'));\r\n      if (!existing) {\r\n        showToast('Template not found', 'error');\r\n        return;\r\n      }\r\n\r\n      const normalized = normalizeTableData(\r\n        tableData,\r\n        tableData.rows.length,\r\n        tableData.columns.length\r\n      );\r\n\r\n      const fields = convertTableToDbTemplate(normalized);\r\n\r\n      const templateData = {\r\n        record_type: templateRecordType,\r\n        description: templateDescription.trim() || null,\r\n        fields: fields,\r\n        is_global: templateIsGlobal,\r\n      };\r\n\r\n      const response = await adminAPI.templates.update(existing.slug, templateData);\r\n      \r\n      if (response.success) {\r\n        const updatedTemplateName = templateName.trim();\r\n        await loadTemplatesFromDb();\r\n        setTemplateName('');\r\n        setTemplateDescription('');\r\n        setTemplateRecordType('custom');\r\n        setTemplateIsGlobal(false);\r\n        setSaveTemplateDialogOpen(false);\r\n        setOverwriteTemplateDialogOpen(false);\r\n        showToast(`Updated template: ${updatedTemplateName}`, 'success');\r\n      } else {\r\n        showToast('Failed to update template', 'error');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error updating template:', error);\r\n      const errorMessage = error?.response?.data?.error || error?.message || 'Unknown error';\r\n      showToast(`Failed to update template: ${errorMessage}`, 'error');\r\n    }\r\n  }, [templateName, templateRecordType, templateDescription, templateIsGlobal, tableData, templates, convertTableToDbTemplate, loadTemplatesFromDb, showToast]);\r\n  \r\n  const handleLoadTemplate = useCallback(async (slug: string) => {\r\n    if (isDirty()) {\r\n      setTemplateToLoad(slug);\r\n      setLoadTemplateDialogOpen(true);\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      const response = await adminAPI.templates.getBySlug(slug);\r\n      if (!response.success || !response.template) {\r\n        showToast(`Template not found`, 'error');\r\n        return;\r\n      }\r\n\r\n      const template = response.template;\r\n      \r\n      // Handle both formats:\r\n      // 1. Flat array format: [{ column, label, type, required }]\r\n      // 2. Versioned format: { version, columns: [...], ui: {...} }\r\n      let fieldsArray: any[] = [];\r\n      \r\n      if (Array.isArray(template.fields)) {\r\n        // Format 1: Already an array\r\n        fieldsArray = template.fields;\r\n      } else if (template.fields && typeof template.fields === 'object') {\r\n        // Format 2: Versioned structure - extract columns array\r\n        if (template.fields.columns && Array.isArray(template.fields.columns)) {\r\n          fieldsArray = template.fields.columns.map((col: any) => ({\r\n            column: col.name || col.column || `col_${fieldsArray.length}`,\r\n            label: col.label || col.name || col.column,\r\n            type: col.type || 'string',\r\n            required: col.required || false\r\n          }));\r\n        } else {\r\n          throw new Error('Template fields format not recognized');\r\n        }\r\n      } else {\r\n        throw new Error('Template fields is missing or invalid');\r\n      }\r\n      \r\n      // Convert DB template fields back to table structure\r\n      const columns = fieldsArray.map((field: any, index: number) => ({\r\n        id: field.column || `col_${index}`,\r\n        label: field.label || field.column || `Column ${index + 1}`,\r\n      }));\r\n\r\n      // Create empty rows (DB templates don't store row data, just structure)\r\n      const rows = Array.from({ length: DEFAULT_ROWS }, (_, rowIdx) => ({\r\n        id: `row_${rowIdx}`,\r\n        cells: columns.reduce((acc: Record<string, string>, col: any) => {\r\n          acc[col.id] = '';\r\n          return acc;\r\n        }, {}),\r\n      }));\r\n\r\n      const tableData: TableData = { columns, rows };\r\n      const normalized = normalizeTableData(tableData, rows.length, columns.length);\r\n      \r\n      setTableData(normalized);\r\n      historyManagerRef.current.clear();\r\n      historyManagerRef.current.initialize(normalized);\r\n      setCanUndo(false);\r\n      setCanRedo(false);\r\n      setLastSavedState(JSON.stringify(normalized));\r\n      setSelectedTemplate(slug);\r\n      showToast(`Loaded template: ${template.name}`, 'success');\r\n    } catch (error: any) {\r\n      console.error('Error loading template:', error);\r\n      showToast(`Failed to load template: ${error?.message || 'Unknown error'}`, 'error');\r\n    }\r\n  }, [isDirty, showToast]);\r\n  \r\n  const handleConfirmLoadTemplate = useCallback(async () => {\r\n    const slug = templateToLoad;\r\n    try {\r\n      const response = await adminAPI.templates.getBySlug(slug);\r\n      if (!response.success || !response.template) {\r\n        showToast(`Template not found`, 'error');\r\n        setLoadTemplateDialogOpen(false);\r\n        return;\r\n      }\r\n\r\n      const template = response.template;\r\n      \r\n      // Handle both formats (same logic as handleLoadTemplate)\r\n      let fieldsArray: any[] = [];\r\n      \r\n      if (Array.isArray(template.fields)) {\r\n        fieldsArray = template.fields;\r\n      } else if (template.fields && typeof template.fields === 'object') {\r\n        if (template.fields.columns && Array.isArray(template.fields.columns)) {\r\n          fieldsArray = template.fields.columns.map((col: any) => ({\r\n            column: col.name || col.column || `col_${fieldsArray.length}`,\r\n            label: col.label || col.name || col.column,\r\n            type: col.type || 'string',\r\n            required: col.required || false\r\n          }));\r\n        } else {\r\n          throw new Error('Template fields format not recognized');\r\n        }\r\n      } else {\r\n        throw new Error('Template fields is missing or invalid');\r\n      }\r\n      \r\n      const columns = fieldsArray.map((field: any, index: number) => ({\r\n        id: field.column || `col_${index}`,\r\n        label: field.label || field.column || `Column ${index + 1}`,\r\n      }));\r\n\r\n      const rows = Array.from({ length: DEFAULT_ROWS }, (_, rowIdx) => ({\r\n        id: `row_${rowIdx}`,\r\n        cells: columns.reduce((acc: Record<string, string>, col: any) => {\r\n          acc[col.id] = '';\r\n          return acc;\r\n        }, {}),\r\n      }));\r\n\r\n      const tableData: TableData = { columns, rows };\r\n      const normalized = normalizeTableData(tableData, rows.length, columns.length);\r\n      \r\n      setTableData(normalized);\r\n      historyManagerRef.current.clear();\r\n      historyManagerRef.current.initialize(normalized);\r\n      setCanUndo(false);\r\n      setCanRedo(false);\r\n      setLastSavedState(JSON.stringify(normalized));\r\n      setSelectedTemplate(slug);\r\n      setLoadTemplateDialogOpen(false);\r\n      setTemplateToLoad('');\r\n      showToast(`Loaded template: ${template.name}`, 'success');\r\n    } catch (error: any) {\r\n      console.error('Error loading template:', error);\r\n      showToast(`Failed to load template: ${error?.message || 'Unknown error'}`, 'error');\r\n      setLoadTemplateDialogOpen(false);\r\n    }\r\n  }, [templateToLoad, showToast]);\r\n  \r\n  const handleDeleteTemplate = useCallback((slug: string) => {\r\n    setTemplateToDelete(slug);\r\n    setDeleteTemplateDialogOpen(true);\r\n  }, []);\r\n  \r\n  const handleConfirmDeleteTemplate = useCallback(async () => {\r\n    const slug = templateToDelete;\r\n    try {\r\n      const response = await adminAPI.templates.delete(slug);\r\n      if (response.success) {\r\n        await loadTemplatesFromDb();\r\n        setDeleteTemplateDialogOpen(false);\r\n        setTemplateToDelete('');\r\n        if (selectedTemplate === slug) {\r\n          setSelectedTemplate('');\r\n        }\r\n        showToast('Template deleted successfully', 'success');\r\n      } else {\r\n        showToast('Failed to delete template', 'error');\r\n      }\r\n    } catch (error: any) {\r\n      console.error('Error deleting template:', error);\r\n      showToast(`Failed to delete template: ${error?.message || 'Unknown error'}`, 'error');\r\n    }\r\n  }, [templateToDelete, selectedTemplate, loadTemplatesFromDb, showToast]);\r\n  \r\n  const handleExportTemplates = useCallback(async () => {\r\n    try {\r\n      const response = await adminAPI.templates.getAll();\r\n      if (response.success) {\r\n        const json = JSON.stringify(response.templates, null, 2);\r\n        const blob = new Blob([json], { type: 'application/json' });\r\n        const url = URL.createObjectURL(blob);\r\n        const a = document.createElement('a');\r\n        a.href = url;\r\n        const now = new Date();\r\n        const dateStr = now.toISOString().split('T')[0];\r\n        const timeStr = now.toTimeString().split(' ')[0].replace(/:/g, '');\r\n        a.download = `live-table-templates_${dateStr}_${timeStr}.json`;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        document.body.removeChild(a);\r\n        URL.revokeObjectURL(url);\r\n        showToast('Templates exported successfully', 'success');\r\n      } else {\r\n        showToast('Failed to export templates', 'error');\r\n      }\r\n    } catch (e) {\r\n      showToast('Failed to export templates', 'error');\r\n      console.error(e);\r\n    }\r\n  }, [showToast]);\r\n  \r\n  const handleImportTemplates = useCallback(() => {\r\n    setImportTemplatesDialogOpen(true);\r\n    setImportTemplatesJson('');\r\n  }, []);\r\n  \r\n  const handleImportTemplatesFile = useCallback((event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    const reader = new FileReader();\r\n    reader.onload = (e) => {\r\n      try {\r\n        const text = e.target?.result as string;\r\n        if (!text) {\r\n          showToast('Failed to read file', 'error');\r\n          return;\r\n        }\r\n        \r\n        // Validate it's JSON\r\n        JSON.parse(text);\r\n        setImportTemplatesJson(text);\r\n        setImportTemplatesDialogOpen(true);\r\n      } catch (err) {\r\n        showToast('Invalid JSON file', 'error');\r\n        console.error(err);\r\n      }\r\n    };\r\n    reader.onerror = () => {\r\n      showToast('Failed to read file', 'error');\r\n    };\r\n    reader.readAsText(file);\r\n    \r\n    // Reset input\r\n    event.target.value = '';\r\n  }, [showToast]);\r\n  \r\n  const handleImportTemplatesConfirm = useCallback(async () => {\r\n    try {\r\n      if (!importTemplatesJson.trim()) {\r\n        showToast('Please paste template JSON data', 'warning');\r\n        return;\r\n      }\r\n      \r\n      const imported = JSON.parse(importTemplatesJson);\r\n      if (!Array.isArray(imported)) {\r\n        showToast('Invalid template format: expected array', 'error');\r\n        return;\r\n      }\r\n\r\n      let importedCount = 0;\r\n      let errorCount = 0;\r\n\r\n      for (const template of imported) {\r\n        try {\r\n          await adminAPI.templates.create({\r\n            name: template.name,\r\n            slug: template.slug,\r\n            record_type: template.record_type || 'custom',\r\n            description: template.description || null,\r\n            fields: template.fields || [],\r\n            grid_type: template.grid_type || 'aggrid',\r\n            theme: template.theme || 'liturgicalBlueGold',\r\n            layout_type: template.layout_type || 'table',\r\n            is_editable: template.is_editable !== false,\r\n            church_id: template.church_id || null,\r\n            is_global: template.is_global || false,\r\n          });\r\n          importedCount++;\r\n        } catch (error) {\r\n          console.error('Failed to import template:', template.name, error);\r\n          errorCount++;\r\n        }\r\n      }\r\n\r\n      await loadTemplatesFromDb();\r\n      setImportTemplatesDialogOpen(false);\r\n      setImportTemplatesJson('');\r\n      \r\n      if (errorCount > 0) {\r\n        showToast(`Imported ${importedCount} templates. ${errorCount} failed.`, 'warning');\r\n      } else {\r\n        showToast(`Imported ${importedCount} templates successfully`, 'success');\r\n      }\r\n    } catch (e) {\r\n      showToast('Failed to import templates', 'error');\r\n      console.error(e);\r\n    }\r\n  }, [importTemplatesJson, loadTemplatesFromDb, showToast]);\r\n  \r\n  const handleCreateStandardTemplates = useCallback(async () => {\r\n    try {\r\n      const standardHeaders = ['id', 'church_id', 'entry_no', 'date', 'first_name', 'last_name', 'father_name', 'mother_name', 'godfather_name', 'godmother_name', 'notes'];\r\n      const recordTypes: Array<'baptism' | 'marriage' | 'funeral'> = ['baptism', 'marriage', 'funeral'];\r\n      const locales = ['en', 'gr'];\r\n\r\n      let created = 0;\r\n      for (const locale of locales) {\r\n        for (const recordType of recordTypes) {\r\n          const name = `${locale}_${recordType}_records`;\r\n          const slug = name.toLowerCase().replace(/[^\\w\\s-]/g, '').replace(/[\\s_-]+/g, '-');\r\n          \r\n          const fields = standardHeaders.map((header, index) => ({\r\n            column: `col_${index}`,\r\n            label: header,\r\n            type: 'string',\r\n            required: false,\r\n          }));\r\n\r\n          try {\r\n            await adminAPI.templates.create({\r\n              name,\r\n              slug,\r\n              record_type: recordType,\r\n              description: `Standard ${recordType} template for ${locale}`,\r\n              fields,\r\n              grid_type: 'aggrid',\r\n              theme: 'liturgicalBlueGold',\r\n              layout_type: 'table',\r\n              is_editable: true,\r\n              church_id: null,\r\n              is_global: true,\r\n            });\r\n            created++;\r\n          } catch (error) {\r\n            // Template might already exist, skip\r\n            console.log(`Template ${name} may already exist, skipping`);\r\n          }\r\n        }\r\n      }\r\n\r\n      await loadTemplatesFromDb();\r\n      showToast(`Created ${created} standard templates`, 'success');\r\n    } catch (e) {\r\n      showToast('Failed to create standard templates', 'error');\r\n      console.error(e);\r\n    }\r\n  }, [loadTemplatesFromDb, showToast]);\r\n\r\n\r\n  return (\r\n    <Container maxWidth=\"xl\" sx={{ py: 4, height: 'calc(100vh - 120px)', display: 'flex', flexDirection: 'column' }}>\r\n      {/* Header */}\r\n      <Box sx={{ mb: 3 }}>\r\n        <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', mb: 2 }}>\r\n          <Box>\r\n            <Typography variant=\"h4\" gutterBottom>\r\n              Live Table Builder\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Create, edit, and manage tables with clipboard paste support. Data is automatically saved.\r\n            </Typography>\r\n          </Box>\r\n          <IconButton\r\n            onClick={() => setShowTips(!showTips)}\r\n            title=\"Show/hide quick tips\"\r\n            sx={{ ml: 2 }}\r\n          >\r\n            {showTips ? <ExpandLessIcon /> : <ExpandMoreIcon />}\r\n            <HelpIcon sx={{ ml: 0.5 }} />\r\n          </IconButton>\r\n        </Box>\r\n\r\n        {/* Quick Tips */}\r\n        <Collapse in={showTips}>\r\n          <Paper sx={{ p: 2, mb: 2, bgcolor: 'background.default' }}>\r\n            <Typography variant=\"subtitle2\" gutterBottom sx={{ fontWeight: 'bold' }}>\r\n              Quick Tips:\r\n            </Typography>\r\n            <Box component=\"ul\" sx={{ m: 0, pl: 2.5, '& li': { mb: 0.5 } }}>\r\n              <li>Double-click column headers to edit them inline</li>\r\n              <li>Paste data from Excel/Google Sheets directly into cells</li>\r\n              <li>Use <strong>Ctrl+Z</strong> to undo and <strong>Ctrl+Y</strong> to redo</li>\r\n              <li>Export to CSV for Excel compatibility or JSON for data backup</li>\r\n              <li>Import CSV/TSV files with automatic delimiter detection</li>\r\n              <li>All changes are automatically saved to your browser</li>\r\n            </Box>\r\n          </Paper>\r\n        </Collapse>\r\n\r\n        {/* Template Management Section */}\r\n        <Box sx={{ mb: 2, p: 2, border: 1, borderColor: 'divider', borderRadius: 1, bgcolor: 'background.paper' }}>\r\n          <Typography variant=\"subtitle2\" gutterBottom sx={{ fontWeight: 'bold', mb: 1.5 }}>\r\n            Template Management\r\n          </Typography>\r\n          <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap', alignItems: 'center' }}>\r\n            <TextField\r\n              label=\"Template Name\"\r\n              size=\"small\"\r\n              value={templateName}\r\n              onChange={(e) => setTemplateName(e.target.value)}\r\n              placeholder=\"e.g., en_baptism_records\"\r\n              sx={{ width: 200 }}\r\n            />\r\n            <Button\r\n              variant=\"contained\"\r\n              startIcon={<SaveIcon />}\r\n              onClick={() => setSaveTemplateDialogOpen(true)}\r\n              disabled={!templateName.trim()}\r\n              size=\"small\"\r\n            >\r\n              Save Template\r\n            </Button>\r\n            <FormControl size=\"small\" sx={{ minWidth: 200 }}>\r\n              <InputLabel>Load Template</InputLabel>\r\n              <Select\r\n                value={selectedTemplate}\r\n                label=\"Load Template\"\r\n                disabled={loadingTemplates}\r\n                onChange={(e) => {\r\n                  const slug = e.target.value;\r\n                  setSelectedTemplate(slug);\r\n                  if (slug) {\r\n                    handleLoadTemplate(slug);\r\n                  }\r\n                }}\r\n              >\r\n                {loadingTemplates ? (\r\n                  <MenuItem disabled>Loading templates...</MenuItem>\r\n                ) : templates.length === 0 ? (\r\n                  <MenuItem disabled>No templates available</MenuItem>\r\n                ) : (\r\n                  templates.map((template) => (\r\n                    <MenuItem key={template.slug} value={template.slug}>\r\n                      {template.name} {template.is_global ? '(Global)' : ''}\r\n                    </MenuItem>\r\n                  ))\r\n                )}\r\n              </Select>\r\n            </FormControl>\r\n            <Button\r\n              variant=\"outlined\"\r\n              startIcon={<DeleteIcon />}\r\n              onClick={() => {\r\n                if (selectedTemplate) {\r\n                  handleDeleteTemplate(selectedTemplate);\r\n                }\r\n              }}\r\n              disabled={!selectedTemplate}\r\n              color=\"error\"\r\n              size=\"small\"\r\n            >\r\n              Delete\r\n            </Button>\r\n            <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\r\n            <Button\r\n              variant=\"outlined\"\r\n              startIcon={<ExportIcon />}\r\n              onClick={handleExportTemplates}\r\n              size=\"small\"\r\n            >\r\n              Export Templates\r\n            </Button>\r\n            <Button\r\n              variant=\"outlined\"\r\n              startIcon={<ImportIcon />}\r\n              onClick={handleImportTemplates}\r\n              size=\"small\"\r\n            >\r\n              Import Templates\r\n            </Button>\r\n            <input\r\n              accept=\".json\"\r\n              style={{ display: 'none' }}\r\n              id=\"import-templates-file-input\"\r\n              type=\"file\"\r\n              onChange={handleImportTemplatesFile}\r\n            />\r\n            <label htmlFor=\"import-templates-file-input\">\r\n              <Button variant=\"outlined\" component=\"span\" startIcon={<ImportIcon />} size=\"small\">\r\n                Upload Templates\r\n              </Button>\r\n            </label>\r\n            <Button\r\n              variant=\"outlined\"\r\n              startIcon={<AddIcon />}\r\n              onClick={handleCreateStandardTemplates}\r\n              size=\"small\"\r\n              color=\"secondary\"\r\n            >\r\n              Create Standard Templates\r\n            </Button>\r\n            <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\r\n          </Box>\r\n        </Box>\r\n\r\n        {/* Action Buttons */}\r\n        <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap', alignItems: 'center' }}>\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<UndoIcon />}\r\n            onClick={handleUndo}\r\n            disabled={!canUndo}\r\n            title=\"Undo (Ctrl+Z)\"\r\n            size=\"small\"\r\n          >\r\n            Undo\r\n          </Button>\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<RedoIcon />}\r\n            onClick={handleRedo}\r\n            disabled={!canRedo}\r\n            title=\"Redo (Ctrl+Y or Ctrl+Shift+Z)\"\r\n            size=\"small\"\r\n          >\r\n            Redo\r\n          </Button>\r\n          <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<ResetIcon />}\r\n            onClick={handleReset}\r\n            color=\"warning\"\r\n            size=\"small\"\r\n          >\r\n            Reset\r\n          </Button>\r\n          <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<ImportIcon />}\r\n            onClick={handleImport}\r\n            size=\"small\"\r\n          >\r\n            Import JSON\r\n          </Button>\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<ImportIcon />}\r\n            onClick={handleImportCsv}\r\n            size=\"small\"\r\n          >\r\n            Import CSV\r\n          </Button>\r\n          <input\r\n            accept=\".json,.csv,.tsv\"\r\n            style={{ display: 'none' }}\r\n            id=\"import-file-input\"\r\n            type=\"file\"\r\n            onChange={handleImportFile}\r\n          />\r\n          <label htmlFor=\"import-file-input\">\r\n            <Button variant=\"outlined\" component=\"span\" startIcon={<ImportIcon />} size=\"small\">\r\n              Upload File\r\n            </Button>\r\n          </label>\r\n          <Divider orientation=\"vertical\" flexItem sx={{ mx: 1 }} />\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<ExportIcon />}\r\n            onClick={handleExport}\r\n            size=\"small\"\r\n          >\r\n            Export JSON\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            startIcon={<ExportIcon />}\r\n            onClick={handleExportCsv}\r\n            size=\"small\"\r\n          >\r\n            Export CSV\r\n          </Button>\r\n        </Box>\r\n      </Box>\r\n\r\n      {/* Helper Text */}\r\n      <Box sx={{ mb: 2, p: 1.5, bgcolor: 'action.hover', borderRadius: 1 }}>\r\n        <Typography variant=\"body2\" color=\"text.secondary\">\r\n          <strong>Tip:</strong> Paste data from Excel/Google Sheets (Ctrl/Cmd+V) or start typing in any cell. \r\n          All changes are automatically saved.\r\n        </Typography>\r\n      </Box>\r\n\r\n      {/* Table Builder */}\r\n      <Box sx={{ flex: 1, minHeight: 500, display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>\r\n        <LiveTableBuilder\r\n          data={tableData}\r\n          onDataChange={handleDataChange}\r\n          onToast={showToast}\r\n        />\r\n      </Box>\r\n\r\n      {/* Import Dialog */}\r\n      <Dialog open={importDialogOpen} onClose={() => setImportDialogOpen(false)} maxWidth=\"md\" fullWidth>\r\n        <DialogTitle>{importCsv ? 'Import CSV/TSV' : 'Import JSON'}</DialogTitle>\r\n        <DialogContent>\r\n          {importCsv ? (\r\n            <>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={csvFirstRowIsHeader}\r\n                    onChange={(e) => setCsvFirstRowIsHeader(e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"First row is headers\"\r\n                sx={{ mt: 2, mb: 1 }}\r\n              />\r\n              <TextField\r\n                fullWidth\r\n                multiline\r\n                rows={12}\r\n                value={importCsv}\r\n                onChange={(e) => setImportCsv(e.target.value)}\r\n                placeholder=\"Paste CSV/TSV data here...\"\r\n                sx={{ mt: 1 }}\r\n              />\r\n            </>\r\n          ) : (\r\n            <TextField\r\n              fullWidth\r\n              multiline\r\n              rows={12}\r\n              value={importJson}\r\n              onChange={(e) => setImportJson(e.target.value)}\r\n              placeholder=\"Paste JSON data here...\"\r\n              sx={{ mt: 2 }}\r\n            />\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => {\r\n            setImportDialogOpen(false);\r\n            setImportJson('');\r\n            setImportCsv('');\r\n          }}>Cancel</Button>\r\n          {importCsv ? (\r\n            <Button onClick={handleImportCsvConfirm} variant=\"contained\">\r\n              Import CSV\r\n            </Button>\r\n          ) : (\r\n            <Button onClick={handleImportConfirm} variant=\"contained\">\r\n              Import JSON\r\n            </Button>\r\n          )}\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Reset Confirmation Dialog */}\r\n      <Dialog open={resetDialogOpen} onClose={() => setResetDialogOpen(false)}>\r\n        <DialogTitle>Reset Table</DialogTitle>\r\n        <DialogContent>\r\n          <Typography>\r\n            Reset to default 10x6 grid? This will lose all current data.\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setResetDialogOpen(false)}>Cancel</Button>\r\n          <Button onClick={handleResetConfirm} variant=\"contained\" color=\"warning\">\r\n            Reset\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Save Template Dialog */}\r\n      <Dialog open={saveTemplateDialogOpen} onClose={() => setSaveTemplateDialogOpen(false)} maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle>Save Template to Database</DialogTitle>\r\n        <DialogContent>\r\n          <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2, pt: 1 }}>\r\n            <TextField\r\n              fullWidth\r\n              label=\"Template Name\"\r\n              value={templateName}\r\n              onChange={(e) => setTemplateName(e.target.value)}\r\n              placeholder=\"e.g., Standard Baptism Records\"\r\n              required\r\n              autoFocus\r\n            />\r\n            <FormControl fullWidth>\r\n              <InputLabel>Record Type</InputLabel>\r\n              <Select\r\n                value={templateRecordType}\r\n                label=\"Record Type\"\r\n                onChange={(e) => setTemplateRecordType(e.target.value as any)}\r\n              >\r\n                <MenuItem value=\"baptism\">Baptism</MenuItem>\r\n                <MenuItem value=\"marriage\">Marriage</MenuItem>\r\n                <MenuItem value=\"funeral\">Funeral</MenuItem>\r\n                <MenuItem value=\"custom\">Custom</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n            <TextField\r\n              fullWidth\r\n              label=\"Description (optional)\"\r\n              value={templateDescription}\r\n              onChange={(e) => setTemplateDescription(e.target.value)}\r\n              placeholder=\"Template description...\"\r\n              multiline\r\n              rows={2}\r\n            />\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={templateIsGlobal}\r\n                  onChange={(e) => setTemplateIsGlobal(e.target.checked)}\r\n                />\r\n              }\r\n              label=\"Make this template global (available to all churches)\"\r\n            />\r\n          </Box>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => {\r\n            setSaveTemplateDialogOpen(false);\r\n            setTemplateName('');\r\n            setTemplateDescription('');\r\n            setTemplateRecordType('custom');\r\n            setTemplateIsGlobal(false);\r\n          }}>Cancel</Button>\r\n          <Button \r\n            onClick={handleSaveTemplate} \r\n            variant=\"contained\" \r\n            disabled={!templateName.trim()}\r\n          >\r\n            Save\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Overwrite Template Confirmation Dialog */}\r\n      <Dialog open={overwriteTemplateDialogOpen} onClose={() => setOverwriteTemplateDialogOpen(false)}>\r\n        <DialogTitle>Update Template?</DialogTitle>\r\n        <DialogContent>\r\n          <Typography>\r\n            Template \"{templateName}\" already exists in the database. Update it?\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => {\r\n            setOverwriteTemplateDialogOpen(false);\r\n            setTemplateName('');\r\n            setSaveTemplateDialogOpen(false);\r\n          }}>Cancel</Button>\r\n          <Button onClick={handleOverwriteTemplate} variant=\"contained\" color=\"warning\">\r\n            Update\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Delete Template Confirmation Dialog */}\r\n      <Dialog open={deleteTemplateDialogOpen} onClose={() => setDeleteTemplateDialogOpen(false)}>\r\n        <DialogTitle>Delete Template?</DialogTitle>\r\n        <DialogContent>\r\n          <Typography>\r\n            Are you sure you want to delete this template? This action cannot be undone.\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => {\r\n            setDeleteTemplateDialogOpen(false);\r\n            setTemplateToDelete('');\r\n          }}>Cancel</Button>\r\n          <Button onClick={handleConfirmDeleteTemplate} variant=\"contained\" color=\"error\">\r\n            Delete\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Load Template Confirmation Dialog (when dirty) */}\r\n      <Dialog open={loadTemplateDialogOpen} onClose={() => setLoadTemplateDialogOpen(false)}>\r\n        <DialogTitle>Load Template?</DialogTitle>\r\n        <DialogContent>\r\n          <Typography>\r\n            You have unsaved changes. Loading this template will replace your current table. Continue?\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => {\r\n            setLoadTemplateDialogOpen(false);\r\n            setTemplateToLoad('');\r\n          }}>Cancel</Button>\r\n          <Button onClick={handleConfirmLoadTemplate} variant=\"contained\" color=\"warning\">\r\n            Load Template\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Import Templates Dialog */}\r\n      <Dialog open={importTemplatesDialogOpen} onClose={() => setImportTemplatesDialogOpen(false)} maxWidth=\"md\" fullWidth>\r\n        <DialogTitle>Import Templates</DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\r\n            Paste JSON template data. Existing templates with the same name will be overwritten.\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            multiline\r\n            rows={12}\r\n            value={importTemplatesJson}\r\n            onChange={(e) => setImportTemplatesJson(e.target.value)}\r\n            placeholder=\"Paste template JSON here...\"\r\n            sx={{ mt: 1 }}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => {\r\n            setImportTemplatesDialogOpen(false);\r\n            setImportTemplatesJson('');\r\n          }}>Cancel</Button>\r\n          <Button onClick={handleImportTemplatesConfirm} variant=\"contained\" disabled={!importTemplatesJson.trim()}>\r\n            Import Templates\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n\r\n      {/* Toast */}\r\n      <Snackbar\r\n        open={toast.open}\r\n        autoHideDuration={12000}\r\n        onClose={() => setToast({ ...toast, open: false })}\r\n        anchorOrigin={{ vertical: 'center', horizontal: 'center' }}\r\n        sx={{\r\n          position: 'fixed',\r\n          top: '50% !important',\r\n          left: '50% !important',\r\n          transform: 'translate(-50%, -50%) !important',\r\n          zIndex: 10000,\r\n          '& .MuiSnackbar-root': {\r\n            position: 'fixed',\r\n            top: '50% !important',\r\n            left: '50% !important',\r\n            transform: 'translate(-50%, -50%) !important',\r\n          }\r\n        }}\r\n      >\r\n        <Alert\r\n          onClose={() => setToast({ ...toast, open: false })}\r\n          severity={toast.severity}\r\n          sx={{ \r\n            minWidth: '400px',\r\n            maxWidth: '600px',\r\n            fontSize: '1.1rem',\r\n            padding: '16px 20px',\r\n            '& .MuiAlert-message': {\r\n              fontSize: '1.1rem',\r\n              fontWeight: 500,\r\n            },\r\n            '& .MuiAlert-icon': {\r\n              fontSize: '28px',\r\n            }\r\n          }}\r\n        >\r\n          {toast.message}\r\n        </Alert>\r\n      </Snackbar>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default LiveTableBuilderPage;\r\n"],"names":["ExportIcon","createSvgIcon","_jsx","ImportIcon","RedoIcon","RemoveIcon","TransposeIcon","UndoIcon","BeansContext","React","RenderModeContext","showJsComp","compDetails","context","eParent","ref","promise","comp","compGui","destroyed","c","setRef","_a","value","refObj","classesList","list","s","CssClasses","_CssClasses","initialClasses","className","on","res","__spreadValues","key","isComponentStateless","Component2","hasSymbol","getMemoType","reactVersion","React2","isReactVersion17Minus","isReact19","disableFlushSync","runWithoutFlushSync","func","agFlushSync","useFlushSync","fn","ReactDOM","agStartTransition","agUseSyncExternalStore","subscribe","getSnapshot","defaultSnapshot","getNextValueIfDifferent","prev","next","maintainOrder","oldValues","newValues","prevMap","nextMap","i","instanceId","GroupCellRenderer","forwardRef","props","registry","useContext","eGui","useRef","eValueRef","eCheckboxRef","eExpandedRef","eContractedRef","ctrlRef","innerCompDetails","setInnerCompDetails","useState","childCount","setChildCount","setValue","cssClasses","setCssClasses","expandedCssClasses","setExpandedCssClasses","contractedCssClasses","setContractedCssClasses","checkboxCssClasses","setCheckboxCssClasses","useImperativeHandle","useLayoutEffect","setRef2","useCallback","eRef","compProxy","details","valueToDisplay","count","name","displayed","visible","add","groupCellRendererCtrl","useMemo","expandedClassName","contractedClassName","checkboxClassName","useFwRenderer","FwRenderer","useValue","escapedValue","_toString","React3","groupCellRenderer_default","CustomContext","createContext","CustomWrapperComp","params","initialProps","addUpdateCallback","CustomComponentClass","setMethods","_b","useState2","_c","__objRest","setProps","useEffect","newProps","React4","customWrapperComp_default","memo","counter","generateNewKey","ReactComponent","reactComponent","portalManager","componentType","suppressFallbackMethods","AgPromise","resolve","portal","componentWrappingElement","eParentElement","frameworkComponentInstance","args","method","callback","element","__spreadProps","createPortal","createElement","addOptionalMethods","optionalMethodNames","providedMethods","component","methodName","providedMethod","CustomComponentWrapper","AgPromise2","methods","CellRendererComponentWrapper","DateComponentWrapper","date","DragAndDropImageComponentWrapper","iconName","shake","label","icon","FilterComponentWrapper","model","AgPromise3","newParams","awaitFilterPassCallback","FilterDisplayComponentWrapper","AgPromise4","updateFloatingFilterParent","instance","AgPromise5","FloatingFilterComponentProxy","floatingFilterParams","refreshProps","parentModel","FloatingFilterComponentWrapper","FloatingFilterDisplayComponentWrapper","InnerHeaderComponentWrapper","LoadingOverlayComponentWrapper","MenuItemComponentWrapper","active","expanded","result","NoRowsOverlayComponentWrapper","StatusPanelComponentWrapper","ToolPanelComponentWrapper","state","warnReactiveCustomComponents","_warn","MAX_COMPONENT_CREATION_TIME_IN_MS","PortalManager","refresher","wrappingElement","maxComponentCreationTimeMs","curPortal","oldPortal","newPortal","startTime","HeaderCellComp","ctrl","isAlive","useContext2","colId","userCompDetails","setUserCompDetails","useState3","userStyles","setUserStyles","compBean","useRef2","eResize","eHeaderCompWrapper","userCompRef","cssManager","CssClassManager","useCallback2","_EmptyBean","refreshSelectAllGui","selectAllGui","width","styles","sort","_setAriaSort","_removeAriaSort","useLayoutEffect2","useEffect2","userCompStateless","useMemo2","reactUserComp","UserCompClass","React5","headerCellComp_default","memo2","FloatingFilterDisplayComponentProxy","HeaderFilterCellComp","gos","useContext3","useState4","cssBodyClasses","setBodyCssClasses","cssButtonWrapperClasses","setButtonWrapperCssClasses","buttonWrapperAriaHidden","setButtonWrapperAriaHidden","setRenderKey","useRef3","eFloatingFilterBody","eButtonWrapper","eButtonShowMainFilter","userCompResolve","userCompPromise","useCallback3","_EmptyBean2","AgPromise7","eIcon","useLayoutEffect3","useMemo3","bodyClassName","buttonWrapperClassName","reactiveCustomComponents","enableFilterHandlers","floatingFilterCompProxy","setFloatingFilterCompProxy","useEffect3","ProxyClass","floatingFilterProps","React6","headerFilterCellComp_default","memo3","HeaderGroupCellComp","useContext4","useState5","cssResizableClasses","setResizableCssClasses","resizableAriaHidden","setResizableAriaHidden","ariaExpanded","setAriaExpanded","useMemo4","useRef4","useCallback4","_EmptyBean3","hidden","headerCompWrapper","useLayoutEffect4","useEffect4","resizableClassName","React7","headerGroupCellComp_default","memo4","HeaderRowComp","useContext5","topOffset","rowHeight","useMemo5","ariaRowIndex","setAriaRowIndex","useState6","height","setHeight","top","setTop","cellCtrlsRef","useRef5","cellCtrls","setCellCtrls","useCallback5","_EmptyBean4","height2","top2","ctrls","forceOrder","afterScroll","prevCellCtrls","nextCells","rowIndex","style","createCellJsx","cellCtrl","React8","headerRowComp_default","memo5","HeaderRowContainerComp","pinned","setDisplayed","useState7","headerRowCtrls","setHeaderRowCtrls","useContext6","useRef6","eCenterContainer","headerRowCtrlRef","pinnedLeft","pinnedRight","centre","useCallback6","HeaderRowContainerCtrl","left","insertRowsJsx","React9","headerRowContainerComp_default","memo6","GridHeaderComp","useState8","useContext7","useRef7","gridCtrlRef","useCallback7","GridHeaderCtrl","useMemo6","React10","gridHeaderComp_default","memo7","useReactCommentEffect","comment","eForCommentRef","useEffect5","eForComment","eComment","reactComment_default","CellEditorComponentProxy","cellEditorParams","AgPromise8","componentInstance","useEffectOnce","effect","effectFn","useRef8","destroyFn","effectCalled","rendered","setVal","useState9","useEffect6","val","PopupEditorComp","popupEditorWrapper","setPopupEditorWrapper","useState10","beans","useContext8","popupSvc","editSvc","editDetails","eParentCell","useModelPopup","wrapper","ePopupGui","eChildGui","column","rowNode","positionParams","positionCallback","addPopupRes","hideEditorPopup","useLayoutEffect5","_getActiveDomElement","createPortal2","popupEditorComp_default","memo8","jsxEditorProxy","CellEditorClass","isStateless","React11","jsxEditor","jsxEditValue","setCellEditorRef","jsEditorComp","reactInlineEditor","reactPopupEditor","jsPopupEditor","useJsCellRenderer","showDetails","showTools","eCellValue","cellValueVersion","jsCellRendererRef","useContext9","destroyCellRenderer","useCallback8","useEffect7","showValue","jsCompDetails","waitingForToolsSetup","refreshResult","showJsRenderer_default","SkeletonCellRenderer","parent","useRef9","renderDetails","useMemo7","loadingComp","CellRendererClass","React12","CellComp","printLayout","editingCell","useContext10","colIdSanitised","useRef10","setRenderDetails","useState11","setEditDetails","renderKey","includeSelection","setIncludeSelection","includeRowDrag","setIncludeRowDrag","includeDndSource","setIncludeDndSource","setJsEditorComp","forceWrapper","useMemo8","cellAriaRole","eWrapper","cellRendererRef","cellEditorRef","eCellWrapper","cellWrapperDestroyFuncs","setCellValueVersion","setCellValueRef","useCallback9","v","showCellWrapper","cellEditor","editingCancelledByUserComp","CssClassManager2","lastRenderDetails","useLayoutEffect6","oldDetails","newDetails","oldCompDetails","newCompDetails","isPopup","cellEditorPromise","parentEl","setCellWrapperRef","f","addComp","eGui2","_removeFromParent","checkboxSelectionComp","init","spanReady","_EmptyBean5","include","force","setDetails","onReady","popup","popupPosition","compProxy2","editDetails2","editing","current","cellWrapperOrUndefined","setGuiRef","setWrapperRef","reactCellRendererStateless","valueOrCellComp","React13","Suspense","showCellOrEditor","showCellValue","showEditValue","renderCell","cellComp_default","memo9","RowComp","rowCtrl","containerType","useContext11","enableUses","useRef11","domOrderRef","isFullWidth","isDisplayed","setRowIndex","useState12","rowId","setRowId","rowBusinessKey","setRowBusinessKey","cellCtrlsFlushSync","setCellCtrlsFlushSync","fullWidthCompDetails","setFullWidthCompDetails","transform","setTransform","fullWidthCompRef","autoHeightSetup","autoHeightSetupAttempt","setAutoHeightSetupAttempt","useEffect8","eChild","CssClassManager3","cellsChanged","sub","useCallback10","onStoreChange","cellCtrlsUses","cellCtrlsMerged","_EmptyBean6","domOrder","getUpdatedParams","canRefreshFullWidthRef","prevFullWidthCompDetails","useLayoutEffect7","rowStyles","useMemo9","showFullWidthFramework","showCells","reactFullWidthCellRendererStateless","showCellsJsx","React14","showFullWidthFrameworkJsx","FullWidthComp","rowComp_default","memo10","RowContainerComp","useContext12","containerOptions","useMemo10","_getRowContainerOptions","eViewport","useRef12","eContainer","eSpanContainer","rowCtrlsRef","prevRowCtrlsRef","rowCtrlsOrdered","setRowCtrlsOrdered","useState13","isSpanning","spannedRowCtrlsRef","prevSpannedRowCtrlsRef","spannedRowCtrlsOrdered","setSpannedRowCtrlsOrdered","rowContainerCtrlRef","viewportClasses","_getRowViewportClass","containerClasses","_getRowContainerClass","spanClasses","_getRowSpanContainerClass","shouldRenderViewport","topLevelRef","areElementsReady","useCallback11","viewportReady","containerReady","spanContainerReady","areElementsRemoved","updateRowCtrlsOrdered","updateSpannedRowCtrlsOrdered","offset","rowCtrls","useFlush","RowContainerCtrl","setContainerRef","e","setSpanContainerRef","setViewportRef","buildContainer","React15","buildSpanContainer","rowContainerComp_default","memo11","GridBodyComp","useContext13","overlays","rowAnimationClass","setRowAnimationClass","useState14","topHeight","setTopHeight","bottomHeight","setBottomHeight","stickyTopHeight","setStickyTopHeight","stickyTopTop","setStickyTopTop","stickyTopWidth","setStickyTopWidth","stickyBottomHeight","setStickyBottomHeight","stickyBottomBottom","setStickyBottomBottom","stickyBottomWidth","setStickyBottomWidth","topInvisible","setTopInvisible","bottomInvisible","setBottomInvisible","forceVerticalScrollClass","setForceVerticalScrollClass","topAndBottomOverflowY","setTopAndBottomOverflowY","cellSelectableCss","setCellSelectableCss","layoutClass","setLayoutClass","useRef13","CssClassManager4","eRoot","eTop","eStickyTop","eStickyBottom","eBody","eBodyViewport","eBottom","beansToDestroy","destroyFuncs","useCallback12","attachToDom","newComp","compClass","FakeHScrollComp","overlayComp","FakeVScrollComp","_setAriaColCount","_setAriaRowCount","cssClass","flag","listener","unsubscribeFromResize","_observeResize","role","GridBodyCtrl","rootClasses","useMemo11","bodyViewportClasses","bodyClasses","topClasses","stickyTopClasses","stickyBottomClasses","bottomClasses","topStyle","stickyTopStyle","stickyBottomStyle","bottomStyle","createRowContainer","container","React16","createSection","section","children","gridBodyComp_default","memo12","TabGuardCompRef","forwardRef4","eFocusableElement","onTabKeyDown","gridCtrl","forceFocusOutWhenTabGuardsAreEmpty","isEmpty","useContext14","topTabGuardRef","useRef14","bottomTabGuardRef","tabGuardCtrlRef","setTabIndex","processedValue","tabGuard","useImperativeHandle2","up","setupCtrl","useCallback13","topTabGuard","bottomTabGuard","TabGuardCtrl","fromBottom","setTopRef","setBottomRef","createTabGuard","side","TabGuardClassNames","React17","TabGuardComp","forwardRef2","tabGuardComp_default","memo13","GridComp","rtlClass","setRtlClass","useState15","cursor","setCursor","userSelect","setUserSelect","initialised","setInitialised","tabGuardReady","setTabGuardReady","useRef15","eRootWrapperRef","tabGuardRef","eGridBodyParent","setGridBodyParent","focusInnerElementRef","paginationCompRef","focusableContainersRef","useCallback14","useMemo12","GridCtrl","comps","gridBodyCompEl","useEffect9","eRootWrapper","watermarkSelector","paginationSelector","sideBarSelector","statusBarSelector","gridHeaderDropZonesSelector","additionalEls","headerDropZonesComp","sideBarComp","addComponentToDom","paginationComp","el","rootWrapperClasses","rootWrapperBodyClasses","setTabGuardCompRef","isFocusable","React18","gridComp_default","memo14","RenderStatusService","BeanStub","deprecatedProps","reactPropsNotGridOptions","excludeReactCompProps","deprecatedReactCompProps","AgGridReactUi","apiRef","useRef16","whenReadyFuncs","prevProps","frameworkOverridesRef","gridIdRef","ready","setContext","useState16","setPortalRefresher","useCallback15","modules","mergedGridOps","_combineAttributesAndGridOptions","processQueuedUpdates","getFn","frameworkOverrides","ReactFrameworkOverrides","renderStatus","gridParams","ReactFrameworkComponentWrapper","createUiCallback","context2","api","acceptChangesCallback","gridCoreCreator","GridCoreCreator","useMemo13","processWhenReady","useEffect10","changes","extractGridPropertyChanges","_processOnChange","renderMode","React19","_getGridOption","nextProps","propKey","_warn2","propValue","BaseComponentWrapper","gridOptions","UserReactComponent","ComponentClass","propertyName","DetailCellRenderer","forwardRef3","useContext15","rowModel","gridCssClasses","setGridCssClasses","detailGridOptions","setDetailGridOptions","detailRowData","setDetailRowData","eGuiRef","resizeObserverDestroyFunc","parentModules","_getGridRegisteredModules","topClassName","gridClassName","useImperativeHandle3","rowData","checkRowSizeFunc","clientHeight","_isClientSideRowModel","_isServerSideRowModel","_observeResize2","registerGridApi","VanillaFrameworkOverrides","source","prototype","AgGridReact","Component","React20","parseClipboardData","clipboardText","lines","line","sample","tabCount","commaCount","semicolonCount","delimiter","rows","maxCols","parsedRow","currentField","inQuotes","char","nextChar","normalizedRows","row","normalized","EditableHeader","displayName","onHeaderValueChange","isEditing","setIsEditing","editValue","setEditValue","inputRef","handleStartEdit","handleSave","trimmed","handleCancel","handleKeyDown","jsx","TextField","jsxs","IconButton","EditIcon","MIN_ROWS","MAX_ROWS","MIN_COLS","MAX_COLS","clamp","min","max","generateStableColumnId","index","generateStableRowId","generateColumnLabel","normalizeTableData","prevData","rowCount","colCount","safeRowCount","safeColCount","columns","existingColumns","stableId","existingCol","col","existingRows","oldToNewColMap","oldCol","oldIndex","existingRow","cells","colIndex","cellValue","oldColId","validateDimensions","cols","LiveTableBuilder","data","onDataChange","onToast","gridRef","gridWrapRef","gridApi","setGridApi","normalizedData","columnDefs","fallback","_d","newValue","updatedColumns","rowObj","onGridReady","onCellValueChanged","event","updatedRows","handleAddRow","newRowIndex","newRow","updatedData","handleRemoveRow","handleAddColumn","newColCount","handleRemoveColumn","handleEnhancedPaste","parsed","focusedCell","startRowIndex","startColId","startColIndex","neededRows","neededCols","expandedData","rowOffset","targetRowIndex","targetRow","colOffset","targetColIndex","pasteHandler","gridElement","onPasteStartEvent","onPasteEnd","node","onRowDataUpdated","handleTranspose","cellMatrix","transposedMatrix","j","newRowCount","transposedData","_","handleSetDimensions","safeRows","safeCols","Box","Tooltip","AddIcon","Button","escapeCsvField","field","str","tableDataToCsv","headerRow","rowValues","generateCsvFilename","now","year","month","day","hours","minutes","parsedDataToTableData","parsedData","firstRowIsHeader","dataRows","colLetter","parseCsvTextToTableData","csvText","MAX_HISTORY_SIZE","HistoryManager","__publicField","initialState","STORAGE_KEY","DEFAULT_ROWS","DEFAULT_COLS","createDefaultData","LiveTableBuilderPage","tableData","setTableData","importDialogOpen","setImportDialogOpen","resetDialogOpen","setResetDialogOpen","importJson","setImportJson","importCsv","setImportCsv","csvFirstRowIsHeader","setCsvFirstRowIsHeader","showTips","setShowTips","historyManagerRef","canUndo","setCanUndo","canRedo","setCanRedo","toast","setToast","templateName","setTemplateName","selectedTemplate","setSelectedTemplate","templates","setTemplates","saveTemplateDialogOpen","setSaveTemplateDialogOpen","overwriteTemplateDialogOpen","setOverwriteTemplateDialogOpen","deleteTemplateDialogOpen","setDeleteTemplateDialogOpen","templateToDelete","setTemplateToDelete","loadTemplateDialogOpen","setLoadTemplateDialogOpen","templateToLoad","setTemplateToLoad","importTemplatesDialogOpen","setImportTemplatesDialogOpen","importTemplatesJson","setImportTemplatesJson","lastSavedState","setLastSavedState","templateRecordType","setTemplateRecordType","templateDescription","setTemplateDescription","templateIsGlobal","setTemplateIsGlobal","loadingTemplates","setLoadingTemplates","showToast","message","severity","loadTemplatesFromDb","__async","response","adminAPI","t","error","saved","defaultData","handleDataChange","currentDataStr","newDataStr","handleUndo","previousState","handleRedo","nextState","handleExport","json","blob","url","a","handleImport","handleImportCsv","handleImportCsvConfirm","importedData","errorMsg","handleImportConfirm","handleImportFile","file","reader","text","fileName","normalizedJson","err","handleExportCsv","csv","handleReset","handleResetConfirm","isDirty","convertTableToDbTemplate","colIdx","type","colName","handleSaveTemplate","fields","slug","templateData","savedTemplateName","errorMessage","handleOverwriteTemplate","existing","updatedTemplateName","handleLoadTemplate","template","fieldsArray","rowIdx","acc","handleConfirmLoadTemplate","handleDeleteTemplate","handleConfirmDeleteTemplate","handleExportTemplates","dateStr","timeStr","handleImportTemplates","handleImportTemplatesFile","handleImportTemplatesConfirm","imported","importedCount","errorCount","handleCreateStandardTemplates","standardHeaders","recordTypes","locales","created","locale","recordType","header","Container","Typography","ExpandLessIcon","ExpandMoreIcon","HelpIcon","Collapse","Paper","SaveIcon","FormControl","InputLabel","Select","MenuItem","DeleteIcon","Divider","ResetIcon","Dialog","DialogTitle","DialogContent","Fragment","FormControlLabel","Checkbox","DialogActions","Snackbar","Alert"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6]}