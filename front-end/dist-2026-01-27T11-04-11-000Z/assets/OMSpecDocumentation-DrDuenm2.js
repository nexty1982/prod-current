var Es=Object.defineProperty,Ps=Object.defineProperties;var Ws=Object.getOwnPropertyDescriptors;var Ke=Object.getOwnPropertySymbols;var Us=Object.prototype.hasOwnProperty,$s=Object.prototype.propertyIsEnumerable;var Je=(c,u,y)=>u in c?Es(c,u,{enumerable:!0,configurable:!0,writable:!0,value:y}):c[u]=y,g=(c,u)=>{for(var y in u||(u={}))Us.call(u,y)&&Je(c,y,u[y]);if(Ke)for(var y of Ke(u))$s.call(u,y)&&Je(c,y,u[y]);return c},j=(c,u)=>Ps(c,Ws(u));var G=(c,u,y)=>new Promise((k,O)=>{var _=F=>{try{U(y.next(F))}catch(R){O(R)}},X=F=>{try{U(y.throw(F))}catch(R){O(R)}},U=F=>F.done?k(F.value):Promise.resolve(F.value).then(_,X);U((y=y.apply(c,u)).next())});import{c as ue,m as Os,j as e,B as n,s as J,d as r,S as f,e as B,I as z,a0 as M,a1 as E,a2 as P,f as a,aL as _s,h as W,Q as Xe,R as Ye,U as Fe,O as K,$ as xe,C as we,J as Se,Y as Te,A as he,K as ze,a3 as Ie,D as Qe}from"./index-BDfVhljI.js";import{r as x}from"./vendor-DgfDxsY7.js";import{T as Rs,a as Ze}from"./Tabs-VYJhMi1b.js";import{I as es}from"./IconUpload-C5j-1IjY.js";import{I as Ls}from"./IconLayoutGrid-CmNjGg-q.js";import{I as ss}from"./IconDownload-DEBALIfv.js";import{I as Ns}from"./IconArrowRight-BQTa9f96.js";import{T as ts,a as rs,b as as,c as ne,d as ns}from"./TableRow-CY_CMYLL.js";import{T as h}from"./TableCell-Cc2Re30I.js";import{I as Hs}from"./IconFilter-9kqHDLTW.js";import{I as Vs}from"./IconSearch-B_Nt8Cv2.js";import{I as qs}from"./IconEye-6WTDXQYV.js";import{I as is}from"./IconEdit-CBkoJ5aC.js";import{I as De}from"./IconTrash-J025iv32.js";import{P as Gs}from"./Pagination-ijqfgQom.js";import{L as ls}from"./LinearProgress-D2-YLZ1_.js";import{D as Ks}from"./Drawer-BXEu_Uoo.js";import{I as Js}from"./IconCheck-CCb7Bi7d.js";import{C as Xs}from"./Container-BKAz2gqg.js";import{I as Ys}from"./IconCode-B53lY3iE.js";import{I as os}from"./IconFileText-ChY8LSzr.js";import"./KeyboardArrowRight-n0bX-S0N.js";import"./LastPage-DImRq0Fq.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M8 11h8v7h-8z",key:"svg-2"}],["path",{d:"M8 15h8",key:"svg-3"}],["path",{d:"M11 11v7",key:"svg-4"}]],Zs=ue("outline","file-spreadsheet","FileSpreadsheet",Qs);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}]],ie=ue("outline","file","File",et);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=[["path",{d:"M9 6l11 0",key:"svg-0"}],["path",{d:"M9 12l11 0",key:"svg-1"}],["path",{d:"M9 18l11 0",key:"svg-2"}],["path",{d:"M5 6l0 .01",key:"svg-3"}],["path",{d:"M5 12l0 .01",key:"svg-4"}],["path",{d:"M5 18l0 .01",key:"svg-5"}]],tt=ue("outline","list","List",st);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]],at=ue("outline","table","Table",rt),nt=J(Xs)(({theme:c})=>({paddingTop:c.spacing(4),paddingBottom:c.spacing(4),minHeight:"100vh"})),it=J(n)(({theme:c})=>({position:"relative",width:"100%",maxWidth:"1200px",margin:"0 auto",marginBottom:c.spacing(4)})),lt=J(Fe)(({theme:c})=>({width:"100%",minHeight:"400px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:c.spacing(4),backgroundColor:c.palette.mode==="dark"?"#1a1a1a":"#f5f5f5",borderRadius:"8px",[c.breakpoints.down("md")]:{minHeight:"300px"},[c.breakpoints.down("sm")]:{minHeight:"250px"}})),cs=J(z)(({theme:c})=>({position:"absolute",top:"50%",transform:"translateY(-50%)",backgroundColor:"rgba(0, 0, 0, 0.5)",color:"#ffffff",zIndex:10,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.7)"},[c.breakpoints.down("sm")]:{padding:"8px"}})),ot=J(n)(({theme:c})=>({display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:c.spacing(2),marginTop:c.spacing(4),[c.breakpoints.down("sm")]:{gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:c.spacing(1.5)}})),ct=J(Fe)(({theme:c})=>({position:"relative",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease","&:hover":{transform:"scale(1.05)",boxShadow:c.shadows[8]}})),Et=()=>{var qe;const c=Os(),[u,y]=x.useState(0),[k,O]=x.useState([]),[_,X]=x.useState(0),[U,F]=x.useState("details"),[R,ds]=x.useState("date"),[Y,xs]=x.useState("desc"),[hs,pe]=x.useState(!1),[L,Ae]=x.useState(!1),[ge,Q]=x.useState(0),[Be,$]=x.useState(null),[S,Z]=x.useState([]),[us,I]=x.useState({}),ee=x.useRef(null),[Me,Ee]=x.useState([]),[ps,Pe]=x.useState(!1),[N,H]=x.useState(null),[d,gs]=x.useState(null),[js,se]=x.useState(!1),[i,w]=x.useState(null),[ms,te]=x.useState(!1),[re,le]=x.useState(null),[fs,oe]=x.useState(!1),[v,We]=x.useState(!1),[ae,Ue]=x.useState(!1),[m,ys]=x.useState({status:"",category:"",type:"",visibility:"",search:"",page:1,limit:50}),[$e,vs]=x.useState({total:0,totalPages:0}),je=[".docx",".xlsx",".md",".json",".txt",".pdf",".tsx",".ts",".html",".js"];x.useEffect(()=>{u===0&&_e()},[u]),x.useEffect(()=>{u===1&&be()},[u,m]);const Oe=s=>[...s].sort((l,o)=>{let b=0;switch(R){case"date":b=new Date(l.uploadedAt).getTime()-new Date(o.uploadedAt).getTime();break;case"name":b=l.name.localeCompare(o.name);break;case"size":b=l.size-o.size;break;case"type":b=l.type.localeCompare(o.type);break;default:b=0}return Y==="asc"?b:-b}),_e=()=>G(void 0,null,function*(){try{const s=yield fetch("/api/docs/files",{credentials:"include"});if(s.ok){const t=yield s.json(),l=Oe(t.files||[]);O(l)}else console.warn("Could not load files from API. Backend endpoint /api/docs/files may not be implemented."),console.warn("Files should be in: front-end/public/docs"),console.warn("Backend needs to implement GET /api/docs/files to list files from /var/www/orthodoxmetrics/prod/front-end/public/docs"),O([])}catch(s){console.error("Error loading files:",s),console.error("Backend endpoint /api/docs/files is required. Files should be in: front-end/public/docs"),O([])}});x.useEffect(()=>{if(k.length>0){const s=Oe(k);O(s)}},[R,Y]);const bs=()=>{X(s=>s===0?k.length-1:s-1)},Cs=()=>{X(s=>s===k.length-1?0:s+1)},me=s=>{X(s)},ks=s=>{const t=Array.from(s.target.files||[]);if(t.length===0)return;const l=[],o=[];t.forEach(b=>{var D;const T="."+((D=b.name.split(".").pop())==null?void 0:D.toLowerCase());if(!je.includes(T)){o.push(`${b.name}: Invalid file type. Allowed: ${je.join(", ")}`);return}if(b.size>50*1024*1024){o.push(`${b.name}: File size must be less than 50MB`);return}l.push(b)}),o.length>0?$(o.join(`
`)):$(null),l.length>0&&Z(b=>[...b,...l])},fe=(s,t=64)=>{switch(s){case"docx":return e.jsx(os,{size:t});case"xlsx":return e.jsx(Zs,{size:t});case"md":case"txt":return e.jsx(os,{size:t});case"json":case"tsx":case"ts":case"js":case"html":return e.jsx(Ys,{size:t});case"pdf":return e.jsx(ie,{size:t});default:return e.jsx(ie,{size:t})}},V=s=>{switch(s){case"docx":return"#2B579A";case"xlsx":return"#1D6F42";case"md":return"#083FA1";case"json":return"#F7DF1E";case"txt":return"#808080";case"pdf":return"#DC143C";case"tsx":case"ts":return"#3178C6";case"html":return"#E34C26";case"js":return"#F7DF1E";default:return"#666"}},ce=s=>{if(s===0)return"0 Bytes";const t=1024,l=["Bytes","KB","MB","GB"],o=Math.floor(Math.log(s)/Math.log(t));return Math.round(s/Math.pow(t,o)*100)/100+" "+l[o]},ye=s=>new Date(s).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),ws=s=>new Promise((t,l)=>{const o=new FormData;o.append("file",s);const b=new Date().toISOString().replace(/[:.]/g,"-");o.append("timestamp",b);const T=new XMLHttpRequest,D=`${s.name}-${s.size}`;I(p=>j(g({},p),{[D]:{progress:0,status:"uploading"}})),T.upload.addEventListener("progress",p=>{if(p.lengthComputable){const C=p.loaded/p.total*100;I(de=>{const Ge=j(g({},de),{[D]:j(g({},de[D]),{progress:C,status:"uploading"})}),ke=Object.values(Ge),As=ke.length>0?ke.reduce((Bs,Ms)=>Bs+Ms.progress,0)/ke.length:0;return Q(As),Ge})}}),T.addEventListener("load",()=>{if(T.status===200)try{const p=JSON.parse(T.responseText);if(p.success)I(C=>j(g({},C),{[D]:{progress:100,status:"success"}})),t();else{const C=p.error||p.message||"Upload failed";I(de=>j(g({},de),{[D]:{progress:0,status:"error",error:C}})),l(new Error(C))}}catch(p){I(C=>j(g({},C),{[D]:{progress:100,status:"success"}})),t()}else{let p="Upload failed";try{const C=JSON.parse(T.responseText);p=C.error||C.message||p}catch(C){T.status===500?p="Internal server error. Please check server logs.":T.status===404?p="Upload endpoint not found. Backend needs to implement POST /api/docs/upload":p=`Upload failed with status ${T.status}`}I(C=>j(g({},C),{[D]:{progress:0,status:"error",error:p}})),l(new Error(p))}}),T.addEventListener("error",()=>{const p="Upload failed. Backend endpoint /api/docs/upload may not be available. Files should upload to: front-end/public/docs";I(C=>j(g({},C),{[D]:{progress:0,status:"error",error:p}})),l(new Error(p))}),T.open("POST","/api/docs/upload"),T.withCredentials=!0,T.send(o)}),Ss=()=>G(void 0,null,function*(){if(S.length===0){$("Please select at least one file");return}Ae(!0),$(null),Q(0);const s={};S.forEach(t=>{const l=`${t.name}-${t.size}`;s[l]={progress:0,status:"pending"}}),I(s);try{const t=[];for(const l of S)try{yield ws(l)}catch(o){t.push(`${l.name}: ${o.message||"Upload failed"}`)}t.length>0?$(`Some files failed to upload:
${t.join(`
`)}`):(_e(),pe(!1),Z([]),I({}),Q(0),ee.current&&(ee.current.value=""))}catch(t){$(t.message||"An error occurred during upload")}finally{Ae(!1)}}),Re=s=>{const t=`/api/docs/download/${encodeURIComponent(s.path)}`;window.open(t,"_blank")},Ts=()=>{pe(!0),Z([]),$(null),Q(0),I({})},ve=()=>{L||(pe(!1),Z([]),$(null),Q(0),I({}),ee.current&&(ee.current.value=""))},zs=s=>{Z(t=>t.filter((l,o)=>o!==s))},be=()=>G(void 0,null,function*(){Pe(!0),H(null);try{const s=new URLSearchParams;m.status&&s.append("status",m.status),m.category&&s.append("category",m.category),m.type&&s.append("type",m.type),m.visibility&&s.append("visibility",m.visibility),m.search&&s.append("search",m.search),s.append("page",m.page.toString()),s.append("limit",m.limit.toString());const t=yield fetch(`/api/omai/tasks?${s.toString()}`,{credentials:"include"});if(!t.ok)throw new Error("Failed to fetch tasks");const l=yield t.json();if(l.success)Ee(l.data||[]),vs(l.pagination||{total:0,totalPages:0});else throw new Error(l.error||"Failed to load tasks")}catch(s){H(s.message||"Failed to load tasks"),Ee([])}finally{Pe(!1)}}),q=(s,t)=>{ys(l=>j(g({},l),{[s]:t,page:1}))},Is=s=>{gs(s),se(!0)},Le=s=>{w(g({},s)),te(!0),se(!1)},Ne=s=>{le(s),oe(!0),se(!1)},Ds=()=>G(void 0,null,function*(){if(i){We(!0);try{const s=yield fetch(`/api/omai/tasks/${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({title:i.title,category:i.category,importance:i.importance,details:i.details,tags:i.tags,attachments:i.attachments,status:i.status,type:i.type,visibility:i.visibility,date_created:i.date_created,date_completed:i.date_completed,assignedTo:i.assigned_to,assignedBy:i.assigned_by,notes:i.notes,remindMe:!1,revisions:i.revisions})}),t=yield s.json();if(!s.ok)throw new Error(t.error||"Failed to update task");if(t.success)te(!1),w(null),be();else throw new Error(t.error||"Failed to update task")}catch(s){H(s.message||"Failed to update task")}finally{We(!1)}}}),Fs=()=>G(void 0,null,function*(){if(re){Ue(!0);try{const s=yield fetch(`/api/omai/tasks/${re.id}`,{method:"DELETE",credentials:"include"}),t=yield s.json();if(!s.ok)throw new Error(t.error||"Failed to delete task");if(t.success)oe(!1),le(null),be();else throw new Error(t.error||"Failed to delete task")}catch(s){H(s.message||"Failed to delete task")}finally{Ue(!1)}}}),He=s=>({1:"Pending",2:"Assigned",3:"In Progress",4:"Review",5:"Testing",6:"On Hold",7:"Completed"})[s]||`Status ${s}`,Ve=s=>({critical:"#d32f2f",high:"#f57c00",medium:"#fbc02d",low:"#388e3c"})[s]||"#757575",Ce=s=>s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",A=k[_];return e.jsxs(n,{sx:{minHeight:"100vh",display:"flex",flexDirection:"column"},children:[e.jsxs(nt,{maxWidth:"lg",children:[e.jsxs(n,{sx:{textAlign:"center",mb:4},children:[e.jsx(r,{variant:"h2",component:"h1",sx:{fontWeight:700,mb:2,fontFamily:'"Cormorant Garamond", "Palatino Linotype", "Book Antiqua", Palatino, Georgia, serif'},children:"OM Specification Documentation"}),e.jsx(r,{variant:"body1",color:"text.secondary",sx:{mb:3},children:u===0?"Manage and organize documentation files":"View and manage OMAI internal tasks"}),e.jsx(n,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:e.jsxs(Rs,{value:u,onChange:(s,t)=>y(t),centered:!0,children:[e.jsx(Ze,{icon:e.jsx(ie,{size:20}),label:"Documentation",iconPosition:"start"}),e.jsx(Ze,{icon:e.jsx(tt,{size:20}),label:"Tasks",iconPosition:"start"})]})}),u===0&&e.jsxs(e.Fragment,{children:[e.jsx(n,{sx:{mb:4,display:"flex",justifyContent:"center"},children:e.jsx("img",{src:"/images/incode/om-archives.png",alt:"OM Archives",style:{maxWidth:"100%",height:"auto",maxHeight:"200px",objectFit:"contain"},onError:s=>{console.warn("OM Archives image not found")}})}),e.jsxs(f,{direction:"row",spacing:2,justifyContent:"center",alignItems:"center",sx:{mb:2},children:[e.jsx(B,{variant:"contained",startIcon:e.jsx(es,{size:20}),onClick:Ts,sx:{backgroundColor:"#C8A24B",color:"#1a1a1a","&:hover":{backgroundColor:"#B8923A"}},children:"Upload Documentation"}),e.jsxs(n,{sx:{display:"flex",gap:1,alignItems:"center"},children:[e.jsx(z,{onClick:()=>F("grid"),color:U==="grid"?"primary":"default",title:"Grid View",children:e.jsx(Ls,{size:20})}),e.jsx(z,{onClick:()=>F("details"),color:U==="details"?"primary":"default",title:"Details View",children:e.jsx(at,{size:20})})]})]}),k.length>0&&e.jsxs(n,{sx:{display:"flex",gap:2,justifyContent:"center",alignItems:"center",mb:3,flexWrap:"wrap"},children:[e.jsxs(M,{size:"small",sx:{minWidth:150},children:[e.jsx(E,{children:"Sort By"}),e.jsxs(P,{value:R,label:"Sort By",onChange:s=>ds(s.target.value),children:[e.jsx(a,{value:"date",children:"Date Modified"}),e.jsx(a,{value:"name",children:"Name"}),e.jsx(a,{value:"size",children:"Size"}),e.jsx(a,{value:"type",children:"Type"})]})]}),e.jsx(z,{onClick:()=>xs(Y==="asc"?"desc":"asc"),title:`Sort ${Y==="asc"?"Descending":"Ascending"}`,size:"small",children:Y==="asc"?"↑":"↓"})]})]})]}),u===0&&(k.length===0?e.jsxs(n,{sx:{textAlign:"center",py:8,border:`2px dashed ${c.palette.divider}`,borderRadius:2},children:[e.jsx(ie,{size:64,style:{opacity:.3,marginBottom:16}}),e.jsx(r,{variant:"h6",color:"text.secondary",children:"No documentation files"}),e.jsx(r,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Upload your first documentation file to get started"})]}):e.jsxs(e.Fragment,{children:[e.jsxs(it,{children:[k.length>1&&e.jsx(cs,{onClick:bs,sx:{left:{xs:8,sm:16}},"aria-label":"Previous file",children:e.jsx(_s,{size:24})}),e.jsx(lt,{children:A&&e.jsxs(n,{sx:{textAlign:"center",width:"100%"},children:[e.jsx(n,{sx:{mb:3,color:V(A.type)},children:fe(A.type)}),e.jsx(r,{variant:"h5",sx:{mb:2,fontWeight:600},children:A.name}),e.jsxs(f,{direction:"row",spacing:2,justifyContent:"center",sx:{mb:2},children:[e.jsx(W,{label:A.type.toUpperCase(),size:"small",sx:{backgroundColor:V(A.type),color:"white",fontWeight:600}}),e.jsx(W,{label:ce(A.size),size:"small",variant:"outlined"})]}),e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{mb:3},children:["Uploaded: ",ye(A.uploadedAt)]}),e.jsxs(r,{variant:"caption",color:"text.secondary",sx:{mb:3,display:"block"},children:["Timestamp: ",A.timestamp]}),e.jsx(f,{direction:"row",spacing:2,justifyContent:"center",children:e.jsx(B,{variant:"contained",startIcon:e.jsx(ss,{size:18}),onClick:()=>Re(A),sx:{backgroundColor:"#C8A24B",color:"#1a1a1a","&:hover":{backgroundColor:"#B8923A"}},children:"Download"})})]})}),k.length>1&&e.jsx(cs,{onClick:Cs,sx:{right:{xs:8,sm:16}},"aria-label":"Next file",children:e.jsx(Ns,{size:24})}),k.length>1&&e.jsx(n,{sx:{position:"absolute",bottom:16,left:"50%",transform:"translateX(-50%)",display:"flex",gap:1},children:k.map((s,t)=>e.jsx(n,{onClick:()=>me(t),sx:{width:_===t?24:8,height:8,borderRadius:"4px",backgroundColor:_===t?"#C8A24B":"rgba(255, 255, 255, 0.5)",cursor:"pointer",transition:"all 0.3s ease"}},t))})]}),U==="grid"&&e.jsx(ot,{children:k.map((s,t)=>e.jsx(ct,{onClick:()=>me(t),sx:{border:_===t?"3px solid #C8A24B":"3px solid transparent"},children:e.jsxs(Xe,{children:[e.jsx(n,{sx:{textAlign:"center",mb:2,color:V(s.type)},children:fe(s.type)}),e.jsx(r,{variant:"subtitle1",sx:{fontWeight:600,mb:1},noWrap:!0,children:s.name}),e.jsx(f,{direction:"row",spacing:1,justifyContent:"center",sx:{mb:1},children:e.jsx(W,{label:s.type.toUpperCase(),size:"small",sx:{backgroundColor:V(s.type),color:"white",fontSize:"0.7rem"}})}),e.jsx(r,{variant:"caption",color:"text.secondary",display:"block",sx:{mb:.5},children:ce(s.size)}),e.jsx(r,{variant:"caption",color:"text.secondary",display:"block",children:ye(s.uploadedAt)})]})},t))}),U==="details"&&e.jsx(ts,{component:Ye,sx:{mt:3},children:e.jsxs(rs,{children:[e.jsx(as,{children:e.jsxs(ne,{children:[e.jsx(h,{children:e.jsx("strong",{children:"Name"})}),e.jsx(h,{children:e.jsx("strong",{children:"Type"})}),e.jsx(h,{children:e.jsx("strong",{children:"Size"})}),e.jsx(h,{children:e.jsx("strong",{children:"Date Modified"})}),e.jsx(h,{children:e.jsx("strong",{children:"Actions"})})]})}),e.jsx(ns,{children:k.map((s,t)=>e.jsxs(ne,{hover:!0,onClick:()=>me(t),sx:{cursor:"pointer",backgroundColor:_===t?"action.selected":"inherit","&:hover":{backgroundColor:"action.hover"}},children:[e.jsx(h,{children:e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(n,{sx:{color:V(s.type),display:"flex",alignItems:"center"},children:fe(s.type,20)}),e.jsx(r,{variant:"body2",sx:{fontWeight:600},children:s.name})]})}),e.jsx(h,{children:e.jsx(W,{label:s.type.toUpperCase(),size:"small",sx:{backgroundColor:V(s.type),color:"white",fontWeight:600}})}),e.jsx(h,{children:e.jsx(r,{variant:"body2",children:ce(s.size)})}),e.jsx(h,{children:e.jsx(r,{variant:"body2",color:"text.secondary",children:ye(s.uploadedAt)})}),e.jsx(h,{children:e.jsx(z,{size:"small",onClick:l=>{l.stopPropagation(),Re(s)},color:"primary",title:"Download",children:e.jsx(ss,{size:18})})})]},t))})]})})]})),u===1&&e.jsxs(n,{children:[e.jsx(Fe,{sx:{mb:3},children:e.jsxs(Xe,{children:[e.jsxs(f,{direction:"row",spacing:2,alignItems:"center",sx:{mb:2},children:[e.jsx(Hs,{size:20}),e.jsx(r,{variant:"h6",children:"Filters"})]}),e.jsxs(f,{direction:{xs:"column",md:"row"},spacing:2,children:[e.jsx(K,{label:"Search",size:"small",value:m.search,onChange:s=>q("search",s.target.value),InputProps:{startAdornment:e.jsx(Vs,{size:18,style:{marginRight:8,opacity:.5}})},sx:{flex:1}}),e.jsxs(M,{size:"small",sx:{minWidth:150},children:[e.jsx(E,{children:"Status"}),e.jsxs(P,{value:m.status,label:"Status",onChange:s=>q("status",s.target.value),children:[e.jsx(a,{value:"",children:"All"}),e.jsx(a,{value:"1",children:"Pending"}),e.jsx(a,{value:"2",children:"Assigned"}),e.jsx(a,{value:"3",children:"In Progress"}),e.jsx(a,{value:"4",children:"Review"}),e.jsx(a,{value:"5",children:"Testing"}),e.jsx(a,{value:"6",children:"On Hold"}),e.jsx(a,{value:"7",children:"Completed"})]})]}),e.jsxs(M,{size:"small",sx:{minWidth:200},children:[e.jsx(E,{children:"Category"}),e.jsxs(P,{value:m.category,label:"Category",onChange:s=>q("category",s.target.value),children:[e.jsx(a,{value:"",children:"All"}),e.jsx(a,{value:"ingestion-digitization",children:"Ingestion & Digitization"}),e.jsx(a,{value:"data-structuring-accuracy",children:"Data Structuring & Accuracy"}),e.jsx(a,{value:"workflow-user-experience",children:"Workflow & User Experience"}),e.jsx(a,{value:"platform-infrastructure",children:"Platform & Infrastructure"}),e.jsx(a,{value:"analytics-intelligence",children:"Analytics & Intelligence"})]})]}),e.jsxs(M,{size:"small",sx:{minWidth:150},children:[e.jsx(E,{children:"Type"}),e.jsxs(P,{value:m.type,label:"Type",onChange:s=>q("type",s.target.value),children:[e.jsx(a,{value:"",children:"All"}),e.jsx(a,{value:"documentation",children:"Documentation"}),e.jsx(a,{value:"configuration",children:"Configuration"}),e.jsx(a,{value:"reference",children:"Reference"}),e.jsx(a,{value:"guide",children:"Guide"})]})]}),e.jsxs(M,{size:"small",sx:{minWidth:120},children:[e.jsx(E,{children:"Visibility"}),e.jsxs(P,{value:m.visibility,label:"Visibility",onChange:s=>q("visibility",s.target.value),children:[e.jsx(a,{value:"",children:"All"}),e.jsx(a,{value:"admin",children:"Admin"}),e.jsx(a,{value:"public",children:"Public"})]})]})]})]})}),N&&e.jsx(xe,{severity:"error",sx:{mb:2},children:N}),ps?e.jsx(n,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(we,{})}):e.jsxs(e.Fragment,{children:[e.jsx(ts,{component:Ye,children:e.jsxs(rs,{children:[e.jsx(as,{children:e.jsxs(ne,{children:[e.jsx(h,{children:e.jsx("strong",{children:"Title"})}),e.jsx(h,{children:e.jsx("strong",{children:"Category"})}),e.jsx(h,{children:e.jsx("strong",{children:"Importance"})}),e.jsx(h,{children:e.jsx("strong",{children:"Status"})}),e.jsx(h,{children:e.jsx("strong",{children:"Type"})}),e.jsx(h,{children:e.jsx("strong",{children:"Visibility"})}),e.jsx(h,{children:e.jsx("strong",{children:"Tags"})}),e.jsx(h,{children:e.jsx("strong",{children:"Created"})}),e.jsx(h,{children:e.jsx("strong",{children:"Actions"})})]})}),e.jsx(ns,{children:Me.length===0?e.jsx(ne,{children:e.jsx(h,{colSpan:9,align:"center",sx:{py:4},children:e.jsx(r,{variant:"body2",color:"text.secondary",children:"No tasks found"})})}):Me.map(s=>{var t;return e.jsxs(ne,{hover:!0,children:[e.jsx(h,{children:s.title}),e.jsx(h,{children:e.jsx(W,{label:s.category.replace(/-/g," "),size:"small",variant:"outlined"})}),e.jsx(h,{children:e.jsx(W,{label:s.importance,size:"small",sx:{bgcolor:Ve(s.importance),color:"white",fontWeight:600}})}),e.jsx(h,{children:He(s.status)}),e.jsx(h,{children:s.type}),e.jsx(h,{children:s.visibility}),e.jsx(h,{children:e.jsx(f,{direction:"row",spacing:.5,flexWrap:"wrap",children:(t=s.tags)==null?void 0:t.map((l,o)=>e.jsx(W,{label:l,size:"small",sx:{fontSize:"0.7rem"}},o))})}),e.jsx(h,{children:Ce(s.date_created)}),e.jsx(h,{children:e.jsxs(f,{direction:"row",spacing:.5,children:[e.jsx(z,{size:"small",onClick:()=>Is(s),color:"primary",title:"View details",children:e.jsx(qs,{size:18})}),e.jsx(z,{size:"small",onClick:()=>Le(s),color:"primary",title:"Edit task",children:e.jsx(is,{size:18})}),e.jsx(z,{size:"small",onClick:()=>Ne(s),color:"error",title:"Delete task",children:e.jsx(De,{size:18})})]})})]},s.id)})})]})}),$e.totalPages>1&&e.jsx(n,{sx:{display:"flex",justifyContent:"center",mt:3},children:e.jsx(Gs,{count:$e.totalPages,page:m.page,onChange:(s,t)=>q("page",t),color:"primary"})})]})]})]}),e.jsxs(Se,{open:hs,onClose:ve,maxWidth:"sm",fullWidth:!0,children:[e.jsxs(Te,{children:["Upload Documentation Files",e.jsx(z,{"aria-label":"close",onClick:ve,sx:{position:"absolute",right:8,top:8},children:e.jsx(he,{size:20})})]}),e.jsx(ze,{children:e.jsxs(n,{sx:{mt:2},children:[e.jsx("input",{ref:ee,type:"file",accept:".docx,.xlsx,.md,.json,.txt,.pdf,.tsx,.ts,.html,.js",onChange:ks,style:{display:"none"},id:"file-upload-input",multiple:!0}),e.jsx("label",{htmlFor:"file-upload-input",children:e.jsx(B,{variant:"outlined",component:"span",fullWidth:!0,startIcon:e.jsx(es,{size:20}),sx:{mb:2},children:S.length>0?`Select More Files (${S.length} selected)`:"Select Files"})}),e.jsxs(r,{variant:"caption",color:"text.secondary",display:"block",sx:{mb:2,textAlign:"center"},children:["Allowed formats: ",je.join(", ")," (You can select multiple files)"]}),S.length>0&&e.jsxs(n,{sx:{mb:2},children:[e.jsxs(r,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:["Selected Files (",S.length,"):"]}),e.jsx(f,{spacing:1,children:S.map((s,t)=>{const l=`${s.name}-${s.size}`,o=us[l];return e.jsx(n,{sx:{p:2,bgcolor:"background.default",borderRadius:1,border:"1px solid",borderColor:(o==null?void 0:o.status)==="error"?"error.main":(o==null?void 0:o.status)==="success"?"success.main":"divider"},children:e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[e.jsxs(n,{sx:{flex:1},children:[e.jsx(r,{variant:"body2",sx:{fontWeight:600,mb:.5},children:s.name}),e.jsxs(r,{variant:"caption",color:"text.secondary",display:"block",children:["Size: ",ce(s.size)," | Type: ",s.type||"Unknown"]}),o&&e.jsxs(e.Fragment,{children:[o.status==="uploading"&&e.jsxs(n,{sx:{mt:1},children:[e.jsx(ls,{variant:"determinate",value:o.progress,size:"small"}),e.jsxs(r,{variant:"caption",color:"text.secondary",children:["Uploading... ",Math.round(o.progress),"%"]})]}),o.status==="success"&&e.jsx(r,{variant:"caption",color:"success.main",sx:{mt:.5,display:"block"},children:"✓ Uploaded successfully"}),o.status==="error"&&e.jsxs(r,{variant:"caption",color:"error.main",sx:{mt:.5,display:"block"},children:["✗ ",o.error||"Upload failed"]})]})]}),!L&&e.jsx(z,{size:"small",onClick:()=>zs(t),sx:{ml:1},color:"error",children:e.jsx(he,{size:18})})]})},t)})})]}),L&&S.length>0&&e.jsxs(n,{sx:{mt:2},children:[e.jsxs(r,{variant:"body2",color:"text.secondary",sx:{mb:1},children:["Overall Progress: ",Math.round(ge),"%"]}),e.jsx(ls,{variant:"determinate",value:ge}),e.jsxs(r,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:["Uploading ",S.length," file",S.length>1?"s":"","..."]})]}),Be&&e.jsx(xe,{severity:"error",sx:{mt:2},children:Be})]})}),e.jsxs(Ie,{children:[e.jsx(B,{onClick:ve,disabled:L,children:"Cancel"}),e.jsx(B,{onClick:Ss,variant:"contained",disabled:S.length===0||L,sx:{backgroundColor:"#C8A24B",color:"#1a1a1a","&:hover":{backgroundColor:"#B8923A"}},children:L?`Uploading... (${Math.round(ge)}%)`:`Upload ${S.length} File${S.length!==1?"s":""}`})]})]}),e.jsx(Ks,{anchor:"right",open:js,onClose:()=>se(!1),PaperProps:{sx:{width:{xs:"100%",sm:600}}},children:e.jsxs(n,{sx:{p:3},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(r,{variant:"h5",children:"Task Details"}),e.jsxs(f,{direction:"row",spacing:1,children:[e.jsx(z,{onClick:()=>{d&&Le(d)},color:"primary",title:"Edit task",children:e.jsx(is,{size:20})}),e.jsx(z,{onClick:()=>{d&&Ne(d)},color:"error",title:"Delete task",children:e.jsx(De,{size:20})}),e.jsx(z,{onClick:()=>se(!1),children:e.jsx(he,{size:20})})]})]}),d&&e.jsxs(f,{spacing:3,children:[e.jsxs(n,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Title"}),e.jsx(r,{variant:"h6",children:d.title})]}),e.jsxs(f,{direction:"row",spacing:2,children:[e.jsxs(n,{sx:{flex:1},children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Category"}),e.jsx(W,{label:d.category.replace(/-/g," "),size:"small",variant:"outlined"})]}),e.jsxs(n,{sx:{flex:1},children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Importance"}),e.jsx(W,{label:d.importance,size:"small",sx:{bgcolor:Ve(d.importance),color:"white",fontWeight:600}})]})]}),e.jsxs(f,{direction:"row",spacing:2,children:[e.jsxs(n,{sx:{flex:1},children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Status"}),e.jsx(r,{children:He(d.status)})]}),e.jsxs(n,{sx:{flex:1},children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Type"}),e.jsx(r,{children:d.type})]}),e.jsxs(n,{sx:{flex:1},children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Visibility"}),e.jsx(r,{children:d.visibility})]})]}),e.jsx(Qe,{}),e.jsxs(n,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Details"}),e.jsx(r,{variant:"body2",sx:{whiteSpace:"pre-wrap",bgcolor:c.palette.mode==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",p:2,borderRadius:1,maxHeight:300,overflow:"auto"},children:d.details})]}),d.tags&&d.tags.length>0&&e.jsxs(n,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Tags"}),e.jsx(f,{direction:"row",spacing:1,flexWrap:"wrap",children:d.tags.map((s,t)=>e.jsx(W,{label:s,size:"small"},t))})]}),d.attachments&&d.attachments.length>0&&e.jsxs(n,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Attachments"}),e.jsx(f,{spacing:1,children:d.attachments.map((s,t)=>e.jsx(B,{href:s,target:"_blank",rel:"noopener noreferrer",size:"small",startIcon:e.jsx(ie,{size:16}),children:s},t))})]}),e.jsx(Qe,{}),e.jsxs(f,{direction:"row",spacing:2,children:[e.jsxs(n,{sx:{flex:1},children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Created"}),e.jsx(r,{variant:"body2",children:Ce(d.date_created)})]}),d.date_completed&&e.jsxs(n,{sx:{flex:1},children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Completed"}),e.jsx(r,{variant:"body2",children:Ce(d.date_completed)})]})]}),d.assigned_to&&e.jsxs(n,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Assigned To"}),e.jsx(r,{children:d.assigned_to})]}),d.notes&&e.jsxs(n,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Notes"}),e.jsx(r,{variant:"body2",sx:{whiteSpace:"pre-wrap",bgcolor:c.palette.mode==="dark"?"rgba(255,255,255,0.05)":"rgba(0,0,0,0.02)",p:2,borderRadius:1},children:d.notes})]}),d.revisions&&e.jsxs(n,{children:[e.jsx(r,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Revisions"}),e.jsx(r,{variant:"body2",color:"text.secondary",children:Array.isArray(d.revisions)?`${d.revisions.length} revision(s)`:"No revisions"})]})]})]})}),e.jsxs(Se,{open:ms,onClose:()=>{v||(te(!1),w(null))},maxWidth:"md",fullWidth:!0,children:[e.jsxs(Te,{children:["Edit Task",e.jsx(z,{"aria-label":"close",onClick:()=>{v||(te(!1),w(null))},sx:{position:"absolute",right:8,top:8},disabled:v,children:e.jsx(he,{size:20})})]}),e.jsx(ze,{children:i&&e.jsxs(f,{spacing:3,sx:{mt:1},children:[e.jsx(K,{label:"Title",fullWidth:!0,required:!0,value:i.title,onChange:s=>w(j(g({},i),{title:s.target.value})),disabled:v}),e.jsxs(f,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsxs(M,{fullWidth:!0,required:!0,disabled:v,children:[e.jsx(E,{children:"Category"}),e.jsxs(P,{value:i.category,label:"Category",onChange:s=>w(j(g({},i),{category:s.target.value})),children:[e.jsx(a,{value:"ingestion-digitization",children:"Ingestion & Digitization"}),e.jsx(a,{value:"data-structuring-accuracy",children:"Data Structuring & Accuracy"}),e.jsx(a,{value:"workflow-user-experience",children:"Workflow & User Experience"}),e.jsx(a,{value:"platform-infrastructure",children:"Platform & Infrastructure"}),e.jsx(a,{value:"analytics-intelligence",children:"Analytics & Intelligence"})]})]}),e.jsxs(M,{fullWidth:!0,required:!0,disabled:v,children:[e.jsx(E,{children:"Importance"}),e.jsxs(P,{value:i.importance,label:"Importance",onChange:s=>w(j(g({},i),{importance:s.target.value})),children:[e.jsx(a,{value:"critical",children:"Critical"}),e.jsx(a,{value:"high",children:"High"}),e.jsx(a,{value:"medium",children:"Medium"}),e.jsx(a,{value:"low",children:"Low"})]})]})]}),e.jsxs(f,{direction:{xs:"column",sm:"row"},spacing:2,children:[e.jsxs(M,{fullWidth:!0,required:!0,disabled:v,children:[e.jsx(E,{children:"Status"}),e.jsxs(P,{value:i.status,label:"Status",onChange:s=>w(j(g({},i),{status:Number(s.target.value)})),children:[e.jsx(a,{value:1,children:"Pending"}),e.jsx(a,{value:2,children:"Assigned"}),e.jsx(a,{value:3,children:"In Progress"}),e.jsx(a,{value:4,children:"Review"}),e.jsx(a,{value:5,children:"Testing"}),e.jsx(a,{value:6,children:"On Hold"}),e.jsx(a,{value:7,children:"Completed"})]})]}),e.jsxs(M,{fullWidth:!0,required:!0,disabled:v,children:[e.jsx(E,{children:"Type"}),e.jsxs(P,{value:i.type,label:"Type",onChange:s=>w(j(g({},i),{type:s.target.value})),children:[e.jsx(a,{value:"documentation",children:"Documentation"}),e.jsx(a,{value:"configuration",children:"Configuration"}),e.jsx(a,{value:"reference",children:"Reference"}),e.jsx(a,{value:"guide",children:"Guide"})]})]}),e.jsxs(M,{fullWidth:!0,required:!0,disabled:v,children:[e.jsx(E,{children:"Visibility"}),e.jsxs(P,{value:i.visibility,label:"Visibility",onChange:s=>w(j(g({},i),{visibility:s.target.value})),children:[e.jsx(a,{value:"admin",children:"Admin"}),e.jsx(a,{value:"public",children:"Public"})]})]})]}),e.jsx(K,{label:"Details",fullWidth:!0,required:!0,multiline:!0,rows:6,value:i.details,onChange:s=>w(j(g({},i),{details:s.target.value})),disabled:v}),e.jsx(K,{label:"Tags (comma-separated)",fullWidth:!0,value:((qe=i.tags)==null?void 0:qe.join(", "))||"",onChange:s=>{const t=s.target.value.split(",").map(l=>l.trim()).filter(l=>l);w(j(g({},i),{tags:t}))},disabled:v,helperText:"Enter tags separated by commas (e.g., document-ai, bugfix, feature)"}),e.jsx(K,{label:"Assigned To",fullWidth:!0,value:i.assigned_to||"",onChange:s=>w(j(g({},i),{assigned_to:s.target.value||null})),disabled:v}),e.jsx(K,{label:"Notes",fullWidth:!0,multiline:!0,rows:3,value:i.notes||"",onChange:s=>w(j(g({},i),{notes:s.target.value||null})),disabled:v}),N&&e.jsx(xe,{severity:"error",onClose:()=>H(null),children:N})]})}),e.jsxs(Ie,{children:[e.jsx(B,{onClick:()=>{te(!1),w(null)},disabled:v,children:"Cancel"}),e.jsx(B,{onClick:Ds,variant:"contained",disabled:v||!i,startIcon:v?e.jsx(we,{size:16}):e.jsx(Js,{size:18}),children:v?"Saving...":"Save"})]})]}),e.jsxs(Se,{open:fs,onClose:()=>{ae||(oe(!1),le(null))},children:[e.jsx(Te,{children:"Delete Task"}),e.jsxs(ze,{children:[e.jsxs(r,{children:["Are you sure you want to delete the task ",e.jsxs("strong",{children:['"',re==null?void 0:re.title,'"']}),"?",e.jsx("br",{}),"This action cannot be undone."]}),N&&e.jsx(xe,{severity:"error",sx:{mt:2},onClose:()=>H(null),children:N})]}),e.jsxs(Ie,{children:[e.jsx(B,{onClick:()=>{oe(!1),le(null)},disabled:ae,children:"Cancel"}),e.jsx(B,{onClick:Fs,variant:"contained",color:"error",disabled:ae,startIcon:ae?e.jsx(we,{size:16}):e.jsx(De,{size:18}),children:ae?"Deleting...":"Delete"})]})]})]})};export{Et as default};
//# sourceMappingURL=OMSpecDocumentation-DrDuenm2.js.map
