var b=(i,p,r)=>new Promise((j,d)=>{var h=t=>{try{n(r.next(t))}catch(o){d(o)}},u=t=>{try{n(r.throw(t))}catch(o){d(o)}},n=t=>t.done?j(t.value):Promise.resolve(t.value).then(h,u);n((r=r.apply(i,p)).next())});import{aK as B,l as O,j as e,B as s,C as k,$ as P,d as l,U as f,Q as C,h as w,e as D}from"./index-CHjTtHW2.js";import{r as x}from"./vendor-DgfDxsY7.js";import{P as m}from"./PageContainer-DmS_qDLp.js";import"./Helmet-DNWYwtrp.js";import"./index-BvdvJza9.js";const N=()=>{const{id:i}=B(),p=O(),[r,j]=x.useState(null),[d,h]=x.useState(!0),[u,n]=x.useState(null),t=()=>b(void 0,null,function*(){var g,v,y,A;if(i)try{h(!0),n(null);const c=yield fetch(`/api/admin/church/${i}/overview`,{credentials:"include"});if(c.ok){const a=yield c.json();if(a.metadata){const E={id:a.metadata.id,name:a.metadata.name,email:a.metadata.email||((g=a.info)==null?void 0:g.email)||"",databaseName:a.metadata.database_name,isActive:a.metadata.is_active,totalOcrJobs:(((v=a.counts)==null?void 0:v.baptisms)||0)+(((y=a.counts)==null?void 0:y.marriages)||0)+(((A=a.counts)==null?void 0:A.funerals)||0)};j(E)}else throw new Error("Invalid response format")}else throw new Error(`HTTP ${c.status}: Failed to load church data`)}catch(c){n(c instanceof Error?c.message:"An error occurred")}finally{h(!1)}}),o=()=>{p(`/admin/church/${i}/ocr`)};return x.useEffect(()=>{t()},[i]),d?e.jsx(m,{title:"Church Admin Panel",description:"Church administration",children:e.jsx(s,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"200px",children:e.jsx(k,{})})}):u?e.jsx(m,{title:"Church Admin Panel",description:"Church administration",children:e.jsx(P,{severity:"error",sx:{mt:2},children:u})}):r?e.jsx(m,{title:"Church Admin Panel",description:"Church administration",children:e.jsxs(s,{sx:{p:3},children:[e.jsx(l,{variant:"h4",gutterBottom:!0,children:"Church Administration"}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(s,{sx:{display:"flex",gap:3,flexWrap:"wrap"},children:[e.jsx(s,{sx:{flex:"2 1 300px"},children:e.jsx(f,{children:e.jsxs(C,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:r.name}),e.jsxs(s,{sx:{mb:2},children:[e.jsxs(l,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Email:"})," ",r.email]}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[e.jsx("strong",{children:"Database:"})," ",r.databaseName]}),e.jsx(s,{sx:{mt:1},children:e.jsx(w,{label:r.isActive?"Active":"Inactive",color:r.isActive?"success":"error",size:"small"})})]})]})})}),e.jsx(s,{sx:{flex:"1 1 250px"},children:e.jsx(f,{children:e.jsxs(C,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Quick Actions"}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:2},children:[e.jsx(D,{variant:"contained",color:"primary",onClick:o,fullWidth:!0,children:"Open OCR Data Panel"}),e.jsx(D,{variant:"outlined",onClick:t,fullWidth:!0,children:"Refresh Data"})]})]})})})]}),e.jsx(f,{children:e.jsxs(C,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Church Statistics"}),e.jsx(s,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:e.jsx(w,{label:`Total Records: ${r.totalOcrJobs||0}`,color:"primary",variant:"outlined"})})]})})]})]})}):e.jsx(m,{title:"Church Admin Panel",description:"Church administration",children:e.jsx(P,{severity:"warning",sx:{mt:2},children:"Church not found"})})};export{N as default};
//# sourceMappingURL=ChurchAdminPanelWorking-Ck3WSGFk.js.map
