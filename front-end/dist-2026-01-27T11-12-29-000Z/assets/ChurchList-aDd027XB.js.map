{"version":3,"file":"ChurchList-aDd027XB.js","sources":["../../src/features/church/apps/church-management/ChurchList.tsx"],"sourcesContent":["/**\r\n * Orthodox Metrics - Church Management List View\r\n * Replaces the User Profile module with Church management functionality\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Paper,\r\n  Typography,\r\n  Button,\r\n  TextField,\r\n  InputAdornment,\r\n  IconButton,\r\n  Chip,\r\n  Avatar,\r\n  Card,\r\n  CardContent,\r\n  CardActions,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Alert,\r\n  Skeleton,\r\n  Container,\r\n  FormControlLabel,\r\n  Checkbox,\r\n  Stack,\r\n  Divider,\r\n} from '@mui/material';\r\nimport {\r\n  IconSearch,\r\n  IconPlus,\r\n  IconEdit,\r\n  IconTrash,\r\n  IconEye,\r\n  IconMapPin,\r\n  IconMail,\r\n  IconCalendar,\r\n  IconFilter,\r\n  IconBuilding,\r\n} from '@tabler/icons-react';\r\nimport PageContainer from '@/shared/ui/PageContainer';\r\nimport Breadcrumb from '@/layouts/full/shared/breadcrumb/Breadcrumb';\r\nimport BlankCard from '@/shared/ui/BlankCard';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport * as adminApiModule from '@/api/admin.api';\r\nconst adminAPI: any = (adminApiModule as any).default ?? (adminApiModule as any).adminAPI ?? (adminApiModule as any);\r\nimport { logger } from '@/utils/logger';\r\nimport type { Church } from '@/types/orthodox-metrics.types';\r\nimport OrthodoxChurchIcon from '@/shared/ui/OrthodoxChurchIcon';\r\nimport OrthodoxBanner from '@/shared/ui/OrthodoxBanner';\r\n\r\n\r\nfunction normalizeChurches(response: any): any[] {\r\n  const raw =\r\n    response?.churches ??\r\n    response?.data?.churches ??\r\n    response?.data ??\r\n    response ??\r\n    [];\r\n\r\n  if (!Array.isArray(raw)) return [];\r\n\r\n  return raw.map((it: any) => ({\r\n    id: it?.id ?? it?.church_id ?? it?._id ?? Math.random(),\r\n    name: it?.name ?? it?.church_name ?? 'Unnamed Church',\r\n    email: it?.email ?? '',\r\n    address: it?.address ?? [it?.city, it?.state_province ?? it?.state].filter(Boolean).join(', '),\r\n    city: it?.city ?? '',\r\n    state_province: it?.state_province ?? it?.state ?? '',\r\n    preferred_language: it?.preferred_language ?? 'en',\r\n    created_at: it?.created_at ?? it?.createdAt ?? null,\r\n    is_active: typeof it?.is_active === 'boolean' ? it?.is_active : it?.is_active === 1\r\n  }));\r\n}\r\n\r\n\r\ninterface ChurchListProps { }\r\n\r\nconst ChurchList: React.FC<ChurchListProps> = () => {\r\n  const { hasRole } = useAuth();\r\n  const navigate = useNavigate();\r\n  const [churches, setChurches] = useState<Church[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [searchQuery, setSearchQuery] = useState('');\r\n  const [selectedChurch, setSelectedChurch] = useState<Church | null>(null);\r\n  const [deleteDialogOpen, setDeleteDialogOpen] = useState(false);\r\n  const [viewDialogOpen, setViewDialogOpen] = useState(false);\r\n  const [filterStatus, setFilterStatus] = useState<'all' | 'active' | 'inactive'>('all');\r\n  const [shouldDeleteDatabase, setShouldDeleteDatabase] = useState(false);\r\n\r\n  const BCrumb = [\r\n    { to: '/', title: 'Home' },\r\n    { title: 'Church Management' },\r\n  ];\r\n\r\n  // Fetch churches\r\n  useEffect(() => {\r\n    const fetchChurches = async () => {\r\n      try {\r\n        setLoading(true);\r\n        \r\n        // Log the start of church list loading\r\n        logger.info('Church Management', 'Loading churches list', {\r\n          userAction: 'church_list_load_start'\r\n        });\r\n        \r\n        if (!adminAPI?.churches?.getAll) { throw new Error('adminAPI.churches.getAll not available'); }\r\n        const response = await adminAPI.churches.getAll();\r\n        if (response?.success === false) { const msg = response?.message || 'API returned success=false'; throw new Error(msg); }\r\n        const normalized = normalizeChurches(response);\r\n        setChurches(normalized);\r\n        \r\n        // Log successful load\r\n        logger.info('Church Management', 'Churches list loaded successfully', {\r\n          count: response?.churches?.length || 0,\r\n          userAction: 'church_list_load_success'\r\n        });\r\n      } catch (err) {\r\n        const errorMessage = err instanceof Error ? err.message : 'Failed to fetch churches';\r\n        setError(errorMessage);\r\n        \r\n        // Log the error to the logging system\r\n        logger.error('Church Management', 'Failed to fetch churches list', {\r\n          error: errorMessage,\r\n          userAction: 'church_list_load'\r\n        });\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if ( (hasRole('admin') || hasRole('super_admin')) ) {\r\n      // Log successful access\r\n      logger.info('Church Management', 'Church list access granted', {\r\n        userAction: 'church_list_access_granted',\r\n        hasRoles: ['admin', 'super_admin']\r\n      });\r\n      \r\n      fetchChurches();\r\n    } else {\r\n      const errorMessage = 'Access denied. Admin privileges required.';\r\n      setError(errorMessage);\r\n      setLoading(false);\r\n      \r\n      // Log the access denied error\r\n      logger.warn('Church Management', 'Access denied - insufficient privileges for church list', {\r\n        userAction: 'church_list_access_denied',\r\n        requiredRoles: ['admin', 'super_admin']\r\n      });\r\n    }\r\n  }, [hasRole]);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const refreshChurches = async (silent = true) => {\r\n      try {\r\n        if (!adminAPI || !adminAPI.churches || typeof adminAPI.churches.getAll !== 'function') {\r\n          logger.error('Church Management', 'adminAPI.churches.getAll not available', { adminAPI });\r\n          return;\r\n        }\r\n        if (!adminAPI?.churches?.getAll) { throw new Error('adminAPI.churches.getAll not available'); }\r\n        const response = await adminAPI.churches.getAll();\r\n        if (!mounted) return;\r\n        if (response?.success === false) { const msg = response?.message || 'API returned success=false'; throw new Error(msg); }\r\n        const normalized = normalizeChurches(response);\r\n        setChurches(normalized);\r\n        if (!silent) {\r\n          logger.info('Church Management', 'Churches list refreshed successfully', {\r\n            count: response?.churches?.length || 0,\r\n            userAction: 'church_list_refresh_success'\r\n          });\r\n        }\r\n      } catch (err) {\r\n        const errorMessage = err instanceof Error ? err.message : 'Failed to refresh churches';\r\n        logger.error('Church Management', 'Failed to refresh churches list', {\r\n          error: errorMessage,\r\n          userAction: 'church_list_refresh'\r\n        });\r\n      }\r\n    };\r\n  \r\n    const handleVisibilityChange = () => {\r\n      if (!document.hidden &&  (hasRole('admin') || hasRole('super_admin')) ) {\r\n        logger.info('Church Management', 'Page became visible, refreshing churches list', {\r\n          userAction: 'church_list_refresh_on_focus'\r\n        });\r\n        refreshChurches(true);\r\n      }\r\n    };\r\n  \r\n    const handleFocus = () => {\r\n      if ( (hasRole('admin') || hasRole('super_admin')) ) {\r\n        logger.info('Church Management', 'Window regained focus, refreshing churches list', {\r\n          userAction: 'church_list_refresh_on_window_focus'\r\n        });\r\n        refreshChurches(true);\r\n      }\r\n    };\r\n  \r\n    document.addEventListener('visibilitychange', handleVisibilityChange);\r\n    window.addEventListener('focus', handleFocus);\r\n  \r\n    // Try one immediate refresh if api is ready\r\n    refreshChurches(false);\r\n  \r\n    return () => {\r\n      mounted = false;\r\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\r\n      window.removeEventListener('focus', handleFocus);\r\n    };\r\n  }, [adminAPI, hasRole]);\r\n  // Handle search query changes\r\n  const handleSearchChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const query = e.target.value;\r\n    setSearchQuery(query);\r\n    \r\n    // Log search action\r\n    logger.info('Church Management', 'Church search performed', {\r\n      query: query.trim(),\r\n      queryLength: query.length,\r\n      userAction: 'church_search'\r\n    });\r\n  };\r\n\r\n  // Handle filter status changes\r\n  const handleFilterChange = (status: 'all' | 'active' | 'inactive') => {\r\n    setFilterStatus(status);\r\n    \r\n    // Log filter action\r\n    logger.info('Church Management', 'Church filter applied', {\r\n      filter: status,\r\n      userAction: 'church_filter'\r\n    });\r\n  };\r\n\r\n  // Filter churches based on search and status\r\n  const filteredChurches = churches.filter(church => {\r\n    const matchesSearch = church.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      church.address?.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n      church.email?.toLowerCase().includes(searchQuery.toLowerCase());\r\n\r\n    const matchesStatus = filterStatus === 'all' ||\r\n      (filterStatus === 'active' && church.is_active) ||\r\n      (filterStatus === 'inactive' && !church.is_active);\r\n\r\n    return matchesSearch && matchesStatus;\r\n  });\r\n\r\n  const handleDeleteChurch = async (church: Church) => {\r\n    try {\r\n      logger.info('Church Management', 'Church deletion initiated', {\r\n        churchId: church.id,\r\n        churchName: church.name,\r\n        deleteDatabase: shouldDeleteDatabase,\r\n        userAction: 'church_delete_attempt'\r\n      });\r\n      \r\n      // Remove all users from the church before deletion\r\n      await adminAPI.churches.removeAllUsers(church.id);\r\n      \r\n      // Delete the church with database option\r\n      await adminAPI.churches.delete(church.id, shouldDeleteDatabase);\r\n      \r\n      setChurches(prev => prev.filter(c => c.id !== church.id));\r\n      setDeleteDialogOpen(false);\r\n      setSelectedChurch(null);\r\n      setShouldDeleteDatabase(false); // Reset the checkbox\r\n      \r\n      logger.info('Church Management', 'Church deleted successfully', {\r\n        churchId: church.id,\r\n        churchName: church.name,\r\n        deletedDatabase: shouldDeleteDatabase,\r\n        userAction: 'church_delete'\r\n      });\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Failed to delete church';\r\n      setError(errorMessage);\r\n      if (errorMessage.includes('assigned users')) {\r\n        setError('Cannot delete church with assigned users. Please remove all users from this church first.');\r\n      }\r\n      logger.error('Church Management', 'Failed to delete church', {\r\n        error: errorMessage,\r\n        churchId: church.id,\r\n        churchName: church.name,\r\n        userAction: 'church_delete'\r\n      });\r\n    }\r\n  };\r\n\r\n  // Handle view church action\r\n  const handleViewChurch = (church: Church) => {\r\n    setSelectedChurch(church);\r\n    setViewDialogOpen(true);\r\n    \r\n    // Log church view action\r\n    logger.info('Church Management', 'Church details viewed', {\r\n      churchId: church.id,\r\n      churchName: church.name,\r\n      userAction: 'church_view'\r\n    });\r\n  };\r\n\r\n  // Handle edit church action\r\n  const handleEditChurch = (church: Church) => {\r\n    // Log edit action before navigation\r\n    logger.info('Church Management', 'Church edit initiated', {\r\n      churchId: church.id,\r\n      churchName: church.name,\r\n      userAction: 'church_edit_open'\r\n    });\r\n    \r\n    navigate(`/apps/church-management/edit/${church.id}`);\r\n  };\r\n\r\n  // Handle delete dialog open\r\n  const handleDeleteDialogOpen = (church: Church) => {\r\n    setSelectedChurch(church);\r\n    setDeleteDialogOpen(true);\r\n    \r\n    // Log delete dialog open\r\n    logger.info('Church Management', 'Church delete dialog opened', {\r\n      churchId: church.id,\r\n      churchName: church.name,\r\n      userAction: 'church_delete_dialog_open'\r\n    });\r\n  };\r\n\r\n  // Handle add new church button click\r\n  const handleAddNewChurch = () => {\r\n    // Log new church creation action\r\n    logger.info('Church Management', 'New church creation initiated', {\r\n      userAction: 'church_create_open'\r\n    });\r\n  };\r\n\r\n  const getChurchStatusColor = (isActive: boolean) => {\r\n    return isActive ? 'success' : 'error';\r\n  };\r\n\r\n  const getChurchStatusText = (isActive: boolean) => {\r\n    return isActive ? 'Active' : 'Inactive';\r\n  };\r\n\r\n  if (!(hasRole('admin') || hasRole('super_admin') || hasRole('manager'))) {\r\n    // Log the access denied error\r\n    logger.warn('Church Management', 'Access denied. Administrator privileges required to view church management.', {\r\n      userAction: 'church_management_access_denied',\r\n      requiredRoles: ['admin', 'super_admin', 'manager'],\r\n      path: '/apps/church-management'\r\n    });\r\n    \r\n    return (\r\n      <PageContainer title=\"Church Management\" description=\"Church management system\">\r\n        <Alert severity=\"error\">\r\n          Access denied. Administrator privileges required to view church management.\r\n        </Alert>\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <PageContainer title=\"Church Management\" description=\"Manage churches in the Orthodox Metrics system\">\r\n      <Breadcrumb title=\"Church Management\" items={BCrumb} />\r\n      \r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 3 }}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      <Grid container spacing={3}>\r\n        {/* Search & Filter Controls Card */}\r\n        <Grid item xs={12}>\r\n          <BlankCard>\r\n            <CardContent>\r\n              <Typography variant=\"h5\" mb={1}>\r\n                <IconBuilding size={24} style={{ marginRight: 8, verticalAlign: 'middle' }} />\r\n                Church Management\r\n              </Typography>\r\n              <Typography color=\"textSecondary\" mb={3}>\r\n                Search, filter, and manage Orthodox churches\r\n              </Typography>\r\n\r\n              <Grid container spacing={2} alignItems=\"center\">\r\n                <Grid item xs={12} md={6}>\r\n                  <TextField\r\n                    fullWidth\r\n                    size=\"small\"\r\n                    placeholder=\"Search churches by name, location, or email...\"\r\n                    value={searchQuery}\r\n                    onChange={handleSearchChange}\r\n                    InputProps={{\r\n                      startAdornment: (\r\n                        <InputAdornment position=\"start\">\r\n                          <IconSearch size={20} />\r\n                        </InputAdornment>\r\n                      ),\r\n                    }}\r\n                  />\r\n                </Grid>\r\n                \r\n                <Grid item xs={12} md={3}>\r\n                  <FormControl fullWidth size=\"small\">\r\n                    <InputLabel>Status Filter</InputLabel>\r\n                    <Select\r\n                      value={filterStatus}\r\n                      label=\"Status Filter\"\r\n                      onChange={(e) => setFilterStatus(e.target.value as 'all' | 'active' | 'inactive')}\r\n                      startAdornment={<IconFilter size={16} style={{ marginLeft: 8 }} />}\r\n                    >\r\n                      <MenuItem value=\"all\">All Churches</MenuItem>\r\n                      <MenuItem value=\"active\">Active Only</MenuItem>\r\n                      <MenuItem value=\"inactive\">Inactive Only</MenuItem>\r\n                    </Select>\r\n                  </FormControl>\r\n                </Grid>\r\n\r\n                <Grid item xs={12} md={3}>\r\n                  <Stack direction=\"row\" spacing={2} justifyContent=\"flex-end\">\r\n                    {hasRole('super_admin') && (\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        startIcon={<IconPlus />}\r\n                        onClick={() => navigate('/apps/church-management/wizard')}\r\n                      >\r\n                        Setup Wizard\r\n                      </Button>\r\n                    )}\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      startIcon={<IconPlus />}\r\n                      onClick={() => navigate('/apps/church-management/create')}\r\n                    >\r\n                      Add Church\r\n                    </Button>\r\n                  </Stack>\r\n                </Grid>\r\n              </Grid>\r\n            </CardContent>\r\n          </BlankCard>\r\n        </Grid>\r\n\r\n        {/* Churches Grid */}\r\n        <Grid item xs={12}>\r\n          <BlankCard>\r\n            <CardContent>\r\n              <Typography variant=\"h5\" mb={1}>\r\n                Churches ({filteredChurches.length})\r\n              </Typography>\r\n              <Typography color=\"textSecondary\" mb={3}>\r\n                {filteredChurches.length === 0 \r\n                  ? 'No churches found matching your criteria'\r\n                  : `Showing ${filteredChurches.length} church${filteredChurches.length !== 1 ? 'es' : ''}`\r\n                }\r\n              </Typography>\r\n\r\n              {loading ? (\r\n                <Grid container spacing={3}>\r\n                  {[1, 2, 3, 4, 5, 6].map((item) => (\r\n                    <Grid item xs={12} sm={6} lg={4} key={item}>\r\n                      <Card>\r\n                        <CardContent>\r\n                          <Stack spacing={2}>\r\n                            <Skeleton variant=\"circular\" width={40} height={40} />\r\n                            <Skeleton variant=\"text\" width=\"80%\" height={28} />\r\n                            <Skeleton variant=\"text\" width=\"60%\" height={20} />\r\n                            <Skeleton variant=\"text\" width=\"40%\" height={20} />\r\n                          </Stack>\r\n                        </CardContent>\r\n                      </Card>\r\n                    </Grid>\r\n                  ))}\r\n                </Grid>\r\n              ) : filteredChurches.length === 0 ? (\r\n                <Box sx={{ textAlign: 'center', py: 6 }}>\r\n                  <IconBuilding size={64} style={{ opacity: 0.3, marginBottom: 16 }} />\r\n                  <Typography variant=\"h6\" color=\"textSecondary\" gutterBottom>\r\n                    {searchQuery || filterStatus !== 'all' \r\n                      ? 'No churches match your search criteria'\r\n                      : 'No churches have been added yet'\r\n                    }\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"textSecondary\" sx={{ mb: 3 }}>\r\n                    {searchQuery || filterStatus !== 'all'\r\n                      ? 'Try adjusting your search or filter settings'\r\n                      : 'Get started by adding your first church to the system'\r\n                    }\r\n                  </Typography>\r\n                  {!searchQuery && filterStatus === 'all' && (\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      startIcon={<IconPlus />}\r\n                      onClick={() => navigate('/apps/church-management/create')}\r\n                    >\r\n                      Add First Church\r\n                    </Button>\r\n                  )}\r\n                </Box>\r\n              ) : (\r\n                <Grid container spacing={3}>\r\n                  {filteredChurches.map((church) => (\r\n                    <Grid item xs={12} sm={6} lg={4} key={church.id}>\r\n                      <Card \r\n                        sx={{ \r\n                          height: '100%',\r\n                          display: 'flex',\r\n                          flexDirection: 'column',\r\n                          transition: 'transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out',\r\n                          '&:hover': {\r\n                            transform: 'translateY(-2px)',\r\n                            boxShadow: 4,\r\n                          }\r\n                        }}\r\n                      >\r\n                        <CardContent sx={{ flexGrow: 1 }}>\r\n                          <Box sx={{ display: 'flex', alignItems: 'flex-start', mb: 2 }}>\r\n                            <Avatar sx={{ bgcolor: 'primary.main', mr: 2 }}>\r\n                              <OrthodoxChurchIcon />\r\n                            </Avatar>\r\n                            <Box sx={{ flexGrow: 1, minWidth: 0 }}>\r\n                              <Typography variant=\"h6\" noWrap title={church.name}>\r\n                                {church.name}\r\n                              </Typography>\r\n                              <Chip\r\n                                label={church.is_active ? 'Active' : 'Inactive'}\r\n                                color={church.is_active ? 'success' : 'default'}\r\n                                size=\"small\"\r\n                                sx={{ mt: 0.5 }}\r\n                              />\r\n                            </Box>\r\n                          </Box>\r\n\r\n                          <Stack spacing={1}>\r\n                            {church.address && (\r\n                              <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                                <IconMapPin size={16} style={{ marginRight: 8, opacity: 0.7 }} />\r\n                                <Typography variant=\"body2\" color=\"textSecondary\" noWrap>\r\n                                  {church.address}\r\n                                </Typography>\r\n                              </Box>\r\n                            )}\r\n                            \r\n                            {church.email && (\r\n                              <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                                <IconMail size={16} style={{ marginRight: 8, opacity: 0.7 }} />\r\n                                <Typography variant=\"body2\" color=\"textSecondary\" noWrap>\r\n                                  {church.email}\r\n                                </Typography>\r\n                              </Box>\r\n                            )}\r\n                            \r\n                            {church.created_at && (\r\n                              <Box sx={{ display: 'flex', alignItems: 'center' }}>\r\n                                <IconCalendar size={16} style={{ marginRight: 8, opacity: 0.7 }} />\r\n                                <Typography variant=\"body2\" color=\"textSecondary\">\r\n                                  Added {new Date(church.created_at).toLocaleDateString()}\r\n                                </Typography>\r\n                              </Box>\r\n                            )}\r\n                          </Stack>\r\n                        </CardContent>\r\n                        \r\n                        <Divider />\r\n                        \r\n                        <CardActions sx={{ justifyContent: 'space-between', px: 2, py: 1.5 }}>\r\n                          <Button\r\n                            size=\"small\"\r\n                            startIcon={<IconEye />}\r\n                            onClick={() => handleViewChurch(church)}\r\n                          >\r\n                            View\r\n                          </Button>\r\n                          \r\n                          <Stack direction=\"row\" spacing={1}>\r\n                            <IconButton\r\n                              size=\"small\"\r\n                              onClick={() => handleEditChurch(church)}\r\n                              sx={{ color: 'primary.main' }}\r\n                            >\r\n                              <IconEdit size={18} />\r\n                            </IconButton>\r\n                            \r\n                            {hasRole('super_admin') && (\r\n                              <IconButton\r\n                                size=\"small\"\r\n                                onClick={() => handleDeleteChurch(church)}\r\n                                sx={{ color: 'error.main' }}\r\n                              >\r\n                                <IconTrash size={18} />\r\n                              </IconButton>\r\n                            )}\r\n                          </Stack>\r\n                        </CardActions>\r\n                      </Card>\r\n                    </Grid>\r\n                  ))}\r\n                </Grid>\r\n              )}\r\n            </CardContent>\r\n          </BlankCard>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      {/* Enhanced Delete Confirmation Dialog */}\r\n      <Dialog \r\n        open={deleteDialogOpen} \r\n        onClose={() => setDeleteDialogOpen(false)}\r\n        PaperProps={{\r\n          sx: {\r\n            borderRadius: 4,\r\n            background: 'linear-gradient(145deg, #ffffff 0%, #f8f9ff 100%)',\r\n            border: '1px solid rgba(239, 68, 68, 0.1)',\r\n            boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)',\r\n          }\r\n        }}\r\n      >\r\n        <DialogTitle sx={{\r\n          background: 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',\r\n          color: 'white',\r\n          fontWeight: 'bold',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n        }}>\r\n          <IconTrash size={24} style={{ marginRight: 8 }} />\r\n          Delete Church\r\n        </DialogTitle>\r\n        <DialogContent sx={{ p: 3, mt: 2 }}>\r\n          <Typography variant=\"body1\">\r\n            Are you sure you want to delete <strong>\"{selectedChurch?.name}\"</strong>? \r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\" mt={1}>\r\n            This action cannot be undone and will permanently remove the church from the system.\r\n          </Typography>\r\n          \r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                checked={shouldDeleteDatabase}\r\n                onChange={(e) => setShouldDeleteDatabase(e.target.checked)}\r\n                sx={{\r\n                  color: '#ef4444',\r\n                  '&.Mui-checked': {\r\n                    color: '#ef4444',\r\n                  },\r\n                }}\r\n              />\r\n            }\r\n            label=\"Also remove the database and all church records\"\r\n            sx={{ mt: 2, mb: 1 }}\r\n          />\r\n          \r\n          {shouldDeleteDatabase && (\r\n            <Alert severity=\"warning\" sx={{ mt: 2 }}>\r\n              <Typography variant=\"body2\">\r\n                <strong>⚠️ Warning:</strong> This will permanently delete the church's database including all records, users, and data. This action is irreversible!\r\n              </Typography>\r\n            </Alert>\r\n          )}\r\n          \r\n          {!shouldDeleteDatabase && (\r\n            <Alert severity=\"info\" sx={{ mt: 2 }}>\r\n              <Typography variant=\"body2\">\r\n                <strong>ℹ️ Note:</strong> The church record will be removed from the system, but the database and all church records will be preserved.\r\n              </Typography>\r\n            </Alert>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions sx={{ p: 3, gap: 1 }}>\r\n          <Button \r\n            onClick={() => setDeleteDialogOpen(false)}\r\n            sx={{\r\n              borderRadius: 2,\r\n              px: 3,\r\n              color: '#64748b',\r\n              '&:hover': {\r\n                backgroundColor: 'rgba(100, 116, 139, 0.1)',\r\n              },\r\n            }}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            onClick={() => selectedChurch && handleDeleteChurch(selectedChurch)}\r\n            variant=\"contained\"\r\n            sx={{\r\n              background: 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)',\r\n              borderRadius: 2,\r\n              px: 3,\r\n              fontWeight: 'bold',\r\n              '&:hover': {\r\n                background: 'linear-gradient(135deg, #dc2626 0%, #b91c1c 100%)',\r\n                transform: 'translateY(-1px)',\r\n                boxShadow: '0 4px 15px rgba(239, 68, 68, 0.4)',\r\n              },\r\n              transition: 'all 0.3s ease',\r\n            }}\r\n          >\r\n            Delete Church\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Enhanced View Church Dialog */}\r\n      <Dialog \r\n        open={viewDialogOpen} \r\n        onClose={() => setViewDialogOpen(false)} \r\n        maxWidth=\"md\" \r\n        fullWidth\r\n        PaperProps={{\r\n          sx: {\r\n            borderRadius: 4,\r\n            background: 'linear-gradient(145deg, #ffffff 0%, #f8f9ff 100%)',\r\n            border: '1px solid rgba(102, 126, 234, 0.1)',\r\n            boxShadow: '0 20px 40px rgba(0, 0, 0, 0.1)',\r\n          }\r\n        }}\r\n      >\r\n        <DialogTitle sx={{\r\n          background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n          color: 'white',\r\n          fontWeight: 'bold',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n        }}>\r\n          <IconEye size={24} style={{ marginRight: 8 }} />\r\n          Church Details\r\n        </DialogTitle>\r\n        <DialogContent sx={{ p: 4 }}>\r\n          {selectedChurch && (\r\n            <Grid container spacing={3}>\r\n              <Grid item xs={12} md={6}>\r\n                <Box sx={{\r\n                  p: 2,\r\n                  backgroundColor: 'rgba(102, 126, 234, 0.05)',\r\n                  borderRadius: 2,\r\n                  border: '1px solid rgba(102, 126, 234, 0.1)',\r\n                }}>\r\n                  <Typography variant=\"subtitle2\" gutterBottom color=\"primary\" fontWeight=\"bold\">\r\n                    Church Name\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" gutterBottom>{selectedChurch.name}</Typography>\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={12} md={6}>\r\n                <Box sx={{\r\n                  p: 2,\r\n                  backgroundColor: 'rgba(102, 126, 234, 0.05)',\r\n                  borderRadius: 2,\r\n                  border: '1px solid rgba(102, 126, 234, 0.1)',\r\n                }}>\r\n                  <Typography variant=\"subtitle2\" gutterBottom color=\"primary\" fontWeight=\"bold\">\r\n                    Status\r\n                  </Typography>\r\n                  <Chip\r\n                    label={getChurchStatusText(selectedChurch.is_active)}\r\n                    color={getChurchStatusColor(selectedChurch.is_active)}\r\n                    size=\"small\"\r\n                    sx={{ fontWeight: 600 }}\r\n                  />\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={12} md={6}>\r\n                <Box sx={{\r\n                  p: 2,\r\n                  backgroundColor: 'rgba(102, 126, 234, 0.05)',\r\n                  borderRadius: 2,\r\n                  border: '1px solid rgba(102, 126, 234, 0.1)',\r\n                }}>\r\n                  <Typography variant=\"subtitle2\" gutterBottom color=\"primary\" fontWeight=\"bold\">\r\n                    Address\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" gutterBottom>{selectedChurch.address || 'Not specified'}</Typography>\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={12} md={6}>\r\n                <Box sx={{\r\n                  p: 2,\r\n                  backgroundColor: 'rgba(102, 126, 234, 0.05)',\r\n                  borderRadius: 2,\r\n                  border: '1px solid rgba(102, 126, 234, 0.1)',\r\n                }}>\r\n                  <Typography variant=\"subtitle2\" gutterBottom color=\"primary\" fontWeight=\"bold\">\r\n                    Email\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" gutterBottom>{selectedChurch.email || 'Not specified'}</Typography>\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={12} md={6}>\r\n                <Box sx={{\r\n                  p: 2,\r\n                  backgroundColor: 'rgba(102, 126, 234, 0.05)',\r\n                  borderRadius: 2,\r\n                  border: '1px solid rgba(102, 126, 234, 0.1)',\r\n                }}>\r\n                  <Typography variant=\"subtitle2\" gutterBottom color=\"primary\" fontWeight=\"bold\">\r\n                    Language\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" gutterBottom>{selectedChurch.preferred_language?.toUpperCase() || 'EN'}</Typography>\r\n                </Box>\r\n              </Grid>\r\n              <Grid item xs={12} md={6}>\r\n                <Box sx={{\r\n                  p: 2,\r\n                  backgroundColor: 'rgba(102, 126, 234, 0.05)',\r\n                  borderRadius: 2,\r\n                  border: '1px solid rgba(102, 126, 234, 0.1)',\r\n                }}>\r\n                  <Typography variant=\"subtitle2\" gutterBottom color=\"primary\" fontWeight=\"bold\">\r\n                    Created\r\n                  </Typography>\r\n                  <Typography variant=\"body1\" gutterBottom>{new Date(selectedChurch.created_at).toLocaleDateString()}</Typography>\r\n                </Box>\r\n              </Grid>\r\n            </Grid>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions sx={{ p: 3, gap: 1 }}>\r\n          <Button \r\n            onClick={() => setViewDialogOpen(false)}\r\n            sx={{\r\n              borderRadius: 2,\r\n              px: 3,\r\n              color: '#64748b',\r\n              '&:hover': {\r\n                backgroundColor: 'rgba(100, 116, 139, 0.1)',\r\n              },\r\n            }}\r\n          >\r\n            Close\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            href={`/apps/church-management/edit/${selectedChurch?.id}`}\r\n            startIcon={<IconEdit />}\r\n            sx={{\r\n              background: 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',\r\n              borderRadius: 2,\r\n              px: 3,\r\n              fontWeight: 'bold',\r\n              '&:hover': {\r\n                background: 'linear-gradient(135deg, #5a6fd8 0%, #6a4190 100%)',\r\n                transform: 'translateY(-1px)',\r\n                boxShadow: '0 4px 15px rgba(102, 126, 234, 0.4)',\r\n              },\r\n              transition: 'all 0.3s ease',\r\n            }}\r\n          >\r\n            Edit Church\r\n          </Button>\r\n        </DialogActions>\r\n              </Dialog>\r\n      </PageContainer>\r\n  );\r\n};\r\n\r\nexport default ChurchList;\r\n"],"names":["adminAPI","adminApiModule.default","adminApiModule.adminAPI","adminApiModule","normalizeChurches","response","raw","_e","_d","_c","_b","_a","it","_f","_h","_g","_i","_k","_j","_l","_n","_m","ChurchList","hasRole","useAuth","navigate","useNavigate","churches","setChurches","useState","loading","setLoading","error","setError","searchQuery","setSearchQuery","selectedChurch","setSelectedChurch","deleteDialogOpen","setDeleteDialogOpen","viewDialogOpen","setViewDialogOpen","filterStatus","setFilterStatus","shouldDeleteDatabase","setShouldDeleteDatabase","BCrumb","useEffect","fetchChurches","__async","logger","msg","normalized","err","errorMessage","mounted","refreshChurches","silent","handleVisibilityChange","handleFocus","handleSearchChange","e","query","filteredChurches","church","matchesSearch","matchesStatus","handleDeleteChurch","prev","c","handleViewChurch","handleEditChurch","getChurchStatusColor","isActive","getChurchStatusText","jsxs","PageContainer","jsx","Breadcrumb","Alert","Grid","BlankCard","CardContent","Typography","IconBuilding","TextField","InputAdornment","IconSearch","FormControl","InputLabel","Select","IconFilter","MenuItem","Stack","Button","IconPlus","item","Card","Skeleton","Box","Avatar","OrthodoxChurchIcon","Chip","IconMapPin","IconMail","IconCalendar","Divider","CardActions","IconEye","IconButton","IconEdit","IconTrash","Dialog","DialogTitle","DialogContent","FormControlLabel","Checkbox","DialogActions"],"mappings":"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"}