{"version":3,"file":"index-vG--mgsr.js","sources":["../../src/context/UserDataContext/index.tsx"],"sourcesContent":["\r\nimport { createContext, useState, useEffect, useContext } from 'react';\r\nimport { PostType, profiledataType } from '../../types/apps/userProfile';\r\nimport React from \"react\";\r\nimport useSWR from 'swr';\r\nimport { getFetcher, postFetcher } from '@/api/globalFetcher';\r\nimport { useAuth } from '../AuthContext';\r\n\r\n/**\r\n * Validates if a profile should be persisted to localStorage.\r\n * Prevents persisting fallback \"Unknown User\" profiles.\r\n */\r\nfunction isPersistableProfile(profile: profiledataType | Partial<profiledataType>): boolean {\r\n  if (!profile) return false;\r\n  \r\n  // Must have at least one identifier\r\n  const hasIdentifier = !!(profile as any).id || !!(profile as any).email || !!(profile as any).username;\r\n  if (!hasIdentifier) return false;\r\n  \r\n  // Name must be non-empty and not \"Unknown User\"\r\n  if (profile.name) {\r\n    const trimmedName = profile.name.trim();\r\n    if (trimmedName && trimmedName !== 'Unknown User') {\r\n      return true;\r\n    }\r\n  }\r\n  \r\n  // Allow empty name if email exists (can display email instead)\r\n  if ((profile as any).email && (profile as any).email.trim()) {\r\n    return true;\r\n  }\r\n  \r\n  return false;\r\n}\r\n\r\n/**\r\n * Normalizes API profile data to handle both snake_case and camelCase fields.\r\n */\r\nfunction normalizeApiProfile(apiProfile: any): {\r\n  firstName: string;\r\n  lastName: string;\r\n  username: string | null;\r\n  email: string | null;\r\n  id: number | string | null;\r\n} {\r\n  return {\r\n    firstName: apiProfile.first_name || apiProfile.firstName || '',\r\n    lastName: apiProfile.last_name || apiProfile.lastName || '',\r\n    username: apiProfile.username || null,\r\n    email: apiProfile.email || null,\r\n    id: apiProfile.id || null,\r\n  };\r\n}\r\n\r\n// Define context type\r\ntype UserDataContextType = {\r\n    posts: PostType[];\r\n    users: any[];\r\n    gallery: any[];\r\n    loading: boolean;\r\n    profileData: profiledataType;\r\n    followers: any[];\r\n    search: string;\r\n    error: null;\r\n    setSearch: React.Dispatch<React.SetStateAction<string>>;\r\n    addGalleryItem: (item: any) => void;\r\n    addReply: (postId: number, commentId: number, reply: string) => void;\r\n    likePost: (postId: number) => void;\r\n    addComment: (postId: number, comment: string) => void;\r\n    likeReply: (postId: number, commentId: number) => void;\r\n    toggleFollow: (id: number) => void;\r\n    updateProfileData: (data: Partial<profiledataType>) => void;\r\n};\r\n\r\n// Create context\r\nconst UserDataContext = createContext<UserDataContextType | undefined>(undefined);\r\n\r\n// Default config values\r\nconst config = {\r\n    posts: [],\r\n    users: [],\r\n    gallery: [],\r\n    followers: [],\r\n    search: '',\r\n    loading: true,\r\n};\r\n\r\nfunction UserDataProvider({ children }: { children: React.ReactNode }) {\r\n    const [posts, setPosts] = useState<PostType[]>(config.posts);\r\n    const [users, setUsers] = useState<any[]>(config.users);\r\n    const [gallery, setGallery] = useState<any[]>(config.gallery);\r\n    const [followers, setFollowers] = useState<any[]>(config.followers);\r\n    const [search, setSearch] = useState<string>(config.search);\r\n    const [error, setError] = useState<any>(null);\r\n    const [loading, setLoading] = useState<boolean>(config.loading);\r\n    \r\n    // Get the actual authenticated user ID from auth context\r\n    const { user } = useAuth();\r\n    const userId = user?.id || 1; // Use authenticated user ID, fallback to 1 for compatibility\r\n    \r\n    // Load profile data from localStorage or use defaults based on authenticated user\r\n    const getInitialProfileData = (): profiledataType => {\r\n        // If we have an authenticated user, use their basic info\r\n        if (user) {\r\n            const userName = user.first_name && user.last_name \r\n                ? `${user.first_name} ${user.last_name}`.trim()\r\n                : user.username || user.email || 'User';\r\n                \r\n            return {\r\n                name: userName,\r\n                role: user.role || 'User',\r\n                avatar: '/orthodox/avatars/default.svg', // Will be updated from API\r\n                coverImage: '/orthodox/banners/default.svg', // Will be updated from API\r\n                postsCount: 0,\r\n                followersCount: 0,\r\n                followingCount: 0,\r\n            };\r\n        }\r\n        \r\n        // Try to load from localStorage as fallback\r\n        try {\r\n            const savedProfile = localStorage.getItem('orthodoxmetrics_profile_data');\r\n            if (savedProfile) {\r\n                return JSON.parse(savedProfile);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error loading profile from localStorage:', error);\r\n        }\r\n        \r\n        // Final fallback - completely generic default\r\n        return {\r\n            name: 'User',\r\n            role: 'User',\r\n            avatar: '/orthodox/avatars/default.svg',\r\n            coverImage: '/orthodox/banners/default.svg',\r\n            postsCount: 0,\r\n            followersCount: 0,\r\n            followingCount: 0,\r\n        };\r\n    };\r\n    \r\n    const defaultProfile = getInitialProfileData();\r\n    const [profileData, setProfileData] = useState<profiledataType>(defaultProfile);\r\n\r\n    // Reset profile data when user changes (different user logs in)\r\n    useEffect(() => {\r\n        const newProfile = getInitialProfileData();\r\n        setProfileData(newProfile);\r\n    }, [user?.id]); // Re-run when user ID changes\r\n\r\n    // OrthodoxMetrics API endpoints\r\n    const profKey = `/api/om/profile/${userId}`;\r\n    const postsKey = `/api/om/profile/${userId}/posts?page=1&limit=50`;\r\n    const galleryKey = `/api/om/profile/${userId}/gallery`;\r\n    const follKey = `/api/om/profile/${userId}/followers`;\r\n\r\n    const { data: profileDataApi, isLoading: isProfileLoading, error: profileError } = useSWR(profKey, getFetcher);\r\n    const { data: postsData, isLoading: isPostsLoading, error: postsError, mutate } = useSWR(postsKey, getFetcher);\r\n    const { data: galleryData, isLoading: isGalleryLoading, error: galleryError } = useSWR(galleryKey, getFetcher);\r\n    const { data: followersData, isLoading: isFollowersLoading, error: followersError } = useSWR(follKey, getFetcher);\r\n\r\n    useEffect(() => {\r\n        if (profileDataApi && postsData && galleryData && followersData) {\r\n            // Update profile data from API\r\n            if (profileDataApi && profileDataApi.ok && profileDataApi.profile) {\r\n                const apiProfile = profileDataApi.profile;\r\n                const normalized = normalizeApiProfile(apiProfile);\r\n                \r\n                // Build name with proper fallbacks\r\n                const fullName = `${normalized.firstName || ''} ${normalized.lastName || ''}`.trim();\r\n                const displayName = fullName || normalized.username || normalized.email || 'Unknown User';\r\n                \r\n                const updatedProfile: profiledataType & { id?: number | string; email?: string; username?: string } = {\r\n                    name: displayName,\r\n                    role: apiProfile.role || 'User',\r\n                    avatar: apiProfile.avatarUrl || apiProfile.avatar_url || defaultProfile.avatar,\r\n                    coverImage: apiProfile.bannerUrl || apiProfile.banner_url || defaultProfile.coverImage,\r\n                    postsCount: defaultProfile.postsCount,\r\n                    followersCount: defaultProfile.followersCount,\r\n                    followingCount: defaultProfile.followingCount,\r\n                    // Include identifiers for validation\r\n                    id: normalized.id,\r\n                    email: normalized.email || undefined,\r\n                    username: normalized.username || undefined,\r\n                };\r\n                setProfileData(updatedProfile);\r\n                \r\n                // Save to localStorage only if profile is persistable\r\n                if (isPersistableProfile(updatedProfile)) {\r\n                    try {\r\n                        localStorage.setItem('orthodoxmetrics_profile_data', JSON.stringify(updatedProfile));\r\n                    } catch (error) {\r\n                        console.error('Error saving profile to localStorage:', error);\r\n                    }\r\n                } else {\r\n                    // Don't overwrite with invalid profile - keep last known good\r\n                    console.warn('Skipping localStorage save: profile is not persistable (fallback detected)');\r\n                    // If current stored profile is also invalid, remove it\r\n                    try {\r\n                        const stored = localStorage.getItem('orthodoxmetrics_profile_data');\r\n                        if (stored) {\r\n                            const parsed = JSON.parse(stored);\r\n                            if (!isPersistableProfile(parsed)) {\r\n                                localStorage.removeItem('orthodoxmetrics_profile_data');\r\n                                console.log('Removed invalid stored profile from localStorage');\r\n                            }\r\n                        }\r\n                    } catch (err) {\r\n                        // Ignore parse errors\r\n                    }\r\n                }\r\n            }\r\n            \r\n            // Update posts\r\n            if (postsData && postsData.ok && postsData.rows && Array.isArray(postsData.rows)) {\r\n                setPosts(postsData.rows);\r\n            }\r\n            \r\n            // Update gallery\r\n            if (galleryData && galleryData.ok && galleryData.rows && Array.isArray(galleryData.rows)) {\r\n                setGallery(galleryData.rows);\r\n            }\r\n            \r\n            // Update followers\r\n            if (followersData && followersData.ok && followersData.rows && Array.isArray(followersData.rows)) {\r\n                setFollowers(followersData.rows);\r\n            }\r\n            \r\n            setLoading(false);\r\n        } else if (profileError || postsError || galleryError || followersError) {\r\n            setError(profileError || postsError || galleryError || followersError);\r\n            setLoading(false);\r\n        } else {\r\n            setLoading(isProfileLoading || isPostsLoading || isGalleryLoading || isFollowersLoading);\r\n        }\r\n    }, [profileDataApi, postsData, galleryData, followersData, isProfileLoading, isPostsLoading, isGalleryLoading, isFollowersLoading, profileError, postsError, galleryError, followersError]);\r\n\r\n    // Function to add a new item to the gallery\r\n    const addGalleryItem = (item: any) => {\r\n        setGallery((prevGallery) => {\r\n            if (!prevGallery || !Array.isArray(prevGallery)) {\r\n                return [item];\r\n            }\r\n            return [...prevGallery, item];\r\n        });\r\n    };\r\n\r\n    // Function to toggle follow/unfollow status of a user\r\n    const toggleFollow = (id: number) => {\r\n        setFollowers((prevFollowers) => {\r\n            if (!prevFollowers || !Array.isArray(prevFollowers)) {\r\n                return [];\r\n            }\r\n            return prevFollowers.map((follower) =>\r\n                follower && follower.id === id ? { ...follower, isFollowed: !follower.isFollowed } : follower\r\n            );\r\n        });\r\n    };\r\n\r\n    // Function to filter followers based on search input\r\n    const filterFollowers = () => {\r\n        if (followers && Array.isArray(followers)) {\r\n            return followers.filter((t) =>\r\n                t.name && t.name.toLowerCase().includes(search.toLowerCase())\r\n            );\r\n        }\r\n        return followers || [];\r\n    };\r\n\r\n    // Add comment to a post\r\n    const addComment = async (postId: number, comment: string) => {\r\n        try {\r\n            // TODO: Implement OrthodoxMetrics comment API\r\n            console.log('Adding comment:', { postId, comment });\r\n        } catch (error) {\r\n            console.error('Error adding comment:', error);\r\n        }\r\n    };\r\n\r\n    // Add reply to a comment\r\n    const addReply = async (postId: number, commentId: number, reply: string) => {\r\n        try {\r\n            // TODO: Implement OrthodoxMetrics reply API\r\n            console.log('Adding reply:', { postId, commentId, reply });\r\n        } catch (error) {\r\n            console.error('Error adding reply:', error);\r\n        }\r\n    };\r\n\r\n    // Function to toggle like/unlike a post\r\n    const likePost = async (postId: number) => {\r\n        try {\r\n            // TODO: Implement OrthodoxMetrics like API\r\n            console.log('Liking post:', { postId });\r\n        } catch (error) {\r\n            console.error('Error liking post:', error);\r\n        }\r\n    };\r\n\r\n    // Function to toggle like/unlike a reply to a comment\r\n    const likeReply = async (postId: number, commentId: number) => {\r\n        try {\r\n            // TODO: Implement OrthodoxMetrics reply like API\r\n            console.log('Liking reply:', { postId, commentId });\r\n        } catch (error) {\r\n            console.error('Error liking reply:', error);\r\n        }\r\n    };\r\n\r\n    // Function to update profile data\r\n    const updateProfileData = (data: Partial<profiledataType>) => {\r\n        const updatedProfile = { ...profileData, ...data };\r\n        setProfileData(updatedProfile);\r\n        \r\n        // Save to localStorage only if profile is persistable\r\n        if (isPersistableProfile(updatedProfile)) {\r\n            try {\r\n                localStorage.setItem('orthodoxmetrics_profile_data', JSON.stringify(updatedProfile));\r\n            } catch (error) {\r\n                console.error('Error saving profile to localStorage:', error);\r\n            }\r\n        } else {\r\n            console.warn('Skipping localStorage save: updated profile is not persistable (fallback detected)');\r\n            // Don't overwrite with invalid profile - keep last known good\r\n        }\r\n        \r\n        // TODO: Add API call to save to backend\r\n        console.log('Updating profile data:', data);\r\n    };\r\n\r\n    return (\r\n        <UserDataContext.Provider value={{\r\n            posts,\r\n            users,\r\n            error,\r\n            gallery,\r\n            loading,\r\n            profileData,\r\n            addGalleryItem,\r\n            addReply,\r\n            likePost,\r\n            addComment,\r\n            likeReply,\r\n            followers: filterFollowers(),\r\n            toggleFollow,\r\n            setSearch,\r\n            search,\r\n            updateProfileData\r\n        }}>\r\n            {children}\r\n        </UserDataContext.Provider>\r\n    );\r\n};\r\n// Export the provider component\r\nexport { UserDataProvider };\r\nexport { UserDataContext };\r\nexport type { UserDataContextType };\r\nexport default UserDataProvider;\r\n\r\n// Custom hook to use the context\r\nexport function useUserData(): UserDataContextType {\r\n  const context = useContext(UserDataContext);\r\n  if (context === undefined) {\r\n    throw new Error('useUserData must be used within a UserDataProvider');\r\n  }\r\n  return context;\r\n}\r\n"],"names":["isPersistableProfile","profile","trimmedName","normalizeApiProfile","apiProfile","UserDataContext","createContext","config","UserDataProvider","children","posts","setPosts","useState","users","setUsers","gallery","setGallery","followers","setFollowers","search","setSearch","error","setError","loading","setLoading","user","useAuth","userId","getInitialProfileData","savedProfile","defaultProfile","profileData","setProfileData","useEffect","newProfile","profKey","postsKey","galleryKey","follKey","profileDataApi","isProfileLoading","profileError","useSWR","getFetcher","postsData","isPostsLoading","postsError","mutate","galleryData","isGalleryLoading","galleryError","followersData","isFollowersLoading","followersError","normalized","updatedProfile","stored","parsed","err","addGalleryItem","item","prevGallery","toggleFollow","id","prevFollowers","follower","__spreadProps","__spreadValues","filterFollowers","t","addComment","postId","comment","__async","addReply","commentId","reply","likePost","likeReply","updateProfileData","data","jsx"],"mappings":"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"}