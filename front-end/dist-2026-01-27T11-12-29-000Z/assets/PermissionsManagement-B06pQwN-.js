var X=Object.defineProperty,Y=Object.defineProperties;var Z=Object.getOwnPropertyDescriptors;var y=Object.getOwnPropertySymbols;var S=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable;var D=(r,t,s)=>t in r?X(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,b=(r,t)=>{for(var s in t||(t={}))S.call(t,s)&&D(r,s,t[s]);if(y)for(var s of y(t))B.call(t,s)&&D(r,s,t[s]);return r},f=(r,t)=>Y(r,Z(t));var T=(r,t)=>{var s={};for(var i in r)S.call(r,i)&&t.indexOf(i)<0&&(s[i]=r[i]);if(r!=null&&y)for(var i of y(r))t.indexOf(i)<0&&B.call(r,i)&&(s[i]=r[i]);return s};var k=(r,t,s)=>new Promise((i,p)=>{var m=c=>{try{g(s.next(c))}catch(u){p(u)}},_=c=>{try{g(s.throw(c))}catch(u){p(u)}},g=c=>c.done?i(c.value):Promise.resolve(c.value).then(m,_);g((s=s.apply(r,t)).next())});import{c as K,j as e,d as o,$ as w,Q as E,x as L,B as x,y as ee,E as z,U as se,h as C,R as ae,r as re,p as te,D as ie,e as O}from"./index-CHjTtHW2.js";import{r as l,b as ne}from"./vendor-DgfDxsY7.js";import{P as U}from"./PageContainer-DmS_qDLp.js";import{B as $}from"./Breadcrumb-DTsvC1YP.js";import{B as oe}from"./BlankCard-CTflXlGL.js";import{T as ce,a as M}from"./Tabs-exSKFVtY.js";import{I as de}from"./IconUsers-1CvAMUmN.js";import{I as le}from"./IconMenu2-DdzlNb8m.js";import{T as me,a as pe,b as ue,c as F,d as he}from"./TableRow-BN3XqCeO.js";import{T as h}from"./TableCell-BB5sPEEy.js";import{A as xe,a as ge,b as je}from"./AccordionSummary-CKC2_P9a.js";import{I as ye}from"./IconChevronDown-igsdVXwZ.js";import{L as be}from"./ListItem-Dfjv7Y1Q.js";import{L as fe}from"./ListItemIcon-adOcSfm6.js";import{L as _e}from"./ListItemText-DvUVlISZ.js";import"./Helmet-DNWYwtrp.js";import"./index-BvdvJza9.js";import"./Breadcrumbs-Cb-T7Rgi.js";import"./Link-CQ4x0WOQ.js";import"./KeyboardArrowRight-D5zkCLUN.js";import"./listItemButtonClasses-CP5ZoM92.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=[["path",{d:"M12 13m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M13.45 11.55l2.05 -2.05",key:"svg-1"}],["path",{d:"M6.4 20a9 9 0 1 1 11.2 0z",key:"svg-2"}]],Ce=K("outline","dashboard","Dashboard",ve),H=[{to:"/",title:"Home"},{to:"/dashboards/orthodmetrics",title:"Admin Dashboard"},{title:"OM Permission Center"}];function P(r){const m=r,{children:t,value:s,index:i}=m,p=T(m,["children","value","index"]);return e.jsx("div",f(b({role:"tabpanel",hidden:s!==i,id:`permissions-tabpanel-${i}`,"aria-labelledby":`permissions-tab-${i}`},p),{children:s===i&&e.jsx(x,{sx:{pt:3},children:t})}))}const qe=()=>{const[r,t]=l.useState(0),[s,i]=l.useState([]),[p,m]=l.useState([]),[_,g]=l.useState([]),[c,u]=l.useState(!0),[I,V]=l.useState(""),[A,Me]=l.useState(""),G=[{id:1,name:"super_admin",display_name:"Super Administrator",description:"Full system access",level:10},{id:2,name:"admin",display_name:"Administrator",description:"Administrative access",level:8},{id:3,name:"priest",display_name:"Priest",description:"Clergy access",level:6},{id:4,name:"deacon",display_name:"Deacon",description:"Deacon access",level:5},{id:5,name:"church_admin",display_name:"Church Administrator",description:"Church management",level:4},{id:6,name:"cantor",display_name:"Cantor",description:"Liturgical assistant",level:3},{id:7,name:"member",display_name:"Church Member",description:"Basic member access",level:2},{id:8,name:"guest",display_name:"Guest",description:"Limited guest access",level:1}],Q=[{menu_key:"dashboards",title:"Dashboards",path:"/dashboards",icon:"IconDashboard",roles:{super_admin:!0,admin:!0,priest:!0,deacon:!0,church_admin:!0,cantor:!0,member:!0,guest:!1}},{menu_key:"admin_dashboard",title:"Admin Dashboard",path:"/dashboards/orthodmetrics",icon:"IconShield",roles:{super_admin:!0,admin:!0,priest:!1,deacon:!1,church_admin:!1,cantor:!1,member:!1,guest:!1}},{menu_key:"user_management",title:"User Management",path:"/admin/users",icon:"IconUsers",roles:{super_admin:!0,admin:!0,priest:!1,deacon:!1,church_admin:!1,cantor:!1,member:!1,guest:!1}},{menu_key:"records_management",title:"Records Management",path:"/apps/records",icon:"IconDatabase",roles:{super_admin:!0,admin:!0,priest:!0,deacon:!0,church_admin:!0,cantor:!1,member:!1,guest:!1}},{menu_key:"liturgical_calendar",title:"Orthodox Calendar",path:"/apps/liturgical-calendar",icon:"IconCalendar",roles:{super_admin:!0,admin:!0,priest:!0,deacon:!0,church_admin:!0,cantor:!0,member:!0,guest:!0}}],W=[{id:"can_edit_baptism",name:"Edit Baptism Records",description:"Allow editing baptism records",category:"Records"},{id:"can_edit_marriage",name:"Edit Marriage Records",description:"Allow editing marriage records",category:"Records"},{id:"can_edit_funeral",name:"Edit Funeral Records",description:"Allow editing funeral records",category:"Records"},{id:"can_manage_users",name:"Manage Users",description:"Create, edit, and delete user accounts",category:"Administration"},{id:"can_manage_churches",name:"Manage Churches",description:"Manage church information and settings",category:"Administration"},{id:"can_view_analytics",name:"View Analytics",description:"Access analytics and reporting features",category:"Analytics"},{id:"can_export_data",name:"Export Data",description:"Export data to various formats",category:"Data"},{id:"can_import_data",name:"Import Data",description:"Import data from external sources",category:"Data"}];l.useEffect(()=>{R()},[]);const R=()=>k(void 0,null,function*(){try{u(!0),i(G),m(Q),g(W)}catch(a){V("Failed to load permissions data"),console.error("Error loading permissions:",a)}finally{u(!1)}}),q=(a,n)=>{t(n)},J=(a,n,d)=>{m(N=>N.map(j=>j.menu_key===a?f(b({},j),{roles:f(b({},j.roles),{[n]:d})}):j)),console.log(`Updating ${a} for ${n}: ${d}`)},v=a=>({super_admin:"error",admin:"warning",priest:"primary",deacon:"secondary",church_admin:"info",cantor:"success",member:"default",guest:"default"})[a]||"default";return c?e.jsxs(U,{title:"OM Permission Center",description:"Manage role-based permissions",children:[e.jsx($,{title:"OM Permission Center",items:H}),e.jsx(o,{children:"Loading permissions data..."})]}):e.jsxs(U,{title:"OM Permission Center",description:"Manage role-based permissions",children:[e.jsx($,{title:"OM Permission Center",items:H}),I&&e.jsx(w,{severity:"error",sx:{mb:2},children:I}),A&&e.jsx(w,{severity:"success",sx:{mb:2},children:A}),e.jsx(oe,{children:e.jsxs(E,{children:[e.jsxs(o,{variant:"h4",gutterBottom:!0,children:[e.jsx(L,{style:{marginRight:8,verticalAlign:"middle"}}),"OM Permission Center"]}),e.jsx(o,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:"Configure which roles can access specific content and features"}),e.jsx(x,{sx:{borderBottom:1,borderColor:"divider",mt:3},children:e.jsxs(ce,{value:r,onChange:q,children:[e.jsx(M,{label:"Role Overview",icon:e.jsx(de,{size:20}),iconPosition:"start"}),e.jsx(M,{label:"Menu Permissions",icon:e.jsx(le,{size:20}),iconPosition:"start"}),e.jsx(M,{label:"System Permissions",icon:e.jsx(ee,{size:20}),iconPosition:"start"})]})}),e.jsxs(P,{value:r,index:0,children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Role Hierarchy"}),e.jsx(z,{container:!0,spacing:3,children:s.map(a=>e.jsx(z,{size:{xs:12,sm:6,md:4},children:e.jsx(se,{variant:"outlined",children:e.jsxs(E,{children:[e.jsxs(x,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[e.jsx(C,{label:a.display_name,color:v(a.name),variant:"filled"}),e.jsxs(o,{variant:"caption",color:"text.secondary",children:["Level ",a.level]})]}),e.jsx(o,{variant:"body2",color:"text.secondary",children:a.description})]})})},a.id))})]}),e.jsxs(P,{value:r,index:1,children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"Menu Access Permissions"}),e.jsx(me,{component:ae,variant:"outlined",children:e.jsxs(pe,{children:[e.jsx(ue,{children:e.jsxs(F,{children:[e.jsx(h,{children:e.jsx("strong",{children:"Menu Item"})}),e.jsx(h,{children:e.jsx("strong",{children:"Path"})}),s.map(a=>e.jsx(h,{align:"center",children:e.jsx(C,{label:a.display_name,color:v(a.name),size:"small"})},a.name))]})}),e.jsx(he,{children:p.map(a=>e.jsxs(F,{children:[e.jsx(h,{children:e.jsxs(x,{display:"flex",alignItems:"center",children:[e.jsx(Ce,{size:16,style:{marginRight:8}}),a.title]})}),e.jsx(h,{children:e.jsx(o,{variant:"caption",color:"text.secondary",children:a.path})}),s.map(n=>e.jsx(h,{align:"center",children:e.jsx(re,{checked:a.roles[n.name]||!1,onChange:d=>J(a.menu_key,n.name,d.target.checked),size:"small"})},n.name))]},a.menu_key))})]})})]}),e.jsxs(P,{value:r,index:2,children:[e.jsx(o,{variant:"h6",gutterBottom:!0,children:"System Feature Permissions"}),["Records","Administration","Analytics","Data"].map(a=>e.jsxs(xe,{defaultExpanded:!0,children:[e.jsx(ge,{expandIcon:e.jsx(ye,{}),children:e.jsxs(o,{variant:"subtitle1",fontWeight:"600",children:[a," Permissions"]})}),e.jsx(je,{children:e.jsx(te,{children:_.filter(n=>n.category===a).map(n=>e.jsxs(ne.Fragment,{children:[e.jsxs(be,{children:[e.jsx(fe,{children:e.jsx(L,{size:20})}),e.jsx(_e,{primary:n.name,secondary:n.description}),e.jsx(x,{display:"flex",gap:1,children:s.map(d=>e.jsx(C,{label:d.display_name,color:v(d.name),size:"small",variant:"outlined"},d.name))})]}),e.jsx(ie,{})]},n.id))})})]},a))]}),e.jsxs(x,{mt:4,display:"flex",gap:2,children:[e.jsx(O,{variant:"contained",color:"primary",children:"Save Changes"}),e.jsx(O,{variant:"outlined",onClick:R,children:"Reset Changes"})]})]})})]})};export{qe as default};
//# sourceMappingURL=PermissionsManagement-B06pQwN-.js.map
