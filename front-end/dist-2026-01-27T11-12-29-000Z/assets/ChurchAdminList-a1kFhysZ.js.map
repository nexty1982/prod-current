{"version":3,"file":"ChurchAdminList-a1kFhysZ.js","sources":["../../src/features/admin/admin/ChurchAdminList.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport {\r\n    Box,\r\n    Typography,\r\n    Card,\r\n    CardContent,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableHead,\r\n    TableRow,\r\n    Paper,\r\n    Button,\r\n    Chip,\r\n    IconButton,\r\n    Alert,\r\n    CircularProgress,\r\n    Tooltip\r\n} from '@mui/material';\r\nimport {\r\n    IconBuilding,\r\n    IconUsers,\r\n    IconRefresh,\r\n    IconEye\r\n} from '@tabler/icons-react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport PageContainer from '@/shared/ui/PageContainer';\r\nimport Breadcrumb from '@/layouts/full/shared/breadcrumb/Breadcrumb';\r\n\r\ninterface Church {\r\n    id: number;\r\n    church_name: string;\r\n    location: string;\r\n    city: string;\r\n    country: string;\r\n    language_preference: string;\r\n    admin_email: string;\r\n    timezone: string;\r\n    is_active: boolean;\r\n    created_at: string;\r\n    updated_at: string;\r\n}\r\n\r\nconst ChurchAdminList: React.FC = () => {\r\n    const { isSuperAdmin, hasRole } = useAuth();\r\n    const navigate = useNavigate();\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [churches, setChurches] = useState<Church[]>([]);\r\n\r\n    const isAdmin = hasRole(['admin', 'super_admin']);\r\n\r\n    const fetchChurches = async () => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            \r\n            const response = await fetch('/api/admin/churches', {\r\n                credentials: 'include'\r\n            });\r\n            \r\n            if (!response.ok) {\r\n                throw new Error('Failed to fetch churches');\r\n            }\r\n            \r\n            const result = await response.json();\r\n            \r\n            if (result.success) {\r\n                setChurches(result.churches || []);\r\n            } else {\r\n                throw new Error(result.message || 'Failed to fetch churches');\r\n            }\r\n        } catch (err) {\r\n            console.error('Error fetching churches:', err);\r\n            setError(err instanceof Error ? err.message : 'An error occurred');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleRefresh = () => {\r\n        fetchChurches();\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!isAdmin) {\r\n            setError('Administrative privileges required');\r\n            setLoading(false);\r\n            return;\r\n        }\r\n        \r\n        fetchChurches();\r\n    }, [isAdmin]);\r\n\r\n    if (!isAdmin) {\r\n        return (\r\n            <PageContainer title=\"Church Administration\" description=\"Church administration panel selection\">\r\n                <Alert severity=\"error\">Administrative privileges required</Alert>\r\n            </PageContainer>\r\n        );\r\n    }\r\n\r\n    const BCrumb = [\r\n        { to: '/', title: 'Home' },\r\n        { to: '/admin', title: 'Admin' },\r\n        { title: 'Church Administration' },\r\n    ];\r\n\r\n    if (loading) {\r\n        return (\r\n            <PageContainer title=\"Church Administration\" description=\"Church administration panel selection\">\r\n                <Breadcrumb title=\"Church Administration\" items={BCrumb} />\r\n                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"200px\">\r\n                    <CircularProgress />\r\n                </Box>\r\n            </PageContainer>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <PageContainer title=\"Church Administration\" description=\"Church administration panel selection\">\r\n                <Breadcrumb title=\"Church Administration\" items={BCrumb} />\r\n                <Alert severity=\"error\">{error}</Alert>\r\n            </PageContainer>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <PageContainer title=\"Church Administration\" description=\"Church administration panel selection\">\r\n            <Breadcrumb title=\"Church Administration\" items={BCrumb} />\r\n            \r\n            <Box p={3}>\r\n                <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\" mb={3}>\r\n                    <Box display=\"flex\" alignItems=\"center\">\r\n                        <IconBuilding size=\"24\" style={{ marginRight: 8 }} />\r\n                        <Typography variant=\"h4\">Church Administration</Typography>\r\n                    </Box>\r\n                    <Button\r\n                        variant=\"outlined\"\r\n                        startIcon={<IconRefresh />}\r\n                        onClick={handleRefresh}\r\n                    >\r\n                        Refresh\r\n                    </Button>\r\n                </Box>\r\n\r\n                <Card>\r\n                    <CardContent>\r\n                        <Typography variant=\"h6\" gutterBottom>\r\n                            Select a Church to Administer\r\n                        </Typography>\r\n                        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\r\n                            Choose a church below to access its admin panel with user management, records, logs, and administrative tools.\r\n                        </Typography>\r\n\r\n                        <TableContainer component={Paper} elevation={0}>\r\n                            <Table>\r\n                                <TableHead>\r\n                                    <TableRow>\r\n                                        <TableCell>Church Name</TableCell>\r\n                                        <TableCell>Location</TableCell>\r\n                                        <TableCell>Language</TableCell>\r\n                                        <TableCell>Status</TableCell>\r\n                                        <TableCell>Admin Email</TableCell>\r\n                                        <TableCell>Actions</TableCell>\r\n                                    </TableRow>\r\n                                </TableHead>\r\n                                <TableBody>\r\n                                    {churches.map((church) => (\r\n                                        <TableRow key={church.id}>\r\n                                            <TableCell>\r\n                                                <Typography variant=\"subtitle2\" fontWeight=\"bold\">\r\n                                                    {church.church_name}\r\n                                                </Typography>\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                {church.location || 'Not specified'}\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Chip \r\n                                                    label={church.language_preference?.toUpperCase() || 'EN'} \r\n                                                    size=\"small\"\r\n                                                    variant=\"outlined\"\r\n                                                />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Chip \r\n                                                    label={church.is_active ? 'Active' : 'Inactive'} \r\n                                                    size=\"small\"\r\n                                                    color={church.is_active ? 'success' : 'error'}\r\n                                                />\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Typography variant=\"body2\">\r\n                                                    {church.admin_email}\r\n                                                </Typography>\r\n                                            </TableCell>\r\n                                            <TableCell>\r\n                                                <Tooltip title=\"Open Church Admin Panel\">\r\n                                                    <IconButton\r\n                                                        size=\"small\"\r\n                                                        color=\"primary\"\r\n                                                        onClick={() => navigate(`/admin/church/${church.id}`)}\r\n                                                    >\r\n                                                        <IconUsers />\r\n                                                    </IconButton>\r\n                                                </Tooltip>\r\n                                                <Tooltip title=\"View Church Details\">\r\n                                                    <IconButton\r\n                                                        size=\"small\"\r\n                                                        onClick={() => navigate('/apps/church-management')}\r\n                                                    >\r\n                                                        <IconEye />\r\n                                                    </IconButton>\r\n                                                </Tooltip>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    ))}\r\n                                    {churches.length === 0 && (\r\n                                        <TableRow>\r\n                                            <TableCell colSpan={6} align=\"center\">\r\n                                                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                                    No churches found\r\n                                                </Typography>\r\n                                            </TableCell>\r\n                                        </TableRow>\r\n                                    )}\r\n                                </TableBody>\r\n                            </Table>\r\n                        </TableContainer>\r\n                    </CardContent>\r\n                </Card>\r\n            </Box>\r\n        </PageContainer>\r\n    );\r\n};\r\n\r\nexport default ChurchAdminList;\r\n"],"names":["ChurchAdminList","isSuperAdmin","hasRole","useAuth","navigate","useNavigate","loading","setLoading","useState","error","setError","churches","setChurches","isAdmin","fetchChurches","__async","response","result","err","handleRefresh","useEffect","jsx","PageContainer","Alert","BCrumb","jsxs","Breadcrumb","Box","CircularProgress","IconBuilding","Typography","Button","IconRefresh","Card","CardContent","TableContainer","Paper","Table","TableHead","TableRow","TableCell","TableBody","church","Chip","_a","Tooltip","IconButton","IconUsers","IconEye"],"mappings":"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"}