{"version":3,"file":"RecipientSubmissionPage-D3PXrf9r.js","sources":["../../src/features/records-centralized/components/interactiveReport/RecipientSubmissionPage.tsx"],"sourcesContent":["/**\r\n * RecipientSubmissionPage Component\r\n * \r\n * Public-facing page for recipients to submit interactive reports.\r\n * Accessed via a unique token URL: /r/interactive/:token\r\n * \r\n * Route: /r/interactive/:token\r\n */\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n  TextField,\r\n  Button,\r\n  Alert,\r\n  CircularProgress,\r\n  Stepper,\r\n  Step,\r\n  StepLabel,\r\n  Grid,\r\n  Card,\r\n  CardContent,\r\n} from '@mui/material';\r\nimport { CheckCircle, Error as ErrorIcon } from '@mui/icons-material';\r\n\r\ninterface ReportFormData {\r\n  [key: string]: any;\r\n}\r\n\r\nconst RecipientSubmissionPage: React.FC = () => {\r\n  const { token } = useParams<{ token: string }>();\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [success, setSuccess] = useState(false);\r\n  const [formData, setFormData] = useState<ReportFormData>({});\r\n  const [reportConfig, setReportConfig] = useState<any>(null);\r\n  const [activeStep, setActiveStep] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const fetchReportConfig = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        \r\n        // TODO: Replace with actual API call\r\n        // const response = await fetch(`/api/interactive-reports/config/${token}`);\r\n        // if (!response.ok) {\r\n        //   throw new Error('Invalid or expired token');\r\n        // }\r\n        // const data = await response.json();\r\n        // setReportConfig(data);\r\n        \r\n        // Placeholder: Set a default config\r\n        setReportConfig({\r\n          title: 'Interactive Report Submission',\r\n          fields: [\r\n            { name: 'name', label: 'Name', type: 'text', required: true },\r\n            { name: 'email', label: 'Email', type: 'email', required: true },\r\n            { name: 'comments', label: 'Comments', type: 'textarea', required: false },\r\n          ],\r\n        });\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'Failed to load report form');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (token) {\r\n      fetchReportConfig();\r\n    }\r\n  }, [token]);\r\n\r\n  const handleSubmit = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      \r\n      // TODO: Replace with actual API call\r\n      // const response = await fetch(`/api/interactive-reports/submit/${token}`, {\r\n      //   method: 'POST',\r\n      //   headers: { 'Content-Type': 'application/json' },\r\n      //   body: JSON.stringify(formData),\r\n      // });\r\n      // if (!response.ok) {\r\n      //   throw new Error('Failed to submit report');\r\n      // }\r\n      \r\n      // Simulate success\r\n      setTimeout(() => {\r\n        setSuccess(true);\r\n        setLoading(false);\r\n      }, 1000);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to submit report');\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleFieldChange = (fieldName: string, value: any) => {\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [fieldName]: value,\r\n    }));\r\n  };\r\n\r\n  if (loading && !reportConfig) {\r\n    return (\r\n      <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', minHeight: '100vh' }}>\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error && !reportConfig) {\r\n    return (\r\n      <Box sx={{ p: 3, maxWidth: 600, mx: 'auto' }}>\r\n        <Alert severity=\"error\" icon={<ErrorIcon />}>\r\n          {error}\r\n        </Alert>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (success) {\r\n    return (\r\n      <Box sx={{ p: 3, maxWidth: 600, mx: 'auto' }}>\r\n        <Card>\r\n          <CardContent sx={{ textAlign: 'center', p: 4 }}>\r\n            <CheckCircle sx={{ fontSize: 64, color: 'success.main', mb: 2 }} />\r\n            <Typography variant=\"h5\" gutterBottom>\r\n              Report Submitted Successfully\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\r\n              Thank you for your submission. Your report has been received and will be reviewed.\r\n            </Typography>\r\n            <Button variant=\"contained\" onClick={() => navigate('/')}>\r\n              Return to Home\r\n            </Button>\r\n          </CardContent>\r\n        </Card>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ p: 3, maxWidth: 800, mx: 'auto' }}>\r\n      <Paper sx={{ p: 3 }}>\r\n        <Typography variant=\"h4\" gutterBottom>\r\n          {reportConfig?.title || 'Interactive Report Submission'}\r\n        </Typography>\r\n        <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\r\n          Please fill out the form below to submit your report.\r\n        </Typography>\r\n\r\n        {error && (\r\n          <Alert severity=\"error\" sx={{ mb: 3 }} onClose={() => setError(null)}>\r\n            {error}\r\n          </Alert>\r\n        )}\r\n\r\n        <Grid container spacing={3}>\r\n          {reportConfig?.fields?.map((field: any) => (\r\n            <Grid item xs={12} key={field.name}>\r\n              <TextField\r\n                fullWidth\r\n                label={field.label}\r\n                type={field.type === 'textarea' ? undefined : field.type}\r\n                multiline={field.type === 'textarea'}\r\n                rows={field.type === 'textarea' ? 4 : undefined}\r\n                required={field.required}\r\n                value={formData[field.name] || ''}\r\n                onChange={(e) => handleFieldChange(field.name, e.target.value)}\r\n              />\r\n            </Grid>\r\n          ))}\r\n        </Grid>\r\n\r\n        <Box sx={{ display: 'flex', justifyContent: 'flex-end', gap: 2, mt: 3 }}>\r\n          <Button\r\n            variant=\"outlined\"\r\n            onClick={() => navigate('/')}\r\n            disabled={loading}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            onClick={handleSubmit}\r\n            disabled={loading}\r\n          >\r\n            {loading ? <CircularProgress size={20} /> : 'Submit Report'}\r\n          </Button>\r\n        </Box>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default RecipientSubmissionPage;\r\n"],"names":["RecipientSubmissionPage","token","useParams","navigate","useNavigate","loading","setLoading","useState","error","setError","success","setSuccess","formData","setFormData","reportConfig","setReportConfig","activeStep","setActiveStep","useEffect","__async","err","handleSubmit","handleFieldChange","fieldName","value","prev","__spreadProps","__spreadValues","jsx","Box","CircularProgress","Alert","ErrorIcon","Card","CardContent","CheckCircle","Typography","Button","jsxs","Paper","Grid","_a","field","TextField","e"],"mappings":"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"}