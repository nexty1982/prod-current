{"version":3,"file":"MenuPermissions-DX-JM4Bu.js","sources":["../../src/features/admin/admin/MenuPermissions.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n    Box,\r\n    Card,\r\n    CardContent,\r\n    Typography,\r\n    Table,\r\n    TableBody,\r\n    TableCell,\r\n    TableContainer,\r\n    TableHead,\r\n    TableRow,\r\n    Chip,\r\n    Switch,\r\n    FormControlLabel,\r\n    Button,\r\n    Dialog,\r\n    DialogTitle,\r\n    DialogContent,\r\n    DialogActions,\r\n    TextField,\r\n    FormControl,\r\n    InputLabel,\r\n    Select,\r\n    MenuItem,\r\n    OutlinedInput,\r\n    Alert,\r\n    Snackbar,\r\n    Accordion,\r\n    AccordionSummary,\r\n    AccordionDetails,\r\n    IconButton,\r\n    Tooltip\r\n} from '@mui/material';\r\nimport {\r\n    ExpandMore as ExpandMoreIcon,\r\n    Add as AddIcon,\r\n    Edit as EditIcon,\r\n    Security as SecurityIcon,\r\n    Menu as MenuIcon\r\n} from '@mui/icons-material';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\ninterface MenuItemPermission {\r\n    id: number;\r\n    menu_key: string;\r\n    title: string;\r\n    path: string;\r\n    icon: string;\r\n    parent_id: number | null;\r\n    sort_order: number;\r\n    description: string;\r\n    is_active: boolean;\r\n    allowed_roles: string[];\r\n}\r\n\r\ninterface MenuPermissionsState {\r\n    menuItems: MenuItemPermission[];\r\n    availableRoles: string[];\r\n}\r\n\r\nconst MenuPermissionsManagement: React.FC = () => {\r\n    const { isSuperAdmin } = useAuth();\r\n    const [menuData, setMenuData] = useState<MenuPermissionsState>({\r\n        menuItems: [],\r\n        availableRoles: []\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [success, setSuccess] = useState<string | null>(null);\r\n\r\n    // Dialog states\r\n    const [editDialogOpen, setEditDialogOpen] = useState(false);\r\n    const [createDialogOpen, setCreateDialogOpen] = useState(false);\r\n    const [selectedMenuItem, setSelectedMenuItem] = useState<MenuItemPermission | null>(null);\r\n\r\n    // Form states\r\n    const [newMenuItem, setNewMenuItem] = useState({\r\n        menu_key: '',\r\n        title: '',\r\n        path: '',\r\n        icon: '',\r\n        parent_id: null as number | null,\r\n        sort_order: 999,\r\n        description: '',\r\n        allowedRoles: [] as string[]\r\n    });\r\n\r\n    // Check if user has super admin access\r\n    if (!isSuperAdmin()) {\r\n        return (\r\n            <Box p={3}>\r\n                <Alert severity=\"error\">\r\n                    You do not have permission to access menu permissions management.\r\n                    This feature is only available to super administrators.\r\n                </Alert>\r\n            </Box>\r\n        );\r\n    }\r\n\r\n    // Load menu permissions data\r\n    useEffect(() => {\r\n        loadMenuPermissions();\r\n    }, []);\r\n\r\n    const loadMenuPermissions = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await fetch('/api/menu-permissions', {\r\n                credentials: 'include'\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Failed to load menu permissions');\r\n            }\r\n\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                setMenuData({\r\n                    menuItems: data.menuItems,\r\n                    availableRoles: data.availableRoles\r\n                });\r\n            } else {\r\n                throw new Error(data.message || 'Failed to load menu permissions');\r\n            }\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Failed to load menu permissions');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Update menu permissions for a specific menu item\r\n    const updateMenuPermissions = async (menuId: number, allowedRoles: string[]) => {\r\n        try {\r\n            const response = await fetch(`/api/menu-permissions/${menuId}`, {\r\n                method: 'PUT',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                credentials: 'include',\r\n                body: JSON.stringify({ allowedRoles })\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Failed to update menu permissions');\r\n            }\r\n\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                setSuccess('Menu permissions updated successfully');\r\n                loadMenuPermissions(); // Reload data\r\n            } else {\r\n                throw new Error(data.message || 'Failed to update menu permissions');\r\n            }\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Failed to update menu permissions');\r\n        }\r\n    };\r\n\r\n    // Handle role toggle for a menu item\r\n    const handleRoleToggle = (menuItem: MenuItemPermission, role: string, checked: boolean) => {\r\n        let updatedRoles = [...menuItem.allowed_roles];\r\n\r\n        if (checked) {\r\n            if (!updatedRoles.includes(role)) {\r\n                updatedRoles.push(role);\r\n            }\r\n        } else {\r\n            updatedRoles = updatedRoles.filter(r => r !== role);\r\n        }\r\n\r\n        updateMenuPermissions(menuItem.id, updatedRoles);\r\n    };\r\n\r\n    // Create new menu item\r\n    const handleCreateMenuItem = async () => {\r\n        try {\r\n            const response = await fetch('/api/menu-permissions/menu-item', {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                credentials: 'include',\r\n                body: JSON.stringify(newMenuItem)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                throw new Error('Failed to create menu item');\r\n            }\r\n\r\n            const data = await response.json();\r\n            if (data.success) {\r\n                setSuccess('Menu item created successfully');\r\n                setCreateDialogOpen(false);\r\n                setNewMenuItem({\r\n                    menu_key: '',\r\n                    title: '',\r\n                    path: '',\r\n                    icon: '',\r\n                    parent_id: null,\r\n                    sort_order: 999,\r\n                    description: '',\r\n                    allowedRoles: []\r\n                });\r\n                loadMenuPermissions();\r\n            } else {\r\n                throw new Error(data.message || 'Failed to create menu item');\r\n            }\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'Failed to create menu item');\r\n        }\r\n    };\r\n\r\n    // Group menu items by parent\r\n    const groupedMenuItems = menuData.menuItems.reduce((groups, item) => {\r\n        const parentId = item.parent_id || 'root';\r\n        if (!groups[parentId]) {\r\n            groups[parentId] = [];\r\n        }\r\n        groups[parentId].push(item);\r\n        return groups;\r\n    }, {} as Record<string, MenuItemPermission[]>);\r\n\r\n    const renderMenuPermissionsTable = (items: MenuItemPermission[], title: string) => (\r\n        <Accordion defaultExpanded>\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                <Box display=\"flex\" alignItems=\"center\" gap={1}>\r\n                    <MenuIcon />\r\n                    <Typography variant=\"h6\">{title}</Typography>\r\n                    <Chip size=\"small\" label={`${items.length} items`} />\r\n                </Box>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n                <TableContainer>\r\n                    <Table size=\"small\">\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell><strong>Menu Item</strong></TableCell>\r\n                                <TableCell><strong>Path</strong></TableCell>\r\n                                <TableCell><strong>Sort Order</strong></TableCell>\r\n                                {menuData.availableRoles.map(role => (\r\n                                    <TableCell key={role} align=\"center\">\r\n                                        <strong>{role}</strong>\r\n                                    </TableCell>\r\n                                ))}\r\n                                <TableCell><strong>Actions</strong></TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {items.map((menuItem) => (\r\n                                <TableRow key={menuItem.id}>\r\n                                    <TableCell>\r\n                                        <Box>\r\n                                            <Typography variant=\"body2\" fontWeight=\"medium\">\r\n                                                {menuItem.title}\r\n                                            </Typography>\r\n                                            <Typography variant=\"caption\" color=\"text.secondary\">\r\n                                                {menuItem.menu_key}\r\n                                            </Typography>\r\n                                        </Box>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        <Typography variant=\"body2\" fontFamily=\"monospace\">\r\n                                            {menuItem.path || '-'}\r\n                                        </Typography>\r\n                                    </TableCell>\r\n                                    <TableCell>\r\n                                        <Chip size=\"small\" label={menuItem.sort_order} />\r\n                                    </TableCell>\r\n                                    {menuData.availableRoles.map(role => (\r\n                                        <TableCell key={role} align=\"center\">\r\n                                            <Switch\r\n                                                checked={menuItem.allowed_roles.includes(role)}\r\n                                                onChange={(e) => handleRoleToggle(menuItem, role, e.target.checked)}\r\n                                                size=\"small\"\r\n                                                color=\"primary\"\r\n                                            />\r\n                                        </TableCell>\r\n                                    ))}\r\n                                    <TableCell>\r\n                                        <Tooltip title=\"Edit Menu Item\">\r\n                                            <IconButton\r\n                                                size=\"small\"\r\n                                                onClick={() => {\r\n                                                    setSelectedMenuItem(menuItem);\r\n                                                    setEditDialogOpen(true);\r\n                                                }}\r\n                                            >\r\n                                                <EditIcon fontSize=\"small\" />\r\n                                            </IconButton>\r\n                                        </Tooltip>\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </AccordionDetails>\r\n        </Accordion>\r\n    );\r\n\r\n    if (loading) {\r\n        return (\r\n            <Box p={3}>\r\n                <Typography>Loading menu permissions...</Typography>\r\n            </Box>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Box p={3}>\r\n            <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\r\n                <Box display=\"flex\" alignItems=\"center\" gap={2}>\r\n                    <SecurityIcon color=\"primary\" />\r\n                    <Typography variant=\"h4\">Menu Permissions Management</Typography>\r\n                </Box>\r\n                <Button\r\n                    variant=\"contained\"\r\n                    startIcon={<AddIcon />}\r\n                    onClick={() => setCreateDialogOpen(true)}\r\n                >\r\n                    Add Menu Item\r\n                </Button>\r\n            </Box>\r\n\r\n            <Alert severity=\"info\" sx={{ mb: 3 }}>\r\n                As a super administrator, you can control which menu items are visible to different user roles.\r\n                Toggle the switches to grant or revoke access to specific menu items for each role.\r\n            </Alert>\r\n\r\n            <Card>\r\n                <CardContent>\r\n                    {/* Root menu items */}\r\n                    {groupedMenuItems.root && renderMenuPermissionsTable(\r\n                        groupedMenuItems.root,\r\n                        'Main Menu Items'\r\n                    )}\r\n\r\n                    {/* Submenu items grouped by parent */}\r\n                    {Object.entries(groupedMenuItems)\r\n                        .filter(([parentId]) => parentId !== 'root')\r\n                        .map(([parentId, items]) => {\r\n                            const parent = menuData.menuItems.find(item => item.id.toString() === parentId);\r\n                            return renderMenuPermissionsTable(\r\n                                items,\r\n                                `${parent?.title || 'Unknown'} - Submenu Items`\r\n                            );\r\n                        })}\r\n                </CardContent>\r\n            </Card>\r\n\r\n            {/* Create Menu Item Dialog */}\r\n            <Dialog open={createDialogOpen} onClose={() => setCreateDialogOpen(false)} maxWidth=\"md\" fullWidth>\r\n                <DialogTitle>Create New Menu Item</DialogTitle>\r\n                <DialogContent>\r\n                    <Box display=\"flex\" flexDirection=\"column\" gap={2} mt={1}>\r\n                        <TextField\r\n                            fullWidth\r\n                            label=\"Menu Key\"\r\n                            value={newMenuItem.menu_key}\r\n                            onChange={(e) => setNewMenuItem({ ...newMenuItem, menu_key: e.target.value })}\r\n                            required\r\n                            helperText=\"Unique identifier for this menu item\"\r\n                        />\r\n                        <TextField\r\n                            fullWidth\r\n                            label=\"Title\"\r\n                            value={newMenuItem.title}\r\n                            onChange={(e) => setNewMenuItem({ ...newMenuItem, title: e.target.value })}\r\n                            required\r\n                        />\r\n                        <TextField\r\n                            fullWidth\r\n                            label=\"Path\"\r\n                            value={newMenuItem.path}\r\n                            onChange={(e) => setNewMenuItem({ ...newMenuItem, path: e.target.value })}\r\n                            helperText=\"Route path (e.g., /admin/users)\"\r\n                        />\r\n                        <TextField\r\n                            fullWidth\r\n                            label=\"Icon\"\r\n                            value={newMenuItem.icon}\r\n                            onChange={(e) => setNewMenuItem({ ...newMenuItem, icon: e.target.value })}\r\n                            helperText=\"Icon component name\"\r\n                        />\r\n                        <TextField\r\n                            fullWidth\r\n                            label=\"Sort Order\"\r\n                            type=\"number\"\r\n                            value={newMenuItem.sort_order}\r\n                            onChange={(e) => setNewMenuItem({ ...newMenuItem, sort_order: parseInt(e.target.value) })}\r\n                        />\r\n                        <TextField\r\n                            fullWidth\r\n                            label=\"Description\"\r\n                            multiline\r\n                            rows={2}\r\n                            value={newMenuItem.description}\r\n                            onChange={(e) => setNewMenuItem({ ...newMenuItem, description: e.target.value })}\r\n                        />\r\n                        <FormControl fullWidth>\r\n                            <InputLabel>Allowed Roles</InputLabel>\r\n                            <Select\r\n                                multiple\r\n                                value={newMenuItem.allowedRoles}\r\n                                onChange={(e) => setNewMenuItem({\r\n                                    ...newMenuItem,\r\n                                    allowedRoles: e.target.value as string[]\r\n                                })}\r\n                                input={<OutlinedInput label=\"Allowed Roles\" />}\r\n                                renderValue={(selected) => (\r\n                                    <Box sx={{ display: 'flex', flexWrap: 'wrap', gap: 0.5 }}>\r\n                                        {(selected as string[]).map((value) => (\r\n                                            <Chip key={value} label={value} size=\"small\" />\r\n                                        ))}\r\n                                    </Box>\r\n                                )}\r\n                            >\r\n                                {menuData.availableRoles.map((role) => (\r\n                                    <MenuItem key={role} value={role}>\r\n                                        {role}\r\n                                    </MenuItem>\r\n                                ))}\r\n                            </Select>\r\n                        </FormControl>\r\n                    </Box>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={() => setCreateDialogOpen(false)}>Cancel</Button>\r\n                    <Button onClick={handleCreateMenuItem} variant=\"contained\">Create</Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n\r\n            {/* Success/Error Snackbars */}\r\n            <Snackbar\r\n                open={!!success}\r\n                autoHideDuration={4000}\r\n                onClose={() => setSuccess(null)}\r\n                anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n            >\r\n                <Alert severity=\"success\" onClose={() => setSuccess(null)}>\r\n                    {success}\r\n                </Alert>\r\n            </Snackbar>\r\n\r\n            <Snackbar\r\n                open={!!error}\r\n                autoHideDuration={6000}\r\n                onClose={() => setError(null)}\r\n                anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n            >\r\n                <Alert severity=\"error\" onClose={() => setError(null)}>\r\n                    {error}\r\n                </Alert>\r\n            </Snackbar>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default MenuPermissionsManagement;\r\n"],"names":["MenuPermissionsManagement","isSuperAdmin","useAuth","menuData","setMenuData","useState","loading","setLoading","error","setError","success","setSuccess","editDialogOpen","setEditDialogOpen","createDialogOpen","setCreateDialogOpen","selectedMenuItem","setSelectedMenuItem","newMenuItem","setNewMenuItem","jsx","Box","Alert","useEffect","loadMenuPermissions","__async","response","data","err","updateMenuPermissions","menuId","allowedRoles","handleRoleToggle","menuItem","role","checked","updatedRoles","r","handleCreateMenuItem","groupedMenuItems","groups","item","parentId","renderMenuPermissionsTable","items","title","jsxs","Accordion","AccordionSummary","ExpandMoreIcon","MenuIcon","Typography","Chip","AccordionDetails","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","Switch","e","Tooltip","IconButton","EditIcon","SecurityIcon","Button","AddIcon","Card","CardContent","parent","Dialog","DialogTitle","DialogContent","TextField","__spreadProps","__spreadValues","FormControl","InputLabel","Select","OutlinedInput","selected","value","MenuItem","DialogActions","Snackbar"],"mappings":"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"}