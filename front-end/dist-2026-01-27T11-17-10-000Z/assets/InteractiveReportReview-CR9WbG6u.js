var p=(c,f,n)=>new Promise((j,d)=>{var l=i=>{try{x(n.next(i))}catch(a){d(a)}},t=i=>{try{x(n.throw(i))}catch(a){d(a)}},x=i=>i.done?j(i.value):Promise.resolve(i.value).then(l,t);x((n=n.apply(c,f)).next())});import{j as e,B as u,R as D,d as g,e as v,aH as k,$ as R,C as B,h as w,T as b,I as y,J as A,Y as E,K as z,O as F,a3 as O}from"./index-CQJq875H.js";import{r as o}from"./vendor-DgfDxsY7.js";import{T as N,a as V,b as L,c as S,d as P}from"./TableRow-DCPT_a5G.js";import{T as r}from"./TableCell-MgPOxDnu.js";import{V as W}from"./Visibility-Bv0xzUo5.js";import{C as H}from"./CheckCircle-CGfB6RRc.js";import{C as J}from"./Cancel-BVsoGlMG.js";const X=()=>{const[c,f]=o.useState([]),[n,j]=o.useState(!1),[d,l]=o.useState(null),[t,x]=o.useState(null),[i,a]=o.useState(!1),m=()=>p(void 0,null,function*(){try{j(!0),l(null),f([])}catch(s){l(s instanceof Error?s.message:"Failed to load reports")}finally{j(!1)}}),T=s=>p(void 0,null,function*(){try{m()}catch(h){l(h instanceof Error?h.message:"Failed to approve report")}}),I=s=>p(void 0,null,function*(){try{m()}catch(h){l(h instanceof Error?h.message:"Failed to reject report")}});o.useEffect(()=>{m()},[]);const C=s=>{switch(s){case"approved":return"success";case"rejected":return"error";default:return"warning"}};return e.jsxs(u,{sx:{p:3},children:[e.jsxs(D,{sx:{p:3},children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsx(g,{variant:"h4",gutterBottom:!0,children:"Interactive Report Review"}),e.jsx(v,{startIcon:e.jsx(k,{}),onClick:m,disabled:n,children:"Refresh"})]}),d&&e.jsx(R,{severity:"error",sx:{mb:3},onClose:()=>l(null),children:d}),n&&c.length===0?e.jsx(u,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(B,{})}):c.length===0?e.jsx(R,{severity:"info",children:"No interactive reports to review at this time."}):e.jsx(N,{children:e.jsxs(V,{children:[e.jsx(L,{children:e.jsxs(S,{children:[e.jsx(r,{children:"Token"}),e.jsx(r,{children:"Submitted"}),e.jsx(r,{children:"Recipient"}),e.jsx(r,{children:"Status"}),e.jsx(r,{align:"right",children:"Actions"})]})}),e.jsx(P,{children:c.map(s=>e.jsxs(S,{children:[e.jsxs(r,{children:[s.token.substring(0,8),"..."]}),e.jsx(r,{children:new Date(s.submittedAt).toLocaleString()}),e.jsx(r,{children:s.recipientName||s.recipientEmail||"N/A"}),e.jsx(r,{children:e.jsx(w,{label:s.status,color:C(s.status),size:"small"})}),e.jsxs(r,{align:"right",children:[e.jsx(b,{title:"View Details",children:e.jsx(y,{size:"small",onClick:()=>{x(s),a(!0)},children:e.jsx(W,{})})}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(b,{title:"Approve",children:e.jsx(y,{size:"small",color:"success",onClick:()=>T(s.id),children:e.jsx(H,{})})}),e.jsx(b,{title:"Reject",children:e.jsx(y,{size:"small",color:"error",onClick:()=>I(s.id),children:e.jsx(J,{})})})]})]})]},s.id))})]})})]}),e.jsxs(A,{open:i,onClose:()=>a(!1),maxWidth:"md",fullWidth:!0,children:[e.jsxs(E,{children:["Report Details - ",t==null?void 0:t.token.substring(0,8),"..."]}),e.jsx(z,{children:t&&e.jsxs(u,{sx:{mt:2},children:[e.jsxs(g,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Submitted: ",new Date(t.submittedAt).toLocaleString()]}),e.jsxs(g,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Status: ",e.jsx(w,{label:t.status,color:C(t.status),size:"small"})]}),e.jsxs(u,{sx:{mt:2},children:[e.jsx(g,{variant:"subtitle2",gutterBottom:!0,children:"Report Data:"}),e.jsx(F,{fullWidth:!0,multiline:!0,rows:10,value:JSON.stringify(t.data,null,2),InputProps:{readOnly:!0},variant:"outlined"})]})]})}),e.jsx(O,{children:e.jsx(v,{onClick:()=>a(!1),children:"Close"})})]})]})};export{X as default};
//# sourceMappingURL=InteractiveReportReview-CR9WbG6u.js.map
