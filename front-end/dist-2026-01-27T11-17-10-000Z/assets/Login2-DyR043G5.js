var R=Object.defineProperty,O=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var M=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,U=Object.prototype.propertyIsEnumerable;var k=(r,o,t)=>o in r?R(r,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[o]=t,f=(r,o)=>{for(var t in o||(o={}))B.call(o,t)&&k(r,t,o[t]);if(M)for(var t of M(o))U.call(o,t)&&k(r,t,o[t]);return r},g=(r,o)=>O(r,q(o));var D=(r,o,t)=>new Promise((p,u)=>{var a=s=>{try{h(t.next(s))}catch(m){u(m)}},c=s=>{try{h(t.throw(s))}catch(m){u(m)}},h=s=>s.done?p(s.value):Promise.resolve(s.value).then(a,c);h((t=t.apply(r,o)).next())});import{j as e,l as A,k as I,$ as T,B as d,d as l,L as v,S as y,b7 as $,F as G,e as N,C as H,n as J,E as F,U as K}from"./index-CQJq875H.js";import{r as j}from"./vendor-DgfDxsY7.js";import{P as Q}from"./PageContainer-Dcom98rz.js";import{i as V,r as X}from"./createSvgIcon-DqU11-6M.js";import{C as Y}from"./CustomCheckbox-CciXy0uL.js";import{C as z}from"./CustomTextField-Ci67kFPz.js";import{C as E}from"./CustomFormLabel-CzsOjDhU.js";import"./Helmet-DNWYwtrp.js";import"./index-BvdvJza9.js";var w={},Z=V;Object.defineProperty(w,"__esModule",{value:!0});var _=w.default=void 0,ee=Z(X()),re=e;_=w.default=(0,ee.default)((0,re.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"ErrorOutline");const te=({title:r,subtitle:o,subtext:t})=>{const p=A(),{login:u,loading:a,error:c,clearError:h}=I(),[s,m]=j.useState({username:"",password:"",rememberMe:!1}),[x,C]=j.useState({}),S=n=>i=>{m(b=>g(f({},b),{[n]:i.target.value})),x[n]&&C(b=>g(f({},b),{[n]:""})),c&&h()},P=n=>{m(i=>g(f({},i),{rememberMe:n.target.checked}))},L=()=>{const n={};return s.username.trim()||(n.username="Email or username is required"),s.password||(n.password="Password is required"),C(n),Object.keys(n).length===0},W=n=>D(void 0,null,function*(){if(n.preventDefault(),!!L())try{const i=yield u(s.username,s.password,s.rememberMe);i&&typeof i=="object"&&"redirectUrl"in i&&i.redirectUrl?window.location.href=i.redirectUrl:p("/dashboards/super")}catch(i){console.error("Login failed:",i)}});return e.jsxs(e.Fragment,{children:[t,c&&e.jsx(T,{severity:"error",icon:e.jsx(_,{}),sx:{mt:2,mb:2},children:e.jsxs(d,{children:[e.jsx(l,{variant:"body1",component:"div",sx:{mb:1},children:c}),c.includes("connecting to the server")&&e.jsxs(l,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:["Still having trouble?"," ",e.jsx(l,{component:"a",href:"/support",sx:{color:"primary.main",textDecoration:"underline",cursor:"pointer"},children:"Contact support"})," ","or try refreshing the page."]}),(c.includes("Incorrect email or password")||c.includes("credentials"))&&e.jsxs(l,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:["Forgot your password?"," ",e.jsx(l,{component:v,to:"/auth/forgot-password",sx:{color:"primary.main",textDecoration:"underline"},children:"Reset it here"})]}),c.includes("temporarily unavailable")&&e.jsxs(l,{variant:"body2",color:"text.secondary",sx:{fontSize:"0.875rem"},children:["Please check our"," ",e.jsx(l,{component:"a",href:"/status",sx:{color:"primary.main",textDecoration:"underline",cursor:"pointer"},children:"system status page"})," ","for updates."]})]})}),e.jsxs(d,{component:"form",onSubmit:W,children:[e.jsxs(y,{spacing:3,children:[e.jsxs(d,{children:[e.jsx(E,{htmlFor:"username",children:"Email or Username"}),e.jsx(z,{id:"username",variant:"outlined",fullWidth:!0,value:s.username,onChange:S("username"),error:!!x.username,helperText:x.username,disabled:a})]}),e.jsxs(d,{children:[e.jsx(E,{htmlFor:"password",children:"Password"}),e.jsx(z,{id:"password",type:"password",variant:"outlined",fullWidth:!0,value:s.password,onChange:S("password"),error:!!x.password,helperText:x.password,disabled:a})]}),e.jsxs(y,{justifyContent:"space-between",direction:"row",alignItems:"center",my:2,children:[e.jsx($,{children:e.jsx(G,{control:e.jsx(Y,{checked:s.rememberMe,onChange:P,disabled:a}),label:"Remember this Device"})}),e.jsx(l,{component:v,to:"/auth/forgot-password",fontWeight:"500",sx:{textDecoration:"none",color:"primary.main"},children:"Forgot Password?"})]})]}),e.jsx(d,{mt:3,children:e.jsx(N,{color:"primary",variant:"contained",size:"large",fullWidth:!0,type:"submit",disabled:a,startIcon:a?e.jsx(H,{size:20}):null,children:a?"Signing In...":"Sign In"})})]}),o]})},he=()=>{const{user:r}=I(),{activeMode:o,setActiveMode:t}=j.useContext(J);return r!=null&&r.full_name||r!=null&&r.first_name&&(r!=null&&r.last_name)&&`${r.first_name}${r.last_name}`,j.useEffect(()=>{if(!(localStorage.getItem("orthodoxmetrics-activeMode")!==null)){const a=new Date().getHours();(a>=18||a<6)&&o!=="dark"&&t("dark")}},[o,t]),e.jsx(Q,{title:"Login",description:"this is Login page",children:e.jsx(d,{sx:{position:"relative","&:before":{content:'""',background:"radial-gradient(#d2f1df, #d3d7fa, #bad8f4)",backgroundSize:"400% 400%",animation:"gradient 15s ease infinite",position:"absolute",height:"100%",width:"100%",opacity:"0.3"}},children:e.jsx(F,{container:!0,spacing:0,justifyContent:"center",sx:{height:"100vh"},children:e.jsx(F,{display:"flex",justifyContent:"center",alignItems:"center",size:{xs:12,sm:12,lg:5,xl:4},children:e.jsxs(K,{elevation:9,sx:{p:4,zIndex:1,width:"100%",maxWidth:"450px"},children:[e.jsx(d,{display:"flex",alignItems:"center",justifyContent:"center",children:e.jsx(d,{component:"img",src:"/images/incode/biz-logo.png",alt:"Orthodox Metrics",sx:{maxWidth:"200px",height:"auto",mb:2}})}),e.jsx(te,{subtitle:e.jsxs(y,{direction:"row",spacing:1,justifyContent:"center",mt:3,children:[e.jsx(l,{color:"textSecondary",variant:"h6",fontWeight:"500",children:"New to Orthodox Metrics?"}),e.jsx(l,{component:v,to:"/auth/register",fontWeight:"500",sx:{textDecoration:"none",color:"primary.main"},children:"Create an account"})]})})]})})})})})};export{he as default};
//# sourceMappingURL=Login2-DyR043G5.js.map
