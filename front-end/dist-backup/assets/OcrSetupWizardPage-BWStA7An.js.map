{"version":3,"file":"OcrSetupWizardPage-BWStA7An.js","sources":["../../node_modules/@mui/icons-material/esm/ArrowForward.js","../../src/features/devel-tools/om-ocr/pages/OcrSetupWizardPage.tsx"],"sourcesContent":["\"use client\";\n\nimport createSvgIcon from './utils/createSvgIcon';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport default createSvgIcon( /*#__PURE__*/_jsx(\"path\", {\n  d: \"m12 4-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z\"\n}), 'ArrowForward');","import React, { useState, useEffect } from 'react';\r\nimport { useSearchParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n  Box,\r\n  Stepper,\r\n  Step,\r\n  StepLabel,\r\n  StepContent,\r\n  Button,\r\n  Paper,\r\n  Typography,\r\n  FormControl,\r\n  FormLabel,\r\n  RadioGroup,\r\n  FormControlLabel,\r\n  Radio,\r\n  Checkbox,\r\n  FormGroup,\r\n  Slider,\r\n  Alert,\r\n  CircularProgress,\r\n  Card,\r\n  CardContent\r\n} from '@mui/material';\r\nimport { CheckCircle, ArrowForward } from '@mui/icons-material';\r\n\r\ninterface SetupState {\r\n  step1?: {\r\n    churchId: number;\r\n    churchName?: string;\r\n    permissionsVerified: boolean;\r\n  };\r\n  step2?: {\r\n    language: string;\r\n    defaultLanguage: string;\r\n    recordTypes: string[];\r\n    confidenceThreshold: number;\r\n  };\r\n  step3?: {\r\n    storagePath: string;\r\n    storageWritable: boolean;\r\n  };\r\n  step4?: {\r\n    visionConfigured: boolean;\r\n  };\r\n  step5?: {\r\n    mappingTemplates: {\r\n      baptism?: boolean;\r\n      marriage?: boolean;\r\n      funeral?: boolean;\r\n    };\r\n  };\r\n}\r\n\r\ninterface ChecklistItem {\r\n  passed: boolean;\r\n  message: string;\r\n}\r\n\r\ninterface ValidationResponse {\r\n  checklist: {\r\n    churchContext: ChecklistItem;\r\n    ocrSettings: ChecklistItem;\r\n    storageReady: ChecklistItem;\r\n    visionReady: ChecklistItem;\r\n    mappingReady: ChecklistItem;\r\n  };\r\n  allPassed: boolean;\r\n  percentComplete: number;\r\n}\r\n\r\nconst steps = [\r\n  'Church Context & Permissions',\r\n  'OCR Settings',\r\n  'Storage & Uploads',\r\n  'Vision Integration',\r\n  'Mapping Baseline',\r\n  'Ready to Launch'\r\n];\r\n\r\nexport default function OcrSetupWizardPage() {\r\n  const [searchParams] = useSearchParams();\r\n  const navigate = useNavigate();\r\n  const churchId = parseInt(searchParams.get('church_id') || '46');\r\n  \r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [setupState, setSetupState] = useState<SetupState>({});\r\n  const [percentComplete, setPercentComplete] = useState(0);\r\n  const [isComplete, setIsComplete] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [saving, setSaving] = useState(false);\r\n  const [validation, setValidation] = useState<ValidationResponse | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  // Load setup state on mount\r\n  useEffect(() => {\r\n    loadSetupState();\r\n    validateSetup();\r\n  }, [churchId]);\r\n\r\n  const loadSetupState = async () => {\r\n    try {\r\n      const response = await fetch(`/api/church/${churchId}/ocr/setup-state`);\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setSetupState(data.state || {});\r\n        setPercentComplete(data.percentComplete || 0);\r\n        setIsComplete(data.isComplete || false);\r\n        \r\n        // Determine active step based on progress\r\n        if (data.percentComplete >= 100) {\r\n          setActiveStep(5);\r\n        } else if (data.percentComplete >= 80) {\r\n          setActiveStep(4);\r\n        } else if (data.percentComplete >= 60) {\r\n          setActiveStep(3);\r\n        } else if (data.percentComplete >= 40) {\r\n          setActiveStep(2);\r\n        } else if (data.percentComplete >= 20) {\r\n          setActiveStep(1);\r\n        }\r\n      }\r\n    } catch (err: any) {\r\n      setError(`Failed to load setup state: ${err.message}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const validateSetup = async () => {\r\n    try {\r\n      const response = await fetch(`/api/church/${churchId}/ocr/setup-validate`, {\r\n        method: 'POST'\r\n      });\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setValidation(data);\r\n      }\r\n    } catch (err) {\r\n      console.error('Validation failed:', err);\r\n    }\r\n  };\r\n\r\n  const saveSetupState = async (newState: Partial<SetupState>, stepPercent: number) => {\r\n    setSaving(true);\r\n    try {\r\n      const updatedState = { ...setupState, ...newState };\r\n      const totalPercent = Math.max(percentComplete, stepPercent);\r\n      const complete = totalPercent >= 100;\r\n\r\n      const response = await fetch(`/api/church/${churchId}/ocr/setup-state`, {\r\n        method: 'PUT',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({\r\n          state: updatedState,\r\n          percentComplete: totalPercent,\r\n          isComplete: complete\r\n        })\r\n      });\r\n\r\n      if (response.ok) {\r\n        setSetupState(updatedState);\r\n        setPercentComplete(totalPercent);\r\n        setIsComplete(complete);\r\n        await validateSetup();\r\n      } else {\r\n        throw new Error('Failed to save state');\r\n      }\r\n    } catch (err: any) {\r\n      setError(`Failed to save: ${err.message}`);\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  };\r\n\r\n  const handleNext = () => {\r\n    if (activeStep < steps.length - 1) {\r\n      setActiveStep(activeStep + 1);\r\n    }\r\n  };\r\n\r\n  const handleBack = () => {\r\n    if (activeStep > 0) {\r\n      setActiveStep(activeStep - 1);\r\n    }\r\n  };\r\n\r\n  const handleStep1Complete = async () => {\r\n    await saveSetupState({\r\n      step1: {\r\n        churchId,\r\n        permissionsVerified: true\r\n      }\r\n    }, 20);\r\n    handleNext();\r\n  };\r\n\r\n  const handleStep2Complete = async () => {\r\n    const step2Data = {\r\n      language: setupState.step2?.language || 'eng',\r\n      defaultLanguage: setupState.step2?.defaultLanguage || 'en',\r\n      recordTypes: setupState.step2?.recordTypes || ['baptism'],\r\n      confidenceThreshold: setupState.step2?.confidenceThreshold || 75\r\n    };\r\n    await saveSetupState({ step2: step2Data }, 40);\r\n    handleNext();\r\n  };\r\n\r\n  const handleStep3Complete = async () => {\r\n    await validateSetup();\r\n    await saveSetupState({\r\n      step3: {\r\n        storagePath: `/var/www/orthodoxmetrics/data/church/${churchId}/ocr_uploads`,\r\n        storageWritable: validation?.checklist.storageReady.passed || false\r\n      }\r\n    }, 60);\r\n    handleNext();\r\n  };\r\n\r\n  const handleStep4Complete = async () => {\r\n    await validateSetup();\r\n    await saveSetupState({\r\n      step4: {\r\n        visionConfigured: validation?.checklist.visionReady.passed || false\r\n      }\r\n    }, 80);\r\n    handleNext();\r\n  };\r\n\r\n  const handleStep5Complete = async () => {\r\n    await saveSetupState({\r\n      step5: {\r\n        mappingTemplates: {\r\n          baptism: true,\r\n          marriage: true,\r\n          funeral: true\r\n        }\r\n      }\r\n    }, 100);\r\n    handleNext();\r\n  };\r\n\r\n  const renderStepContent = (step: number) => {\r\n    switch (step) {\r\n      case 0:\r\n        return (\r\n          <Box sx={{ p: 2 }}>\r\n            <Typography variant=\"body1\" gutterBottom>\r\n              Verify church context and permissions for OCR setup.\r\n            </Typography>\r\n            <Card sx={{ mt: 2 }}>\r\n              <CardContent>\r\n                <Typography variant=\"h6\">Church Information</Typography>\r\n                <Typography>Church ID: {churchId}</Typography>\r\n                <FormGroup sx={{ mt: 2 }}>\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Checkbox\r\n                        checked={setupState.step1?.permissionsVerified || false}\r\n                        onChange={(e) => {\r\n                          setSetupState({\r\n                            ...setupState,\r\n                            step1: {\r\n                              churchId,\r\n                              permissionsVerified: e.target.checked\r\n                            }\r\n                          });\r\n                        }}\r\n                      />\r\n                    }\r\n                    label=\"I have permission to configure OCR for this church\"\r\n                  />\r\n                </FormGroup>\r\n              </CardContent>\r\n            </Card>\r\n            <Button\r\n              variant=\"contained\"\r\n              onClick={handleStep1Complete}\r\n              disabled={!setupState.step1?.permissionsVerified}\r\n              sx={{ mt: 2 }}\r\n            >\r\n              Continue\r\n            </Button>\r\n          </Box>\r\n        );\r\n\r\n      case 1:\r\n        return (\r\n          <Box sx={{ p: 2 }}>\r\n            <Typography variant=\"body1\" gutterBottom>\r\n              Configure OCR language settings and record types.\r\n            </Typography>\r\n            <FormControl fullWidth sx={{ mt: 2 }}>\r\n              <FormLabel>Default Language</FormLabel>\r\n              <RadioGroup\r\n                value={setupState.step2?.defaultLanguage || 'en'}\r\n                onChange={(e) => {\r\n                  setSetupState({\r\n                    ...setupState,\r\n                    step2: {\r\n                      ...setupState.step2,\r\n                      defaultLanguage: e.target.value,\r\n                      language: e.target.value === 'en' ? 'eng' : e.target.value\r\n                    }\r\n                  });\r\n                }}\r\n              >\r\n                <FormControlLabel value=\"en\" control={<Radio />} label=\"English\" />\r\n                <FormControlLabel value=\"el\" control={<Radio />} label=\"Greek\" />\r\n                <FormControlLabel value=\"ru\" control={<Radio />} label=\"Russian\" />\r\n                <FormControlLabel value=\"ar\" control={<Radio />} label=\"Arabic\" />\r\n              </RadioGroup>\r\n            </FormControl>\r\n            <FormControl fullWidth sx={{ mt: 2 }}>\r\n              <FormLabel>Record Types Enabled</FormLabel>\r\n              <FormGroup>\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={setupState.step2?.recordTypes?.includes('baptism') || false}\r\n                      onChange={(e) => {\r\n                        const types = setupState.step2?.recordTypes || [];\r\n                        const newTypes = e.target.checked\r\n                          ? [...types, 'baptism']\r\n                          : types.filter(t => t !== 'baptism');\r\n                        setSetupState({\r\n                          ...setupState,\r\n                          step2: { ...setupState.step2, recordTypes: newTypes }\r\n                        });\r\n                      }}\r\n                    />\r\n                  }\r\n                  label=\"Baptism\"\r\n                />\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={setupState.step2?.recordTypes?.includes('marriage') || false}\r\n                      onChange={(e) => {\r\n                        const types = setupState.step2?.recordTypes || [];\r\n                        const newTypes = e.target.checked\r\n                          ? [...types, 'marriage']\r\n                          : types.filter(t => t !== 'marriage');\r\n                        setSetupState({\r\n                          ...setupState,\r\n                          step2: { ...setupState.step2, recordTypes: newTypes }\r\n                        });\r\n                      }}\r\n                    />\r\n                  }\r\n                  label=\"Marriage\"\r\n                />\r\n                <FormControlLabel\r\n                  control={\r\n                    <Checkbox\r\n                      checked={setupState.step2?.recordTypes?.includes('funeral') || false}\r\n                      onChange={(e) => {\r\n                        const types = setupState.step2?.recordTypes || [];\r\n                        const newTypes = e.target.checked\r\n                          ? [...types, 'funeral']\r\n                          : types.filter(t => t !== 'funeral');\r\n                        setSetupState({\r\n                          ...setupState,\r\n                          step2: { ...setupState.step2, recordTypes: newTypes }\r\n                        });\r\n                      }}\r\n                    />\r\n                  }\r\n                  label=\"Funeral\"\r\n                />\r\n              </FormGroup>\r\n            </FormControl>\r\n            <FormControl fullWidth sx={{ mt: 2 }}>\r\n              <FormLabel>Confidence Threshold: {setupState.step2?.confidenceThreshold || 75}%</FormLabel>\r\n              <Slider\r\n                value={setupState.step2?.confidenceThreshold || 75}\r\n                onChange={(_, value) => {\r\n                  setSetupState({\r\n                    ...setupState,\r\n                    step2: { ...setupState.step2, confidenceThreshold: value as number }\r\n                  });\r\n                }}\r\n                min={50}\r\n                max={100}\r\n                step={5}\r\n                marks\r\n              />\r\n            </FormControl>\r\n            <Box sx={{ mt: 2, display: 'flex', gap: 1 }}>\r\n              <Button onClick={handleBack}>Back</Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={handleStep2Complete}\r\n                disabled={(setupState.step2?.recordTypes?.length || 0) === 0}\r\n              >\r\n                Save & Continue\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        );\r\n\r\n      case 2:\r\n        return (\r\n          <Box sx={{ p: 2 }}>\r\n            <Typography variant=\"body1\" gutterBottom>\r\n              Verify storage paths and upload readiness.\r\n            </Typography>\r\n            {validation && (\r\n              <Alert\r\n                severity={validation.checklist.storageReady.passed ? 'success' : 'warning'}\r\n                sx={{ mt: 2 }}\r\n              >\r\n                {validation.checklist.storageReady.message}\r\n              </Alert>\r\n            )}\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={validateSetup}\r\n              sx={{ mt: 2 }}\r\n            >\r\n              Re-check Storage\r\n            </Button>\r\n            <Box sx={{ mt: 2, display: 'flex', gap: 1 }}>\r\n              <Button onClick={handleBack}>Back</Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={handleStep3Complete}\r\n                disabled={!validation?.checklist.storageReady.passed}\r\n              >\r\n                Continue\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        );\r\n\r\n      case 3:\r\n        return (\r\n          <Box sx={{ p: 2 }}>\r\n            <Typography variant=\"body1\" gutterBottom>\r\n              Verify Vision API credentials are configured.\r\n            </Typography>\r\n            {validation && (\r\n              <Alert\r\n                severity={validation.checklist.visionReady.passed ? 'success' : 'error'}\r\n                sx={{ mt: 2 }}\r\n              >\r\n                {validation.checklist.visionReady.message}\r\n              </Alert>\r\n            )}\r\n            <Typography variant=\"body2\" sx={{ mt: 2 }}>\r\n              Note: Credentials are configured server-side. This step only verifies they exist.\r\n            </Typography>\r\n            <Box sx={{ mt: 2, display: 'flex', gap: 1 }}>\r\n              <Button onClick={handleBack}>Back</Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={handleStep4Complete}\r\n                disabled={!validation?.checklist.visionReady.passed}\r\n              >\r\n                Continue\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        );\r\n\r\n      case 4:\r\n        return (\r\n          <Box sx={{ p: 2 }}>\r\n            <Typography variant=\"body1\" gutterBottom>\r\n              Create or select mapping templates for record types.\r\n            </Typography>\r\n            <FormGroup sx={{ mt: 2 }}>\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={setupState.step5?.mappingTemplates?.baptism || false}\r\n                    onChange={(e) => {\r\n                      setSetupState({\r\n                        ...setupState,\r\n                        step5: {\r\n                          mappingTemplates: {\r\n                            ...setupState.step5?.mappingTemplates,\r\n                            baptism: e.target.checked\r\n                          }\r\n                        }\r\n                      });\r\n                    }}\r\n                  />\r\n                }\r\n                label=\"Baptism Mapping Template\"\r\n              />\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={setupState.step5?.mappingTemplates?.marriage || false}\r\n                    onChange={(e) => {\r\n                      setSetupState({\r\n                        ...setupState,\r\n                        step5: {\r\n                          mappingTemplates: {\r\n                            ...setupState.step5?.mappingTemplates,\r\n                            marriage: e.target.checked\r\n                          }\r\n                        }\r\n                      });\r\n                    }}\r\n                  />\r\n                }\r\n                label=\"Marriage Mapping Template\"\r\n              />\r\n              <FormControlLabel\r\n                control={\r\n                  <Checkbox\r\n                    checked={setupState.step5?.mappingTemplates?.funeral || false}\r\n                    onChange={(e) => {\r\n                      setSetupState({\r\n                        ...setupState,\r\n                        step5: {\r\n                          mappingTemplates: {\r\n                            ...setupState.step5?.mappingTemplates,\r\n                            funeral: e.target.checked\r\n                          }\r\n                        }\r\n                      });\r\n                    }}\r\n                  />\r\n                }\r\n                label=\"Funeral Mapping Template\"\r\n              />\r\n            </FormGroup>\r\n            <Box sx={{ mt: 2, display: 'flex', gap: 1 }}>\r\n              <Button onClick={handleBack}>Back</Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                onClick={handleStep5Complete}\r\n                disabled={\r\n                  !setupState.step5?.mappingTemplates?.baptism &&\r\n                  !setupState.step5?.mappingTemplates?.marriage &&\r\n                  !setupState.step5?.mappingTemplates?.funeral\r\n                }\r\n              >\r\n                Complete Setup\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n        );\r\n\r\n      case 5:\r\n        return (\r\n          <Box sx={{ p: 2 }}>\r\n            <Alert severity=\"success\" sx={{ mb: 2 }}>\r\n              Setup Complete! You're ready to use Enhanced OCR Uploader.\r\n            </Alert>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              Summary\r\n            </Typography>\r\n            <Typography>Church ID: {churchId}</Typography>\r\n            <Typography>Progress: {percentComplete}%</Typography>\r\n            <Button\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              onClick={() => navigate(`/devel/enhanced-ocr-uploader?church_id=${churchId}`)}\r\n              sx={{ mt: 2 }}\r\n              startIcon={<ArrowForward />}\r\n            >\r\n              Launch Enhanced OCR Uploader\r\n            </Button>\r\n          </Box>\r\n        );\r\n\r\n      default:\r\n        return null;\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box sx={{ display: 'flex', justifyContent: 'center', p: 4 }}>\r\n        <CircularProgress />\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ maxWidth: 900, mx: 'auto', p: 3 }}>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        OCR Setup Wizard\r\n      </Typography>\r\n      <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n        Church ID: {churchId} â€¢ Progress: {percentComplete}%\r\n      </Typography>\r\n\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }} onClose={() => setError(null)}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      <Paper sx={{ p: 3, mt: 2 }}>\r\n        <Stepper activeStep={activeStep} orientation=\"vertical\">\r\n          {steps.map((label, index) => (\r\n            <Step key={label}>\r\n              <StepLabel\r\n                optional={\r\n                  index === activeStep ? (\r\n                    <Typography variant=\"caption\">Current step</Typography>\r\n                  ) : index < activeStep ? (\r\n                    <CheckCircle color=\"success\" fontSize=\"small\" />\r\n                  ) : null\r\n                }\r\n              >\r\n                {label}\r\n              </StepLabel>\r\n              <StepContent>\r\n                {renderStepContent(index)}\r\n              </StepContent>\r\n            </Step>\r\n          ))}\r\n        </Stepper>\r\n      </Paper>\r\n\r\n      {saving && (\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1, mt: 2 }}>\r\n          <CircularProgress size={20} />\r\n          <Typography variant=\"body2\">Saving...</Typography>\r\n        </Box>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n"],"names":["ArrowForward","createSvgIcon","_jsx","steps","OcrSetupWizardPage","searchParams","useSearchParams","navigate","useNavigate","churchId","activeStep","setActiveStep","useState","setupState","setSetupState","percentComplete","setPercentComplete","isComplete","setIsComplete","loading","setLoading","saving","setSaving","validation","setValidation","error","setError","useEffect","loadSetupState","validateSetup","__async","response","data","err","saveSetupState","newState","stepPercent","updatedState","__spreadValues","totalPercent","complete","handleNext","handleBack","handleStep1Complete","handleStep2Complete","step2Data","_a","_b","_c","_d","handleStep3Complete","handleStep4Complete","handleStep5Complete","renderStepContent","step","Box","jsx","Typography","Card","CardContent","FormGroup","FormControlLabel","Checkbox","e","__spreadProps","Button","jsxs","FormControl","FormLabel","RadioGroup","Radio","_e","types","newTypes","t","_g","_f","_i","_h","_j","Slider","_k","_","value","_m","_l","Alert","_o","_n","_q","_p","_s","_r","_u","_t","_w","_v","_y","_x","CircularProgress","Paper","Stepper","label","index","Step","StepLabel","CheckCircle","StepContent"],"mappings":"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","x_google_ignoreList":[0]}