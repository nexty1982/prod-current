var Ce=Object.defineProperty,fe=Object.defineProperties;var Se=Object.getOwnPropertyDescriptors;var Y=Object.getOwnPropertySymbols;var we=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var J=(a,c,t)=>c in a?Ce(a,c,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[c]=t,g=(a,c)=>{for(var t in c||(c={}))we.call(c,t)&&J(a,t,c[t]);if(Y)for(var t of Y(c))Ae.call(c,t)&&J(a,t,c[t]);return a},j=(a,c)=>fe(a,Se(c));var W=(a,c,t)=>new Promise((i,n)=>{var s=d=>{try{u(t.next(d))}catch(y){n(y)}},b=d=>{try{u(t.throw(d))}catch(y){n(y)}},u=d=>d.done?i(d.value):Promise.resolve(d.value).then(s,b);u((t=t.apply(a,c)).next())});import{l as Re,k as Fe,j as e,B as _,a0 as B,V as Le,R as De,d as l,e as S,C as K,a$ as Ee,K as X,Z,O as Q,G as r,s as A,a1 as R,t as F,f as h,P as v,F as L,aI as P,a2 as k,r as ee,b2 as Be,U as w,i as Ie,b3 as ae,p as se,h as We,I as N,D as Pe}from"./index-Dgvcv9SG.js";import{r as C}from"./vendor-Dkfty7_r.js";import{c as Te,b as E,u as Ue}from"./index.esm-J5lNTyx_.js";import{C as te}from"./Church-CvpoAxOz.js";import{S as Ne,a as qe,b as Ve}from"./Stepper-Dpq6p3x6.js";import{S as Oe}from"./StepContent-BShKK8Wg.js";import{P as $e}from"./People-C9dBoY_P.js";import{C as Me}from"./Web-BRpp0yJq.js";import{L as le,a as ne}from"./ListItem-mECUil91.js";import{L as re}from"./ListItemText-HVc0yZD9.js";import{E as ie}from"./Edit-CACFOr_F.js";import{D as de}from"./Delete-SFEnB1j-.js";import"./isSymbol-D488ncVs.js";import"./listItemButtonClasses-BdhSRkE2.js";const $=["Basic Information","Template Selection","Record Tables & Custom Fields","User Management","Landing Page Configuration","Review & Create"],ce=[{key:"baptism_records",label:"Baptism Records",description:"Track baptism ceremonies and certificates"},{key:"marriage_records",label:"Marriage Records",description:"Manage wedding ceremonies and certificates"},{key:"funeral_records",label:"Funeral Records",description:"Record funeral services and memorials"},{key:"clergy",label:"Clergy Management",description:"Manage priests, deacons, and church staff"},{key:"members",label:"Church Members",description:"Comprehensive membership database"},{key:"donations",label:"Donations & Offerings",description:"Track financial contributions"},{key:"calendar_events",label:"Calendar Events",description:"Liturgical and parish events"},{key:"confession_records",label:"Confession Records",description:"Private confession tracking (encrypted)"},{key:"communion_records",label:"Communion Records",description:"Holy Communion participation"},{key:"chrismation_records",label:"Chrismation Records",description:"Confirmation ceremonies"}],ze=[{value:"VARCHAR",label:"Text (Short)",maxLength:255},{value:"TEXT",label:"Text (Long)",maxLength:null},{value:"INT",label:"Number",maxLength:null},{value:"DATE",label:"Date",maxLength:null},{value:"BOOLEAN",label:"Yes/No",maxLength:null}],Ge=[{value:"church_admin",label:"Church Administrator",description:"Full access to all church functions"},{value:"priest",label:"Priest",description:"Full clergy privileges and record lifecycle authority"},{value:"deacon",label:"Deacon",description:"Partial clergy privileges"},{value:"editor",label:"Editor",description:"Add and edit records"},{value:"viewer",label:"Viewer",description:"View-only access"}],He=["view_records","create_records","edit_records","delete_records","view_reports","export_data","manage_users","view_analytics"],M=[{value:"liturgical_calendar",label:"ðŸ“… Liturgical Calendar",description:"Orthodox liturgical calendar with feast days and fasting periods"},{value:"church_records",label:"ðŸ“‹ Church Records",description:"Manage baptism, marriage, and funeral records"},{value:"notes_app",label:"ðŸ“ Notes App",description:"Personal notes and task management"}],ja=()=>{const a=Re(),{user:c,hasRole:t}=Fe(),[i,n]=C.useState(0),[s,b]=C.useState(!1),[u,d]=C.useState([]),[y,D]=C.useState(null),[I,z]=C.useState(!1),[oe,T]=C.useState(!1),[ue,U]=C.useState(!1),[G,q]=C.useState(null),[H,V]=C.useState(null),he=[Te({name:E().required("Church name is required").min(3,"Name must be at least 3 characters"),email:E().email("Invalid email format").required("Email is required"),phone:E().required("Phone number is required"),city:E().required("City is required"),country:E().required("Country is required"),preferred_language:E().required("Language is required")})],m=Ue({initialValues:{name:"",email:"",phone:"",address:"",city:"",state_province:"",postal_code:"",country:"",website:"",preferred_language:"en",timezone:"UTC",currency:"USD",is_active:!0,template_church_id:null,selected_tables:["baptism_records","marriage_records","funeral_records"],custom_fields:[],initial_users:[],custom_landing_page:{enabled:!1,title:"",welcome_message:"",primary_color:"#1976d2",logo_url:"",default_app:"liturgical_calendar"}},validationSchema:he[0],onSubmit:x=>W(void 0,null,function*(){yield ve(x)})});C.useEffect(()=>{W(void 0,null,function*(){try{b(!0);const o=yield fetch("/api/admin/churches?preferred_language=en",{credentials:"include"});if(o.ok){const p=yield o.json(),f=yield Promise.all(p.churches.map(O=>W(void 0,null,function*(){try{const ye=yield(yield fetch(`/api/admin/churches/${O.id}/tables`,{credentials:"include"})).json();return j(g({},O),{available_tables:ye.tables||[]})}catch(_e){return j(g({},O),{available_tables:[]})}})));d(f)}}catch(o){console.error("Error fetching template churches:",o)}finally{b(!1)}})},[]);const xe=x=>{const o=u.find(p=>p.id===x)||null;D(o),m.setFieldValue("template_church_id",x),o&&m.setFieldValue("selected_tables",o.available_tables)},me=x=>{const o=m.values.custom_fields;if(G){const p=o.map(f=>f.id===x.id?x:f);m.setFieldValue("custom_fields",p),q(null)}else m.setFieldValue("custom_fields",[...o,j(g({},x),{id:Date.now().toString()})]);T(!1)},ge=x=>{const o=m.values.initial_users;if(H){const p=o.map(f=>f.id===x.id?x:f);m.setFieldValue("initial_users",p),V(null)}else m.setFieldValue("initial_users",[...o,j(g({},x),{id:Date.now().toString()})]);U(!1)},je=()=>{i<$.length-1&&n(i+1)},pe=()=>{n(i-1)},ve=x=>W(void 0,null,function*(){try{z(!0);const o=yield fetch("/api/admin/churches/wizard",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(x)});if(o.ok){const p=yield o.json();a(`/apps/church-management/edit/${p.church.id}`,{state:{message:`Church "${x.name}" created successfully with wizard setup!`,severity:"success"}})}else{const p=yield o.json();if(o.status===400&&p.required){const f=p.required.join(", ");alert(`Please fill in all required fields: ${f}`)}else alert(p.message||"Failed to create church");throw new Error(p.message||"Failed to create church")}}catch(o){console.error("Error creating church:",o),o.message.includes("required fields")||alert("Network error or unexpected issue occurred. Please try again.")}finally{z(!1)}}),be=x=>{switch(x){case 0:return e.jsx(Ye,{formik:m});case 1:return e.jsx(Je,{formik:m,templateChurches:u,selectedTemplate:y,onTemplateSelect:xe,loading:s});case 2:return e.jsx(Ke,{formik:m,selectedTemplate:y,onAddCustomField:()=>T(!0),onEditCustomField:o=>{q(o),T(!0)},onDeleteCustomField:o=>{const p=m.values.custom_fields.filter(f=>f.id!==o);m.setFieldValue("custom_fields",p)}});case 3:return e.jsx(Xe,{formik:m,onAddUser:()=>U(!0),onEditUser:o=>{V(o),U(!0)},onDeleteUser:o=>{const p=m.values.initial_users.filter(f=>f.id!==o);m.setFieldValue("initial_users",p)}});case 4:return e.jsx(Ze,{formik:m});case 5:return e.jsx(Qe,{formik:m,selectedTemplate:y});default:return null}};return t(["super_admin"])?e.jsxs(_,{p:3,children:[e.jsx(Le,{children:e.jsxs(De,{children:[e.jsxs(_,{mb:3,children:[e.jsxs(l,{variant:"h4",gutterBottom:!0,children:[e.jsx(te,{sx:{mr:1,verticalAlign:"middle"}}),"Church Setup Wizard"]}),e.jsx(l,{variant:"body1",color:"text.secondary",children:"Create a new church with comprehensive setup including templates, custom fields, users, and landing page configuration."})]}),e.jsx(Ne,{activeStep:i,orientation:"vertical",children:$.map((x,o)=>e.jsxs(qe,{children:[e.jsx(Ve,{children:e.jsx(l,{variant:"h6",children:x})}),e.jsxs(Oe,{children:[e.jsx(_,{my:2,children:be(o)}),e.jsxs(_,{mt:3,children:[e.jsx(S,{disabled:i===0,onClick:pe,sx:{mr:1},children:"Back"}),i===$.length-1?e.jsx(S,{variant:"contained",onClick:()=>m.handleSubmit(),disabled:I,startIcon:I?e.jsx(K,{size:20}):e.jsx(Ee,{}),children:I?"Creating Church...":"Create Church"}):e.jsx(S,{variant:"contained",onClick:je,children:"Next"})]})]})]},x))})]})}),e.jsx(ke,{open:oe,onClose:()=>{T(!1),q(null)},onSave:me,editingField:G,existingTables:m.values.selected_tables}),e.jsx(ea,{open:ue,onClose:()=>{U(!1),V(null)},onSave:ge,editingUser:H})]}):e.jsx(_,{p:3,children:e.jsx(B,{severity:"error",children:"You don't have permission to create churches. Please contact a system administrator."})})},Ye=({formik:a})=>e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(v,{fullWidth:!0,name:"name",label:"Church Name",value:a.values.name,onChange:a.handleChange,error:a.touched.name&&!!a.errors.name,helperText:a.touched.name&&a.errors.name,required:!0})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(v,{fullWidth:!0,name:"email",label:"Admin Email",type:"email",value:a.values.email,onChange:a.handleChange,error:a.touched.email&&!!a.errors.email,helperText:a.touched.email&&a.errors.email,required:!0})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(v,{fullWidth:!0,name:"phone",label:"Phone Number",value:a.values.phone,onChange:a.handleChange,error:a.touched.phone&&!!a.errors.phone,helperText:a.touched.phone&&a.errors.phone,required:!0})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(v,{fullWidth:!0,name:"website",label:"Website URL",value:a.values.website,onChange:a.handleChange})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(v,{fullWidth:!0,name:"address",label:"Address",value:a.values.address,onChange:a.handleChange})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(v,{fullWidth:!0,name:"city",label:"City",value:a.values.city,onChange:a.handleChange,error:a.touched.city&&!!a.errors.city,helperText:a.touched.city&&a.errors.city,required:!0})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(v,{fullWidth:!0,name:"state_province",label:"State/Province",value:a.values.state_province,onChange:a.handleChange})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsx(v,{fullWidth:!0,name:"postal_code",label:"Postal Code",value:a.values.postal_code,onChange:a.handleChange})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(A,{fullWidth:!0,children:[e.jsx(R,{children:"Country"}),e.jsxs(F,{name:"country",value:a.values.country,onChange:a.handleChange,error:a.touched.country&&!!a.errors.country,children:[e.jsx(h,{value:"United States",children:"United States"}),e.jsx(h,{value:"Canada",children:"Canada"}),e.jsx(h,{value:"Greece",children:"Greece"}),e.jsx(h,{value:"Romania",children:"Romania"}),e.jsx(h,{value:"Russia",children:"Russia"}),e.jsx(h,{value:"Serbia",children:"Serbia"}),e.jsx(h,{value:"Bulgaria",children:"Bulgaria"}),e.jsx(h,{value:"Other",children:"Other"})]})]})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(A,{fullWidth:!0,children:[e.jsx(R,{children:"Language"}),e.jsxs(F,{name:"preferred_language",value:a.values.preferred_language,onChange:a.handleChange,children:[e.jsx(h,{value:"en",children:"English"}),e.jsx(h,{value:"el",children:"Greek"}),e.jsx(h,{value:"ro",children:"Romanian"}),e.jsx(h,{value:"ru",children:"Russian"}),e.jsx(h,{value:"sr",children:"Serbian"}),e.jsx(h,{value:"bg",children:"Bulgarian"})]})]})}),e.jsx(r,{item:!0,xs:12,md:4,children:e.jsxs(A,{fullWidth:!0,children:[e.jsx(R,{children:"Currency"}),e.jsxs(F,{name:"currency",value:a.values.currency,onChange:a.handleChange,children:[e.jsx(h,{value:"USD",children:"USD ($)"}),e.jsx(h,{value:"CAD",children:"CAD ($)"}),e.jsx(h,{value:"EUR",children:"EUR (â‚¬)"}),e.jsx(h,{value:"GBP",children:"GBP (Â£)"}),e.jsx(h,{value:"RON",children:"RON (lei)"}),e.jsx(h,{value:"RUB",children:"RUB (â‚½)"})]})]})})]}),Je=({formik:a,templateChurches:c,selectedTemplate:t,onTemplateSelect:i,loading:n})=>e.jsxs(_,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Choose a Template Church (Optional)"}),e.jsx(l,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Select an existing English-language church to use as a template. This will copy its structure, pages, themes, and settings."}),n?e.jsxs(_,{display:"flex",justifyContent:"center",py:4,children:[e.jsx(K,{}),e.jsx(l,{ml:2,children:"Loading template churches..."})]}):e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{item:!0,xs:12,children:e.jsx(w,{variant:"outlined",sx:{p:2,mb:2},children:e.jsx(L,{control:e.jsx(P,{checked:a.values.template_church_id===null,onChange:()=>i(null)}),label:e.jsxs(_,{children:[e.jsx(l,{variant:"subtitle1",children:"Start from Scratch"}),e.jsx(l,{variant:"body2",color:"text.secondary",children:"Create a new church without using any template"})]})})})}),c.map(s=>e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(w,{variant:"outlined",sx:{p:2,cursor:"pointer",border:(t==null?void 0:t.id)===s.id?2:1,borderColor:(t==null?void 0:t.id)===s.id?"primary.main":"divider"},onClick:()=>i(s.id),children:e.jsx(L,{control:e.jsx(P,{checked:(t==null?void 0:t.id)===s.id,onChange:()=>i(s.id)}),label:e.jsxs(_,{children:[e.jsx(l,{variant:"subtitle1",children:s.name}),e.jsxs(l,{variant:"body2",color:"text.secondary",children:[s.city,", ",s.country]}),e.jsxs(l,{variant:"caption",display:"block",children:[s.available_tables.length," available table(s)"]})]})})})},s.id))]}),t&&e.jsxs(B,{severity:"info",sx:{mt:2},children:[e.jsx("strong",{children:"Template Selected:"})," ",t.name,e.jsx("br",{}),"This church's structure and settings will be copied to your new church."]})]}),Ke=({formik:a,selectedTemplate:c,onAddCustomField:t,onEditCustomField:i,onDeleteCustomField:n})=>e.jsxs(_,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Select Record Tables"}),e.jsx(l,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Choose which record tables to create in your church database. Standard tables are always created, but you can select additional specialized tables."}),e.jsx(r,{container:!0,spacing:2,children:ce.map(s=>e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(w,{variant:"outlined",sx:{p:2},children:e.jsx(L,{control:e.jsx(P,{checked:a.values.selected_tables.includes(s.key),onChange:b=>{const u=a.values.selected_tables;b.target.checked?a.setFieldValue("selected_tables",[...u,s.key]):a.setFieldValue("selected_tables",u.filter(d=>d!==s.key))}}),label:e.jsxs(_,{children:[e.jsx(l,{variant:"subtitle1",children:s.label}),e.jsx(l,{variant:"body2",color:"text.secondary",children:s.description})]})})})},s.key))}),e.jsx(Pe,{sx:{my:3}}),e.jsxs(_,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(l,{variant:"h6",children:"Custom Fields"}),e.jsx(S,{variant:"contained",startIcon:e.jsx(ae,{}),onClick:t,children:"Add Custom Field"})]}),a.values.custom_fields.length===0?e.jsx(B,{severity:"info",children:"No custom fields added yet. You can add custom fields to extend the functionality of your record tables."}):e.jsx(se,{children:a.values.custom_fields.map(s=>e.jsxs(le,{divider:!0,children:[e.jsx(re,{primary:`${s.field_name} (${s.field_type})`,secondary:`Table: ${s.table_name} - ${s.description}`}),e.jsxs(ne,{children:[e.jsx(N,{onClick:()=>i(s),children:e.jsx(ie,{})}),e.jsx(N,{onClick:()=>n(s.id),color:"error",children:e.jsx(de,{})})]})]},s.id))})]}),Xe=({formik:a,onAddUser:c,onEditUser:t,onDeleteUser:i})=>e.jsxs(_,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Initial Users"}),e.jsx(l,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Add users who will have access to the new church's records. They will receive email invitations."}),e.jsxs(_,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(l,{variant:"subtitle1",children:"Users"}),e.jsx(S,{variant:"contained",startIcon:e.jsx(ae,{}),onClick:c,children:"Add User"})]}),a.values.initial_users.length===0?e.jsx(B,{severity:"info",children:"No users added yet. You can add users after church creation from the church management panel."}):e.jsx(se,{children:a.values.initial_users.map(n=>e.jsxs(le,{divider:!0,children:[e.jsx(re,{primary:`${n.first_name} ${n.last_name}`,secondary:`${n.email} - ${n.role.toUpperCase()}`}),e.jsxs(ne,{children:[e.jsx(We,{label:n.send_invite?"Will send invite":"No invite",color:n.send_invite?"success":"default",size:"small",sx:{mr:1}}),e.jsx(N,{onClick:()=>t(n),children:e.jsx(ie,{})}),e.jsx(N,{onClick:()=>i(n.id),color:"error",children:e.jsx(de,{})})]})]},n.id))})]}),Ze=({formik:a})=>{var c;return e.jsxs(_,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Custom Landing Page"}),e.jsx(l,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Configure a custom landing page that new users will see when they first access the church system."}),e.jsx(L,{control:e.jsx(ee,{checked:a.values.custom_landing_page.enabled,onChange:t=>a.setFieldValue("custom_landing_page.enabled",t.target.checked)}),label:"Enable Custom Landing Page",sx:{mb:3}}),a.values.custom_landing_page.enabled&&e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(v,{fullWidth:!0,label:"Landing Page Title",value:a.values.custom_landing_page.title,onChange:t=>a.setFieldValue("custom_landing_page.title",t.target.value),placeholder:"Welcome to Our Church"})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(v,{fullWidth:!0,label:"Primary Color",type:"color",value:a.values.custom_landing_page.primary_color,onChange:t=>a.setFieldValue("custom_landing_page.primary_color",t.target.value)})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(v,{fullWidth:!0,multiline:!0,rows:4,label:"Welcome Message",value:a.values.custom_landing_page.welcome_message,onChange:t=>a.setFieldValue("custom_landing_page.welcome_message",t.target.value),placeholder:"Enter a welcome message for new users..."})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(v,{fullWidth:!0,label:"Logo URL",value:a.values.custom_landing_page.logo_url,onChange:t=>a.setFieldValue("custom_landing_page.logo_url",t.target.value),placeholder:"https://example.com/logo.png"})}),e.jsxs(r,{item:!0,xs:12,children:[e.jsxs(A,{fullWidth:!0,children:[e.jsx(R,{children:"Default Application"}),e.jsx(F,{value:a.values.custom_landing_page.default_app,onChange:t=>a.setFieldValue("custom_landing_page.default_app",t.target.value),label:"Default Application",children:M.map(t=>e.jsx(h,{value:t.value,children:t.label},t.value))})]}),e.jsx(l,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Select which application users will see by default when they access the church system."}),a.values.custom_landing_page.default_app&&e.jsx(B,{severity:"info",sx:{mt:2},children:e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Selected:"})," ",(c=M.find(t=>t.value===a.values.custom_landing_page.default_app))==null?void 0:c.description]})})]})]})]})},Qe=({formik:a,selectedTemplate:c})=>{var t;return e.jsxs(_,{children:[e.jsx(l,{variant:"h6",gutterBottom:!0,children:"Review Church Configuration"}),e.jsx(l,{variant:"body2",color:"text.secondary",paragraph:!0,children:"Please review all settings before creating the church."}),e.jsxs(r,{container:!0,spacing:3,children:[e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(w,{sx:{p:2},children:[e.jsxs(l,{variant:"subtitle1",gutterBottom:!0,children:[e.jsx(te,{sx:{mr:1,verticalAlign:"middle"}}),"Basic Information"]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Name:"})," ",a.values.name]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Email:"})," ",a.values.email]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Location:"})," ",a.values.city,", ",a.values.country]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Language:"})," ",a.values.preferred_language]})]})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(w,{sx:{p:2},children:[e.jsxs(l,{variant:"subtitle1",gutterBottom:!0,children:[e.jsx(Ie,{sx:{mr:1,verticalAlign:"middle"}}),"Template & Tables"]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Template:"})," ",c?c.name:"None (Start from scratch)"]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Selected Tables:"})," ",a.values.selected_tables.length]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Custom Fields:"})," ",a.values.custom_fields.length]})]})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(w,{sx:{p:2},children:[e.jsxs(l,{variant:"subtitle1",gutterBottom:!0,children:[e.jsx($e,{sx:{mr:1,verticalAlign:"middle"}}),"Users"]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Initial Users:"})," ",a.values.initial_users.length]}),a.values.initial_users.slice(0,3).map(i=>e.jsxs(l,{variant:"body2",children:["â€¢ ",i.first_name," ",i.last_name," (",i.role,")"]},i.id)),a.values.initial_users.length>3&&e.jsxs(l,{variant:"body2",children:["... and ",a.values.initial_users.length-3," more"]})]})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(w,{sx:{p:2},children:[e.jsxs(l,{variant:"subtitle1",gutterBottom:!0,children:[e.jsx(Me,{sx:{mr:1,verticalAlign:"middle"}}),"Landing Page"]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Custom Landing:"})," ",a.values.custom_landing_page.enabled?"Yes":"No"]}),a.values.custom_landing_page.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Title:"})," ",a.values.custom_landing_page.title||"Not set"]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Has Welcome Message:"})," ",a.values.custom_landing_page.welcome_message?"Yes":"No"]}),e.jsxs(l,{variant:"body2",children:[e.jsx("strong",{children:"Default App:"})," ",((t=M.find(i=>i.value===a.values.custom_landing_page.default_app))==null?void 0:t.label)||"Not set"]})]})]})})]}),e.jsxs(B,{severity:"warning",sx:{mt:3},children:[e.jsx("strong",{children:"Important:"})," Once created, some settings like the database structure cannot be easily changed. Please ensure all information is correct before proceeding."]})]})},ke=({open:a,onClose:c,onSave:t,editingField:i,existingTables:n})=>{const[s,b]=C.useState({table_name:"",field_name:"",field_type:"VARCHAR",is_required:!1,description:""});C.useEffect(()=>{b(i||{table_name:"",field_name:"",field_type:"VARCHAR",is_required:!1,description:""})},[i,a]);const u=()=>{s.table_name&&s.field_name&&s.field_type&&t(j(g({},s),{id:(i==null?void 0:i.id)||Date.now().toString()}))};return e.jsxs(X,{open:a,onClose:c,maxWidth:"md",fullWidth:!0,children:[e.jsx(Z,{children:i?"Edit Custom Field":"Add Custom Field"}),e.jsx(Q,{children:e.jsxs(r,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(A,{fullWidth:!0,children:[e.jsx(R,{children:"Table"}),e.jsx(F,{value:s.table_name||"",onChange:d=>b(j(g({},s),{table_name:d.target.value})),children:n.map(d=>{var y;return e.jsx(h,{value:d,children:((y=ce.find(D=>D.key===d))==null?void 0:y.label)||d},d)})})]})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(v,{fullWidth:!0,label:"Field Name",value:s.field_name||"",onChange:d=>b(j(g({},s),{field_name:d.target.value})),placeholder:"e.g., sponsor_name"})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(A,{fullWidth:!0,children:[e.jsx(R,{children:"Field Type"}),e.jsx(F,{value:s.field_type||"VARCHAR",onChange:d=>b(j(g({},s),{field_type:d.target.value})),children:ze.map(d=>e.jsx(h,{value:d.value,children:d.label},d.value))})]})}),e.jsx(r,{item:!0,xs:12,md:6,children:s.field_type==="VARCHAR"&&e.jsx(v,{fullWidth:!0,type:"number",label:"Max Length",value:s.field_length||255,onChange:d=>b(j(g({},s),{field_length:parseInt(d.target.value)}))})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(v,{fullWidth:!0,multiline:!0,rows:2,label:"Description",value:s.description||"",onChange:d=>b(j(g({},s),{description:d.target.value})),placeholder:"Describe what this field is for..."})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(L,{control:e.jsx(P,{checked:s.is_required||!1,onChange:d=>b(j(g({},s),{is_required:d.target.checked}))}),label:"Required Field"})})]})}),e.jsxs(k,{children:[e.jsx(S,{onClick:c,children:"Cancel"}),e.jsxs(S,{onClick:u,variant:"contained",disabled:!s.table_name||!s.field_name||!s.field_type,children:[i?"Update":"Add"," Field"]})]})]})},ea=({open:a,onClose:c,onSave:t,editingUser:i})=>{const[n,s]=C.useState({email:"",first_name:"",last_name:"",role:"user",permissions:[],send_invite:!0});C.useEffect(()=>{s(i||{email:"",first_name:"",last_name:"",role:"user",permissions:[],send_invite:!0})},[i,a]);const b=()=>{n.email&&n.first_name&&n.last_name&&t(j(g({},n),{id:(i==null?void 0:i.id)||Date.now().toString()}))};return e.jsxs(X,{open:a,onClose:c,maxWidth:"md",fullWidth:!0,children:[e.jsx(Z,{children:i?"Edit User":"Add User"}),e.jsx(Q,{children:e.jsxs(r,{container:!0,spacing:2,sx:{mt:1},children:[e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(v,{fullWidth:!0,label:"First Name",value:n.first_name||"",onChange:u=>s(j(g({},n),{first_name:u.target.value})),required:!0})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(v,{fullWidth:!0,label:"Last Name",value:n.last_name||"",onChange:u=>s(j(g({},n),{last_name:u.target.value})),required:!0})}),e.jsx(r,{item:!0,xs:12,children:e.jsx(v,{fullWidth:!0,type:"email",label:"Email Address",value:n.email||"",onChange:u=>s(j(g({},n),{email:u.target.value})),required:!0})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsxs(A,{fullWidth:!0,children:[e.jsx(R,{children:"Role"}),e.jsx(F,{value:n.role||"user",onChange:u=>s(j(g({},n),{role:u.target.value})),children:Ge.map(u=>e.jsx(h,{value:u.value,children:u.label},u.value))})]})}),e.jsx(r,{item:!0,xs:12,md:6,children:e.jsx(L,{control:e.jsx(ee,{checked:n.send_invite||!1,onChange:u=>s(j(g({},n),{send_invite:u.target.checked}))}),label:"Send Email Invitation"})}),e.jsxs(r,{item:!0,xs:12,children:[e.jsx(l,{variant:"subtitle2",gutterBottom:!0,children:"Permissions"}),e.jsx(Be,{row:!0,children:He.map(u=>{var d;return e.jsx(L,{control:e.jsx(P,{checked:((d=n.permissions)==null?void 0:d.includes(u))||!1,onChange:y=>{const D=n.permissions||[];y.target.checked?s(j(g({},n),{permissions:[...D,u]})):s(j(g({},n),{permissions:D.filter(I=>I!==u)}))}}),label:u.replace("_"," ").replace(/\b\w/g,y=>y.toUpperCase())},u)})})]})]})}),e.jsxs(k,{children:[e.jsx(S,{onClick:c,children:"Cancel"}),e.jsxs(S,{onClick:b,variant:"contained",disabled:!n.email||!n.first_name||!n.last_name,children:[i?"Update":"Add"," User"]})]})]})};export{ja as default};
//# sourceMappingURL=ChurchSetupWizard-BQggjmKX.js.map
