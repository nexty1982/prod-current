var p=(c,f,n)=>new Promise((j,d)=>{var a=i=>{try{x(n.next(i))}catch(l){d(l)}},t=i=>{try{x(n.throw(i))}catch(l){d(l)}},x=i=>i.done?j(i.value):Promise.resolve(i.value).then(a,t);x((n=n.apply(c,f)).next())});import{j as e,B as u,U as D,d as g,e as v,aG as k,a0 as R,C as B,h as w,T as b,I as y,K as A,Z as E,O as z,P as F,a2 as O}from"./index-Dgvcv9SG.js";import{r as o}from"./vendor-Dkfty7_r.js";import{T as N,a as P,b as V,c as S,d as L}from"./TableRow-GBYhOGTG.js";import{T as r}from"./TableCell-jHKItVVU.js";import{V as W}from"./Visibility-BRqBEhW9.js";import{C as G}from"./CheckCircle-s3MrOaSs.js";import{C as H}from"./Cancel-CCYkzJQQ.js";const Y=()=>{const[c,f]=o.useState([]),[n,j]=o.useState(!1),[d,a]=o.useState(null),[t,x]=o.useState(null),[i,l]=o.useState(!1),m=()=>p(void 0,null,function*(){try{j(!0),a(null),f([])}catch(s){a(s instanceof Error?s.message:"Failed to load reports")}finally{j(!1)}}),T=s=>p(void 0,null,function*(){try{m()}catch(h){a(h instanceof Error?h.message:"Failed to approve report")}}),I=s=>p(void 0,null,function*(){try{m()}catch(h){a(h instanceof Error?h.message:"Failed to reject report")}});o.useEffect(()=>{m()},[]);const C=s=>{switch(s){case"approved":return"success";case"rejected":return"error";default:return"warning"}};return e.jsxs(u,{sx:{p:3},children:[e.jsxs(D,{sx:{p:3},children:[e.jsxs(u,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",mb:3},children:[e.jsx(g,{variant:"h4",gutterBottom:!0,children:"Interactive Report Review"}),e.jsx(v,{startIcon:e.jsx(k,{}),onClick:m,disabled:n,children:"Refresh"})]}),d&&e.jsx(R,{severity:"error",sx:{mb:3},onClose:()=>a(null),children:d}),n&&c.length===0?e.jsx(u,{sx:{display:"flex",justifyContent:"center",p:3},children:e.jsx(B,{})}):c.length===0?e.jsx(R,{severity:"info",children:"No interactive reports to review at this time."}):e.jsx(N,{children:e.jsxs(P,{children:[e.jsx(V,{children:e.jsxs(S,{children:[e.jsx(r,{children:"Token"}),e.jsx(r,{children:"Submitted"}),e.jsx(r,{children:"Recipient"}),e.jsx(r,{children:"Status"}),e.jsx(r,{align:"right",children:"Actions"})]})}),e.jsx(L,{children:c.map(s=>e.jsxs(S,{children:[e.jsxs(r,{children:[s.token.substring(0,8),"..."]}),e.jsx(r,{children:new Date(s.submittedAt).toLocaleString()}),e.jsx(r,{children:s.recipientName||s.recipientEmail||"N/A"}),e.jsx(r,{children:e.jsx(w,{label:s.status,color:C(s.status),size:"small"})}),e.jsxs(r,{align:"right",children:[e.jsx(b,{title:"View Details",children:e.jsx(y,{size:"small",onClick:()=>{x(s),l(!0)},children:e.jsx(W,{})})}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsx(b,{title:"Approve",children:e.jsx(y,{size:"small",color:"success",onClick:()=>T(s.id),children:e.jsx(G,{})})}),e.jsx(b,{title:"Reject",children:e.jsx(y,{size:"small",color:"error",onClick:()=>I(s.id),children:e.jsx(H,{})})})]})]})]},s.id))})]})})]}),e.jsxs(A,{open:i,onClose:()=>l(!1),maxWidth:"md",fullWidth:!0,children:[e.jsxs(E,{children:["Report Details - ",t==null?void 0:t.token.substring(0,8),"..."]}),e.jsx(z,{children:t&&e.jsxs(u,{sx:{mt:2},children:[e.jsxs(g,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Submitted: ",new Date(t.submittedAt).toLocaleString()]}),e.jsxs(g,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Status: ",e.jsx(w,{label:t.status,color:C(t.status),size:"small"})]}),e.jsxs(u,{sx:{mt:2},children:[e.jsx(g,{variant:"subtitle2",gutterBottom:!0,children:"Report Data:"}),e.jsx(F,{fullWidth:!0,multiline:!0,rows:10,value:JSON.stringify(t.data,null,2),InputProps:{readOnly:!0},variant:"outlined"})]})]})}),e.jsx(O,{children:e.jsx(v,{onClick:()=>l(!1),children:"Close"})})]})]})};export{Y as default};
//# sourceMappingURL=InteractiveReportReview-CJxpcz8_.js.map
