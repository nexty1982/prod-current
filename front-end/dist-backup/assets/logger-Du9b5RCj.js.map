{"version":3,"file":"logger-Du9b5RCj.js","sources":["../../src/utils/logger.ts"],"sourcesContent":["/**\r\n * Frontend Logger Utility\r\n * Provides easy interface for sending SUCCESS/DEBUG logs to backend\r\n */\r\n\r\ninterface LogEntry {\r\n  log_level: 'INFO' | 'WARN' | 'ERROR' | 'DEBUG' | 'SUCCESS';\r\n  source?: string;\r\n  origin?: string;\r\n  message: string;\r\n  details?: string;\r\n  source_component?: string;\r\n  session_id?: string;\r\n  user_agent?: string;\r\n}\r\n\r\nclass Logger {\r\n  private apiUrl: string;\r\n  private defaultSource: string;\r\n  private defaultOrigin: string;\r\n\r\n  constructor() {\r\n    this.apiUrl = process.env.NODE_ENV === 'production' \r\n      ? '/api/logger' \r\n      : 'http://localhost:3002/api/logger';\r\n    this.defaultSource = 'frontend';\r\n    this.defaultOrigin = 'browser';\r\n  }\r\n\r\n  /**\r\n   * Send log entry to backend\r\n   */\r\n  private async sendLog(entry: LogEntry): Promise<void> {\r\n    try {\r\n      const logData = {\r\n        ...entry,\r\n        source: entry.source || this.defaultSource,\r\n        origin: entry.origin || this.defaultOrigin,\r\n        session_id: this.getSessionId(),\r\n        user_agent: navigator.userAgent\r\n      };\r\n\r\n      const response = await fetch(this.apiUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        credentials: 'include',\r\n        body: JSON.stringify(logData)\r\n      });\r\n\r\n      if (!response.ok) {\r\n        console.warn('Logger API error:', response.status);\r\n      }\r\n    } catch (error) {\r\n      // Fail silently to avoid breaking app\r\n      console.warn('Logger send failed:', error);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Log SUCCESS message\r\n   */\r\n  success(message: string, details?: string, component?: string): void {\r\n    this.sendLog({\r\n      log_level: 'SUCCESS',\r\n      message,\r\n      details,\r\n      source_component: component\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Log DEBUG message  \r\n   */\r\n  debug(message: string, details?: string, component?: string): void {\r\n    this.sendLog({\r\n      log_level: 'DEBUG',\r\n      message,\r\n      details,\r\n      source_component: component\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Log INFO message\r\n   */\r\n  info(message: string, details?: string, component?: string): void {\r\n    this.sendLog({\r\n      log_level: 'INFO',\r\n      message,\r\n      details,\r\n      source_component: component\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Log WARN message\r\n   */\r\n  warn(message: string, details?: string, component?: string): void {\r\n    this.sendLog({\r\n      log_level: 'WARN',\r\n      message,\r\n      details,\r\n      source_component: component\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Log ERROR message\r\n   */\r\n  error(message: string, details?: string, component?: string): void {\r\n    this.sendLog({\r\n      log_level: 'ERROR',\r\n      message,\r\n      details,\r\n      source_component: component\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get session ID from cookies or sessionStorage\r\n   */\r\n  private getSessionId(): string {\r\n    // Try to get session ID from various sources\r\n    const sessionFromStorage = sessionStorage.getItem('sessionId');\r\n    if (sessionFromStorage) return sessionFromStorage;\r\n\r\n    // Generate a temporary session ID\r\n    const tempId = `temp_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n    sessionStorage.setItem('sessionId', tempId);\r\n    return tempId;\r\n  }\r\n\r\n  /**\r\n   * Log component lifecycle events\r\n   */\r\n  componentMounted(componentName: string, props?: any): void {\r\n    this.debug(\r\n      `Component ${componentName} mounted`,\r\n      props ? `Props: ${JSON.stringify(props)}` : undefined,\r\n      componentName\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Log component unmount events\r\n   */\r\n  componentUnmounted(componentName: string): void {\r\n    this.debug(\r\n      `Component ${componentName} unmounted`,\r\n      undefined,\r\n      componentName\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Log API request completion\r\n   */\r\n  apiSuccess(endpoint: string, duration: number): void {\r\n    this.success(\r\n      `API request completed successfully`,\r\n      `Endpoint: ${endpoint}, Duration: ${duration}ms`,\r\n      'ApiClient'\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Log page load completion\r\n   */\r\n  pageLoaded(pageName: string, loadTime: number): void {\r\n    this.success(\r\n      `Page loaded successfully`,\r\n      `Page: ${pageName}, Load time: ${loadTime}ms`,\r\n      'PageLoader'\r\n    );\r\n  }\r\n}\r\n\r\n// Export singleton instance\r\nexport const logger = new Logger();\r\n\r\n// Export class for custom instances\r\nexport { Logger };\r\n\r\n// Usage examples:\r\n/*\r\nimport { logger } from '@/utils/logger';\r\n\r\n// Component lifecycle\r\nlogger.componentMounted('UserDashboard', { userId: 123 });\r\n\r\n// API success\r\nlogger.apiSuccess('/api/users', 245);\r\n\r\n// Page load\r\nlogger.pageLoaded('Dashboard', 1200);\r\n\r\n// Custom success\r\nlogger.success('Backup completed', 'Size: 2.4GB');\r\n\r\n// Debug with component context\r\nlogger.debug('State updated', 'New count: 42', 'Counter');\r\n\r\n// Error logging\r\nlogger.error('Payment failed', 'Gateway timeout', 'PaymentForm');\r\n*/"],"names":["Logger","__publicField","entry","__async","logData","__spreadProps","__spreadValues","response","error","message","details","component","sessionFromStorage","tempId","componentName","props","endpoint","duration","pageName","loadTime","logger"],"mappings":"0qBAgBA,MAAMA,CAAO,CAKX,aAAc,CAJNC,EAAA,eACAA,EAAA,sBACAA,EAAA,sBAGN,KAAK,OACD,cAEJ,KAAK,cAAgB,WACrB,KAAK,cAAgB,SACvB,CAKc,QAAQC,EAAgC,QAAAC,EAAA,sBACpD,GAAI,CACF,MAAMC,EAAUC,EAAAC,EAAA,GACXJ,GADW,CAEd,OAAQA,EAAM,QAAU,KAAK,cAC7B,OAAQA,EAAM,QAAU,KAAK,cAC7B,WAAY,KAAK,aAAA,EACjB,WAAY,UAAU,SAAA,GAGlBK,EAAW,MAAM,MAAM,KAAK,OAAQ,CACxC,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,YAAa,UACb,KAAM,KAAK,UAAUH,CAAO,CAAA,CAC7B,EAEIG,EAAS,IACZ,QAAQ,KAAK,oBAAqBA,EAAS,MAAM,CAErD,OAASC,EAAO,CAEd,QAAQ,KAAK,sBAAuBA,CAAK,CAC3C,CACF,GAKA,QAAQC,EAAiBC,EAAkBC,EAA0B,CACnE,KAAK,QAAQ,CACX,UAAW,UACX,QAAAF,EACA,QAAAC,EACA,iBAAkBC,CAAA,CACnB,CACH,CAKA,MAAMF,EAAiBC,EAAkBC,EAA0B,CACjE,KAAK,QAAQ,CACX,UAAW,QACX,QAAAF,EACA,QAAAC,EACA,iBAAkBC,CAAA,CACnB,CACH,CAKA,KAAKF,EAAiBC,EAAkBC,EAA0B,CAChE,KAAK,QAAQ,CACX,UAAW,OACX,QAAAF,EACA,QAAAC,EACA,iBAAkBC,CAAA,CACnB,CACH,CAKA,KAAKF,EAAiBC,EAAkBC,EAA0B,CAChE,KAAK,QAAQ,CACX,UAAW,OACX,QAAAF,EACA,QAAAC,EACA,iBAAkBC,CAAA,CACnB,CACH,CAKA,MAAMF,EAAiBC,EAAkBC,EAA0B,CACjE,KAAK,QAAQ,CACX,UAAW,QACX,QAAAF,EACA,QAAAC,EACA,iBAAkBC,CAAA,CACnB,CACH,CAKQ,cAAuB,CAE7B,MAAMC,EAAqB,eAAe,QAAQ,WAAW,EAC7D,GAAIA,EAAoB,OAAOA,EAG/B,MAAMC,EAAS,QAAQ,KAAK,IAAA,CAAK,IAAI,KAAK,OAAA,EAAS,SAAS,EAAE,EAAE,OAAO,EAAG,CAAC,CAAC,GAC5E,sBAAe,QAAQ,YAAaA,CAAM,EACnCA,CACT,CAKA,iBAAiBC,EAAuBC,EAAmB,CACzD,KAAK,MACH,aAAaD,CAAa,WAC1BC,EAAQ,UAAU,KAAK,UAAUA,CAAK,CAAC,GAAK,OAC5CD,CAAA,CAEJ,CAKA,mBAAmBA,EAA6B,CAC9C,KAAK,MACH,aAAaA,CAAa,aAC1B,OACAA,CAAA,CAEJ,CAKA,WAAWE,EAAkBC,EAAwB,CACnD,KAAK,QACH,qCACA,aAAaD,CAAQ,eAAeC,CAAQ,KAC5C,WAAA,CAEJ,CAKA,WAAWC,EAAkBC,EAAwB,CACnD,KAAK,QACH,2BACA,SAASD,CAAQ,gBAAgBC,CAAQ,KACzC,YAAA,CAEJ,CACF,CAGO,MAAMC,EAAS,IAAIpB"}