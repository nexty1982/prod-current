var _=Object.defineProperty,H=Object.defineProperties;var V=Object.getOwnPropertyDescriptors;var B=Object.getOwnPropertySymbols;var L=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var W=(a,r,i)=>r in a?_(a,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[r]=i,c=(a,r)=>{for(var i in r||(r={}))L.call(r,i)&&W(a,i,r[i]);if(B)for(var i of B(r))$.call(r,i)&&W(a,i,r[i]);return a},p=(a,r)=>H(a,V(r));var k=(a,r,i)=>new Promise((I,T)=>{var l=d=>{try{x(i.next(d))}catch(v){T(v)}},u=d=>{try{x(i.throw(d))}catch(v){T(v)}},x=d=>d.done?I(d.value):Promise.resolve(d.value).then(l,u);x((i=i.apply(a,r)).next())});import{c as J,l as K,j as e,B as f,S,d as o,e as F,D as z,f as w,G as y,U as Q,T as E,I as N,a0 as X,R as Y}from"./index-Dgvcv9SG.js";import{B as Z}from"./Breadcrumb-pN-bEM50.js";import{P as ee}from"./PageContainer-CE1CdJ_Q.js";import{r as P}from"./vendor-Dkfty7_r.js";import{a as te,I as se}from"./index-D29NsYg0.js";import{C}from"./CustomFormLabel-D3qvXdeE.js";import{C as re}from"./CustomSelect-Bu5z-5-h.js";import{C as g}from"./CustomTextField-CkJSIDJw.js";import{i as ie,f as ne}from"./index-3N2x77cv.js";import{I as le}from"./IconPlus-CXD5XTk2.js";import{T as oe,a as ae,b as de,c as O,d as ce}from"./TableRow-GBYhOGTG.js";import{T as m}from"./TableCell-jHKItVVU.js";import{I as he}from"./IconTrash-C3ez3ykA.js";import{B as me}from"./BlankCard-BkWD9FHm.js";import"./Breadcrumbs-CsbCfS7M.js";import"./Link-CZmOux0z.js";import"./Helmet-B7mFktpd.js";import"./index-Ch3W3BYh.js";import"./typeof-QjJsDpFa.js";import"./index-Dtz6yYVN.js";/**
 * @license @tabler/icons-react v3.36.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=[["path",{d:"M12 3c7.2 0 9 1.8 9 9c0 7.2 -1.8 9 -9 9c-7.2 0 -9 -1.8 -9 -9c0 -7.2 1.8 -9 9 -9",key:"svg-0"}],["path",{d:"M15 12h-6",key:"svg-1"}],["path",{d:"M12 9v6",key:"svg-2"}]],xe=J("outline","square-rounded-plus","SquareRoundedPlus",ue),je=()=>{const{addInvoice:a,invoices:r}=P.useContext(te),[i,I]=P.useState(!1),T=K(),[l,u]=P.useState({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]});P.useEffect(()=>{if(r.length>0){const s=r[r.length-1].id;u(t=>p(c({},t),{id:s+1}))}else u(s=>p(c({},s),{id:1}))},[r]);const x=s=>{let t=0;s.forEach(h=>{const b=parseFloat(h.unitPrice)||0,G=parseInt(h.units)||0,D=b*G;t+=D,h.unitTotalPrice=D});const n=t*.1,j=t+n;return{subtotal:t,vat:n,grandTotal:j}},d=s=>{const{name:t,value:n}=s.target;u(j=>{const h=p(c({},j),{[t]:n}),b=x(h.orders);return c(c({},h),b)})},v=(s,t,n)=>{u(j=>{const h=[...j.orders];h[s]=p(c({},h[s]),{[t]:n});const b=x(h);return c(p(c({},j),{orders:h}),b)})},A=()=>{u(s=>{const t=[...s.orders,{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],n=x(t);return c(p(c({},s),{orders:t}),n)})},M=s=>{u(t=>{const n=t.orders.filter((h,b)=>b!==s),j=x(n);return c(p(c({},t),{orders:n}),j)})},R=s=>k(void 0,null,function*(){s.preventDefault();try{yield a(l),u({id:0,billFrom:"",billTo:"",totalCost:0,status:"Pending",billFromAddress:"",billToAddress:"",orders:[{itemName:"",unitPrice:"",units:"",unitTotalPrice:0}],vat:0,grandTotal:0,subtotal:0,date:new Date().toISOString().split("T")[0]}),I(!0),setTimeout(()=>{I(!1)},5e3),T("/apps/invoice/list")}catch(t){console.error("Error adding invoice:",t)}}),U=ie(new Date(l.date))?new Date(l.date):new Date,q=ne(U,"EEEE, MMMM dd, yyyy");return e.jsx(e.Fragment,{children:e.jsx("form",{onSubmit:R,children:e.jsxs(f,{children:[e.jsxs(S,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",mb:3,children:[e.jsxs(o,{variant:"h5",children:["# ",l.id]}),e.jsxs(f,{display:"flex",gap:1,children:[e.jsx(F,{variant:"outlined",color:"error",onClick:()=>{T("/apps/invoice/list")},children:"Cancel"}),e.jsx(F,{type:"submit",variant:"contained",color:"primary",children:"Create Invoice"})]})]}),e.jsx(z,{}),e.jsxs(S,{direction:"row",spacing:{xs:1,sm:2,md:4},justifyContent:"space-between",alignItems:"center",mb:3,children:[e.jsxs(f,{children:[e.jsx(C,{htmlFor:"demo-simple-select",children:"Order Status"}),e.jsxs(re,{labelId:"demo-simple-select-label",id:"demo-simple-select",value:l.status,onChange:d,disabled:!0,children:[e.jsx(w,{value:"Pending",children:"Pending"}),e.jsx(w,{value:"Shipped",children:"Shipped"}),e.jsx(w,{value:"Delivered",children:"Delivered"})]})]}),e.jsxs(f,{textAlign:"right",children:[e.jsx(C,{htmlFor:"demo-simple-select",children:"Order Date"}),e.jsxs(o,{variant:"body1",children:[" ",q]})]})]}),e.jsx(z,{}),e.jsxs(y,{container:!0,spacing:3,mb:4,children:[e.jsxs(y,{size:{xs:12,sm:6},children:[e.jsx(C,{htmlFor:"bill-from",children:"Bill From"}),e.jsx(g,{id:"bill-from",name:"billFrom",value:l.billFrom,onChange:d,fullWidth:!0})]}),e.jsxs(y,{size:{xs:12,sm:6},children:[e.jsx(C,{htmlFor:"bill-to",sx:{mt:{xs:0,sm:3}},children:"Bill To"}),e.jsx(g,{name:"billTo",value:l.billTo,onChange:d,fullWidth:!0})]}),e.jsxs(y,{size:{xs:12,sm:6},children:[e.jsx(C,{htmlFor:"From Address",sx:{mt:0},children:"From Address"}),e.jsx(g,{name:"billFromAddress",value:l.billFromAddress,onChange:d,fullWidth:!0})]}),e.jsxs(y,{size:{xs:12,sm:6},children:[e.jsx(C,{htmlFor:"Bill To Address",sx:{mt:0},children:"Bill To Address"}),e.jsx(g,{name:"billToAddress",value:l.billToAddress,onChange:d,fullWidth:!0})]})]}),e.jsxs(S,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(o,{variant:"h6",children:"Items Details :"}),e.jsx(F,{onClick:A,variant:"contained",color:"primary",startIcon:e.jsx(le,{width:18}),children:"Add Item"})]}),e.jsx(Q,{variant:"outlined",children:e.jsx(oe,{sx:{whiteSpace:{xs:"nowrap",md:"unset"}},children:e.jsxs(ae,{children:[e.jsx(de,{children:e.jsxs(O,{children:[e.jsx(m,{children:e.jsx(o,{variant:"h6",fontSize:"14px",children:"Item Name"})}),e.jsx(m,{children:e.jsx(o,{variant:"h6",fontSize:"14px",children:"Unit Price"})}),e.jsx(m,{children:e.jsx(o,{variant:"h6",fontSize:"14px",children:"Units"})}),e.jsx(m,{children:e.jsx(o,{variant:"h6",fontSize:"14px",children:"Total Cost"})}),e.jsx(m,{}),e.jsx(m,{children:e.jsx(o,{variant:"h6",fontSize:"14px",children:"Actions"})})]})}),e.jsx(ce,{children:l.orders.map((s,t)=>e.jsxs(O,{children:[e.jsx(m,{children:e.jsx(g,{type:"text",value:s.itemName,placeholder:"Item Name",onChange:n=>v(t,"itemName",n.target.value),fullWidth:!0})}),e.jsx(m,{children:e.jsx(g,{type:"number",value:s.unitPrice,placeholder:"Unit Price",onChange:n=>v(t,"unitPrice",n.target.value),fullWidth:!0})}),e.jsx(m,{children:e.jsx(g,{type:"number",value:s.units,placeholder:"Units",onChange:n=>v(t,"units",n.target.value),fullWidth:!0})}),e.jsx(m,{children:e.jsx(o,{variant:"body1",children:s.unitTotalPrice})}),e.jsx(m,{}),e.jsxs(m,{children:[e.jsx(E,{title:"Add Item",children:e.jsx(N,{onClick:A,color:"primary",children:e.jsx(xe,{width:22})})}),e.jsx(E,{title:"Delete Item",children:e.jsx(N,{onClick:()=>M(t),color:"error",children:e.jsx(he,{width:22})})})]})]},t))})]})})}),e.jsxs(f,{p:3,bgcolor:"primary.light",mt:3,children:[e.jsxs(f,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[e.jsx(o,{variant:"body1",fontWeight:600,children:"Sub Total:"}),e.jsx(o,{variant:"body1",fontWeight:600,children:l.subtotal})]}),e.jsxs(f,{display:"flex",justifyContent:"end",gap:3,mb:3,children:[e.jsx(o,{variant:"body1",fontWeight:600,children:"VAT:"}),e.jsx(o,{variant:"body1",fontWeight:600,children:l.vat})]}),e.jsxs(f,{display:"flex",justifyContent:"end",gap:3,children:[e.jsx(o,{variant:"body1",fontWeight:600,children:"Grand Total:"}),e.jsx(o,{variant:"body1",fontWeight:600,children:l.grandTotal})]})]}),i&&e.jsx(X,{severity:"success",sx:{position:"fixed",top:16,right:16},children:"Invoice added successfully."})]})})})},pe=[{to:"/",title:"Home"},{title:"Invoice Create"}],Me=()=>e.jsx(se,{children:e.jsxs(ee,{title:"Create Invoice",description:"this is Create Invoice",children:[e.jsx(Z,{title:"Create Invoice",items:pe}),e.jsx(me,{children:e.jsx(Y,{children:e.jsx(je,{})})})]})});export{Me as default};
//# sourceMappingURL=Create-ChM1leIB.js.map
