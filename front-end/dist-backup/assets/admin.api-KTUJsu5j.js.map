{"version":3,"file":"admin.api-KTUJsu5j.js","sources":["../../src/api/utils/axiosInstance.ts","../../src/api/admin.api.ts"],"sourcesContent":["/**\r\n * Shared Axios Instance for OrthodMetrics API\r\n * Provides unified error handling, baseURL, and interceptors\r\n */\r\n\r\nimport axios, { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios';\r\nimport { API_CONFIG } from '../../config/api.config';\r\n\r\n// ===== API CLIENT CONFIGURATION =====\r\n// Use centralized configuration\r\nconst API_BASE_URL = API_CONFIG.BASE_URL;\r\nconst API_TIMEOUT = API_CONFIG.TIMEOUT;\r\n\r\nclass ApiClient {\r\n  private instance: AxiosInstance;\r\n\r\n  constructor() {\r\n    console.log(`üîß Initializing API Client with baseURL: \"${API_BASE_URL}\"`);\r\n    console.log(`üåê Environment: DEV=${import.meta.env.DEV}, PROD=${import.meta.env.PROD}`);\r\n\r\n    this.instance = axios.create({\r\n      baseURL: API_BASE_URL,\r\n      timeout: API_TIMEOUT,\r\n      withCredentials: true, // Session-based authentication\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n\r\n    this.setupInterceptors();\r\n  }\r\n\r\n  private setupInterceptors(): void {\r\n    // Request interceptor\r\n    this.instance.interceptors.request.use(\r\n      (config) => {\r\n        // Add /api prefix if not already present\r\n        if (config.url && !config.url.startsWith('http') && !config.url.startsWith('/api')) {\r\n          config.url = `/api${config.url}`;\r\n        }\r\n\r\n        // Add JWT token if available (for API authentication)\r\n        // Skip for auth endpoints\r\n        const isAuthEndpoint = config.url?.includes('/auth/') || config.url?.includes('/api/auth');\r\n        if (!isAuthEndpoint && typeof window !== 'undefined') {\r\n          const accessToken = localStorage.getItem('access_token') || \r\n                             sessionStorage.getItem('access_token') ||\r\n                             (localStorage.getItem('auth_user') ? JSON.parse(localStorage.getItem('auth_user') || '{}')?.access_token : null);\r\n          if (accessToken && !config.headers['Authorization']) {\r\n            config.headers['Authorization'] = `Bearer ${accessToken}`;\r\n          }\r\n        }\r\n\r\n        // Remove any invalid church_id headers for routes that don't need them\r\n        // Routes that should NOT have church_id headers:\r\n        // - /api/my/churches (user's own churches)\r\n        // - /api/churches (global list, admin only)\r\n        // - /api/auth/* (authentication endpoints)\r\n        const url = config.url || '';\r\n        const fullUrl = config.baseURL ? `${config.baseURL}${url}` : url;\r\n        const routesWithoutChurchId = [\r\n          '/api/my/churches',\r\n          '/api/churches',\r\n          '/api/auth/',\r\n          '/auth/',\r\n          'my/churches',\r\n          'churches', // Only match exact 'churches' not 'church/46/...'\r\n        ];\r\n        \r\n        // Check if this is a route that shouldn't have church_id\r\n        // Match both path-only and full URLs\r\n        const shouldSkipChurchId = routesWithoutChurchId.some(route => {\r\n          if (route === 'churches') {\r\n            // Exact match for 'churches' endpoint (not church/46/...)\r\n            return url === '/api/churches' || url === '/churches' || fullUrl.includes('/api/churches') || fullUrl.includes('/churches');\r\n          }\r\n          return url.includes(route) || fullUrl.includes(route);\r\n        });\r\n        \r\n        // Check for invalid church_id header values (empty, \"none\", \"undefined\") on ALL routes\r\n        // These invalid values can cause backend validation errors\r\n        if (config.headers) {\r\n          const headerKeys = Object.keys(config.headers);\r\n          const invalidValues = ['', 'none', 'undefined', 'null', 'nan'];\r\n          \r\n          headerKeys.forEach(key => {\r\n            const lowerKey = key.toLowerCase();\r\n            const headerValue = config.headers[key];\r\n            const valueStr = headerValue !== null && headerValue !== undefined ? String(headerValue).toLowerCase().trim() : '';\r\n            \r\n            // Remove church_id headers with invalid values OR if route should skip church_id\r\n            if (lowerKey.includes('church') && (lowerKey.includes('id') || lowerKey.includes('church-id'))) {\r\n              if (shouldSkipChurchId || invalidValues.includes(valueStr)) {\r\n                delete config.headers[key];\r\n                console.log(`üßπ Removed church_id header: ${key}=\"${headerValue}\" from ${url} (skip: ${shouldSkipChurchId}, invalid: ${invalidValues.includes(valueStr)})`);\r\n              }\r\n            }\r\n          });\r\n          \r\n          // Also explicitly check and remove common variations\r\n          const commonChurchHeaders = [\r\n            'x-church-id', 'X-Church-Id', 'X-CHURCH-ID',\r\n            'church-id', 'Church-Id', 'CHURCH-ID',\r\n            'churchId', 'ChurchId', 'CHURCHID',\r\n            'x-churchid', 'X-ChurchId'\r\n          ];\r\n          \r\n          commonChurchHeaders.forEach(headerName => {\r\n            const value = config.headers[headerName];\r\n            if (value !== undefined && value !== null) {\r\n              const valueStr = String(value).toLowerCase().trim();\r\n              if (shouldSkipChurchId || invalidValues.includes(valueStr)) {\r\n                delete config.headers[headerName];\r\n                console.log(`üßπ Removed church_id header (explicit): ${headerName}=\"${value}\" from ${url}`);\r\n              }\r\n            } else if (shouldSkipChurchId && value === null) {\r\n              // Remove null values for routes that should skip\r\n              delete config.headers[headerName];\r\n            }\r\n          });\r\n        }\r\n        \r\n        if (shouldSkipChurchId) {\r\n          // Final cleanup: ensure ALL church-related headers are removed for these routes\r\n          if (config.headers) {\r\n            const remainingChurchHeaders = Object.keys(config.headers).filter(k => {\r\n              const lowerKey = k.toLowerCase();\r\n              return lowerKey.includes('church') && (lowerKey.includes('id') || lowerKey.includes('church-id'));\r\n            });\r\n            \r\n            if (remainingChurchHeaders.length > 0) {\r\n              remainingChurchHeaders.forEach(key => {\r\n                delete config.headers[key];\r\n                console.log(`üßπ Force-removed remaining church_id header: ${key} from ${url}`);\r\n              });\r\n            }\r\n          }\r\n          \r\n          // Remove from commonHeaders if it exists\r\n          if ((config as any).commonHeaders) {\r\n            Object.keys((config as any).commonHeaders).forEach(key => {\r\n              const lowerKey = key.toLowerCase();\r\n              if (lowerKey.includes('church') && (lowerKey.includes('id') || lowerKey.includes('church-id'))) {\r\n                delete (config as any).commonHeaders[key];\r\n              }\r\n            });\r\n          }\r\n          \r\n          // Debug: Log final headers for problematic routes\r\n          if (config.headers) {\r\n            const churchHeaders = Object.keys(config.headers).filter(k => {\r\n              const lowerKey = k.toLowerCase();\r\n              return lowerKey.includes('church') && (lowerKey.includes('id') || lowerKey.includes('church-id'));\r\n            });\r\n            if (churchHeaders.length > 0) {\r\n              console.warn(`‚ö†Ô∏è Warning: Church headers still present for ${url}:`, churchHeaders);\r\n            } else {\r\n              console.log(`‚úÖ Verified no church_id headers for ${url}`);\r\n            }\r\n          }\r\n        }\r\n\r\n        // fullUrl was already declared above, reuse it for logging\r\n        console.log(`üåê API Request: ${config.method?.toUpperCase()} ${fullUrl}`);\r\n        console.log(`üîß BaseURL: \"${config.baseURL || 'none'}\", URL: \"${config.url}\"`);\r\n        return config;\r\n      },\r\n      (error) => {\r\n        console.error('‚ùå Request Error:', error);\r\n        return Promise.reject(error);\r\n      }\r\n    );\r\n\r\n    // Response interceptor\r\n    this.instance.interceptors.response.use(\r\n      (response: AxiosResponse) => {\r\n        console.log(`‚úÖ API Response: ${response.status} ${response.config.url}`);\r\n        return response;\r\n      },\r\n      (error) => {\r\n        console.error('‚ùå Response Error:', error.response?.status, error.response?.data);\r\n\r\n        // Handle specific error cases\r\n        if (error.response?.status === 401) {\r\n          // Only redirect if not already on homepage to prevent infinite loops\r\n          if (!window.location.pathname.includes('/frontend-pages/homepage')) {\r\n            localStorage.removeItem('auth_user');\r\n            window.location.href = '/frontend-pages/homepage';\r\n          }\r\n        }\r\n\r\n        // Create enhanced error object with HTTP details preserved\r\n        const enhancedError = new Error(error.response?.data?.message || error.message || 'Request failed');\r\n        (enhancedError as any).status = error.response?.status;\r\n        (enhancedError as any).code = error.code;\r\n        (enhancedError as any).isNetworkError = !error.response;\r\n        (enhancedError as any).originalError = error;\r\n\r\n        throw enhancedError;\r\n      }\r\n    );\r\n  }\r\n\r\n  // ===== CORE HTTP METHODS =====\r\n  async request<T>(config: AxiosRequestConfig): Promise<T> {\r\n    try {\r\n      const response = await this.instance.request<T>(config);\r\n      return response.data;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  async get<T>(url: string, config?: AxiosRequestConfig): Promise<T> {\r\n    return this.request<T>({ ...config, method: 'GET', url });\r\n  }\r\n\r\n  async post<T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {\r\n    return this.request<T>({ ...config, method: 'POST', url, data });\r\n  }\r\n\r\n  async put<T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {\r\n    return this.request<T>({ ...config, method: 'PUT', url, data });\r\n  }\r\n\r\n  async patch<T>(url: string, data?: any, config?: AxiosRequestConfig): Promise<T> {\r\n    return this.request<T>({ ...config, method: 'PATCH', url, data });\r\n  }\r\n\r\n  async delete<T>(url: string, config?: AxiosRequestConfig): Promise<T> {\r\n    return this.request<T>({ ...config, method: 'DELETE', url });\r\n  }\r\n\r\n  // ===== FILE UPLOAD METHOD =====\r\n  async uploadFile<T>(\r\n    url: string,\r\n    file: File,\r\n    additionalData?: Record<string, any>,\r\n    onProgress?: (progress: number) => void\r\n  ): Promise<T> {\r\n    const formData = new FormData();\r\n    formData.append('file', file);\r\n\r\n    if (additionalData) {\r\n      Object.entries(additionalData).forEach(([key, value]) => {\r\n        formData.append(key, value);\r\n      });\r\n    }\r\n\r\n    return this.request<T>({\r\n      method: 'POST',\r\n      url,\r\n      data: formData,\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data',\r\n      },\r\n      onUploadProgress: (progressEvent) => {\r\n        if (onProgress && progressEvent.total) {\r\n          const progress = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n          onProgress(progress);\r\n        }\r\n      },\r\n    });\r\n  }\r\n\r\n  // ===== UTILITY METHODS =====\r\n  buildQueryString(params?: Record<string, any>): string {\r\n    if (!params) return '';\r\n\r\n    const searchParams = new URLSearchParams();\r\n    Object.entries(params).forEach(([key, value]) => {\r\n      if (value !== undefined && value !== null) {\r\n        searchParams.append(key, String(value));\r\n      }\r\n    });\r\n\r\n    const queryString = searchParams.toString();\r\n    return queryString ? `?${queryString}` : '';\r\n  }\r\n}\r\n\r\n// Create and export the shared API client instance\r\nexport const apiClient = new ApiClient();\r\nexport const axiosInstance = apiClient; // Alias for backward compatibility\r\n\r\nexport default apiClient; ","/**\r\n * Admin API Service Layer\r\n * Handles admin/superadmin-level endpoints for system management\r\n */\r\n\r\nimport type {\r\n    User,\r\n    Church,\r\n    ChurchFilters,\r\n    CreateChurchData,\r\n    ActivityLog,\r\n    ProvisionRequest,\r\n    ProvisionLog,\r\n    ProvisionFilters,\r\n    PaginatedResponse,\r\n    ApiResponse,\r\n  } from '../types/orthodox-metrics.types';\r\n  import { apiClient } from './utils/axiosInstance';\r\n  \r\n  class AdminAPI {\r\n    // ===== CHURCH MANAGEMENT APIs =====\r\n    churches = {\r\n      getAll: (filters?: ChurchFilters): Promise<{ churches: Church[] }> =>\r\n        apiClient.get(`/admin/churches${apiClient.buildQueryString(filters)}`),\r\n  \r\n      getById: (id: number): Promise<Church> =>\r\n        apiClient.get<{ success: boolean; church: Church }>(`/admin/churches/${id}`)\r\n          .then(response => response.church),\r\n  \r\n      create: (church: CreateChurchData): Promise<Church> =>\r\n        apiClient.post('/admin/churches', church),\r\n  \r\n      update: (id: number, church: Partial<Church>): Promise<Church> =>\r\n        apiClient.put(`/admin/churches/${id}`, church),\r\n  \r\n      delete: (id: number, deleteDatabase?: boolean): Promise<ApiResponse> =>\r\n        apiClient.delete(`/admin/churches/${id}`, { \r\n          data: { delete_database: deleteDatabase || false }\r\n        }),\r\n  \r\n      approve: (id: number, notes?: string): Promise<ApiResponse> =>\r\n        apiClient.post(`/admin/churches/${id}/approve`, { notes }),\r\n  \r\n      suspend: (id: number, reason?: string): Promise<ApiResponse> =>\r\n        apiClient.post(`/admin/churches/${id}/suspend`, { reason }),\r\n  \r\n      activate: (id: number): Promise<ApiResponse> =>\r\n        apiClient.post(`/admin/churches/${id}/activate`),\r\n  \r\n      updateStatus: (id: number, active: boolean): Promise<ApiResponse> =>\r\n        apiClient.patch(`/admin/churches/${id}/status`, { active }),\r\n  \r\n      removeAllUsers: (id: number): Promise<ApiResponse> =>\r\n        apiClient.post(`/admin/churches/${id}/remove-all-users`),\r\n  \r\n      // Additional church endpoints found in direct fetch calls\r\n      getActiveChurches: (): Promise<{ churches: Church[] }> =>\r\n        apiClient.get('/admin/churches?is_active=1'),\r\n  \r\n      getChurchesByLanguage: (language: string): Promise<{ churches: Church[] }> =>\r\n        apiClient.get(`/admin/churches?preferred_language=${language}`),\r\n  \r\n      getChurchUsers: (churchId: number): Promise<User[]> =>\r\n        apiClient.get(`/admin/churches/${churchId}/users`),\r\n  \r\n      getChurchRecordCounts: (churchId: number): Promise<any> =>\r\n        apiClient.get(`/admin/churches/${churchId}/record-counts`),\r\n  \r\n      getChurchDatabaseInfo: (churchId: number): Promise<any> =>\r\n        apiClient.get(`/admin/churches/${churchId}/database-info`),\r\n  \r\n      testChurchConnection: (churchId: number): Promise<ApiResponse> =>\r\n        apiClient.post(`/admin/churches/${churchId}/test-connection`),\r\n  \r\n      manageChurchUser: (churchId: number, userId: number, action: string): Promise<ApiResponse> =>\r\n        apiClient.post(`/admin/churches/${churchId}/users/${userId}/${action}`),\r\n  \r\n      resetChurchUserPassword: (churchId: number, userId: number): Promise<ApiResponse> =>\r\n        apiClient.post(`/admin/churches/${churchId}/users/${userId}/reset-password`),\r\n  \r\n      getChurchTables: (churchId: number): Promise<any> =>\r\n        apiClient.get(`/admin/churches/${churchId}/tables`),\r\n  \r\n      createChurchWizard: (data: any): Promise<ApiResponse> =>\r\n        apiClient.post('/admin/churches/wizard', data),\r\n  \r\n      getChurchOverview: (churchId: number): Promise<any> =>\r\n        apiClient.get(`/admin/church/${churchId}/overview`),\r\n  \r\n      getChurchDatabaseRecordCounts: (churchDbId: number): Promise<any> =>\r\n        apiClient.get(`/admin/church-database/${churchDbId}/record-counts`),\r\n\r\n        /**\r\n   * Get table columns for a church (handles multiple backend route shapes).\r\n   * Returns a normalized shape: { columns: string[] }\r\n   */\r\n      exportTemplate: (churchId: number, data: {\r\n        table: string;\r\n        language?: string;\r\n        template_slug?: string;\r\n        template_name?: string;\r\n        overwrite?: boolean;\r\n      }): Promise<{ success: boolean; slug: string; template?: any; message?: string }> =>\r\n        apiClient.post(`/admin/churches/${churchId}/export-template`, data),\r\n\r\n      getTableColumns: async (churchId: number, table: string): Promise<{ columns: string[]; via?: string }> => {\r\n    const enc = encodeURIComponent;\r\n    const qs = `?table=${enc(table)}`;\r\n\r\n    const candidates = [\r\n    // Preferred (api/admin)\r\n    `/api/admin/churches/${churchId}/tables/${enc(table)}/columns`,\r\n    `/api/admin/churches/${churchId}/columns${qs}`,\r\n    `/api/admin/churches/${churchId}/tables/${enc(table)}`,\r\n    `/api/admin/churches/${churchId}/table-columns${qs}`,\r\n    `/api/admin/churches/${churchId}/schema${qs}`,\r\n    `/api/admin/church/${churchId}/tables/${enc(table)}/columns`,\r\n    // Legacy (admin)\r\n    `/admin/churches/${churchId}/tables/${enc(table)}/columns`,\r\n    `/admin/churches/${churchId}/columns${qs}`,\r\n    `/admin/churches/${churchId}/tables/${enc(table)}`,\r\n    `/admin/churches/${churchId}/table-columns${qs}`,\r\n    `/admin/churches/${churchId}/schema${qs}`,\r\n    `/admin/church/${churchId}/tables/${enc(table)}/columns`,\r\n    ];\r\n\r\n      let lastErr: any = null;\r\n  for (const path of candidates) {\r\n    try {\r\n      const res = await apiClient.get(path);\r\n      const raw = (res as any)?.columns ?? (res as any)?.data?.columns ?? res;\r\n\r\n      // Accept shapes: string[], { column_name,... }[], { columns: [...] }\r\n      let columns: string[] = [];\r\n      if (Array.isArray(raw)) {\r\n        columns = raw.map((c: any) =>\r\n          typeof c === 'string' ? c :\r\n          c?.column_name ?? c?.COLUMN_NAME ?? ''\r\n        ).filter(Boolean);\r\n      } else if (Array.isArray((raw as any)?.columns)) {\r\n        columns = (raw as any).columns.map((c: any) =>\r\n          typeof c === 'string' ? c : c?.column_name ?? c?.COLUMN_NAME ?? ''\r\n        ).filter(Boolean);\r\n      }\r\n\r\n      if (columns.length) return { columns, via: path };\r\n    } catch (e) {\r\n      lastErr = e;\r\n    }\r\n  }\r\n\r\n  // 2) Second pass: derive from tables listing if it includes schema info\r\n  try {\r\n    // Prefer api/admin; fall back to admin\r\n    const tablesRes =\r\n      await apiClient.get(`/api/admin/churches/${churchId}/tables`)\r\n        .catch(() => apiClient.get(`/admin/churches/${churchId}/tables`));\r\n\r\n    const tables = (tablesRes as any)?.tables ?? tablesRes;\r\n\r\n    // Accept shapes: string[] of table names, or [{name, columns:[...]}]\r\n    if (Array.isArray(tables)) {\r\n      // If objects with columns\r\n      const withCols = tables.find((t: any) =>\r\n        (t?.name === table || t?.table_name === table) &&\r\n        Array.isArray(t?.columns)\r\n      );\r\n      if (withCols) {\r\n        const cols = withCols.columns.map((c: any) =>\r\n          typeof c === 'string' ? c : c?.column_name ?? c?.COLUMN_NAME ?? ''\r\n        ).filter(Boolean);\r\n        if (cols.length) return { columns: cols, via: 'tables-listing' };\r\n      }\r\n\r\n      // If it's just names, no schema available\r\n      if (tables.includes(table)) {\r\n        throw new Error(`Table \"${table}\" exists but no column endpoint responded`);\r\n      }\r\n    }\r\n  } catch (e) {\r\n    lastErr = e;\r\n  }\r\n\r\n  throw lastErr ?? new Error('No matching columns endpoint responded');\r\n},\r\n    };\r\n  \r\n    // ===== USER MANAGEMENT APIs =====\r\n    users = {\r\n      getAll: (filters?: any): Promise<PaginatedResponse<User>> =>\r\n        apiClient.get(`/admin/users${apiClient.buildQueryString(filters)}`),\r\n  \r\n      getById: (id: number): Promise<User> =>\r\n        apiClient.get(`/admin/users/${id}`),\r\n  \r\n      create: (user: Partial<User>): Promise<User> =>\r\n        apiClient.post('/admin/users', user),\r\n  \r\n      update: (id: number, user: Partial<User>): Promise<User> =>\r\n        apiClient.put(`/admin/users/${id}`, user),\r\n  \r\n      delete: (id: number): Promise<ApiResponse> =>\r\n        apiClient.delete(`/admin/users/${id}`),\r\n  \r\n      toggleStatus: (id: number): Promise<ApiResponse> =>\r\n        apiClient.put(`/admin/users/${id}/toggle-status`),\r\n  \r\n      // Additional user endpoints\r\n      adminResetPassword: (userId: number): Promise<ApiResponse> =>\r\n        apiClient.post(`/auth/admin-reset-password`, { userId }),\r\n    };\r\n  \r\n    // ===== ACTIVITY LOGS APIs =====\r\n    activityLogs = {\r\n      getAll: (filters?: any): Promise<PaginatedResponse<ActivityLog>> =>\r\n        apiClient.get(`/admin/activity-logs${apiClient.buildQueryString(filters)}`),\r\n  \r\n      getById: (id: number): Promise<ActivityLog> =>\r\n        apiClient.get(`/admin/activity-logs/${id}`),\r\n  \r\n      getStats: (): Promise<any> =>\r\n        apiClient.get('/admin/activity-logs/stats'),\r\n    };\r\n  \r\n    // ===== PROVISIONING APIs =====\r\n    provisioning = {\r\n      getAll: (filters?: ProvisionFilters): Promise<PaginatedResponse<ProvisionLog>> =>\r\n        apiClient.get(`/provisioning${apiClient.buildQueryString(filters)}`),\r\n  \r\n      getById: (id: number): Promise<ProvisionLog> =>\r\n        apiClient.get(`/provisioning/${id}`),\r\n  \r\n      create: (request: ProvisionRequest): Promise<ProvisionLog> =>\r\n        apiClient.post('/provisioning', request),\r\n  \r\n      update: (id: number, request: Partial<ProvisionRequest>): Promise<ProvisionLog> =>\r\n        apiClient.put(`/provisioning/${id}`, request),\r\n  \r\n      delete: (id: number): Promise<ApiResponse> =>\r\n        apiClient.delete(`/provisioning/${id}`),\r\n  \r\n      approve: (id: number, notes?: string): Promise<ApiResponse> =>\r\n        apiClient.post(`/provisioning/${id}/approve`, { notes }),\r\n  \r\n      reject: (id: number, reason?: string): Promise<ApiResponse> =>\r\n        apiClient.post(`/provisioning/${id}/reject`, { reason }),\r\n  \r\n      getStats: (): Promise<any> =>\r\n        apiClient.get('/provisioning/stats'),\r\n    };\r\n  \r\n    // ===== EMAIL APIs =====\r\n    email = {\r\n      sendTestEmail: (emailData: { to: string; subject: string; message: string }): Promise<ApiResponse> =>\r\n        apiClient.post('/email/test', emailData),\r\n  \r\n      sendBulkEmail: (emailData: { recipients: string[]; subject: string; message: string }): Promise<ApiResponse> =>\r\n        apiClient.post('/email/bulk', emailData),\r\n  \r\n      sendOcrResults: (emailData: any): Promise<ApiResponse> =>\r\n        apiClient.post('/email/send-ocr-results', emailData),\r\n    };\r\n  \r\n    // ===== SYSTEM MANAGEMENT APIs =====\r\n    system = {\r\n      getSystemStats: (): Promise<any> =>\r\n        apiClient.get('/admin/system/system-stats'),\r\n  \r\n      getDatabaseHealth: (): Promise<any> =>\r\n        apiClient.get('/admin/system/database-health'),\r\n  \r\n      getServerMetrics: (): Promise<any> =>\r\n        apiClient.get('/admin/system/server-metrics'),\r\n  \r\n      getSystemInfo: (): Promise<any> =>\r\n        apiClient.get('/admin/system/system-info'),\r\n  \r\n      getBackups: (): Promise<any> =>\r\n        apiClient.get('/admin/system/backups'),\r\n  \r\n      performSystemAction: (url: string): Promise<ApiResponse> =>\r\n        apiClient.post(url),\r\n    };\r\n  \r\n    // ===== SERVICE MANAGEMENT APIs =====\r\n    services = {\r\n      getStatus: (): Promise<any> =>\r\n        apiClient.get('/admin/services/status'),\r\n  \r\n      getHealth: (): Promise<any> =>\r\n        apiClient.get('/admin/services/health'),\r\n  \r\n      getRecentActions: (): Promise<any> =>\r\n        apiClient.get('/admin/services/actions/recent'),\r\n  \r\n      performAction: (serviceName: string, action: string): Promise<ApiResponse> =>\r\n        apiClient.post(`/admin/services/${serviceName}/${action}`),\r\n  \r\n      getBackendLogs: (lines: number = 50): Promise<any> =>\r\n        apiClient.get(`/admin/services/backend/logs?lines=${lines}`),\r\n  \r\n      rebuildFrontend: (): Promise<ApiResponse> =>\r\n        apiClient.post('/admin/services/frontend/rebuild'),\r\n  \r\n      getServiceLogs: (serviceName: string, lines: number = 100): Promise<any> =>\r\n        apiClient.get(`/admin/services/${serviceName}/logs?lines=${lines}`),\r\n  \r\n      // OMAI-specific service methods\r\n      getOmaiStatus: (): Promise<any> =>\r\n        apiClient.get('/api/omai/status'),\r\n  \r\n      getOmaiHealth: (): Promise<any> =>\r\n        apiClient.get('/api/omai/health'),\r\n  \r\n      getOmaiLogs: (maxEntries: number = 1000): Promise<any> =>\r\n        apiClient.get(`/api/omai/logs?max=${maxEntries}`),\r\n  \r\n      getOmaiSettings: (): Promise<any> =>\r\n        apiClient.get('/api/omai/settings'),\r\n  \r\n      updateOmaiSettings: (settings: any): Promise<ApiResponse> =>\r\n        apiClient.put('/api/omai/settings', settings),\r\n  \r\n      performOmaiAction: (action: string): Promise<ApiResponse> =>\r\n        apiClient.post(`/api/omai/control/${action}`),\r\n  \r\n      getOmaiStats: (): Promise<any> =>\r\n        apiClient.get('/api/omai/stats'),\r\n  \r\n      getOmaiAgentResults: (componentId: string): Promise<any> =>\r\n        apiClient.get(`/api/omai/agent-results/${componentId}`),\r\n  \r\n      getOmaiAgentMetrics: (): Promise<any> =>\r\n        apiClient.get('/api/omai/agent-metrics'),\r\n    };\r\n  \r\n    // ===== METRICS APIs =====\r\n    metrics = {\r\n      getOrthodMetrics: (): Promise<any> =>\r\n        apiClient.get('/metrics/orthod'),\r\n    };\r\n  \r\n    // ===== MENU MANAGEMENT APIs =====\r\n    menu = {\r\n      getPermissions: (): Promise<any> =>\r\n        apiClient.get('/menu-management/permissions'),\r\n  \r\n      updatePermissions: (permissions: any): Promise<ApiResponse> =>\r\n        apiClient.put('/menu-management/permissions', permissions),\r\n    };\r\n  \r\n    // ===== MENU PERMISSIONS APIs =====\r\n    menuPermissions = {\r\n      getAll: (): Promise<any[]> =>\r\n        apiClient.get('/menu-permissions'),\r\n  \r\n      getById: (menuId: number): Promise<any> =>\r\n        apiClient.get(`/menu-permissions/${menuId}`),\r\n  \r\n      createMenuItem: (data: any): Promise<ApiResponse> =>\r\n        apiClient.post('/menu-permissions/menu-item', data),\r\n    };\r\n  \r\n    // ===== GLOBAL IMAGES APIs =====\r\n    globalImages = {\r\n      getAll: (): Promise<any[]> =>\r\n        apiClient.get('/admin/global-images'),\r\n\r\n      upload: (formData: FormData): Promise<ApiResponse> =>\r\n        apiClient.uploadFile('/admin/global-images/upload', formData as any),\r\n\r\n      update: (imageId: number, params: any): Promise<ApiResponse> =>\r\n        apiClient.put(`/admin/global-images/${imageId}`, params),\r\n\r\n      saveExtracted: (data: any): Promise<ApiResponse> =>\r\n        apiClient.post('/admin/global-images/save-extracted', data),\r\n\r\n      // Directory management APIs\r\n      getDirectories: (): Promise<any[]> =>\r\n        apiClient.get('/admin/global-images/directories'),\r\n\r\n      addDirectory: (directory: any): Promise<ApiResponse> =>\r\n        apiClient.post('/admin/global-images/directories', directory),\r\n\r\n      updateDirectory: (path: string, directory: any): Promise<ApiResponse> =>\r\n        apiClient.put(`/admin/global-images/directories/${encodeURIComponent(path)}`, directory),\r\n\r\n      deleteDirectory: (path: string): Promise<ApiResponse> =>\r\n        apiClient.delete(`/admin/global-images/directories/${encodeURIComponent(path)}`),\r\n\r\n      scanDirectory: (path: string): Promise<ApiResponse> =>\r\n        apiClient.post(`/admin/global-images/directories/${encodeURIComponent(path)}/scan`),\r\n    };\r\n  \r\n    // ===== BACKUP APIs =====\r\n    backup = {\r\n      getSettings: (): Promise<any> =>\r\n        apiClient.get('/backup/settings'),\r\n  \r\n      updateSettings: (settings: any): Promise<ApiResponse> =>\r\n        apiClient.put('/backup/settings', settings),\r\n  \r\n      getFiles: (): Promise<any[]> =>\r\n        apiClient.get('/backup/files'),\r\n  \r\n      getStorage: (): Promise<any> =>\r\n        apiClient.get('/backup/storage'),\r\n  \r\n      run: (): Promise<ApiResponse> =>\r\n        apiClient.post('/backup/run'),\r\n  \r\n      download: (backupId: string): Promise<{ url: string }> =>\r\n        apiClient.get(`/backup/download/${backupId}`),\r\n  \r\n      delete: (backupId: string): Promise<ApiResponse> =>\r\n        apiClient.delete(`/backup/delete/${backupId}`),\r\n    };\r\n  \r\n    // ===== NFS BACKUP APIs =====\r\n    nfsBackup = {\r\n      getConfig: (): Promise<any> =>\r\n        apiClient.get('/admin/nfs-backup/config'),\r\n  \r\n      updateConfig: (config: any): Promise<ApiResponse> =>\r\n        apiClient.post('/admin/nfs-backup/config', config),\r\n  \r\n      testConnection: (nfsServerIP: string, remotePath: string): Promise<ApiResponse> =>\r\n        apiClient.post('/admin/nfs-backup/test', { nfsServerIP, remotePath }),\r\n  \r\n      mount: (): Promise<ApiResponse> =>\r\n        apiClient.post('/admin/nfs-backup/mount'),\r\n  \r\n      unmount: (): Promise<ApiResponse> =>\r\n        apiClient.post('/admin/nfs-backup/unmount'),\r\n  \r\n      getStatus: (): Promise<any> =>\r\n        apiClient.get('/admin/nfs-backup/status'),\r\n    };\r\n  \r\n    // ===== LOGS APIs =====\r\n    logs = {\r\n      getComponents: (): Promise<any[]> =>\r\n        apiClient.get('/logs/components'),\r\n  \r\n      getAll: (params?: any): Promise<any> =>\r\n        apiClient.get(`/logs${apiClient.buildQueryString(params)}`),\r\n  \r\n      getComponentLevel: (component: string): Promise<any> =>\r\n        apiClient.get(`/logs/components/${component}/level`),\r\n  \r\n      toggleComponent: (component: string): Promise<ApiResponse> =>\r\n        apiClient.post(`/logs/components/${component}/toggle`),\r\n  \r\n      test: (): Promise<ApiResponse> =>\r\n        apiClient.post('/logs/test'),\r\n  \r\n      getFrontendLogs: (): Promise<ApiResponse> =>\r\n        apiClient.post('/logs/frontend'),\r\n    };\r\n  \r\n  \r\n  \r\n    // ===== SESSIONS APIs =====\r\n    sessions = {\r\n      getAll: (filters?: any): Promise<any> =>\r\n        apiClient.get(`/admin/sessions${apiClient.buildQueryString(filters)}`),\r\n\r\n      getStats: (): Promise<any> =>\r\n        apiClient.get('/admin/sessions/stats'),\r\n\r\n      terminate: (sessionId: string): Promise<ApiResponse> =>\r\n        apiClient.delete(`/admin/sessions/${sessionId}`),\r\n\r\n      terminateAllForUser: (userId: number): Promise<ApiResponse> =>\r\n        apiClient.post(`/admin/sessions/user/${userId}/terminate-all`),\r\n\r\n      terminateAll: (): Promise<ApiResponse> =>\r\n        apiClient.post('/admin/sessions/terminate-all'),\r\n\r\n      cleanup: (daysOld: number = 7): Promise<ApiResponse> =>\r\n        apiClient.post(`/admin/sessions/cleanup`, { days_old: daysOld }),\r\n    };\r\n\r\n    // ===== MESSAGES APIs =====\r\n    messages = {\r\n      send: (userId: number, message: string): Promise<ApiResponse> =>\r\n        apiClient.post('/admin/messages/send', { user_id: userId, message }),\r\n\r\n      sendToSession: (sessionId: string, message: string): Promise<ApiResponse> =>\r\n        apiClient.post('/admin/messages/send-to-session', { session_id: sessionId, message }),\r\n    };\r\n\r\n    // ===== TEST APIs =====\r\n    test = {\r\n      retryFailedJobs: (): Promise<ApiResponse> =>\r\n        apiClient.post('/admin/test/retry-failed-jobs'),\r\n    };\r\n\r\n    // ===== TEMPLATE MANAGEMENT APIs =====\r\n    templates = {\r\n      getAll: (filters?: { record_type?: string; is_global?: boolean; church_id?: number }): Promise<{ success: boolean; templates: any[]; count: number }> =>\r\n        apiClient.get(`/admin/templates${apiClient.buildQueryString(filters)}`),\r\n\r\n      getBySlug: (slug: string): Promise<{ success: boolean; template: any }> =>\r\n        apiClient.get(`/admin/templates/${slug}`),\r\n\r\n      create: (template: {\r\n        name: string;\r\n        slug?: string;\r\n        record_type: 'baptism' | 'marriage' | 'funeral' | 'custom';\r\n        description?: string;\r\n        fields: any[];\r\n        grid_type?: string;\r\n        theme?: string;\r\n        layout_type?: string;\r\n        language_support?: any;\r\n        is_editable?: boolean;\r\n        church_id?: number | null;\r\n        is_global?: boolean;\r\n      }): Promise<{ success: boolean; message: string; template: any }> =>\r\n        apiClient.post('/admin/templates', template),\r\n\r\n      update: (slug: string, template: Partial<{\r\n        name: string;\r\n        record_type: 'baptism' | 'marriage' | 'funeral' | 'custom';\r\n        description?: string;\r\n        fields: any[];\r\n        grid_type?: string;\r\n        theme?: string;\r\n        layout_type?: string;\r\n        language_support?: any;\r\n        is_editable?: boolean;\r\n        church_id?: number | null;\r\n        is_global?: boolean;\r\n      }>): Promise<{ success: boolean; message: string; template: any }> =>\r\n        apiClient.put(`/admin/templates/${slug}`, template),\r\n\r\n      delete: (slug: string): Promise<{ success: boolean; message: string }> =>\r\n        apiClient.delete(`/admin/templates/${slug}`),\r\n    };\r\n  }\r\n\r\n  // Create and export the Admin API instance\r\n  export const adminAPI = new AdminAPI();\r\n  \r\n  export default adminAPI; \r\n"],"names":["API_BASE_URL","API_CONFIG","API_TIMEOUT","ApiClient","__publicField","axios","config","_a","_b","accessToken","_c","url","fullUrl","shouldSkipChurchId","route","headerKeys","invalidValues","key","lowerKey","headerValue","valueStr","headerName","value","remainingChurchHeaders","k","churchHeaders","_d","error","response","enhancedError","_e","_f","__async","__spreadProps","__spreadValues","data","file","additionalData","onProgress","formData","progressEvent","progress","params","searchParams","queryString","apiClient","AdminAPI","filters","id","church","deleteDatabase","notes","reason","active","language","churchId","userId","action","churchDbId","table","enc","qs","candidates","lastErr","path","res","raw","columns","c","e","tablesRes","tables","withCols","t","cols","user","request","emailData","serviceName","lines","maxEntries","settings","componentId","permissions","menuId","imageId","directory","backupId","nfsServerIP","remotePath","component","sessionId","daysOld","message","slug","template","adminAPI"],"mappings":"gwBAUA,MAAMA,EAAeC,EAAW,SAC1BC,EAAcD,EAAW,QAE/B,MAAME,CAAU,CAGd,aAAc,CAFNC,EAAA,iBAGN,QAAQ,IAAI,6CAA6CJ,CAAY,GAAG,EACxE,QAAQ,IAAI,sCAA0E,EAEtF,KAAK,SAAWK,EAAM,OAAO,CAC3B,QAASL,EACT,QAASE,EACT,gBAAiB,GACjB,QAAS,CACP,eAAgB,kBAAA,CAClB,CACD,EAED,KAAK,kBAAA,CACP,CAEQ,mBAA0B,CAEhC,KAAK,SAAS,aAAa,QAAQ,IAChCI,GAAW,aASV,GAPIA,EAAO,KAAO,CAACA,EAAO,IAAI,WAAW,MAAM,GAAK,CAACA,EAAO,IAAI,WAAW,MAAM,IAC/EA,EAAO,IAAM,OAAOA,EAAO,GAAG,IAM5B,IADmBC,EAAAD,EAAO,MAAP,YAAAC,EAAY,SAAS,cAAaC,EAAAF,EAAO,MAAP,YAAAE,EAAY,SAAS,gBACvD,OAAO,QAAW,YAAa,CACpD,MAAMC,EAAc,aAAa,QAAQ,cAAc,GACpC,eAAe,QAAQ,cAAc,IACpC,aAAa,QAAQ,WAAW,GAAIC,EAAA,KAAK,MAAM,aAAa,QAAQ,WAAW,GAAK,IAAI,IAApD,YAAAA,EAAuD,aAAe,MAC1HD,GAAe,CAACH,EAAO,QAAQ,gBACjCA,EAAO,QAAQ,cAAmB,UAAUG,CAAW,GAE3D,CAOA,MAAME,EAAML,EAAO,KAAO,GACpBM,EAAUN,EAAO,QAAU,GAAGA,EAAO,OAAO,GAAGK,CAAG,GAAKA,EAYvDE,EAXwB,CAC5B,mBACA,gBACA,aACA,SACA,cACA,UAAA,EAK+C,KAAKC,GAChDA,IAAU,WAELH,IAAQ,iBAAmBA,IAAQ,aAAeC,EAAQ,SAAS,eAAe,GAAKA,EAAQ,SAAS,WAAW,EAErHD,EAAI,SAASG,CAAK,GAAKF,EAAQ,SAASE,CAAK,CACrD,EAID,GAAIR,EAAO,QAAS,CAClB,MAAMS,EAAa,OAAO,KAAKT,EAAO,OAAO,EACvCU,EAAgB,CAAC,GAAI,OAAQ,YAAa,OAAQ,KAAK,EAE7DD,EAAW,QAAQE,GAAO,CACxB,MAAMC,EAAWD,EAAI,YAAA,EACfE,EAAcb,EAAO,QAAQW,CAAG,EAChCG,EAAWD,GAAgB,KAAoC,OAAOA,CAAW,EAAE,cAAc,KAAA,EAAS,GAG5GD,EAAS,SAAS,QAAQ,IAAMA,EAAS,SAAS,IAAI,GAAKA,EAAS,SAAS,WAAW,KACtFL,GAAsBG,EAAc,SAASI,CAAQ,KACvD,OAAOd,EAAO,QAAQW,CAAG,EACzB,QAAQ,IAAI,gCAAgCA,CAAG,KAAKE,CAAW,UAAUR,CAAG,WAAWE,CAAkB,cAAcG,EAAc,SAASI,CAAQ,CAAC,GAAG,EAGhK,CAAC,EAG2B,CAC1B,cAAe,cAAe,cAC9B,YAAa,YAAa,YAC1B,WAAY,WAAY,WACxB,aAAc,YAAA,EAGI,QAAQC,GAAc,CACxC,MAAMC,EAAQhB,EAAO,QAAQe,CAAU,EACvC,GAA2BC,GAAU,KAAM,CACzC,MAAMF,EAAW,OAAOE,CAAK,EAAE,YAAA,EAAc,KAAA,GACzCT,GAAsBG,EAAc,SAASI,CAAQ,KACvD,OAAOd,EAAO,QAAQe,CAAU,EAChC,QAAQ,IAAI,2CAA2CA,CAAU,KAAKC,CAAK,UAAUX,CAAG,EAAE,EAE9F,MAAWE,GAAsBS,IAAU,MAEzC,OAAOhB,EAAO,QAAQe,CAAU,CAEpC,CAAC,CACH,CAEA,GAAIR,EAAoB,CAEtB,GAAIP,EAAO,QAAS,CAClB,MAAMiB,EAAyB,OAAO,KAAKjB,EAAO,OAAO,EAAE,OAAOkB,GAAK,CACrE,MAAMN,EAAWM,EAAE,YAAA,EACnB,OAAON,EAAS,SAAS,QAAQ,IAAMA,EAAS,SAAS,IAAI,GAAKA,EAAS,SAAS,WAAW,EACjG,CAAC,EAEGK,EAAuB,OAAS,GAClCA,EAAuB,QAAQN,GAAO,CACpC,OAAOX,EAAO,QAAQW,CAAG,EACzB,QAAQ,IAAI,gDAAgDA,CAAG,SAASN,CAAG,EAAE,CAC/E,CAAC,CAEL,CAaA,GAVKL,EAAe,eAClB,OAAO,KAAMA,EAAe,aAAa,EAAE,QAAQW,GAAO,CACxD,MAAMC,EAAWD,EAAI,YAAA,EACjBC,EAAS,SAAS,QAAQ,IAAMA,EAAS,SAAS,IAAI,GAAKA,EAAS,SAAS,WAAW,IAC1F,OAAQZ,EAAe,cAAcW,CAAG,CAE5C,CAAC,EAICX,EAAO,QAAS,CAClB,MAAMmB,EAAgB,OAAO,KAAKnB,EAAO,OAAO,EAAE,OAAOkB,GAAK,CAC5D,MAAMN,EAAWM,EAAE,YAAA,EACnB,OAAON,EAAS,SAAS,QAAQ,IAAMA,EAAS,SAAS,IAAI,GAAKA,EAAS,SAAS,WAAW,EACjG,CAAC,EACGO,EAAc,OAAS,EACzB,QAAQ,KAAK,gDAAgDd,CAAG,IAAKc,CAAa,EAElF,QAAQ,IAAI,uCAAuCd,CAAG,EAAE,CAE5D,CACF,CAGA,eAAQ,IAAI,oBAAmBe,EAAApB,EAAO,SAAP,YAAAoB,EAAe,aAAa,IAAId,CAAO,EAAE,EACxE,QAAQ,IAAI,gBAAgBN,EAAO,SAAW,MAAM,YAAYA,EAAO,GAAG,GAAG,EACtEA,CACT,EACCqB,IACC,QAAQ,MAAM,mBAAoBA,CAAK,EAChC,QAAQ,OAAOA,CAAK,EAC7B,EAIF,KAAK,SAAS,aAAa,SAAS,IACjCC,IACC,QAAQ,IAAI,mBAAmBA,EAAS,MAAM,IAAIA,EAAS,OAAO,GAAG,EAAE,EAChEA,GAERD,GAAU,iBACT,QAAQ,MAAM,qBAAqBpB,EAAAoB,EAAM,WAAN,YAAApB,EAAgB,QAAQC,EAAAmB,EAAM,WAAN,YAAAnB,EAAgB,IAAI,IAG3EE,EAAAiB,EAAM,WAAN,YAAAjB,EAAgB,UAAW,MAExB,OAAO,SAAS,SAAS,SAAS,0BAA0B,IAC/D,aAAa,WAAW,WAAW,EACnC,OAAO,SAAS,KAAO,6BAK3B,MAAMmB,EAAgB,IAAI,QAAMC,GAAAJ,EAAAC,EAAM,WAAN,YAAAD,EAAgB,OAAhB,YAAAI,EAAsB,UAAWH,EAAM,SAAW,gBAAgB,EACjG,MAAAE,EAAsB,QAASE,EAAAJ,EAAM,WAAN,YAAAI,EAAgB,OAC/CF,EAAsB,KAAOF,EAAM,KACnCE,EAAsB,eAAiB,CAACF,EAAM,SAC9CE,EAAsB,cAAgBF,EAEjCE,CACR,CAAA,CAEJ,CAGM,QAAWvB,EAAwC,QAAA0B,EAAA,sBACvD,GAAI,CAEF,OADiB,MAAM,KAAK,SAAS,QAAW1B,CAAM,GACtC,IAClB,OAASqB,EAAO,CACd,MAAMA,CACR,CACF,GAEM,IAAOhB,EAAaL,EAAyC,QAAA0B,EAAA,sBACjE,OAAO,KAAK,QAAWC,EAAAC,EAAA,GAAK5B,GAAL,CAAa,OAAQ,MAAO,IAAAK,GAAK,CAC1D,GAEM,KAAQA,EAAawB,EAAY7B,EAAyC,QAAA0B,EAAA,sBAC9E,OAAO,KAAK,QAAWC,EAAAC,EAAA,GAAK5B,GAAL,CAAa,OAAQ,OAAQ,IAAAK,EAAK,KAAAwB,GAAM,CACjE,GAEM,IAAOxB,EAAawB,EAAY7B,EAAyC,QAAA0B,EAAA,sBAC7E,OAAO,KAAK,QAAWC,EAAAC,EAAA,GAAK5B,GAAL,CAAa,OAAQ,MAAO,IAAAK,EAAK,KAAAwB,GAAM,CAChE,GAEM,MAASxB,EAAawB,EAAY7B,EAAyC,QAAA0B,EAAA,sBAC/E,OAAO,KAAK,QAAWC,EAAAC,EAAA,GAAK5B,GAAL,CAAa,OAAQ,QAAS,IAAAK,EAAK,KAAAwB,GAAM,CAClE,GAEM,OAAUxB,EAAaL,EAAyC,QAAA0B,EAAA,sBACpE,OAAO,KAAK,QAAWC,EAAAC,EAAA,GAAK5B,GAAL,CAAa,OAAQ,SAAU,IAAAK,GAAK,CAC7D,GAGM,WACJA,EACAyB,EACAC,EACAC,EACY,QAAAN,EAAA,sBACZ,MAAMO,EAAW,IAAI,SACrB,OAAAA,EAAS,OAAO,OAAQH,CAAI,EAExBC,GACF,OAAO,QAAQA,CAAc,EAAE,QAAQ,CAAC,CAACpB,EAAKK,CAAK,IAAM,CACvDiB,EAAS,OAAOtB,EAAKK,CAAK,CAC5B,CAAC,EAGI,KAAK,QAAW,CACrB,OAAQ,OACR,IAAAX,EACA,KAAM4B,EACN,QAAS,CACP,eAAgB,qBAAA,EAElB,iBAAmBC,GAAkB,CACnC,GAAIF,GAAcE,EAAc,MAAO,CACrC,MAAMC,EAAW,KAAK,MAAOD,EAAc,OAAS,IAAOA,EAAc,KAAK,EAC9EF,EAAWG,CAAQ,CACrB,CACF,CAAA,CACD,CACH,GAGA,iBAAiBC,EAAsC,CACrD,GAAI,CAACA,EAAQ,MAAO,GAEpB,MAAMC,EAAe,IAAI,gBACzB,OAAO,QAAQD,CAAM,EAAE,QAAQ,CAAC,CAACzB,EAAKK,CAAK,IAAM,CACpBA,GAAU,MACnCqB,EAAa,OAAO1B,EAAK,OAAOK,CAAK,CAAC,CAE1C,CAAC,EAED,MAAMsB,EAAcD,EAAa,SAAA,EACjC,OAAOC,EAAc,IAAIA,CAAW,GAAK,EAC3C,CACF,CAGO,MAAMC,EAAY,IAAI1C,ECvQ3B,MAAM2C,CAAS,CAAf,cAEE1C,EAAA,gBAAW,CACT,OAAS2C,GACPF,EAAU,IAAI,kBAAkBA,EAAU,iBAAiBE,CAAO,CAAC,EAAE,EAEvE,QAAUC,GACRH,EAAU,IAA0C,mBAAmBG,CAAE,EAAE,EACxE,KAAKpB,GAAYA,EAAS,MAAM,EAErC,OAASqB,GACPJ,EAAU,KAAK,kBAAmBI,CAAM,EAE1C,OAAQ,CAACD,EAAYC,IACnBJ,EAAU,IAAI,mBAAmBG,CAAE,GAAIC,CAAM,EAE/C,OAAQ,CAACD,EAAYE,IACnBL,EAAU,OAAO,mBAAmBG,CAAE,GAAI,CACxC,KAAM,CAAE,gBAAiBE,GAAkB,EAAA,CAAM,CAClD,EAEH,QAAS,CAACF,EAAYG,IACpBN,EAAU,KAAK,mBAAmBG,CAAE,WAAY,CAAE,MAAAG,CAAA,CAAO,EAE3D,QAAS,CAACH,EAAYI,IACpBP,EAAU,KAAK,mBAAmBG,CAAE,WAAY,CAAE,OAAAI,CAAA,CAAQ,EAE5D,SAAWJ,GACTH,EAAU,KAAK,mBAAmBG,CAAE,WAAW,EAEjD,aAAc,CAACA,EAAYK,IACzBR,EAAU,MAAM,mBAAmBG,CAAE,UAAW,CAAE,OAAAK,CAAA,CAAQ,EAE5D,eAAiBL,GACfH,EAAU,KAAK,mBAAmBG,CAAE,mBAAmB,EAGzD,kBAAmB,IACjBH,EAAU,IAAI,6BAA6B,EAE7C,sBAAwBS,GACtBT,EAAU,IAAI,sCAAsCS,CAAQ,EAAE,EAEhE,eAAiBC,GACfV,EAAU,IAAI,mBAAmBU,CAAQ,QAAQ,EAEnD,sBAAwBA,GACtBV,EAAU,IAAI,mBAAmBU,CAAQ,gBAAgB,EAE3D,sBAAwBA,GACtBV,EAAU,IAAI,mBAAmBU,CAAQ,gBAAgB,EAE3D,qBAAuBA,GACrBV,EAAU,KAAK,mBAAmBU,CAAQ,kBAAkB,EAE9D,iBAAkB,CAACA,EAAkBC,EAAgBC,IACnDZ,EAAU,KAAK,mBAAmBU,CAAQ,UAAUC,CAAM,IAAIC,CAAM,EAAE,EAExE,wBAAyB,CAACF,EAAkBC,IAC1CX,EAAU,KAAK,mBAAmBU,CAAQ,UAAUC,CAAM,iBAAiB,EAE7E,gBAAkBD,GAChBV,EAAU,IAAI,mBAAmBU,CAAQ,SAAS,EAEpD,mBAAqBpB,GACnBU,EAAU,KAAK,yBAA0BV,CAAI,EAE/C,kBAAoBoB,GAClBV,EAAU,IAAI,iBAAiBU,CAAQ,WAAW,EAEpD,8BAAgCG,GAC9Bb,EAAU,IAAI,0BAA0Ba,CAAU,gBAAgB,EAMpE,eAAgB,CAACH,EAAkBpB,IAOjCU,EAAU,KAAK,mBAAmBU,CAAQ,mBAAoBpB,CAAI,EAEpE,gBAAiB,CAAOoB,EAAkBI,IAAgE3B,EAAA,kCAC5G,MAAM4B,EAAM,mBACNC,EAAK,UAAUD,EAAID,CAAK,CAAC,GAEzBG,EAAa,CAEnB,uBAAuBP,CAAQ,WAAWK,EAAID,CAAK,CAAC,WACpD,uBAAuBJ,CAAQ,WAAWM,CAAE,GAC5C,uBAAuBN,CAAQ,WAAWK,EAAID,CAAK,CAAC,GACpD,uBAAuBJ,CAAQ,iBAAiBM,CAAE,GAClD,uBAAuBN,CAAQ,UAAUM,CAAE,GAC3C,qBAAqBN,CAAQ,WAAWK,EAAID,CAAK,CAAC,WAElD,mBAAmBJ,CAAQ,WAAWK,EAAID,CAAK,CAAC,WAChD,mBAAmBJ,CAAQ,WAAWM,CAAE,GACxC,mBAAmBN,CAAQ,WAAWK,EAAID,CAAK,CAAC,GAChD,mBAAmBJ,CAAQ,iBAAiBM,CAAE,GAC9C,mBAAmBN,CAAQ,UAAUM,CAAE,GACvC,iBAAiBN,CAAQ,WAAWK,EAAID,CAAK,CAAC,UAAA,EAG5C,IAAII,EAAe,KACvB,UAAWC,KAAQF,EACjB,GAAI,CACF,MAAMG,EAAM,MAAMpB,EAAU,IAAImB,CAAI,EAC9BE,GAAOxD,GAAAF,EAAAyD,GAAA,YAAAA,EAAa,UAAb,KAAAzD,GAAyBD,EAAA0D,GAAA,YAAAA,EAAa,OAAb,YAAA1D,EAAmB,UAA5C,KAAAG,EAAuDuD,EAGpE,IAAIE,EAAoB,CAAA,EAYxB,GAXI,MAAM,QAAQD,CAAG,EACnBC,EAAUD,EAAI,IAAKE,YACjB,cAAOA,GAAM,SAAWA,GACxB5D,GAAAD,EAAA6D,GAAA,YAAAA,EAAG,cAAH,KAAA7D,EAAkB6D,GAAA,YAAAA,EAAG,cAArB,KAAA5D,EAAoC,GAAA,EACpC,OAAO,OAAO,EACP,MAAM,QAAS0D,GAAA,YAAAA,EAAa,OAAO,IAC5CC,EAAWD,EAAY,QAAQ,IAAKE,YAClC,cAAOA,GAAM,SAAWA,GAAI5D,GAAAD,EAAA6D,GAAA,YAAAA,EAAG,cAAH,KAAA7D,EAAkB6D,GAAA,YAAAA,EAAG,cAArB,KAAA5D,EAAoC,GAAA,EAChE,OAAO,OAAO,GAGd2D,EAAQ,OAAQ,MAAO,CAAE,QAAAA,EAAS,IAAKH,CAAA,CAC7C,OAASK,EAAG,CACVN,EAAUM,CACZ,CAIF,GAAI,CAEF,MAAMC,EACJ,MAAMzB,EAAU,IAAI,uBAAuBU,CAAQ,SAAS,EACzD,MAAM,IAAMV,EAAU,IAAI,mBAAmBU,CAAQ,SAAS,CAAC,EAE9DgB,GAAU7C,EAAA4C,GAAA,YAAAA,EAAmB,SAAnB,KAAA5C,EAA6B4C,EAG7C,GAAI,MAAM,QAAQC,CAAM,EAAG,CAEzB,MAAMC,EAAWD,EAAO,KAAME,KAC3BA,GAAA,YAAAA,EAAG,QAASd,IAASc,GAAA,YAAAA,EAAG,cAAed,IACxC,MAAM,QAAQc,GAAA,YAAAA,EAAG,OAAO,CAAA,EAE1B,GAAID,EAAU,CACZ,MAAME,EAAOF,EAAS,QAAQ,IAAKJ,YACjC,cAAOA,GAAM,SAAWA,GAAI5D,GAAAD,EAAA6D,GAAA,YAAAA,EAAG,cAAH,KAAA7D,EAAkB6D,GAAA,YAAAA,EAAG,cAArB,KAAA5D,EAAoC,GAAA,EAChE,OAAO,OAAO,EAChB,GAAIkE,EAAK,OAAQ,MAAO,CAAE,QAASA,EAAM,IAAK,gBAAA,CAChD,CAGA,GAAIH,EAAO,SAASZ,CAAK,EACvB,MAAM,IAAI,MAAM,UAAUA,CAAK,2CAA2C,CAE9E,CACF,OAASU,EAAG,CACVN,EAAUM,CACZ,CAEA,MAAMN,GAAA,KAAAA,EAAW,IAAI,MAAM,wCAAwC,CACrE,EAAA,GAII3D,EAAA,aAAQ,CACN,OAAS2C,GACPF,EAAU,IAAI,eAAeA,EAAU,iBAAiBE,CAAO,CAAC,EAAE,EAEpE,QAAUC,GACRH,EAAU,IAAI,gBAAgBG,CAAE,EAAE,EAEpC,OAAS2B,GACP9B,EAAU,KAAK,eAAgB8B,CAAI,EAErC,OAAQ,CAAC3B,EAAY2B,IACnB9B,EAAU,IAAI,gBAAgBG,CAAE,GAAI2B,CAAI,EAE1C,OAAS3B,GACPH,EAAU,OAAO,gBAAgBG,CAAE,EAAE,EAEvC,aAAeA,GACbH,EAAU,IAAI,gBAAgBG,CAAE,gBAAgB,EAGlD,mBAAqBQ,GACnBX,EAAU,KAAK,6BAA8B,CAAE,OAAAW,EAAQ,CAAA,GAI3DpD,EAAA,oBAAe,CACb,OAAS2C,GACPF,EAAU,IAAI,uBAAuBA,EAAU,iBAAiBE,CAAO,CAAC,EAAE,EAE5E,QAAUC,GACRH,EAAU,IAAI,wBAAwBG,CAAE,EAAE,EAE5C,SAAU,IACRH,EAAU,IAAI,4BAA4B,CAAA,GAI9CzC,EAAA,oBAAe,CACb,OAAS2C,GACPF,EAAU,IAAI,gBAAgBA,EAAU,iBAAiBE,CAAO,CAAC,EAAE,EAErE,QAAUC,GACRH,EAAU,IAAI,iBAAiBG,CAAE,EAAE,EAErC,OAAS4B,GACP/B,EAAU,KAAK,gBAAiB+B,CAAO,EAEzC,OAAQ,CAAC5B,EAAY4B,IACnB/B,EAAU,IAAI,iBAAiBG,CAAE,GAAI4B,CAAO,EAE9C,OAAS5B,GACPH,EAAU,OAAO,iBAAiBG,CAAE,EAAE,EAExC,QAAS,CAACA,EAAYG,IACpBN,EAAU,KAAK,iBAAiBG,CAAE,WAAY,CAAE,MAAAG,CAAA,CAAO,EAEzD,OAAQ,CAACH,EAAYI,IACnBP,EAAU,KAAK,iBAAiBG,CAAE,UAAW,CAAE,OAAAI,CAAA,CAAQ,EAEzD,SAAU,IACRP,EAAU,IAAI,qBAAqB,CAAA,GAIvCzC,EAAA,aAAQ,CACN,cAAgByE,GACdhC,EAAU,KAAK,cAAegC,CAAS,EAEzC,cAAgBA,GACdhC,EAAU,KAAK,cAAegC,CAAS,EAEzC,eAAiBA,GACfhC,EAAU,KAAK,0BAA2BgC,CAAS,CAAA,GAIvDzE,EAAA,cAAS,CACP,eAAgB,IACdyC,EAAU,IAAI,4BAA4B,EAE5C,kBAAmB,IACjBA,EAAU,IAAI,+BAA+B,EAE/C,iBAAkB,IAChBA,EAAU,IAAI,8BAA8B,EAE9C,cAAe,IACbA,EAAU,IAAI,2BAA2B,EAE3C,WAAY,IACVA,EAAU,IAAI,uBAAuB,EAEvC,oBAAsBlC,GACpBkC,EAAU,KAAKlC,CAAG,CAAA,GAItBP,EAAA,gBAAW,CACT,UAAW,IACTyC,EAAU,IAAI,wBAAwB,EAExC,UAAW,IACTA,EAAU,IAAI,wBAAwB,EAExC,iBAAkB,IAChBA,EAAU,IAAI,gCAAgC,EAEhD,cAAe,CAACiC,EAAqBrB,IACnCZ,EAAU,KAAK,mBAAmBiC,CAAW,IAAIrB,CAAM,EAAE,EAE3D,eAAgB,CAACsB,EAAgB,KAC/BlC,EAAU,IAAI,sCAAsCkC,CAAK,EAAE,EAE7D,gBAAiB,IACflC,EAAU,KAAK,kCAAkC,EAEnD,eAAgB,CAACiC,EAAqBC,EAAgB,MACpDlC,EAAU,IAAI,mBAAmBiC,CAAW,eAAeC,CAAK,EAAE,EAGpE,cAAe,IACblC,EAAU,IAAI,kBAAkB,EAElC,cAAe,IACbA,EAAU,IAAI,kBAAkB,EAElC,YAAa,CAACmC,EAAqB,MACjCnC,EAAU,IAAI,sBAAsBmC,CAAU,EAAE,EAElD,gBAAiB,IACfnC,EAAU,IAAI,oBAAoB,EAEpC,mBAAqBoC,GACnBpC,EAAU,IAAI,qBAAsBoC,CAAQ,EAE9C,kBAAoBxB,GAClBZ,EAAU,KAAK,qBAAqBY,CAAM,EAAE,EAE9C,aAAc,IACZZ,EAAU,IAAI,iBAAiB,EAEjC,oBAAsBqC,GACpBrC,EAAU,IAAI,2BAA2BqC,CAAW,EAAE,EAExD,oBAAqB,IACnBrC,EAAU,IAAI,yBAAyB,CAAA,GAI3CzC,EAAA,eAAU,CACR,iBAAkB,IAChByC,EAAU,IAAI,iBAAiB,CAAA,GAInCzC,EAAA,YAAO,CACL,eAAgB,IACdyC,EAAU,IAAI,8BAA8B,EAE9C,kBAAoBsC,GAClBtC,EAAU,IAAI,+BAAgCsC,CAAW,CAAA,GAI7D/E,EAAA,uBAAkB,CAChB,OAAQ,IACNyC,EAAU,IAAI,mBAAmB,EAEnC,QAAUuC,GACRvC,EAAU,IAAI,qBAAqBuC,CAAM,EAAE,EAE7C,eAAiBjD,GACfU,EAAU,KAAK,8BAA+BV,CAAI,CAAA,GAItD/B,EAAA,oBAAe,CACb,OAAQ,IACNyC,EAAU,IAAI,sBAAsB,EAEtC,OAASN,GACPM,EAAU,WAAW,8BAA+BN,CAAe,EAErE,OAAQ,CAAC8C,EAAiB3C,IACxBG,EAAU,IAAI,wBAAwBwC,CAAO,GAAI3C,CAAM,EAEzD,cAAgBP,GACdU,EAAU,KAAK,sCAAuCV,CAAI,EAG5D,eAAgB,IACdU,EAAU,IAAI,kCAAkC,EAElD,aAAeyC,GACbzC,EAAU,KAAK,mCAAoCyC,CAAS,EAE9D,gBAAiB,CAACtB,EAAcsB,IAC9BzC,EAAU,IAAI,oCAAoC,mBAAmBmB,CAAI,CAAC,GAAIsB,CAAS,EAEzF,gBAAkBtB,GAChBnB,EAAU,OAAO,oCAAoC,mBAAmBmB,CAAI,CAAC,EAAE,EAEjF,cAAgBA,GACdnB,EAAU,KAAK,oCAAoC,mBAAmBmB,CAAI,CAAC,OAAO,CAAA,GAItF5D,EAAA,cAAS,CACP,YAAa,IACXyC,EAAU,IAAI,kBAAkB,EAElC,eAAiBoC,GACfpC,EAAU,IAAI,mBAAoBoC,CAAQ,EAE5C,SAAU,IACRpC,EAAU,IAAI,eAAe,EAE/B,WAAY,IACVA,EAAU,IAAI,iBAAiB,EAEjC,IAAK,IACHA,EAAU,KAAK,aAAa,EAE9B,SAAW0C,GACT1C,EAAU,IAAI,oBAAoB0C,CAAQ,EAAE,EAE9C,OAASA,GACP1C,EAAU,OAAO,kBAAkB0C,CAAQ,EAAE,CAAA,GAIjDnF,EAAA,iBAAY,CACV,UAAW,IACTyC,EAAU,IAAI,0BAA0B,EAE1C,aAAevC,GACbuC,EAAU,KAAK,2BAA4BvC,CAAM,EAEnD,eAAgB,CAACkF,EAAqBC,IACpC5C,EAAU,KAAK,yBAA0B,CAAE,YAAA2C,EAAa,WAAAC,EAAY,EAEtE,MAAO,IACL5C,EAAU,KAAK,yBAAyB,EAE1C,QAAS,IACPA,EAAU,KAAK,2BAA2B,EAE5C,UAAW,IACTA,EAAU,IAAI,0BAA0B,CAAA,GAI5CzC,EAAA,YAAO,CACL,cAAe,IACbyC,EAAU,IAAI,kBAAkB,EAElC,OAASH,GACPG,EAAU,IAAI,QAAQA,EAAU,iBAAiBH,CAAM,CAAC,EAAE,EAE5D,kBAAoBgD,GAClB7C,EAAU,IAAI,oBAAoB6C,CAAS,QAAQ,EAErD,gBAAkBA,GAChB7C,EAAU,KAAK,oBAAoB6C,CAAS,SAAS,EAEvD,KAAM,IACJ7C,EAAU,KAAK,YAAY,EAE7B,gBAAiB,IACfA,EAAU,KAAK,gBAAgB,CAAA,GAMnCzC,EAAA,gBAAW,CACT,OAAS2C,GACPF,EAAU,IAAI,kBAAkBA,EAAU,iBAAiBE,CAAO,CAAC,EAAE,EAEvE,SAAU,IACRF,EAAU,IAAI,uBAAuB,EAEvC,UAAY8C,GACV9C,EAAU,OAAO,mBAAmB8C,CAAS,EAAE,EAEjD,oBAAsBnC,GACpBX,EAAU,KAAK,wBAAwBW,CAAM,gBAAgB,EAE/D,aAAc,IACZX,EAAU,KAAK,+BAA+B,EAEhD,QAAS,CAAC+C,EAAkB,IAC1B/C,EAAU,KAAK,0BAA2B,CAAE,SAAU+C,CAAA,CAAS,CAAA,GAInExF,EAAA,gBAAW,CACT,KAAM,CAACoD,EAAgBqC,IACrBhD,EAAU,KAAK,uBAAwB,CAAE,QAASW,EAAQ,QAAAqC,EAAS,EAErE,cAAe,CAACF,EAAmBE,IACjChD,EAAU,KAAK,kCAAmC,CAAE,WAAY8C,EAAW,QAAAE,CAAA,CAAS,CAAA,GAIxFzF,EAAA,YAAO,CACL,gBAAiB,IACfyC,EAAU,KAAK,+BAA+B,CAAA,GAIlDzC,EAAA,iBAAY,CACV,OAAS2C,GACPF,EAAU,IAAI,mBAAmBA,EAAU,iBAAiBE,CAAO,CAAC,EAAE,EAExE,UAAY+C,GACVjD,EAAU,IAAI,oBAAoBiD,CAAI,EAAE,EAE1C,OAASC,GAcPlD,EAAU,KAAK,mBAAoBkD,CAAQ,EAE7C,OAAQ,CAACD,EAAcC,IAarBlD,EAAU,IAAI,oBAAoBiD,CAAI,GAAIC,CAAQ,EAEpD,OAASD,GACPjD,EAAU,OAAO,oBAAoBiD,CAAI,EAAE,CAAA,GAEjD,CAGO,MAAME,EAAW,IAAIlD"}