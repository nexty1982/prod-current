{"version":3,"file":"OMLoading-CoZ4HjgZ.js","sources":["../../src/components/common/OMLoading.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Box, Typography, Backdrop } from '@mui/material';\r\nimport { useTheme } from '@mui/material/styles';\r\nimport styles from './OMLoading.module.css';\r\n\r\nexport interface OMLoadingProps {\r\n  /** Label text to display (default: \"Loading\") */\r\n  label?: string;\r\n  /** Size variant: sm, md, lg (default: \"md\") */\r\n  size?: 'sm' | 'md' | 'lg';\r\n  /** Additional className */\r\n  className?: string;\r\n}\r\n\r\n/**\r\n * OMLoading - Inline loading component with animated priest image\r\n * \r\n * Usage:\r\n * <OMLoading label=\"Loading\" size=\"md\" />\r\n */\r\nexport const OMLoading: React.FC<OMLoadingProps> = ({\r\n  label = 'Loading',\r\n  size = 'md',\r\n  className = '',\r\n}) => {\r\n  const [dots, setDots] = useState('');\r\n  const theme = useTheme();\r\n  const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;\r\n\r\n  // Animate dots: \".\", \"..\", \"...\", \"\"\r\n  useEffect(() => {\r\n    if (prefersReducedMotion) {\r\n      setDots('...');\r\n      return;\r\n    }\r\n\r\n    const interval = setInterval(() => {\r\n      setDots((prev) => {\r\n        if (prev === '') return '.';\r\n        if (prev === '.') return '..';\r\n        if (prev === '..') return '...';\r\n        return '';\r\n      });\r\n    }, 500);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [prefersReducedMotion]);\r\n\r\n  const sizeClass = styles[`size${size.charAt(0).toUpperCase() + size.slice(1)}`];\r\n\r\n  return (\r\n    <Box\r\n      className={`${styles.container} ${sizeClass} ${className}`}\r\n      display=\"flex\"\r\n      flexDirection=\"column\"\r\n      alignItems=\"center\"\r\n      justifyContent=\"center\"\r\n      aria-live=\"polite\"\r\n      aria-label={`${label}${dots}`}\r\n    >\r\n      <Box className={styles.imageWrapper}>\r\n        <img\r\n          src=\"/images/ui/loading-priest.png\"\r\n          alt=\"Loading\"\r\n          className={`${styles.priestImage} ${prefersReducedMotion ? styles.noAnimation : ''}`}\r\n          loading=\"eager\"\r\n          onError={(e) => {\r\n            // Fallback if image doesn't exist yet\r\n            console.warn('OMLoading: Image not found at /images/ui/loading-priest.png');\r\n            (e.target as HTMLImageElement).style.display = 'none';\r\n          }}\r\n        />\r\n      </Box>\r\n      <Typography\r\n        variant=\"body1\"\r\n        className={styles.label}\r\n        sx={{\r\n          mt: 2,\r\n          color: theme.palette.text.secondary,\r\n          fontWeight: 500,\r\n        }}\r\n      >\r\n        {label}\r\n        <span className={styles.dots} aria-hidden=\"true\">\r\n          {dots}\r\n        </span>\r\n      </Typography>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport interface OMLoadingOverlayProps {\r\n  /** Whether the overlay is open */\r\n  open: boolean;\r\n  /** Label text to display (default: \"Loading\") */\r\n  label?: string;\r\n  /** Size variant: sm, md, lg (default: \"md\") */\r\n  size?: 'sm' | 'md' | 'lg';\r\n  /** Whether to show backdrop (default: true) */\r\n  backdrop?: boolean;\r\n}\r\n\r\n/**\r\n * OMLoadingOverlay - Fullscreen overlay loading component\r\n * \r\n * Usage:\r\n * <OMLoadingOverlay open={isLoading} label=\"Loading\" />\r\n */\r\nexport const OMLoadingOverlay: React.FC<OMLoadingOverlayProps> = ({\r\n  open,\r\n  label = 'Loading',\r\n  size = 'md',\r\n  backdrop = true,\r\n}) => {\r\n  if (!open) return null;\r\n\r\n  return (\r\n    <Backdrop\r\n      open={open}\r\n      sx={{\r\n        zIndex: (theme) => theme.zIndex.modal + 1,\r\n        backgroundColor: backdrop ? 'rgba(0, 0, 0, 0.5)' : 'transparent',\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        bottom: 0,\r\n      }}\r\n      onClick={(e) => {\r\n        // Prevent clicks from passing through\r\n        e.stopPropagation();\r\n      }}\r\n    >\r\n      <Box\r\n        sx={{\r\n          position: 'relative',\r\n          pointerEvents: 'none',\r\n        }}\r\n      >\r\n        <OMLoading label={label} size={size} />\r\n      </Box>\r\n    </Backdrop>\r\n  );\r\n};\r\n"],"names":["OMLoading","label","size","className","dots","setDots","useState","theme","useTheme","prefersReducedMotion","useEffect","interval","prev","sizeClass","styles","jsxs","Box","jsx","e","Typography","OMLoadingOverlay","open","backdrop","Backdrop"],"mappings":"+cAoBaA,EAAsC,CAAC,CAClD,MAAAC,EAAQ,UACR,KAAAC,EAAO,KACP,UAAAC,EAAY,EACd,IAAM,CACJ,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAS,EAAE,EAC7BC,EAAQC,EAAA,EACRC,EAAuB,OAAO,WAAW,kCAAkC,EAAE,QAGnFC,EAAAA,UAAU,IAAM,CACd,GAAID,EAAsB,CACxBJ,EAAQ,KAAK,EACb,MACF,CAEA,MAAMM,EAAW,YAAY,IAAM,CACjCN,EAASO,GACHA,IAAS,GAAW,IACpBA,IAAS,IAAY,KACrBA,IAAS,KAAa,MACnB,EACR,CACH,EAAG,GAAG,EAEN,MAAO,IAAM,cAAcD,CAAQ,CACrC,EAAG,CAACF,CAAoB,CAAC,EAEzB,MAAMI,EAAYC,EAAO,OAAOZ,EAAK,OAAO,CAAC,EAAE,YAAA,EAAgBA,EAAK,MAAM,CAAC,CAAC,EAAE,EAE9E,OACEa,EAAAA,KAACC,EAAA,CACC,UAAW,GAAGF,EAAO,SAAS,IAAID,CAAS,IAAIV,CAAS,GACxD,QAAQ,OACR,cAAc,SACd,WAAW,SACX,eAAe,SACf,YAAU,SACV,aAAY,GAAGF,CAAK,GAAGG,CAAI,GAE3B,SAAA,CAAAa,EAAAA,IAACD,EAAA,CAAI,UAAWF,EAAO,aACrB,SAAAG,EAAAA,IAAC,MAAA,CACC,IAAI,gCACJ,IAAI,UACJ,UAAW,GAAGH,EAAO,WAAW,IAAIL,EAAuBK,EAAO,YAAc,EAAE,GAClF,QAAQ,QACR,QAAUI,GAAM,CAEd,QAAQ,KAAK,6DAA6D,EACzEA,EAAE,OAA4B,MAAM,QAAU,MACjD,CAAA,CAAA,EAEJ,EACAH,EAAAA,KAACI,EAAA,CACC,QAAQ,QACR,UAAWL,EAAO,MAClB,GAAI,CACF,GAAI,EACJ,MAAOP,EAAM,QAAQ,KAAK,UAC1B,WAAY,GAAA,EAGb,SAAA,CAAAN,QACA,OAAA,CAAK,UAAWa,EAAO,KAAM,cAAY,OACvC,SAAAV,CAAA,CACH,CAAA,CAAA,CAAA,CACF,CAAA,CAAA,CAGN,EAmBagB,EAAoD,CAAC,CAChE,KAAAC,EACA,MAAApB,EAAQ,UACR,KAAAC,EAAO,KACP,SAAAoB,EAAW,EACb,IACOD,EAGHJ,EAAAA,IAACM,EAAA,CACC,KAAAF,EACA,GAAI,CACF,OAASd,GAAUA,EAAM,OAAO,MAAQ,EACxC,gBAAiBe,EAAW,qBAAuB,cACnD,SAAU,QACV,IAAK,EACL,KAAM,EACN,MAAO,EACP,OAAQ,CAAA,EAEV,QAAUJ,GAAM,CAEdA,EAAE,gBAAA,CACJ,EAEA,SAAAD,EAAAA,IAACD,EAAA,CACC,GAAI,CACF,SAAU,WACV,cAAe,MAAA,EAGjB,SAAAC,EAAAA,IAACjB,EAAA,CAAU,MAAAC,EAAc,KAAAC,CAAA,CAAY,CAAA,CAAA,CACvC,CAAA,EA1Bc"}