{"version":3,"file":"ActivityLogs-C80DW03l.js","sources":["../../src/features/admin/admin/ActivityLogs.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Card,\r\n  CardContent,\r\n  Typography,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Paper,\r\n  Button,\r\n  TextField,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  Chip,\r\n  IconButton,\r\n  Tooltip,\r\n  Alert,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Stack,\r\n  Pagination,\r\n  Snackbar,\r\n  Grid,\r\n  Accordion,\r\n  AccordionSummary,\r\n  AccordionDetails,\r\n} from '@mui/material';\r\nimport {\r\n  IconRefresh,\r\n  IconSearch,\r\n  IconTrash,\r\n  IconEye,\r\n  IconCalendar,\r\n  IconUser,\r\n  IconActivity,\r\n  IconChevronDown,\r\n  IconDownload,\r\n  IconFilter,\r\n  IconClock,\r\n  IconMapPin,\r\n  IconDevices,\r\n} from '@tabler/icons-react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { adminAPI } from '@/api/admin.api';\r\nimport { userAPI } from '@/api/user.api';\r\nimport { metricsAPI } from '@/api/metrics.api';\r\nimport PageContainer from '@/shared/ui/PageContainer';\r\nimport DashboardCard from '@/shared/ui/DashboardCard';\r\n\r\ninterface ActivityLogData {\r\n  id: number;\r\n  user_id: number;\r\n  action: string;\r\n  changes: any;\r\n  ip_address?: string;\r\n  user_agent?: string;\r\n  created_at: string;\r\n  user_email?: string;\r\n  first_name?: string;\r\n  last_name?: string;\r\n  user_role?: string;\r\n}\r\n\r\ninterface ActivityLogStats {\r\n  total_activities: number;\r\n  unique_users: number;\r\n  active_days: number;\r\n  unique_actions: number;\r\n}\r\n\r\nconst ActivityLogs: React.FC = () => {\r\n  const { hasRole } = useAuth();\r\n  const [activities, setActivities] = useState<ActivityLogData[]>([]);\r\n  const [stats, setStats] = useState<ActivityLogStats | null>(null);\r\n  const [topActions, setTopActions] = useState<Array<{ action: string; count: number }>>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [search, setSearch] = useState('');\r\n  const [actionFilter, setActionFilter] = useState('');\r\n  const [userFilter, setUserFilter] = useState('');\r\n  const [dateFrom, setDateFrom] = useState('');\r\n  const [dateTo, setDateTo] = useState('');\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [selectedActivity, setSelectedActivity] = useState<ActivityLogData | null>(null);\r\n  const [viewDialog, setViewDialog] = useState(false);\r\n  const [cleanupDialog, setCleanupDialog] = useState(false);\r\n  const [cleanupDays, setCleanupDays] = useState(90);\r\n  const [successMessage, setSuccessMessage] = useState('');\r\n  const [errorMessage, setErrorMessage] = useState('');\r\n\r\n  const ITEMS_PER_PAGE = 25;\r\n\r\n  // Show success message\r\n  const showSuccess = (message: string) => {\r\n    setSuccessMessage(message);\r\n    setTimeout(() => setSuccessMessage(''), 5000);\r\n  };\r\n\r\n  // Show error message\r\n  const showError = (message: string) => {\r\n    setErrorMessage(message);\r\n    setTimeout(() => setErrorMessage(''), 5000);\r\n  };\r\n\r\n  // Check permissions\r\n  if (!hasRole(['super_admin', 'admin'])) {\r\n    return (\r\n      <PageContainer title=\"Activity Logs\" description=\"View system activity logs\">\r\n        <Alert severity=\"error\" sx={{ mt: 2 }}>\r\n          <Typography variant=\"h6\">Access Denied</Typography>\r\n          <Typography>You don't have permission to view activity logs.</Typography>\r\n        </Alert>\r\n      </PageContainer>\r\n    );\r\n  }\r\n\r\n  // Fetch activity logs\r\n  const fetchActivities = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const filters = {\r\n        search: search || undefined,\r\n        action_filter: actionFilter || undefined,\r\n        user_filter: userFilter || undefined,\r\n        date_from: dateFrom || undefined,\r\n        date_to: dateTo || undefined,\r\n        limit: ITEMS_PER_PAGE,\r\n        offset: (page - 1) * ITEMS_PER_PAGE,\r\n      };\r\n\r\n      const response = await adminAPI.activityLogs.getAll(filters);\r\n      setActivities(response.activities || []);\r\n      setStats(response.stats);\r\n      setTopActions(response.topActions || []);\r\n      setTotalPages(response.pagination.pages);\r\n    } catch (error) {\r\n      console.error('Failed to fetch activity logs:', error);\r\n      showError('Failed to load activity logs');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Fetch data on component mount and when filters change\r\n  useEffect(() => {\r\n    fetchActivities();\r\n  }, [page, search, actionFilter, userFilter, dateFrom, dateTo]);\r\n\r\n  // Handle search\r\n  const handleSearch = () => {\r\n    setPage(1);\r\n    fetchActivities();\r\n  };\r\n\r\n  // Clear filters\r\n  const clearFilters = () => {\r\n    setSearch('');\r\n    setActionFilter('');\r\n    setUserFilter('');\r\n    setDateFrom('');\r\n    setDateTo('');\r\n    setPage(1);\r\n  };\r\n\r\n  // View activity details\r\n  const handleViewActivity = async (activity: ActivityLogData) => {\r\n    try {\r\n      const detailedActivity = await adminAPI.activityLogs.getById(activity.id);\r\n      setSelectedActivity(detailedActivity);\r\n      setViewDialog(true);\r\n    } catch (error) {\r\n      console.error('Failed to fetch activity details:', error);\r\n      showError('Failed to load activity details');\r\n    }\r\n  };\r\n\r\n  // Handle cleanup\r\n  const handleCleanup = async () => {\r\n    try {\r\n      const response = await adminAPI.activityLogs.cleanup(cleanupDays);\r\n      showSuccess(`Successfully cleaned up ${response.records_deleted} old activity log records`);\r\n      setCleanupDialog(false);\r\n      fetchActivities();\r\n    } catch (error) {\r\n      console.error('Failed to cleanup activity logs:', error);\r\n      showError('Failed to cleanup activity logs');\r\n    }\r\n  };\r\n\r\n  // Format action name for display\r\n  const formatAction = (action: string) => {\r\n    return action\r\n      .split('_')\r\n      .map(word => word.charAt(0).toUpperCase() + word.slice(1))\r\n      .join(' ');\r\n  };\r\n\r\n  // Get action color\r\n  const getActionColor = (action: string) => {\r\n    if (action.includes('login') || action.includes('authenticate')) return 'success';\r\n    if (action.includes('logout') || action.includes('terminate')) return 'warning';\r\n    if (action.includes('delete') || action.includes('remove')) return 'error';\r\n    if (action.includes('create') || action.includes('add')) return 'primary';\r\n    if (action.includes('update') || action.includes('modify')) return 'info';\r\n    return 'default';\r\n  };\r\n\r\n  // Format date for display\r\n  const formatDate = (dateString: string) => {\r\n    return new Date(dateString).toLocaleString();\r\n  };\r\n\r\n  // Get user display name\r\n  const getUserDisplay = (activity: ActivityLogData) => {\r\n    if (activity.first_name || activity.last_name) {\r\n      return `${activity.first_name || ''} ${activity.last_name || ''}`.trim();\r\n    }\r\n    return activity.user_email || `User ${activity.user_id}`;\r\n  };\r\n\r\n  return (\r\n    <PageContainer title=\"Activity Logs\" description=\"View and manage system activity logs\">\r\n      {/* Stats Cards */}\r\n      {stats && (\r\n        <Grid container spacing={3} sx={{ mb: 3 }}>\r\n          <Grid item xs={12} sm={6} md={3}>\r\n            <Card>\r\n              <CardContent>\r\n                <Box display=\"flex\" alignItems=\"center\" gap={2}>\r\n                  <IconActivity size={32} color=\"#1976d2\" />\r\n                  <Box>\r\n                    <Typography variant=\"h4\" fontWeight=\"bold\">\r\n                      {stats.total_activities.toLocaleString()}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      Total Activities (30 days)\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n          \r\n          <Grid item xs={12} sm={6} md={3}>\r\n            <Card>\r\n              <CardContent>\r\n                <Box display=\"flex\" alignItems=\"center\" gap={2}>\r\n                  <IconUser size={32} color=\"#388e3c\" />\r\n                  <Box>\r\n                    <Typography variant=\"h4\" fontWeight=\"bold\">\r\n                      {stats.unique_users}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      Active Users\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n          \r\n          <Grid item xs={12} sm={6} md={3}>\r\n            <Card>\r\n              <CardContent>\r\n                <Box display=\"flex\" alignItems=\"center\" gap={2}>\r\n                  <IconCalendar size={32} color=\"#f57c00\" />\r\n                  <Box>\r\n                    <Typography variant=\"h4\" fontWeight=\"bold\">\r\n                      {stats.active_days}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      Active Days\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n          \r\n          <Grid item xs={12} sm={6} md={3}>\r\n            <Card>\r\n              <CardContent>\r\n                <Box display=\"flex\" alignItems=\"center\" gap={2}>\r\n                  <IconFilter size={32} color=\"#7b1fa2\" />\r\n                  <Box>\r\n                    <Typography variant=\"h4\" fontWeight=\"bold\">\r\n                      {stats.unique_actions}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      Action Types\r\n                    </Typography>\r\n                  </Box>\r\n                </Box>\r\n              </CardContent>\r\n            </Card>\r\n          </Grid>\r\n        </Grid>\r\n      )}\r\n\r\n      {/* Top Actions */}\r\n      {topActions.length > 0 && (\r\n        <Card sx={{ mb: 3 }}>\r\n          <CardContent>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              Top Actions (Last 7 Days)\r\n            </Typography>\r\n            <Stack direction=\"row\" spacing={1} flexWrap=\"wrap\" gap={1}>\r\n              {topActions.slice(0, 10).map((action) => (\r\n                <Chip\r\n                  key={action.action}\r\n                  label={`${formatAction(action.action)} (${action.count})`}\r\n                  color={getActionColor(action.action) as any}\r\n                  variant=\"outlined\"\r\n                  size=\"small\"\r\n                />\r\n              ))}\r\n            </Stack>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      <DashboardCard title=\"Activity Logs & Audit Trail\">\r\n        {/* Filters */}\r\n        <Accordion sx={{ mb: 2 }}>\r\n          <AccordionSummary expandIcon={<IconChevronDown />}>\r\n            <Typography variant=\"h6\">\r\n              <IconFilter size={20} style={{ marginRight: 8 }} />\r\n              Filters & Search\r\n            </Typography>\r\n          </AccordionSummary>\r\n          <AccordionDetails>\r\n            <Grid container spacing={2} alignItems=\"center\">\r\n              <Grid item xs={12} md={4}>\r\n                <TextField\r\n                  fullWidth\r\n                  label=\"Search\"\r\n                  placeholder=\"Search in actions, users, or changes...\"\r\n                  value={search}\r\n                  onChange={(e) => setSearch(e.target.value)}\r\n                  InputProps={{\r\n                    startAdornment: <IconSearch size={20} style={{ marginRight: 8 }} />,\r\n                  }}\r\n                />\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} md={2}>\r\n                <FormControl fullWidth>\r\n                  <InputLabel>Action Filter</InputLabel>\r\n                  <Select\r\n                    value={actionFilter}\r\n                    label=\"Action Filter\"\r\n                    onChange={(e) => setActionFilter(e.target.value)}\r\n                  >\r\n                    <MenuItem value=\"\">All Actions</MenuItem>\r\n                    <MenuItem value=\"login\">Login</MenuItem>\r\n                    <MenuItem value=\"logout\">Logout</MenuItem>\r\n                    <MenuItem value=\"terminate_session\">Terminate Session</MenuItem>\r\n                    <MenuItem value=\"create_user\">Create User</MenuItem>\r\n                    <MenuItem value=\"update_user\">Update User</MenuItem>\r\n                    <MenuItem value=\"lockout_user\">Lockout User</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} md={2}>\r\n                <TextField\r\n                  fullWidth\r\n                  label=\"From Date\"\r\n                  type=\"date\"\r\n                  value={dateFrom}\r\n                  onChange={(e) => setDateFrom(e.target.value)}\r\n                  InputLabelProps={{ shrink: true }}\r\n                />\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} md={2}>\r\n                <TextField\r\n                  fullWidth\r\n                  label=\"To Date\"\r\n                  type=\"date\"\r\n                  value={dateTo}\r\n                  onChange={(e) => setDateTo(e.target.value)}\r\n                  InputLabelProps={{ shrink: true }}\r\n                />\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} md={2}>\r\n                <Stack direction=\"row\" spacing={1}>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    onClick={handleSearch}\r\n                    startIcon={<IconSearch />}\r\n                  >\r\n                    Search\r\n                  </Button>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    onClick={clearFilters}\r\n                  >\r\n                    Clear\r\n                  </Button>\r\n                </Stack>\r\n              </Grid>\r\n            </Grid>\r\n          </AccordionDetails>\r\n        </Accordion>\r\n\r\n        {/* Actions */}\r\n        <Box sx={{ mb: 2, display: 'flex', gap: 1, justifyContent: 'space-between', alignItems: 'center' }}>\r\n          <Typography variant=\"h6\">\r\n            Activity Log Entries ({activities.length} of {totalPages * ITEMS_PER_PAGE})\r\n          </Typography>\r\n          \r\n          <Stack direction=\"row\" spacing={1}>\r\n            <Button\r\n              variant=\"outlined\"\r\n              startIcon={<IconRefresh />}\r\n              onClick={fetchActivities}\r\n              disabled={loading}\r\n            >\r\n              Refresh\r\n            </Button>\r\n            \r\n            {hasRole(['super_admin']) && (\r\n              <Button\r\n                variant=\"outlined\"\r\n                color=\"warning\"\r\n                startIcon={<IconTrash />}\r\n                onClick={() => setCleanupDialog(true)}\r\n              >\r\n                Cleanup Old Logs\r\n              </Button>\r\n            )}\r\n          </Stack>\r\n        </Box>\r\n\r\n        {/* Main Activity Table */}\r\n        {loading ? (\r\n          <Box display=\"flex\" justifyContent=\"center\" p={4}>\r\n            <CircularProgress />\r\n          </Box>\r\n        ) : (\r\n          <>\r\n            {/* Activity Table */}\r\n            <TableContainer component={Paper}>\r\n              <Table>\r\n                <TableHead sx={{ backgroundColor: '#f5f5f5' }}>\r\n                  <TableRow>\r\n                    <TableCell><strong>Timestamp</strong></TableCell>\r\n                    <TableCell><strong>User</strong></TableCell>\r\n                    <TableCell><strong>Action</strong></TableCell>\r\n                    <TableCell><strong>Details</strong></TableCell>\r\n                    <TableCell><strong>IP Address</strong></TableCell>\r\n                    <TableCell><strong>Actions</strong></TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {activities.length === 0 ? (\r\n                    <TableRow>\r\n                      <TableCell colSpan={6} align=\"center\">\r\n                        <Typography variant=\"body1\" color=\"text.secondary\" py={4}>\r\n                          No activity logs found\r\n                        </Typography>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ) : (\r\n                    activities.map((activity) => (\r\n                      <TableRow key={activity.id} hover>\r\n                        <TableCell>\r\n                          <Box>\r\n                            <Typography variant=\"body2\">\r\n                              {formatDate(activity.created_at)}\r\n                            </Typography>\r\n                          </Box>\r\n                        </TableCell>\r\n                        \r\n                        <TableCell>\r\n                          <Box>\r\n                            <Typography variant=\"body2\" fontWeight=\"medium\">\r\n                              {getUserDisplay(activity)}\r\n                            </Typography>\r\n                            <Typography variant=\"caption\" color=\"text.secondary\">\r\n                              {activity.user_email}\r\n                            </Typography>\r\n                            {activity.user_role && (\r\n                              <Chip\r\n                                label={activity.user_role}\r\n                                size=\"small\"\r\n                                color={activity.user_role === 'super_admin' ? 'error' : 'primary'}\r\n                                variant=\"outlined\"\r\n                                sx={{ ml: 1 }}\r\n                              />\r\n                            )}\r\n                          </Box>\r\n                        </TableCell>\r\n                        \r\n                        <TableCell>\r\n                          <Chip\r\n                            label={formatAction(activity.action)}\r\n                            color={getActionColor(activity.action) as any}\r\n                            variant=\"outlined\"\r\n                            size=\"small\"\r\n                          />\r\n                        </TableCell>\r\n                        \r\n                        <TableCell>\r\n                          <Typography variant=\"body2\" sx={{ maxWidth: 200 }}>\r\n                            {activity.changes && typeof activity.changes === 'object' ? (\r\n                              Object.keys(activity.changes).length > 0 ? (\r\n                                `${Object.keys(activity.changes).length} changes`\r\n                              ) : (\r\n                                'No details'\r\n                              )\r\n                            ) : (\r\n                              'No details'\r\n                            )}\r\n                          </Typography>\r\n                        </TableCell>\r\n                        \r\n                        <TableCell>\r\n                          <Box display=\"flex\" alignItems=\"center\" gap={1}>\r\n                            <IconMapPin size={16} />\r\n                            <Typography variant=\"body2\">\r\n                              {activity.ip_address || 'Unknown'}\r\n                            </Typography>\r\n                          </Box>\r\n                        </TableCell>\r\n                        \r\n                        <TableCell>\r\n                          <Tooltip title=\"View Details\">\r\n                            <IconButton\r\n                              size=\"small\"\r\n                              onClick={() => handleViewActivity(activity)}\r\n                            >\r\n                              <IconEye />\r\n                            </IconButton>\r\n                          </Tooltip>\r\n                        </TableCell>\r\n                      </TableRow>\r\n                    ))\r\n                  )}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n\r\n            {/* Pagination */}\r\n            {totalPages > 1 && (\r\n              <Box display=\"flex\" justifyContent=\"center\" mt={3}>\r\n                <Pagination\r\n                  count={totalPages}\r\n                  page={page}\r\n                  onChange={(_, newPage) => setPage(newPage)}\r\n                  color=\"primary\"\r\n                />\r\n              </Box>\r\n            )}\r\n          </>\r\n        )}\r\n      </DashboardCard>\r\n\r\n      {/* View Activity Dialog */}\r\n      <Dialog \r\n        open={viewDialog} \r\n        onClose={() => setViewDialog(false)}\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>\r\n          Activity Log Details\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {selectedActivity && (\r\n            <Box>\r\n              <Grid container spacing={2}>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\" color=\"text.secondary\">Timestamp</Typography>\r\n                  <Typography variant=\"body1\">{formatDate(selectedActivity.created_at)}</Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\" color=\"text.secondary\">Action</Typography>\r\n                  <Chip\r\n                    label={formatAction(selectedActivity.action)}\r\n                    color={getActionColor(selectedActivity.action) as any}\r\n                    variant=\"outlined\"\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\" color=\"text.secondary\">User</Typography>\r\n                  <Typography variant=\"body1\">\r\n                    {getUserDisplay(selectedActivity)} ({selectedActivity.user_email})\r\n                  </Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\" color=\"text.secondary\">Role</Typography>\r\n                  <Typography variant=\"body1\">{selectedActivity.user_role || 'Unknown'}</Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\" color=\"text.secondary\">IP Address</Typography>\r\n                  <Typography variant=\"body1\">{selectedActivity.ip_address || 'Unknown'}</Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\" color=\"text.secondary\">User Agent</Typography>\r\n                  <Typography variant=\"body2\" sx={{ wordBreak: 'break-word' }}>\r\n                    {selectedActivity.user_agent || 'Unknown'}\r\n                  </Typography>\r\n                </Grid>\r\n              </Grid>\r\n              \r\n              {selectedActivity.changes && (\r\n                <Box mt={3}>\r\n                  <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\r\n                    Changes/Details\r\n                  </Typography>\r\n                  <Paper sx={{ p: 2, backgroundColor: '#f5f5f5' }}>\r\n                    <pre style={{ margin: 0, fontSize: '0.875rem', whiteSpace: 'pre-wrap' }}>\r\n                      {JSON.stringify(selectedActivity.changes, null, 2)}\r\n                    </pre>\r\n                  </Paper>\r\n                </Box>\r\n              )}\r\n            </Box>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setViewDialog(false)}>Close</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Cleanup Dialog */}\r\n      <Dialog open={cleanupDialog} onClose={() => setCleanupDialog(false)}>\r\n        <DialogTitle>Cleanup Old Activity Logs</DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"body1\" gutterBottom>\r\n            This will permanently delete activity log records older than the specified number of days.\r\n          </Typography>\r\n          <TextField\r\n            fullWidth\r\n            label=\"Days to keep\"\r\n            type=\"number\"\r\n            value={cleanupDays}\r\n            onChange={(e) => setCleanupDays(parseInt(e.target.value) || 90)}\r\n            helperText=\"Records older than this many days will be deleted\"\r\n            sx={{ mt: 2 }}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setCleanupDialog(false)}>Cancel</Button>\r\n          <Button\r\n            onClick={handleCleanup}\r\n            color=\"warning\"\r\n            variant=\"contained\"\r\n          >\r\n            Delete Old Logs\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Success/Error Messages */}\r\n      <Snackbar\r\n        open={!!successMessage}\r\n        autoHideDuration={5000}\r\n        onClose={() => setSuccessMessage('')}\r\n      >\r\n        <Alert severity=\"success\" onClose={() => setSuccessMessage('')}>\r\n          {successMessage}\r\n        </Alert>\r\n      </Snackbar>\r\n\r\n      <Snackbar\r\n        open={!!errorMessage}\r\n        autoHideDuration={5000}\r\n        onClose={() => setErrorMessage('')}\r\n      >\r\n        <Alert severity=\"error\" onClose={() => setErrorMessage('')}>\r\n          {errorMessage}\r\n        </Alert>\r\n      </Snackbar>\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default ActivityLogs;\r\n"],"names":["ActivityLogs","hasRole","useAuth","activities","setActivities","useState","stats","setStats","topActions","setTopActions","loading","setLoading","search","setSearch","actionFilter","setActionFilter","userFilter","setUserFilter","dateFrom","setDateFrom","dateTo","setDateTo","page","setPage","totalPages","setTotalPages","selectedActivity","setSelectedActivity","viewDialog","setViewDialog","cleanupDialog","setCleanupDialog","cleanupDays","setCleanupDays","successMessage","setSuccessMessage","errorMessage","setErrorMessage","ITEMS_PER_PAGE","showSuccess","message","showError","jsx","PageContainer","jsxs","Alert","Typography","fetchActivities","__async","filters","response","adminAPI","error","useEffect","handleSearch","clearFilters","handleViewActivity","activity","detailedActivity","handleCleanup","formatAction","action","word","getActionColor","formatDate","dateString","getUserDisplay","Grid","Card","CardContent","Box","IconActivity","IconUser","IconCalendar","IconFilter","Stack","Chip","DashboardCard","Accordion","AccordionSummary","IconChevronDown","AccordionDetails","TextField","e","IconSearch","FormControl","InputLabel","Select","MenuItem","Button","IconRefresh","IconTrash","CircularProgress","Fragment","TableContainer","Paper","Table","TableHead","TableRow","TableCell","TableBody","IconMapPin","Tooltip","IconButton","IconEye","Pagination","_","newPage","Dialog","DialogTitle","DialogContent","DialogActions","Snackbar"],"mappings":"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"}