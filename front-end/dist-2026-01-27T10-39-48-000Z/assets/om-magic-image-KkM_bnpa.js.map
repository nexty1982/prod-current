{"version":3,"file":"om-magic-image-KkM_bnpa.js","sources":["../../node_modules/@tabler/icons-react/dist/esm/icons/IconCloudUpload.mjs","../../src/features/devel-tools/om-magic-image/om-magic-image.tsx"],"sourcesContent":["/**\n * @license @tabler/icons-react v3.34.1 - MIT\n *\n * This source code is licensed under the MIT license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createReactComponent from '../createReactComponent.mjs';\n\nconst __iconNode = [[\"path\", { \"d\": \"M7 18a4.6 4.4 0 0 1 0 -9a5 4.5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1\", \"key\": \"svg-0\" }], [\"path\", { \"d\": \"M9 15l3 -3l3 3\", \"key\": \"svg-1\" }], [\"path\", { \"d\": \"M12 12l0 9\", \"key\": \"svg-2\" }]];\nconst IconCloudUpload = createReactComponent(\"outline\", \"cloud-upload\", \"CloudUpload\", __iconNode);\n\nexport { __iconNode, IconCloudUpload as default };\n//# sourceMappingURL=IconCloudUpload.mjs.map\n","import React, { useState, useRef, useCallback } from 'react';\r\nimport {\r\n  Box,\r\n  Paper,\r\n  Typography,\r\n  Button,\r\n  TextField,\r\n  Grid,\r\n  Card,\r\n  CardContent,\r\n  CardActions,\r\n  Alert,\r\n  CircularProgress,\r\n  Slider,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  Chip,\r\n  Stack,\r\n  Divider,\r\n  ListSubheader,\r\n} from '@mui/material';\r\nimport {\r\n  IconCloudUpload,\r\n  IconDownload,\r\n  IconPhoto,\r\n  IconSettings,\r\n  IconWand,\r\n} from '@tabler/icons-react';\r\nimport { styled } from '@mui/material/styles';\r\n\r\nconst VisuallyHiddenInput = styled('input')({\r\n  clip: 'rect(0 0 0 0)',\r\n  clipPath: 'inset(50%)',\r\n  height: 1,\r\n  overflow: 'hidden',\r\n  position: 'absolute',\r\n  bottom: 0,\r\n  left: 0,\r\n  whiteSpace: 'nowrap',\r\n  width: 1,\r\n});\r\n\r\ninterface ExtractedImage {\r\n  id: number;\r\n  blob: Blob;\r\n  url: string;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\ntype SplitMode = 'auto' | 'grid' | 'detect';\r\ntype AspectRatioMode = 'maintain' | 'stretch' | 'crop';\r\n\r\ninterface SizePreset {\r\n  label: string;\r\n  category: string;\r\n  width: number;\r\n  height: number;\r\n}\r\n\r\nconst SIZE_PRESETS: SizePreset[] = [\r\n  // Hero / Banner Images\r\n  { label: 'Hero - 1920 × 1080', category: 'Hero / Banner', width: 1920, height: 1080 },\r\n  { label: 'Hero - 1920 × 1200', category: 'Hero / Banner', width: 1920, height: 1200 },\r\n  { label: 'Hero - 1600 × 900', category: 'Hero / Banner', width: 1600, height: 900 },\r\n  // Section Images\r\n  { label: 'Section - 1200 × 800', category: 'Section Images', width: 1200, height: 800 },\r\n  { label: 'Section - 1000 × 600', category: 'Section Images', width: 1000, height: 600 },\r\n  // Thumbnails\r\n  { label: 'Thumbnail - 400 × 400', category: 'Thumbnails', width: 400, height: 400 },\r\n  { label: 'Thumbnail - 300 × 300', category: 'Thumbnails', width: 300, height: 300 },\r\n  // Icons\r\n  { label: 'Icon - 128 × 128', category: 'Icons', width: 128, height: 128 },\r\n  { label: 'Icon - 64 × 64', category: 'Icons', width: 64, height: 64 },\r\n  // Avatars\r\n  { label: 'Avatar - 512 × 512', category: 'Avatars', width: 512, height: 512 },\r\n  { label: 'Avatar - 256 × 256', category: 'Avatars', width: 256, height: 256 },\r\n  { label: 'Avatar - 200 × 200', category: 'Avatars', width: 200, height: 200 },\r\n  { label: 'Avatar - 180 × 180', category: 'Avatars', width: 180, height: 180 },\r\n  { label: 'Avatar - 120 × 120', category: 'Avatars', width: 120, height: 120 },\r\n  // Social Media - Facebook\r\n  { label: 'Facebook Profile - 170 × 170', category: 'Social Media', width: 170, height: 170 },\r\n  { label: 'Facebook Cover - 820 × 312', category: 'Social Media', width: 820, height: 312 },\r\n  // Social Media - Instagram\r\n  { label: 'Instagram Profile - 320 × 320', category: 'Social Media', width: 320, height: 320 },\r\n  { label: 'Instagram Post - 1080 × 1080', category: 'Social Media', width: 1080, height: 1080 },\r\n  // Social Media - Twitter/X\r\n  { label: 'Twitter Profile - 400 × 400', category: 'Social Media', width: 400, height: 400 },\r\n  { label: 'Twitter Header - 1500 × 500', category: 'Social Media', width: 1500, height: 500 },\r\n  // Social Media - YouTube\r\n  { label: 'YouTube Banner - 2560 × 1440', category: 'Social Media', width: 2560, height: 1440 },\r\n  { label: 'YouTube Thumbnail - 1280 × 720', category: 'Social Media', width: 1280, height: 720 },\r\n  // App / UI\r\n  { label: 'App Icon - 1024 × 1024', category: 'App / UI', width: 1024, height: 1024 },\r\n  { label: 'UI Element - 96 × 96', category: 'App / UI', width: 96, height: 96 },\r\n  { label: 'UI Element - 48 × 48', category: 'App / UI', width: 48, height: 48 },\r\n  // Print\r\n  { label: 'Print Letter - 2550 × 3300', category: 'Print', width: 2550, height: 3300 },\r\n  { label: 'Business Card - 1050 × 600', category: 'Print', width: 1050, height: 600 },\r\n];\r\n\r\nconst OMMagicImage: React.FC = () => {\r\n  const [sourceImage, setSourceImage] = useState<string | null>(null);\r\n  const [sourceFile, setSourceFile] = useState<File | null>(null);\r\n  const [extractedImages, setExtractedImages] = useState<ExtractedImage[]>([]);\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [splitMode, setSplitMode] = useState<SplitMode>('auto');\r\n  const [gridRows, setGridRows] = useState<number>(3);\r\n  const [gridCols, setGridCols] = useState<number>(3);\r\n  const [sensitivity, setSensitivity] = useState<number>(50);\r\n  const [sizePreset, setSizePreset] = useState<string>('original');\r\n  const [customWidth, setCustomWidth] = useState<number>(200);\r\n  const [customHeight, setCustomHeight] = useState<number>(200);\r\n  const [aspectRatioMode, setAspectRatioMode] = useState<AspectRatioMode>('maintain');\r\n  const canvasRef = useRef<HTMLCanvasElement>(null);\r\n  const sourceImageRef = useRef<HTMLImageElement>(null);\r\n\r\n  const handleImageUpload = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = event.target.files?.[0];\r\n    if (!file) return;\r\n\r\n    // Reset states\r\n    setExtractedImages([]);\r\n    setError(null);\r\n    setSourceFile(file);\r\n\r\n    // Create URL for the uploaded image\r\n    const imageUrl = URL.createObjectURL(file);\r\n    setSourceImage(imageUrl);\r\n  };\r\n\r\n  const detectImageRegions = useCallback((imageData: ImageData, width: number, height: number): Array<{x: number, y: number, w: number, h: number}> => {\r\n    const regions: Array<{x: number, y: number, w: number, h: number}> = [];\r\n    const data = imageData.data;\r\n    const threshold = (sensitivity / 100) * 255;\r\n    const visited = new Set<string>();\r\n\r\n    // Simple edge detection and region finding\r\n    // This is a basic implementation - can be enhanced with more sophisticated algorithms\r\n    const isEdge = (x: number, y: number): boolean => {\r\n      if (x === 0 || y === 0 || x === width - 1 || y === height - 1) return true;\r\n      \r\n      const idx = (y * width + x) * 4;\r\n      const r = data[idx];\r\n      const g = data[idx + 1];\r\n      const b = data[idx + 2];\r\n      const a = data[idx + 3];\r\n      \r\n      // Check if this pixel is significantly different from neighbors\r\n      const neighbors = [\r\n        {x: x - 1, y}, {x: x + 1, y}, {x, y: y - 1}, {x, y: y + 1}\r\n      ];\r\n      \r\n      for (const n of neighbors) {\r\n        if (n.x < 0 || n.x >= width || n.y < 0 || n.y >= height) continue;\r\n        const nIdx = (n.y * width + n.x) * 4;\r\n        const nr = data[nIdx];\r\n        const ng = data[nIdx + 1];\r\n        const nb = data[nIdx + 2];\r\n        \r\n        const diff = Math.abs(r - nr) + Math.abs(g - ng) + Math.abs(b - nb);\r\n        if (diff > threshold) return true;\r\n      }\r\n      \r\n      return false;\r\n    };\r\n\r\n    // Find regions by flood fill from non-edge areas\r\n    const floodFill = (startX: number, startY: number): {x: number, y: number, w: number, h: number} | null => {\r\n      const key = `${startX},${startY}`;\r\n      if (visited.has(key) || isEdge(startX, startY)) return null;\r\n      \r\n      const stack: Array<{x: number, y: number}> = [{x: startX, y: startY}];\r\n      const regionPixels: Array<{x: number, y: number}> = [];\r\n      let minX = startX, maxX = startX, minY = startY, maxY = startY;\r\n      \r\n      while (stack.length > 0) {\r\n        const {x, y} = stack.pop()!;\r\n        const key = `${x},${y}`;\r\n        \r\n        if (visited.has(key) || x < 0 || x >= width || y < 0 || y >= height) continue;\r\n        if (isEdge(x, y)) continue;\r\n        \r\n        visited.add(key);\r\n        regionPixels.push({x, y});\r\n        \r\n        minX = Math.min(minX, x);\r\n        maxX = Math.max(maxX, x);\r\n        minY = Math.min(minY, y);\r\n        maxY = Math.max(maxY, y);\r\n        \r\n        // Add neighbors\r\n        stack.push({x: x + 1, y}, {x: x - 1, y}, {x, y: y + 1}, {x, y: y - 1});\r\n      }\r\n      \r\n      // Only return region if it's large enough\r\n      if (regionPixels.length < 100) return null;\r\n      \r\n      return {\r\n        x: minX,\r\n        y: minY,\r\n        w: maxX - minX + 1,\r\n        h: maxY - minY + 1\r\n      };\r\n    };\r\n\r\n    // Scan for regions\r\n    for (let y = 10; y < height - 10; y += 20) {\r\n      for (let x = 10; x < width - 10; x += 20) {\r\n        const region = floodFill(x, y);\r\n        if (region) {\r\n          regions.push(region);\r\n        }\r\n      }\r\n    }\r\n\r\n    return regions.length > 0 ? regions : [{x: 0, y: 0, w: width, h: height}];\r\n  }, [sensitivity]);\r\n\r\n  const extractImages = useCallback(() => {\r\n    if (!sourceImage || !sourceFile) {\r\n      setError('Please upload an image first');\r\n      return;\r\n    }\r\n\r\n    setIsProcessing(true);\r\n    setError(null);\r\n\r\n    const img = new Image();\r\n    img.onload = () => {\r\n      try {\r\n        const canvas = canvasRef.current;\r\n        if (!canvas) throw new Error('Canvas not available');\r\n\r\n        const ctx = canvas.getContext('2d');\r\n        if (!ctx) throw new Error('Could not get canvas context');\r\n\r\n        canvas.width = img.width;\r\n        canvas.height = img.height;\r\n        ctx.drawImage(img, 0, 0);\r\n\r\n        const extracted: ExtractedImage[] = [];\r\n        let regions: Array<{x: number, y: number, w: number, h: number}> = [];\r\n\r\n        if (splitMode === 'grid') {\r\n          // Grid-based splitting\r\n          const cellWidth = img.width / gridCols;\r\n          const cellHeight = img.height / gridRows;\r\n          \r\n          let imageCount = 1;\r\n          for (let row = 0; row < gridRows; row++) {\r\n            for (let col = 0; col < gridCols; col++) {\r\n              const sx = col * cellWidth;\r\n              const sy = row * cellHeight;\r\n              \r\n              regions.push({\r\n                x: Math.floor(sx),\r\n                y: Math.floor(sy),\r\n                w: Math.floor(cellWidth),\r\n                h: Math.floor(cellHeight)\r\n              });\r\n            }\r\n          }\r\n        } else if (splitMode === 'detect') {\r\n          // Auto-detect regions\r\n          const imageData = ctx.getImageData(0, 0, img.width, img.height);\r\n          regions = detectImageRegions(imageData, img.width, img.height);\r\n        } else {\r\n          // Auto mode: try to detect, fallback to grid\r\n          const imageData = ctx.getImageData(0, 0, img.width, img.height);\r\n          const detected = detectImageRegions(imageData, img.width, img.height);\r\n          \r\n          if (detected.length > 1) {\r\n            regions = detected;\r\n          } else {\r\n            // Fallback to 3x3 grid\r\n            const cellWidth = img.width / 3;\r\n            const cellHeight = img.height / 3;\r\n            for (let row = 0; row < 3; row++) {\r\n              for (let col = 0; col < 3; col++) {\r\n                regions.push({\r\n                  x: Math.floor(col * cellWidth),\r\n                  y: Math.floor(row * cellHeight),\r\n                  w: Math.floor(cellWidth),\r\n                  h: Math.floor(cellHeight)\r\n                });\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n        // Determine target dimensions\r\n        let targetWidth: number;\r\n        let targetHeight: number;\r\n        \r\n        if (sizePreset === 'original') {\r\n          // Use original region size\r\n          targetWidth = 0;\r\n          targetHeight = 0;\r\n        } else if (sizePreset === 'custom') {\r\n          targetWidth = customWidth;\r\n          targetHeight = customHeight;\r\n        } else {\r\n          const preset = SIZE_PRESETS.find(p => p.label === sizePreset);\r\n          if (preset) {\r\n            targetWidth = preset.width;\r\n            targetHeight = preset.height;\r\n          } else {\r\n            targetWidth = 0;\r\n            targetHeight = 0;\r\n          }\r\n        }\r\n\r\n        // Extract each region\r\n        let processedCount = 0;\r\n        regions.forEach((region, index) => {\r\n          const extractCanvas = document.createElement('canvas');\r\n          let finalWidth: number;\r\n          let finalHeight: number;\r\n          let sourceX = 0;\r\n          let sourceY = 0;\r\n          let sourceW = region.w;\r\n          let sourceH = region.h;\r\n\r\n          if (targetWidth > 0 && targetHeight > 0) {\r\n            // Resize to target dimensions\r\n            if (aspectRatioMode === 'maintain') {\r\n              // Maintain aspect ratio, fit within target dimensions\r\n              const scale = Math.min(targetWidth / region.w, targetHeight / region.h);\r\n              finalWidth = Math.round(region.w * scale);\r\n              finalHeight = Math.round(region.h * scale);\r\n            } else if (aspectRatioMode === 'crop') {\r\n              // Crop to fill target dimensions\r\n              finalWidth = targetWidth;\r\n              finalHeight = targetHeight;\r\n              const scale = Math.max(targetWidth / region.w, targetHeight / region.h);\r\n              const scaledW = region.w * scale;\r\n              const scaledH = region.h * scale;\r\n              sourceX = (region.w - scaledW / scale) / 2;\r\n              sourceY = (region.h - scaledH / scale) / 2;\r\n              sourceW = scaledW / scale;\r\n              sourceH = scaledH / scale;\r\n            } else {\r\n              // Stretch to exact dimensions\r\n              finalWidth = targetWidth;\r\n              finalHeight = targetHeight;\r\n            }\r\n          } else {\r\n            // Use original dimensions\r\n            finalWidth = region.w;\r\n            finalHeight = region.h;\r\n          }\r\n\r\n          extractCanvas.width = finalWidth;\r\n          extractCanvas.height = finalHeight;\r\n          const extractCtx = extractCanvas.getContext('2d');\r\n          \r\n          if (!extractCtx) return;\r\n\r\n          // Apply smoothing for better quality when resizing\r\n          extractCtx.imageSmoothingEnabled = true;\r\n          extractCtx.imageSmoothingQuality = 'high';\r\n\r\n          if (aspectRatioMode === 'crop' && targetWidth > 0 && targetHeight > 0) {\r\n            // Draw cropped region\r\n            extractCtx.drawImage(\r\n              canvas,\r\n              region.x + sourceX, region.y + sourceY, sourceW, sourceH,\r\n              0, 0, finalWidth, finalHeight\r\n            );\r\n          } else {\r\n            // Draw and resize\r\n            extractCtx.drawImage(\r\n              canvas,\r\n              region.x, region.y, region.w, region.h,\r\n              0, 0, finalWidth, finalHeight\r\n            );\r\n          }\r\n\r\n          extractCanvas.toBlob((blob) => {\r\n            if (blob) {\r\n              const imageUrl = URL.createObjectURL(blob);\r\n              extracted.push({\r\n                id: index + 1,\r\n                blob,\r\n                url: imageUrl,\r\n                width: finalWidth,\r\n                height: finalHeight\r\n              });\r\n\r\n              processedCount++;\r\n              if (processedCount === regions.length) {\r\n                extracted.sort((a, b) => a.id - b.id);\r\n                setExtractedImages(extracted);\r\n                setIsProcessing(false);\r\n              }\r\n            } else {\r\n              processedCount++;\r\n              if (processedCount === regions.length) {\r\n                setIsProcessing(false);\r\n              }\r\n            }\r\n          }, 'image/jpeg', 0.95);\r\n        });\r\n\r\n        if (regions.length === 0) {\r\n          setError('No images detected. Try adjusting the sensitivity or using grid mode.');\r\n          setIsProcessing(false);\r\n        }\r\n      } catch (err) {\r\n        setError(err instanceof Error ? err.message : 'An unknown error occurred');\r\n        setIsProcessing(false);\r\n      }\r\n    };\r\n\r\n    img.onerror = () => {\r\n      setError('Failed to load the image');\r\n      setIsProcessing(false);\r\n    };\r\n\r\n    img.src = sourceImage;\r\n  }, [sourceImage, sourceFile, splitMode, gridRows, gridCols, detectImageRegions, sizePreset, customWidth, customHeight, aspectRatioMode]);\r\n\r\n  const downloadImage = (image: ExtractedImage) => {\r\n    const link = document.createElement('a');\r\n    link.href = image.url;\r\n    link.download = `image${image.id}.jpg`;\r\n    document.body.appendChild(link);\r\n    link.click();\r\n    document.body.removeChild(link);\r\n  };\r\n\r\n  const downloadAllImages = () => {\r\n    extractedImages.forEach((image, index) => {\r\n      setTimeout(() => {\r\n        downloadImage(image);\r\n      }, index * 100);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ p: 3, maxWidth: '1400px', margin: '0 auto' }}>\r\n      <Typography variant=\"h4\" gutterBottom sx={{ mb: 3, fontWeight: 600 }}>\r\n        OM Magic Image Splitter\r\n      </Typography>\r\n      <Typography variant=\"body1\" color=\"text.secondary\" sx={{ mb: 4 }}>\r\n        Upload an image file containing multiple images. The tool will automatically detect and split them into separate files.\r\n      </Typography>\r\n\r\n      <Paper elevation={2} sx={{ p: 3, mb: 3 }}>\r\n        <Stack spacing={3}>\r\n          <Box>\r\n            <Button\r\n              component=\"label\"\r\n              variant=\"contained\"\r\n              startIcon={<IconCloudUpload />}\r\n              disabled={isProcessing}\r\n              sx={{ mb: 2 }}\r\n            >\r\n              Upload Source Image\r\n              <VisuallyHiddenInput\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                onChange={handleImageUpload}\r\n              />\r\n            </Button>\r\n            {sourceFile && (\r\n              <Chip\r\n                label={sourceFile.name}\r\n                onDelete={() => {\r\n                  setSourceImage(null);\r\n                  setSourceFile(null);\r\n                  setExtractedImages([]);\r\n                }}\r\n                sx={{ ml: 2 }}\r\n              />\r\n            )}\r\n          </Box>\r\n\r\n          <Box>\r\n            <FormControl fullWidth sx={{ mb: 2 }}>\r\n              <InputLabel>Split Mode</InputLabel>\r\n              <Select\r\n                value={splitMode}\r\n                label=\"Split Mode\"\r\n                onChange={(e) => setSplitMode(e.target.value as SplitMode)}\r\n                disabled={isProcessing}\r\n              >\r\n                <MenuItem value=\"auto\">\r\n                  <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                    <IconWand size={18} />\r\n                    Auto (Detect or Grid)\r\n                  </Box>\r\n                </MenuItem>\r\n                <MenuItem value=\"detect\">Detect Regions</MenuItem>\r\n                <MenuItem value=\"grid\">Manual Grid</MenuItem>\r\n              </Select>\r\n            </FormControl>\r\n\r\n            {splitMode === 'grid' && (\r\n              <Grid container spacing={2} sx={{ mb: 2 }}>\r\n                <Grid item xs={6}>\r\n                  <TextField\r\n                    label=\"Rows\"\r\n                    type=\"number\"\r\n                    value={gridRows}\r\n                    onChange={(e) => setGridRows(parseInt(e.target.value) || 1)}\r\n                    inputProps={{ min: 1, max: 10 }}\r\n                    fullWidth\r\n                    disabled={isProcessing}\r\n                  />\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <TextField\r\n                    label=\"Columns\"\r\n                    type=\"number\"\r\n                    value={gridCols}\r\n                    onChange={(e) => setGridCols(parseInt(e.target.value) || 1)}\r\n                    inputProps={{ min: 1, max: 10 }}\r\n                    fullWidth\r\n                    disabled={isProcessing}\r\n                  />\r\n                </Grid>\r\n              </Grid>\r\n            )}\r\n\r\n            {splitMode === 'detect' && (\r\n              <Box sx={{ mb: 2 }}>\r\n                <Typography gutterBottom>Edge Detection Sensitivity</Typography>\r\n                <Slider\r\n                  value={sensitivity}\r\n                  onChange={(_, value) => setSensitivity(value as number)}\r\n                  min={10}\r\n                  max={90}\r\n                  step={5}\r\n                  marks\r\n                  disabled={isProcessing}\r\n                />\r\n              </Box>\r\n            )}\r\n\r\n            <Divider sx={{ my: 2 }} />\r\n\r\n            <Box>\r\n              <Typography variant=\"h6\" gutterBottom sx={{ mb: 2 }}>\r\n                Output Size\r\n              </Typography>\r\n              <FormControl fullWidth sx={{ mb: 2 }}>\r\n                <InputLabel>Size Preset</InputLabel>\r\n                <Select\r\n                  value={sizePreset}\r\n                  label=\"Size Preset\"\r\n                  onChange={(e) => setSizePreset(e.target.value)}\r\n                  disabled={isProcessing}\r\n                >\r\n                  <MenuItem value=\"original\">Original Size</MenuItem>\r\n                  <MenuItem value=\"custom\">Custom Size</MenuItem>\r\n                  {Object.entries(\r\n                    SIZE_PRESETS.reduce((acc, preset) => {\r\n                      if (!acc[preset.category]) {\r\n                        acc[preset.category] = [];\r\n                      }\r\n                      acc[preset.category].push(preset);\r\n                      return acc;\r\n                    }, {} as Record<string, SizePreset[]>)\r\n                  ).flatMap(([category, presets]) => [\r\n                    <ListSubheader key={`category-${category}`} sx={{ fontWeight: 'bold' }}>\r\n                      {category}\r\n                    </ListSubheader>,\r\n                    ...presets.map((preset) => (\r\n                      <MenuItem key={preset.label} value={preset.label} sx={{ pl: 3 }}>\r\n                        {preset.label}\r\n                      </MenuItem>\r\n                    ))\r\n                  ])}\r\n                </Select>\r\n              </FormControl>\r\n\r\n              {sizePreset === 'custom' && (\r\n                <Grid container spacing={2} sx={{ mb: 2 }}>\r\n                  <Grid item xs={6}>\r\n                    <TextField\r\n                      label=\"Width (px)\"\r\n                      type=\"number\"\r\n                      value={customWidth}\r\n                      onChange={(e) => setCustomWidth(parseInt(e.target.value) || 1)}\r\n                      inputProps={{ min: 1 }}\r\n                      fullWidth\r\n                      disabled={isProcessing}\r\n                    />\r\n                  </Grid>\r\n                  <Grid item xs={6}>\r\n                    <TextField\r\n                      label=\"Height (px)\"\r\n                      type=\"number\"\r\n                      value={customHeight}\r\n                      onChange={(e) => setCustomHeight(parseInt(e.target.value) || 1)}\r\n                      inputProps={{ min: 1 }}\r\n                      fullWidth\r\n                      disabled={isProcessing}\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n              )}\r\n\r\n              {sizePreset !== 'original' && (\r\n                <FormControl fullWidth sx={{ mb: 2 }}>\r\n                  <InputLabel>Aspect Ratio Mode</InputLabel>\r\n                  <Select\r\n                    value={aspectRatioMode}\r\n                    label=\"Aspect Ratio Mode\"\r\n                    onChange={(e) => setAspectRatioMode(e.target.value as AspectRatioMode)}\r\n                    disabled={isProcessing}\r\n                  >\r\n                    <MenuItem value=\"maintain\">Maintain Aspect Ratio (Fit)</MenuItem>\r\n                    <MenuItem value=\"stretch\">Stretch to Exact Size</MenuItem>\r\n                    <MenuItem value=\"crop\">Crop to Fill</MenuItem>\r\n                  </Select>\r\n                </FormControl>\r\n              )}\r\n            </Box>\r\n\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"primary\"\r\n              onClick={extractImages}\r\n              disabled={!sourceImage || isProcessing}\r\n              startIcon={isProcessing ? <CircularProgress size={20} /> : <IconPhoto />}\r\n              fullWidth\r\n              size=\"large\"\r\n            >\r\n              {isProcessing ? 'Processing...' : 'Extract Images'}\r\n            </Button>\r\n          </Box>\r\n        </Stack>\r\n      </Paper>\r\n\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 3 }} onClose={() => setError(null)}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      {sourceImage && (\r\n        <Paper elevation={2} sx={{ p: 3, mb: 3 }}>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            Source Image\r\n          </Typography>\r\n          <Box\r\n            sx={{\r\n              display: 'flex',\r\n              justifyContent: 'center',\r\n              alignItems: 'center',\r\n              maxHeight: '400px',\r\n              overflow: 'auto',\r\n              border: '1px solid',\r\n              borderColor: 'divider',\r\n              borderRadius: 1,\r\n              p: 2,\r\n            }}\r\n          >\r\n            <img\r\n              ref={sourceImageRef}\r\n              src={sourceImage}\r\n              alt=\"Source\"\r\n              style={{ maxWidth: '100%', maxHeight: '400px', objectFit: 'contain' }}\r\n            />\r\n          </Box>\r\n        </Paper>\r\n      )}\r\n\r\n      {extractedImages.length > 0 && (\r\n        <Paper elevation={2} sx={{ p: 3 }}>\r\n          <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\r\n            <Typography variant=\"h6\">\r\n              Extracted Images ({extractedImages.length})\r\n            </Typography>\r\n            <Button\r\n              variant=\"outlined\"\r\n              startIcon={<IconDownload />}\r\n              onClick={downloadAllImages}\r\n            >\r\n              Download All\r\n            </Button>\r\n          </Box>\r\n          <Grid container spacing={2}>\r\n            {extractedImages.map((image) => (\r\n              <Grid item xs={12} sm={6} md={4} lg={3} key={image.id}>\r\n                <Card>\r\n                  <Box\r\n                    sx={{\r\n                      display: 'flex',\r\n                      justifyContent: 'center',\r\n                      alignItems: 'center',\r\n                      height: 200,\r\n                      bgcolor: 'grey.100',\r\n                      overflow: 'hidden',\r\n                    }}\r\n                  >\r\n                    <img\r\n                      src={image.url}\r\n                      alt={`Image ${image.id}`}\r\n                      style={{\r\n                        maxWidth: '100%',\r\n                        maxHeight: '100%',\r\n                        objectFit: 'contain',\r\n                      }}\r\n                    />\r\n                  </Box>\r\n                  <CardContent>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      image{image.id}.jpg\r\n                    </Typography>\r\n                    <Typography variant=\"caption\" color=\"text.secondary\">\r\n                      {image.width} × {image.height}px\r\n                    </Typography>\r\n                  </CardContent>\r\n                  <CardActions>\r\n                    <Button\r\n                      size=\"small\"\r\n                      startIcon={<IconDownload />}\r\n                      onClick={() => downloadImage(image)}\r\n                      fullWidth\r\n                    >\r\n                      Download\r\n                    </Button>\r\n                  </CardActions>\r\n                </Card>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </Paper>\r\n      )}\r\n\r\n      {/* Hidden canvas for image processing */}\r\n      <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default OMMagicImage;\r\n\r\n"],"names":["__iconNode","IconCloudUpload","createReactComponent","VisuallyHiddenInput","styled","SIZE_PRESETS","OMMagicImage","sourceImage","setSourceImage","useState","sourceFile","setSourceFile","extractedImages","setExtractedImages","isProcessing","setIsProcessing","error","setError","splitMode","setSplitMode","gridRows","setGridRows","gridCols","setGridCols","sensitivity","setSensitivity","sizePreset","setSizePreset","customWidth","setCustomWidth","customHeight","setCustomHeight","aspectRatioMode","setAspectRatioMode","canvasRef","useRef","sourceImageRef","handleImageUpload","event","file","_a","imageUrl","detectImageRegions","useCallback","imageData","width","height","regions","data","threshold","visited","isEdge","x","y","idx","g","b","neighbors","n","nIdx","nr","ng","nb","floodFill","startX","startY","key","stack","regionPixels","minX","maxX","minY","maxY","region","extractImages","img","canvas","ctx","extracted","cellWidth","cellHeight","imageCount","row","col","sx","sy","detected","targetWidth","targetHeight","preset","p","processedCount","index","extractCanvas","finalWidth","finalHeight","sourceX","sourceY","sourceW","sourceH","scale","scaledW","scaledH","extractCtx","blob","a","err","downloadImage","image","link","downloadAllImages","jsxs","Box","jsx","Typography","Paper","Stack","Button","Chip","FormControl","InputLabel","Select","e","MenuItem","IconWand","Grid","TextField","Slider","_","value","Divider","acc","category","presets","ListSubheader","CircularProgress","IconPhoto","Alert","IconDownload","Card","CardContent","CardActions"],"mappings":"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","x_google_ignoreList":[0]}