{"version":3,"file":"OMBigBook-Bx_jo2l9.js","sources":["../../src/features/admin/admin/UploadedFileList.tsx","../../src/features/admin/admin/FileViewer.tsx","../../src/features/admin/admin/BigBookSettings.tsx","../../src/features/admin/admin/BigBookConsolePage.tsx","../../src/features/admin/admin/EncryptedStoragePanel.tsx","../../src/features/admin/admin/QuestionnairePreview.tsx","../../src/features/admin/admin/OMAIDiscoveryPanel.tsx","../../src/features/admin/admin/TSXComponentInstallWizard.tsx","../../src/features/admin/admin/BigBookCustomComponentViewer.tsx","../../src/features/admin/admin/MemoryManager.tsx","../../src/features/admin/admin/OMBigBook.tsx"],"sourcesContent":["import React from 'react';\r\nimport {\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  ListItemButton,\r\n  Chip,\r\n  Box,\r\n  Typography,\r\n  IconButton,\r\n  Tooltip,\r\n  Paper,\r\n  Divider,\r\n  Stack,\r\n  TextField,\r\n  InputAdornment\r\n} from '@mui/material';\r\nimport {\r\n  Search as SearchIcon,\r\n  PlayArrow as PlayIcon,\r\n  Delete as Trash2Icon,\r\n  Description as FileTextIcon,\r\n  Code as CodeIcon,\r\n  Storage as DatabaseIcon,\r\n  Article as ArticleIcon,\r\n  Javascript as JavaScriptIcon,\r\n  Code as ShellScriptIcon,\r\n  Code as PythonIcon,\r\n  Html as HtmlIcon,\r\n  Css as CssIcon,\r\n  DataObject as JsonIcon,\r\n  Code as XmlIcon,\r\n  Image as ImageIcon,\r\n  VideoFile as VideoIcon,\r\n  AudioFile as AudioIcon,\r\n  Archive as ArchiveIcon,\r\n  PictureAsPdf as PdfIcon,\r\n  TextSnippet as TextIcon,\r\n  FolderOpen as FolderOpenIcon,\r\n  Psychology as PsychologyIcon\r\n} from '@mui/icons-material';\r\n\r\ninterface FileUpload {\r\n  id: string;\r\n  name: string;\r\n  type: 'sql' | 'script' | 'markdown' | 'javascript' | 'shell' | 'python' | 'html' | 'css' | 'json' | 'xml' | 'text' | 'image' | 'video' | 'audio' | 'archive' | 'pdf' | 'other';\r\n  content: string;\r\n  size: number;\r\n  uploadedAt: Date;\r\n  status: 'pending' | 'uploaded' | 'error';\r\n  extension: string;\r\n  mimeType?: string;\r\n  isQuestionnaire?: boolean;\r\n  questionnaireMetadata?: {\r\n    id: string;\r\n    fileName: string;\r\n    title: string;\r\n    description: string;\r\n    ageGroup: string;\r\n    type: string;\r\n    version: string;\r\n    author: string;\r\n    estimatedDuration: number;\r\n    questions: any[];\r\n    metadata: any;\r\n  };\r\n}\r\n\r\ninterface UploadedFileListProps {\r\n  files: FileUpload[];\r\n  selectedFile: FileUpload | null;\r\n  onFileSelect: (file: FileUpload) => void;\r\n  onFileExecute: (file: FileUpload) => void;\r\n  onFileDelete: (fileId: string) => void;\r\n  onQuestionnairePreview?: (file: FileUpload) => void;\r\n  isExecuting: boolean;\r\n  settings?: {\r\n    showHiddenFiles?: boolean;\r\n    darkModeConsole?: boolean;\r\n  };\r\n}\r\n\r\nconst UploadedFileList: React.FC<UploadedFileListProps> = ({\r\n  files,\r\n  selectedFile,\r\n  onFileSelect,\r\n  onFileExecute,\r\n  onFileDelete,\r\n  onQuestionnairePreview,\r\n  isExecuting,\r\n  settings = {}\r\n}) => {\r\n  const [searchTerm, setSearchTerm] = React.useState('');\r\n\r\n  const getFileIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'markdown':\r\n      case 'text':\r\n        return <FileTextIcon />;\r\n      case 'javascript':\r\n        return <JavaScriptIcon />;\r\n      case 'sql':\r\n        return <DatabaseIcon />;\r\n      case 'shell':\r\n        return <ShellScriptIcon />;\r\n      case 'python':\r\n        return <PythonIcon />;\r\n      case 'html':\r\n        return <HtmlIcon />;\r\n      case 'css':\r\n        return <CssIcon />;\r\n      case 'json':\r\n        return <JsonIcon />;\r\n      case 'xml':\r\n        return <XmlIcon />;\r\n      case 'image':\r\n        return <ImageIcon />;\r\n      case 'video':\r\n        return <VideoIcon />;\r\n      case 'audio':\r\n        return <AudioIcon />;\r\n      case 'archive':\r\n        return <ArchiveIcon />;\r\n      case 'pdf':\r\n        return <PdfIcon />;\r\n      default:\r\n        return <CodeIcon />;\r\n    }\r\n  };\r\n\r\n  const getFileTypeChip = (type: string) => {\r\n    const colorMap: { [key: string]: 'default' | 'primary' | 'secondary' | 'error' | 'info' | 'success' | 'warning' } = {\r\n      'markdown': 'primary',\r\n      'javascript': 'secondary',\r\n      'sql': 'info',\r\n      'shell': 'warning',\r\n      'python': 'success',\r\n      'html': 'error',\r\n      'css': 'info',\r\n      'json': 'secondary',\r\n      'xml': 'warning',\r\n      'text': 'default',\r\n      'image': 'success',\r\n      'video': 'error',\r\n      'audio': 'info',\r\n      'archive': 'warning',\r\n      'pdf': 'error',\r\n      'other': 'default'\r\n    };\r\n\r\n    return (\r\n      <Chip\r\n        label={type.toUpperCase()}\r\n        size=\"small\"\r\n        color={colorMap[type] || 'default'}\r\n        variant=\"outlined\"\r\n      />\r\n    );\r\n  };\r\n\r\n  const filteredFiles = files.filter(file =>\r\n    file.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    file.type.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\r\n  };\r\n\r\n  const formatDate = (date: Date) => {\r\n    return new Intl.DateTimeFormat('en-US', {\r\n      month: 'short',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    }).format(date);\r\n  };\r\n\r\n  if (files.length === 0) {\r\n    return (\r\n      <Paper sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n        <Box sx={{ p: 2, borderBottom: 1, borderColor: 'divider' }}>\r\n          <Typography variant=\"h6\">Files</Typography>\r\n        </Box>\r\n        <Box sx={{ \r\n          flex: 1, \r\n          display: 'flex', \r\n          alignItems: 'center', \r\n          justifyContent: 'center',\r\n          p: 3\r\n        }}>\r\n          <Stack spacing={2} alignItems=\"center\">\r\n            <FolderOpenIcon sx={{ fontSize: 48, color: 'grey.400' }} />\r\n            <Typography variant=\"body1\" color=\"text.secondary\" textAlign=\"center\">\r\n              No files uploaded yet\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\">\r\n              Use the Import tab to upload files\r\n            </Typography>\r\n          </Stack>\r\n        </Box>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Paper sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n      <Box sx={{ p: 2, borderBottom: 1, borderColor: 'divider' }}>\r\n        <Stack spacing={2}>\r\n          <Typography variant=\"h6\">Files ({files.length})</Typography>\r\n          <TextField\r\n            size=\"small\"\r\n            placeholder=\"Search files...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            InputProps={{\r\n              startAdornment: (\r\n                <InputAdornment position=\"start\">\r\n                  <SearchIcon />\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n            fullWidth\r\n          />\r\n        </Stack>\r\n      </Box>\r\n      \r\n      <List sx={{ flex: 1, overflow: 'auto', p: 0 }}>\r\n        {filteredFiles.map((file, index) => (\r\n          <React.Fragment key={file.id}>\r\n            <ListItem disablePadding>\r\n              <ListItemButton\r\n                selected={selectedFile?.id === file.id}\r\n                onClick={() => onFileSelect(file)}\r\n                sx={{\r\n                  '&.Mui-selected': {\r\n                    backgroundColor: 'primary.light',\r\n                    '&:hover': {\r\n                      backgroundColor: 'primary.light',\r\n                    },\r\n                  },\r\n                }}\r\n              >\r\n                <ListItemIcon>\r\n                  {getFileIcon(file.type)}\r\n                </ListItemIcon>\r\n                <ListItemText\r\n                  primary={\r\n                    <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                      <Typography variant=\"body2\" noWrap sx={{ flex: 1 }}>\r\n                        {file.name}\r\n                      </Typography>\r\n                      {getFileTypeChip(file.type)}\r\n                    </Box>\r\n                  }\r\n                  secondary={\r\n                    <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        {formatFileSize(file.size)}\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        â€¢\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        {formatDate(file.uploadedAt)}\r\n                      </Typography>\r\n                    </Stack>\r\n                  }\r\n                />\r\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5 }}>\r\n                  {file.isQuestionnaire && onQuestionnairePreview && (\r\n                    <Tooltip title=\"Preview Questionnaire\">\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          onQuestionnairePreview(file);\r\n                        }}\r\n                        color=\"secondary\"\r\n                      >\r\n                        <PsychologyIcon fontSize=\"small\" />\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                  )}\r\n                  <Tooltip title=\"Execute\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        onFileExecute(file);\r\n                      }}\r\n                      disabled={isExecuting}\r\n                      color=\"primary\"\r\n                    >\r\n                      <PlayIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                  <Tooltip title=\"Delete\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      onClick={(e) => {\r\n                        e.stopPropagation();\r\n                        onFileDelete(file.id);\r\n                      }}\r\n                      color=\"error\"\r\n                    >\r\n                      <Trash2Icon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </Box>\r\n              </ListItemButton>\r\n            </ListItem>\r\n            {index < filteredFiles.length - 1 && <Divider />}\r\n          </React.Fragment>\r\n        ))}\r\n      </List>\r\n      \r\n      {filteredFiles.length === 0 && searchTerm && (\r\n        <Box sx={{ \r\n          flex: 1, \r\n          display: 'flex', \r\n          alignItems: 'center', \r\n          justifyContent: 'center',\r\n          p: 3\r\n        }}>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            No files match \"{searchTerm}\"\r\n          </Typography>\r\n        </Box>\r\n      )}\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default UploadedFileList; ","import React from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n  Chip,\r\n  Stack,\r\n  IconButton,\r\n  Tooltip,\r\n  Divider,\r\n  Alert\r\n} from '@mui/material';\r\nimport {\r\n  PlayArrow as PlayIcon,\r\n  ContentCopy as CopyIcon,\r\n  Download as DownloadIcon,\r\n  Visibility as ViewIcon,\r\n  Code as CodeIcon,\r\n  Description as FileTextIcon,\r\n  Storage as DatabaseIcon,\r\n  Article as ArticleIcon,\r\n  Javascript as JavaScriptIcon,\r\n  Code as ShellScriptIcon,\r\n  Code as PythonIcon,\r\n  Html as HtmlIcon,\r\n  Css as CssIcon,\r\n  DataObject as JsonIcon,\r\n  Code as XmlIcon,\r\n  Image as ImageIcon,\r\n  VideoFile as VideoIcon,\r\n  AudioFile as AudioIcon,\r\n  Archive as ArchiveIcon,\r\n  PictureAsPdf as PdfIcon,\r\n  TextSnippet as TextIcon,\r\n  FolderOpen as FolderOpenIcon\r\n} from '@mui/icons-material';\r\n\r\ninterface FileUpload {\r\n  id: string;\r\n  name: string;\r\n  type: 'sql' | 'script' | 'markdown' | 'javascript' | 'shell' | 'python' | 'html' | 'css' | 'json' | 'xml' | 'text' | 'image' | 'video' | 'audio' | 'archive' | 'pdf' | 'other';\r\n  content: string;\r\n  size: number;\r\n  uploadedAt: Date;\r\n  status: 'pending' | 'uploaded' | 'error';\r\n  extension: string;\r\n  mimeType?: string;\r\n}\r\n\r\ninterface FileViewerProps {\r\n  file: FileUpload | null;\r\n  onExecute: (file: FileUpload) => void;\r\n  isExecuting: boolean;\r\n  settings?: {\r\n    defaultPreviewMode?: 'auto' | 'raw' | 'markdown' | 'code';\r\n    autoExpandJson?: boolean;\r\n    enableSyntaxHighlighting?: boolean;\r\n    maxPreviewFileSize?: number;\r\n    lineWrapInPreview?: boolean;\r\n    darkModeConsole?: boolean;\r\n  };\r\n}\r\n\r\nconst FileViewer: React.FC<FileViewerProps> = ({\r\n  file,\r\n  onExecute,\r\n  isExecuting,\r\n  settings = {}\r\n}) => {\r\n  const getFileIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'markdown':\r\n      case 'text':\r\n        return <FileTextIcon />;\r\n      case 'javascript':\r\n        return <JavaScriptIcon />;\r\n      case 'sql':\r\n        return <DatabaseIcon />;\r\n      case 'shell':\r\n        return <ShellScriptIcon />;\r\n      case 'python':\r\n        return <PythonIcon />;\r\n      case 'html':\r\n        return <HtmlIcon />;\r\n      case 'css':\r\n        return <CssIcon />;\r\n      case 'json':\r\n        return <JsonIcon />;\r\n      case 'xml':\r\n        return <XmlIcon />;\r\n      case 'image':\r\n        return <ImageIcon />;\r\n      case 'video':\r\n        return <VideoIcon />;\r\n      case 'audio':\r\n        return <AudioIcon />;\r\n      case 'archive':\r\n        return <ArchiveIcon />;\r\n      case 'pdf':\r\n        return <PdfIcon />;\r\n      default:\r\n        return <CodeIcon />;\r\n    }\r\n  };\r\n\r\n  const getFileTypeChip = (type: string) => {\r\n    const colorMap: { [key: string]: 'default' | 'primary' | 'secondary' | 'error' | 'info' | 'success' | 'warning' } = {\r\n      'markdown': 'primary',\r\n      'javascript': 'secondary',\r\n      'sql': 'info',\r\n      'shell': 'warning',\r\n      'python': 'success',\r\n      'html': 'error',\r\n      'css': 'info',\r\n      'json': 'secondary',\r\n      'xml': 'warning',\r\n      'text': 'default',\r\n      'image': 'success',\r\n      'video': 'error',\r\n      'audio': 'info',\r\n      'archive': 'warning',\r\n      'pdf': 'error',\r\n      'other': 'default'\r\n    };\r\n\r\n    return (\r\n      <Chip\r\n        label={type.toUpperCase()}\r\n        size=\"small\"\r\n        color={colorMap[type] || 'default'}\r\n        variant=\"outlined\"\r\n      />\r\n    );\r\n  };\r\n\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];\r\n  };\r\n\r\n  const formatDate = (date: Date) => {\r\n    return new Intl.DateTimeFormat('en-US', {\r\n      year: 'numeric',\r\n      month: 'long',\r\n      day: 'numeric',\r\n      hour: '2-digit',\r\n      minute: '2-digit'\r\n    }).format(date);\r\n  };\r\n\r\n  const copyToClipboard = async () => {\r\n    if (file) {\r\n      try {\r\n        await navigator.clipboard.writeText(file.content);\r\n        // You could add a toast notification here\r\n      } catch (err) {\r\n        console.error('Failed to copy to clipboard:', err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const downloadFile = () => {\r\n    if (file) {\r\n      const blob = new Blob([file.content], { type: 'text/plain' });\r\n      const url = URL.createObjectURL(blob);\r\n      const a = document.createElement('a');\r\n      a.href = url;\r\n      a.download = file.name;\r\n      document.body.appendChild(a);\r\n      a.click();\r\n      document.body.removeChild(a);\r\n      URL.revokeObjectURL(url);\r\n    }\r\n  };\r\n\r\n  const renderMarkdown = (content: string) => {\r\n    // Simple markdown rendering - you could use react-markdown for better support\r\n    return (\r\n      <Box sx={{ \r\n        '& h1': { fontSize: '2rem', fontWeight: 'bold', mb: 2 },\r\n        '& h2': { fontSize: '1.5rem', fontWeight: 'bold', mb: 1.5 },\r\n        '& h3': { fontSize: '1.25rem', fontWeight: 'bold', mb: 1 },\r\n        '& p': { mb: 1 },\r\n        '& code': { \r\n          backgroundColor: 'grey.100', \r\n          padding: '2px 4px', \r\n          borderRadius: '4px',\r\n          fontFamily: 'monospace'\r\n        },\r\n        '& pre': { \r\n          backgroundColor: 'grey.100', \r\n          padding: 2, \r\n          borderRadius: '4px',\r\n          overflow: 'auto',\r\n          fontFamily: 'monospace'\r\n        },\r\n        '& ul, & ol': { pl: 2 },\r\n        '& li': { mb: 0.5 }\r\n      }}>\r\n        {content.split('\\n').map((line, index) => {\r\n          if (line.startsWith('# ')) {\r\n            return <Typography key={index} variant=\"h4\" component=\"h1\">{line.substring(2)}</Typography>;\r\n          } else if (line.startsWith('## ')) {\r\n            return <Typography key={index} variant=\"h5\" component=\"h2\">{line.substring(3)}</Typography>;\r\n          } else if (line.startsWith('### ')) {\r\n            return <Typography key={index} variant=\"h6\" component=\"h3\">{line.substring(4)}</Typography>;\r\n          } else if (line.startsWith('```')) {\r\n            return <Box key={index} component=\"pre\" sx={{ backgroundColor: 'grey.100', p: 2, borderRadius: 1 }}>{line.substring(3)}</Box>;\r\n          } else if (line.startsWith('- ')) {\r\n            return <Typography key={index} component=\"li\">â€¢ {line.substring(2)}</Typography>;\r\n          } else if (line.trim() === '') {\r\n            return <Box key={index} sx={{ height: 8 }} />;\r\n          } else {\r\n            return <Typography key={index} paragraph>{line}</Typography>;\r\n          }\r\n        })}\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  const renderJson = (content: string) => {\r\n    try {\r\n      const parsed = JSON.parse(content);\r\n      const formattedJson = settings.autoExpandJson \r\n        ? JSON.stringify(parsed, null, 2)\r\n        : JSON.stringify(parsed);\r\n      \r\n      return (\r\n        <Box component=\"pre\" sx={{ \r\n          backgroundColor: settings.darkModeConsole ? '#1e1e1e' : 'grey.50', \r\n          color: settings.darkModeConsole ? '#ffffff' : 'text.primary',\r\n          p: 2, \r\n          borderRadius: 1,\r\n          overflow: 'auto',\r\n          fontFamily: 'monospace',\r\n          fontSize: '0.875rem',\r\n          whiteSpace: settings.lineWrapInPreview ? 'pre-wrap' : 'pre'\r\n        }}>\r\n          {formattedJson}\r\n        </Box>\r\n      );\r\n    } catch (error) {\r\n      return (\r\n        <Alert severity=\"error\">\r\n          Invalid JSON format\r\n        </Alert>\r\n      );\r\n    }\r\n  };\r\n\r\n  const renderCode = (content: string, language: string) => {\r\n    const useDarkTheme = settings.darkModeConsole !== false;\r\n    const useSyntaxHighlighting = settings.enableSyntaxHighlighting !== false;\r\n    \r\n    return (\r\n      <Box component=\"pre\" sx={{ \r\n        backgroundColor: useDarkTheme ? '#1e1e1e' : '#f8f9fa', \r\n        color: useDarkTheme ? '#ffffff' : '#212529',\r\n        p: 2, \r\n        borderRadius: 1,\r\n        overflow: 'auto',\r\n        fontFamily: 'monospace',\r\n        fontSize: '0.875rem',\r\n        whiteSpace: settings.lineWrapInPreview ? 'pre-wrap' : 'pre',\r\n        border: useDarkTheme ? '1px solid #404040' : '1px solid #dee2e6',\r\n        '& .keyword': { color: useDarkTheme ? '#569cd6' : '#d73a49' },\r\n        '& .string': { color: useDarkTheme ? '#ce9178' : '#032f62' },\r\n        '& .comment': { color: useDarkTheme ? '#6a9955' : '#6a737d' },\r\n        '& .number': { color: useDarkTheme ? '#b5cea8' : '#005cc5' },\r\n        '& .function': { color: useDarkTheme ? '#dcdcaa' : '#6f42c1' },\r\n        '& .operator': { color: useDarkTheme ? '#d4d4d4' : '#d73a49' }\r\n      }}>\r\n        {useSyntaxHighlighting ? applyBasicSyntaxHighlighting(content, language) : content}\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  const applyBasicSyntaxHighlighting = (content: string, language: string) => {\r\n    if (!settings.enableSyntaxHighlighting) return content;\r\n    \r\n    // Basic syntax highlighting for common languages\r\n    let highlighted = content;\r\n    \r\n    // JavaScript/TypeScript highlighting\r\n    if (language === 'javascript' || language === 'typescript') {\r\n      highlighted = highlighted\r\n        .replace(/\\b(const|let|var|function|return|if|else|for|while|class|import|export|default|async|await)\\b/g, '<span class=\"keyword\">$1</span>')\r\n        .replace(/\\b(console|log|error|warn|info)\\b/g, '<span class=\"function\">$1</span>')\r\n        .replace(/\"([^\"]*)\"/g, '<span class=\"string\">\"$1\"</span>')\r\n        .replace(/'([^']*)'/g, '<span class=\"string\">\\'$1\\'</span>')\r\n        .replace(/\\/\\/.*$/gm, '<span class=\"comment\">$&</span>')\r\n        .replace(/\\/\\*[\\s\\S]*?\\*\\//g, '<span class=\"comment\">$&</span>')\r\n        .replace(/\\b(\\d+)\\b/g, '<span class=\"number\">$1</span>');\r\n    }\r\n    \r\n    // SQL highlighting\r\n    if (language === 'sql') {\r\n      highlighted = highlighted\r\n        .replace(/\\b(SELECT|FROM|WHERE|INSERT|UPDATE|DELETE|CREATE|DROP|TABLE|INDEX|PRIMARY|FOREIGN|KEY|JOIN|LEFT|RIGHT|INNER|OUTER|GROUP|BY|ORDER|HAVING|UNION|ALL|DISTINCT|COUNT|SUM|AVG|MAX|MIN)\\b/gi, '<span class=\"keyword\">$1</span>')\r\n        .replace(/\"([^\"]*)\"/g, '<span class=\"string\">\"$1\"</span>')\r\n        .replace(/'([^']*)'/g, '<span class=\"string\">\\'$1\\'</span>')\r\n        .replace(/--.*$/gm, '<span class=\"comment\">$&</span>')\r\n        .replace(/\\b(\\d+)\\b/g, '<span class=\"number\">$1</span>');\r\n    }\r\n    \r\n    // Python highlighting\r\n    if (language === 'python') {\r\n      highlighted = highlighted\r\n        .replace(/\\b(def|class|import|from|as|if|elif|else|for|while|try|except|finally|with|return|yield|True|False|None)\\b/g, '<span class=\"keyword\">$1</span>')\r\n        .replace(/\\b(print|len|range|str|int|float|list|dict|set)\\b/g, '<span class=\"function\">$1</span>')\r\n        .replace(/(\"\"\"[\\s\\S]*?\"\"\")/g, '<span class=\"comment\">$1</span>')\r\n        .replace(/('''[\\s\\S]*?''')/g, '<span class=\"comment\">$1</span>')\r\n        .replace(/#.*$/gm, '<span class=\"comment\">$&</span>')\r\n        .replace(/(\"([^\"]*)\")/g, '<span class=\"string\">$1</span>')\r\n        .replace(/('([^']*)')/g, '<span class=\"string\">$1</span>')\r\n        .replace(/\\b(\\d+)\\b/g, '<span class=\"number\">$1</span>');\r\n    }\r\n    \r\n    return highlighted;\r\n  };\r\n\r\n  const renderContent = () => {\r\n    if (!file) return null;\r\n\r\n    // Check file size limit\r\n    const fileSizeKB = file.size / 1024;\r\n    if (settings.maxPreviewFileSize && fileSizeKB > settings.maxPreviewFileSize) {\r\n      return (\r\n        <Alert severity=\"warning\">\r\n          <Typography variant=\"body2\">\r\n            File is too large to preview ({fileSizeKB.toFixed(1)} KB). \r\n            Maximum preview size is {settings.maxPreviewFileSize} KB.\r\n          </Typography>\r\n        </Alert>\r\n      );\r\n    }\r\n\r\n    // Determine preview mode\r\n    const previewMode = settings.defaultPreviewMode || 'auto';\r\n    let effectiveType = file.type;\r\n\r\n    if (previewMode === 'raw') {\r\n      effectiveType = 'text';\r\n    } else if (previewMode === 'markdown' && file.type === 'text') {\r\n      effectiveType = 'markdown';\r\n    } else if (previewMode === 'code' && ['text', 'markdown'].includes(file.type)) {\r\n      effectiveType = 'javascript'; // Default to JS for code mode\r\n    }\r\n\r\n    switch (effectiveType) {\r\n      case 'markdown':\r\n        return renderMarkdown(file.content);\r\n      case 'json':\r\n        return renderJson(file.content);\r\n      case 'javascript':\r\n      case 'typescript':\r\n        return renderCode(file.content, 'javascript');\r\n      case 'sql':\r\n        return renderCode(file.content, 'sql');\r\n      case 'shell':\r\n        return renderCode(file.content, 'bash');\r\n      case 'python':\r\n        return renderCode(file.content, 'python');\r\n      case 'html':\r\n        return renderCode(file.content, 'html');\r\n      case 'css':\r\n        return renderCode(file.content, 'css');\r\n      case 'xml':\r\n        return renderCode(file.content, 'xml');\r\n      case 'text':\r\n      default:\r\n        return (\r\n          <Box component=\"pre\" sx={{ \r\n            backgroundColor: settings.darkModeConsole ? '#1e1e1e' : 'grey.50', \r\n            color: settings.darkModeConsole ? '#ffffff' : 'text.primary',\r\n            p: 2, \r\n            borderRadius: 1,\r\n            overflow: 'auto',\r\n            fontFamily: 'monospace',\r\n            fontSize: '0.875rem',\r\n            whiteSpace: settings.lineWrapInPreview ? 'pre-wrap' : 'pre',\r\n            border: settings.darkModeConsole ? '1px solid #404040' : '1px solid #dee2e6'\r\n          }}>\r\n            {file.content}\r\n          </Box>\r\n        );\r\n    }\r\n  };\r\n\r\n  if (!file) {\r\n    return (\r\n      <Paper sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n        <Box sx={{ \r\n          flex: 1, \r\n          display: 'flex', \r\n          alignItems: 'center', \r\n          justifyContent: 'center',\r\n          p: 3\r\n        }}>\r\n          <Stack spacing={2} alignItems=\"center\">\r\n            <ViewIcon sx={{ fontSize: 48, color: 'grey.400' }} />\r\n            <Typography variant=\"h6\" color=\"text.secondary\" textAlign=\"center\">\r\n              No file selected\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\" textAlign=\"center\">\r\n              Select a file from the list to view its contents\r\n            </Typography>\r\n          </Stack>\r\n        </Box>\r\n      </Paper>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Paper sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n      {/* File Header */}\r\n      <Box sx={{ p: 2, borderBottom: 1, borderColor: 'divider' }}>\r\n        <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Stack direction=\"row\" spacing={2} alignItems=\"center\">\r\n            {getFileIcon(file.type)}\r\n            <Box>\r\n              <Typography variant=\"h6\" noWrap>\r\n                {file.name}\r\n              </Typography>\r\n              <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n                {getFileTypeChip(file.type)}\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  {formatFileSize(file.size)}\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  â€¢\r\n                </Typography>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  {formatDate(file.uploadedAt)}\r\n                </Typography>\r\n              </Stack>\r\n            </Box>\r\n          </Stack>\r\n          \r\n          <Stack direction=\"row\" spacing={1}>\r\n            <Tooltip title=\"Execute\">\r\n              <IconButton\r\n                onClick={() => onExecute(file)}\r\n                disabled={isExecuting}\r\n                color=\"primary\"\r\n                size=\"small\"\r\n              >\r\n                <PlayIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n            <Tooltip title=\"Copy to clipboard\">\r\n              <IconButton\r\n                onClick={copyToClipboard}\r\n                size=\"small\"\r\n              >\r\n                <CopyIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n            <Tooltip title=\"Download\">\r\n              <IconButton\r\n                onClick={downloadFile}\r\n                size=\"small\"\r\n              >\r\n                <DownloadIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </Stack>\r\n        </Stack>\r\n      </Box>\r\n\r\n      {/* File Content */}\r\n      <Box sx={{ flex: 1, overflow: 'auto', p: 2 }}>\r\n        {renderContent()}\r\n      </Box>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default FileViewer; ","import React, { useState } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n  Stack,\r\n  TextField,\r\n  FormControl,\r\n  FormLabel,\r\n  FormControlLabel,\r\n  Switch,\r\n  Select,\r\n  MenuItem,\r\n  InputLabel,\r\n  Divider,\r\n  Button,\r\n  Alert,\r\n  Chip,\r\n  Accordion,\r\n  AccordionSummary,\r\n  AccordionDetails,\r\n  Slider,\r\n  InputAdornment,\r\n  CircularProgress,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  LinearProgress,\r\n  Tooltip\r\n} from '@mui/material';\r\nimport {\r\n  Settings as SettingsIcon,\r\n  Visibility as ViewIcon,\r\n  PlayArrow as ExecuteIcon,\r\n  Palette as UIIcon,\r\n  Psychology as OMAIIcon,\r\n  ExpandMore as ExpandMoreIcon,\r\n  Save as SaveIcon,\r\n  Refresh as ResetIcon,\r\n  FolderOpen as FileProcessingIcon,\r\n  Security as SecurityIcon,\r\n  CloudQueue as StorageIcon,\r\n  PlayCircleFilled as ProcessIcon,\r\n  CheckCircle as TestIcon\r\n} from '@mui/icons-material';\r\n\r\nexport interface BigBookConsoleSettings {\r\n  // File Viewer Settings\r\n  defaultPreviewMode: 'auto' | 'raw' | 'markdown' | 'code';\r\n  autoExpandJson: boolean;\r\n  enableSyntaxHighlighting: boolean;\r\n  maxPreviewFileSize: number; // in KB\r\n  \r\n  // Execution Settings\r\n  defaultScriptEngine: 'node' | 'python' | 'sh' | 'sql';\r\n  executionTimeout: number; // in seconds\r\n  dryRunMode: boolean;\r\n  autoSaveConsoleOutput: boolean;\r\n  \r\n  // UI Behavior\r\n  darkModeConsole: boolean;\r\n  lineWrapInPreview: boolean;\r\n  showHiddenFiles: boolean;\r\n  autoScrollConsole: boolean;\r\n  \r\n  // OMAI Integration\r\n  forwardToOMAIMemory: boolean;\r\n  tagForAgentReflection: boolean;\r\n  enableOMAIRecommendations: boolean;\r\n  \r\n  // File Processing Settings\r\n  useSecureStorage: boolean;\r\n  retryOnMountFailure: boolean;\r\n  autoProcessOnUpload: boolean;\r\n}\r\n\r\ninterface ProcessingResult {\r\n  success: boolean;\r\n  processedFiles: any[];\r\n  failedFiles: any[];\r\n  secureStorage: {\r\n    mounted: boolean;\r\n    mountPath: string;\r\n    retryCount: number;\r\n  };\r\n  summary: {\r\n    totalFiles: number;\r\n    processedCount: number;\r\n    failedCount: number;\r\n    startTime: string;\r\n    endTime?: string;\r\n    durationMs?: number;\r\n  };\r\n}\r\n\r\ninterface BigBookSettingsProps {\r\n  settings: BigBookConsoleSettings;\r\n  onSettingsChange: (settings: BigBookConsoleSettings) => void;\r\n  onSave: () => void;\r\n  onReset: () => void;\r\n}\r\n\r\nconst defaultSettings: BigBookConsoleSettings = {\r\n  // File Viewer Settings\r\n  defaultPreviewMode: 'auto',\r\n  autoExpandJson: true,\r\n  enableSyntaxHighlighting: true,\r\n  maxPreviewFileSize: 1024, // 1MB\r\n  \r\n  // Execution Settings\r\n  defaultScriptEngine: 'node',\r\n  executionTimeout: 30,\r\n  dryRunMode: false,\r\n  autoSaveConsoleOutput: true,\r\n  \r\n  // UI Behavior\r\n  darkModeConsole: true,\r\n  lineWrapInPreview: false,\r\n  showHiddenFiles: false,\r\n  autoScrollConsole: true,\r\n  \r\n  // OMAI Integration\r\n  forwardToOMAIMemory: true,\r\n  tagForAgentReflection: false,\r\n  enableOMAIRecommendations: true,\r\n  \r\n  // File Processing Settings\r\n  useSecureStorage: true,\r\n  retryOnMountFailure: true,\r\n  autoProcessOnUpload: false,\r\n};\r\n\r\nconst BigBookSettings: React.FC<BigBookSettingsProps> = ({\r\n  settings,\r\n  onSettingsChange,\r\n  onSave,\r\n  onReset\r\n}) => {\r\n  const [hasChanges, setHasChanges] = useState(false);\r\n  \r\n  // File Processing State\r\n  const [isProcessing, setIsProcessing] = useState(false);\r\n  const [isTesting, setIsTesting] = useState(false);\r\n  const [processingResult, setProcessingResult] = useState<ProcessingResult | null>(null);\r\n  const [mountTestResult, setMountTestResult] = useState<any>(null);\r\n  const [processingProgress, setProcessingProgress] = useState(0);\r\n\r\n  const handleSettingChange = (key: keyof BigBookConsoleSettings, value: any) => {\r\n    const newSettings = { ...settings, [key]: value };\r\n    onSettingsChange(newSettings);\r\n    setHasChanges(true);\r\n  };\r\n\r\n  const handleSave = () => {\r\n    onSave();\r\n    setHasChanges(false);\r\n  };\r\n\r\n  const handleReset = () => {\r\n    onReset();\r\n    setHasChanges(false);\r\n  };\r\n\r\n  // File Processing Handlers\r\n  const handleProcessAllFiles = async () => {\r\n    setIsProcessing(true);\r\n    setProcessingProgress(0);\r\n    setProcessingResult(null);\r\n\r\n    try {\r\n      const response = await fetch('/api/bigbook/process-all', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        credentials: 'include',\r\n        body: JSON.stringify({\r\n          useSecureStorage: settings.useSecureStorage,\r\n          retryOnFailure: settings.retryOnMountFailure,\r\n        }),\r\n      });\r\n\r\n      const result = await response.json();\r\n      setProcessingResult(result);\r\n      setProcessingProgress(100);\r\n\r\n    } catch (error) {\r\n      console.error('File processing error:', error);\r\n      setProcessingResult({\r\n        success: false,\r\n        processedFiles: [],\r\n        failedFiles: [],\r\n        secureStorage: { mounted: false, mountPath: '', retryCount: 0 },\r\n        summary: { totalFiles: 0, processedCount: 0, failedCount: 0, startTime: new Date().toISOString() },\r\n      });\r\n    } finally {\r\n      setIsProcessing(false);\r\n    }\r\n  };\r\n\r\n  const handleTestSecureMount = async () => {\r\n    setIsTesting(true);\r\n    setMountTestResult(null);\r\n\r\n    try {\r\n      const response = await fetch('/api/bigbook/test-secure-mount', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        credentials: 'include',\r\n      });\r\n\r\n      const result = await response.json();\r\n      setMountTestResult(result.testResult);\r\n\r\n    } catch (error) {\r\n      console.error('Mount test error:', error);\r\n      setMountTestResult({\r\n        mountPath: '/mnt/bigbook_secure',\r\n        accessible: false,\r\n        writable: false,\r\n        error: error.message,\r\n        testTime: new Date().toISOString(),\r\n      });\r\n    } finally {\r\n      setIsTesting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ p: 3, maxWidth: 800, mx: 'auto' }}>\r\n      <Stack spacing={3}>\r\n        {/* Header */}\r\n        <Box>\r\n          <Typography variant=\"h4\" component=\"h1\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n            <SettingsIcon />\r\n            Big Book Console Settings\r\n          </Typography>\r\n          <Typography variant=\"body1\" color=\"text.secondary\">\r\n            Configure file viewer, execution, UI behavior, and OMAI integration preferences\r\n          </Typography>\r\n        </Box>\r\n\r\n        {hasChanges && (\r\n          <Alert severity=\"info\" action={\r\n            <Stack direction=\"row\" spacing={1}>\r\n              <Button size=\"small\" onClick={handleReset}>Reset</Button>\r\n              <Button size=\"small\" variant=\"contained\" onClick={handleSave}>Save Changes</Button>\r\n            </Stack>\r\n          }>\r\n            You have unsaved changes. Save them to apply the new settings.\r\n          </Alert>\r\n        )}\r\n\r\n        {/* File Viewer Settings */}\r\n        <Accordion defaultExpanded>\r\n          <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n              <ViewIcon />\r\n              <Typography variant=\"h6\">File Viewer Settings</Typography>\r\n            </Stack>\r\n          </AccordionSummary>\r\n          <AccordionDetails>\r\n            <Stack spacing={3}>\r\n              <FormControl fullWidth>\r\n                <InputLabel>Default Preview Mode</InputLabel>\r\n                <Select\r\n                  value={settings.defaultPreviewMode}\r\n                  onChange={(e) => handleSettingChange('defaultPreviewMode', e.target.value)}\r\n                  label=\"Default Preview Mode\"\r\n                >\r\n                  <MenuItem value=\"auto\">Auto (Detect from file type)</MenuItem>\r\n                  <MenuItem value=\"raw\">Raw Text</MenuItem>\r\n                  <MenuItem value=\"markdown\">Markdown</MenuItem>\r\n                  <MenuItem value=\"code\">Code (with syntax highlighting)</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={settings.autoExpandJson}\r\n                    onChange={(e) => handleSettingChange('autoExpandJson', e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"Auto-expand JSON files\"\r\n              />\r\n\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={settings.enableSyntaxHighlighting}\r\n                    onChange={(e) => handleSettingChange('enableSyntaxHighlighting', e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"Enable syntax highlighting\"\r\n              />\r\n\r\n              <TextField\r\n                fullWidth\r\n                type=\"number\"\r\n                label=\"Max Preview File Size\"\r\n                value={settings.maxPreviewFileSize}\r\n                onChange={(e) => handleSettingChange('maxPreviewFileSize', parseInt(e.target.value))}\r\n                InputProps={{\r\n                  endAdornment: <InputAdornment position=\"end\">KB</InputAdornment>,\r\n                }}\r\n                helperText=\"Files larger than this will show truncated content\"\r\n              />\r\n            </Stack>\r\n          </AccordionDetails>\r\n        </Accordion>\r\n\r\n        {/* Execution Settings */}\r\n        <Accordion>\r\n          <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n              <ExecuteIcon />\r\n              <Typography variant=\"h6\">Execution Settings</Typography>\r\n            </Stack>\r\n          </AccordionSummary>\r\n          <AccordionDetails>\r\n            <Stack spacing={3}>\r\n              <FormControl fullWidth>\r\n                <InputLabel>Default Script Engine</InputLabel>\r\n                <Select\r\n                  value={settings.defaultScriptEngine}\r\n                  onChange={(e) => handleSettingChange('defaultScriptEngine', e.target.value)}\r\n                  label=\"Default Script Engine\"\r\n                >\r\n                  <MenuItem value=\"node\">Node.js</MenuItem>\r\n                  <MenuItem value=\"python\">Python</MenuItem>\r\n                  <MenuItem value=\"sh\">Shell (Bash)</MenuItem>\r\n                  <MenuItem value=\"sql\">SQL</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n\r\n              <TextField\r\n                fullWidth\r\n                type=\"number\"\r\n                label=\"Execution Timeout\"\r\n                value={settings.executionTimeout}\r\n                onChange={(e) => handleSettingChange('executionTimeout', parseInt(e.target.value))}\r\n                InputProps={{\r\n                  endAdornment: <InputAdornment position=\"end\">seconds</InputAdornment>,\r\n                }}\r\n                helperText=\"Maximum time to wait for script execution\"\r\n              />\r\n\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={settings.dryRunMode}\r\n                    onChange={(e) => handleSettingChange('dryRunMode', e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"Dry Run Mode (disable actual script effects)\"\r\n              />\r\n\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={settings.autoSaveConsoleOutput}\r\n                    onChange={(e) => handleSettingChange('autoSaveConsoleOutput', e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"Auto-save console output\"\r\n              />\r\n            </Stack>\r\n          </AccordionDetails>\r\n        </Accordion>\r\n\r\n        {/* UI Behavior Settings */}\r\n        <Accordion>\r\n          <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n              <UIIcon />\r\n              <Typography variant=\"h6\">UI Behavior</Typography>\r\n            </Stack>\r\n          </AccordionSummary>\r\n          <AccordionDetails>\r\n            <Stack spacing={3}>\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={settings.darkModeConsole}\r\n                    onChange={(e) => handleSettingChange('darkModeConsole', e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"Dark mode console\"\r\n              />\r\n\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={settings.lineWrapInPreview}\r\n                    onChange={(e) => handleSettingChange('lineWrapInPreview', e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"Line wrap in preview\"\r\n              />\r\n\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={settings.showHiddenFiles}\r\n                    onChange={(e) => handleSettingChange('showHiddenFiles', e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"Show hidden files\"\r\n              />\r\n\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={settings.autoScrollConsole}\r\n                    onChange={(e) => handleSettingChange('autoScrollConsole', e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"Auto-scroll console to bottom\"\r\n              />\r\n            </Stack>\r\n          </AccordionDetails>\r\n        </Accordion>\r\n\r\n        {/* OMAI Integration Settings */}\r\n        <Accordion>\r\n          <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n              <OMAIIcon />\r\n              <Typography variant=\"h6\">OMAI Integration</Typography>\r\n            </Stack>\r\n          </AccordionSummary>\r\n          <AccordionDetails>\r\n            <Stack spacing={3}>\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={settings.forwardToOMAIMemory}\r\n                    onChange={(e) => handleSettingChange('forwardToOMAIMemory', e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"Forward executed files to OMAI memory\"\r\n              />\r\n\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={settings.tagForAgentReflection}\r\n                    onChange={(e) => handleSettingChange('tagForAgentReflection', e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"Tag uploaded files for agent reflection\"\r\n              />\r\n\r\n              <FormControlLabel\r\n                control={\r\n                  <Switch\r\n                    checked={settings.enableOMAIRecommendations}\r\n                    onChange={(e) => handleSettingChange('enableOMAIRecommendations', e.target.checked)}\r\n                  />\r\n                }\r\n                label=\"Enable OMAI recommendations after execution\"\r\n              />\r\n\r\n              <Alert severity=\"info\">\r\n                <Typography variant=\"body2\">\r\n                  OMAI integration allows the AI agent to learn from your file operations and provide intelligent suggestions.\r\n                </Typography>\r\n              </Alert>\r\n            </Stack>\r\n          </AccordionDetails>\r\n        </Accordion>\r\n\r\n        {/* File Processing */}\r\n        <Accordion>\r\n          <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n              <FileProcessingIcon />\r\n              <Typography variant=\"h6\">ðŸ“‚ File Processing</Typography>\r\n            </Stack>\r\n          </AccordionSummary>\r\n          <AccordionDetails>\r\n            <Stack spacing={3}>\r\n              {/* Processing Controls */}\r\n              <Box>\r\n                <Typography variant=\"subtitle1\" gutterBottom sx={{ fontWeight: 'bold' }}>\r\n                  Batch Processing\r\n                </Typography>\r\n                <Stack direction=\"row\" spacing={2} sx={{ mb: 2 }}>\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    startIcon={isProcessing ? <CircularProgress size={16} /> : <ProcessIcon />}\r\n                    onClick={handleProcessAllFiles}\r\n                    disabled={isProcessing}\r\n                    color=\"primary\"\r\n                  >\r\n                    {isProcessing ? 'Processing...' : 'Process All Files'}\r\n                  </Button>\r\n                  \r\n                  <Tooltip title=\"Test if secure storage mount is accessible and writable\">\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      startIcon={isTesting ? <CircularProgress size={16} /> : <TestIcon />}\r\n                      onClick={handleTestSecureMount}\r\n                      disabled={isTesting}\r\n                      color=\"secondary\"\r\n                    >\r\n                      {isTesting ? 'Testing...' : 'Test Secure Mount'}\r\n                    </Button>\r\n                  </Tooltip>\r\n                </Stack>\r\n\r\n                {isProcessing && (\r\n                  <Box sx={{ width: '100%', mb: 2 }}>\r\n                    <LinearProgress variant=\"indeterminate\" />\r\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\r\n                      Processing files... This may take a few minutes.\r\n                    </Typography>\r\n                  </Box>\r\n                )}\r\n              </Box>\r\n\r\n              {/* Storage Settings */}\r\n              <Box>\r\n                <Typography variant=\"subtitle1\" gutterBottom sx={{ fontWeight: 'bold' }}>\r\n                  Storage Configuration\r\n                </Typography>\r\n                <Stack spacing={2}>\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Switch\r\n                        checked={settings.useSecureStorage}\r\n                        onChange={(e) => handleSettingChange('useSecureStorage', e.target.checked)}\r\n                      />\r\n                    }\r\n                    label={\r\n                      <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                        <SecurityIcon fontSize=\"small\" />\r\n                        <span>Use Secure Storage (eCryptfs)</span>\r\n                      </Box>\r\n                    }\r\n                  />\r\n\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Switch\r\n                        checked={settings.retryOnMountFailure}\r\n                        onChange={(e) => handleSettingChange('retryOnMountFailure', e.target.checked)}\r\n                      />\r\n                    }\r\n                    label=\"Retry on mount failure (up to 3 attempts)\"\r\n                  />\r\n\r\n                  <FormControlLabel\r\n                    control={\r\n                      <Switch\r\n                        checked={settings.autoProcessOnUpload}\r\n                        onChange={(e) => handleSettingChange('autoProcessOnUpload', e.target.checked)}\r\n                      />\r\n                    }\r\n                    label=\"Auto-process files on upload\"\r\n                  />\r\n                </Stack>\r\n              </Box>\r\n\r\n              {/* Mount Test Results */}\r\n              {mountTestResult && (\r\n                <Alert \r\n                  severity={mountTestResult.accessible && mountTestResult.writable ? 'success' : 'error'}\r\n                  sx={{ mt: 2 }}\r\n                >\r\n                  <Typography variant=\"subtitle2\" gutterBottom>\r\n                    Secure Mount Test Results\r\n                  </Typography>\r\n                  <Stack spacing={1}>\r\n                    <Typography variant=\"body2\">\r\n                      Path: <code>{mountTestResult.mountPath}</code>\r\n                    </Typography>\r\n                    <Typography variant=\"body2\">\r\n                      Accessible: {mountTestResult.accessible ? 'âœ… Yes' : 'âŒ No'}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\">\r\n                      Writable: {mountTestResult.writable ? 'âœ… Yes' : 'âŒ No'}\r\n                    </Typography>\r\n                    {mountTestResult.error && (\r\n                      <Typography variant=\"body2\" color=\"error\">\r\n                        Error: {mountTestResult.error}\r\n                      </Typography>\r\n                    )}\r\n                    <Typography variant=\"caption\" color=\"text.secondary\">\r\n                      Tested at: {new Date(mountTestResult.testTime).toLocaleString()}\r\n                    </Typography>\r\n                  </Stack>\r\n                </Alert>\r\n              )}\r\n\r\n              {/* Processing Results */}\r\n              {processingResult && (\r\n                <Alert \r\n                  severity={processingResult.success ? 'success' : 'error'}\r\n                  sx={{ mt: 2 }}\r\n                >\r\n                  <Typography variant=\"subtitle2\" gutterBottom>\r\n                    Processing Results\r\n                  </Typography>\r\n                  <Stack spacing={1}>\r\n                    <Typography variant=\"body2\">\r\n                      Total Files: {processingResult.summary.totalFiles}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\">\r\n                      âœ… Processed: {processingResult.summary.processedCount}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\">\r\n                      âŒ Failed: {processingResult.summary.failedCount}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\">\r\n                      ðŸ”’ Secure Storage: {processingResult.secureStorage.mounted ? 'âœ… Mounted' : 'âŒ Not Available'}\r\n                    </Typography>\r\n                    {processingResult.summary.durationMs && (\r\n                      <Typography variant=\"body2\">\r\n                        Duration: {(processingResult.summary.durationMs / 1000).toFixed(2)}s\r\n                      </Typography>\r\n                    )}\r\n                  </Stack>\r\n                </Alert>\r\n              )}\r\n\r\n              {/* Processing Log */}\r\n              {processingResult && (processingResult.processedFiles.length > 0 || processingResult.failedFiles.length > 0) && (\r\n                <Box>\r\n                  <Typography variant=\"subtitle1\" gutterBottom sx={{ fontWeight: 'bold' }}>\r\n                    Processing Log\r\n                  </Typography>\r\n                  <Paper sx={{ maxHeight: 300, overflow: 'auto', bgcolor: '#f5f5f5' }}>\r\n                    <List dense>\r\n                      {processingResult.processedFiles.map((file, index) => (\r\n                        <ListItem key={`success-${index}`}>\r\n                          <ListItemIcon>\r\n                            <Chip \r\n                              label=\"âœ“\" \r\n                              size=\"small\" \r\n                              sx={{ bgcolor: '#4caf50', color: 'white', fontWeight: 'bold' }} \r\n                            />\r\n                          </ListItemIcon>\r\n                          <ListItemText\r\n                            primary={file.fileName}\r\n                            secondary={`${(file.size / 1024).toFixed(1)} KB ${file.securelyStored ? 'â€¢ Stored securely' : ''}`}\r\n                            primaryTypographyProps={{ fontFamily: 'monospace', fontSize: '0.875rem' }}\r\n                          />\r\n                        </ListItem>\r\n                      ))}\r\n                      {processingResult.failedFiles.map((file, index) => (\r\n                        <ListItem key={`failed-${index}`}>\r\n                          <ListItemIcon>\r\n                            <Chip \r\n                              label=\"âœ—\" \r\n                              size=\"small\" \r\n                              sx={{ bgcolor: '#f44336', color: 'white', fontWeight: 'bold' }} \r\n                            />\r\n                          </ListItemIcon>\r\n                          <ListItemText\r\n                            primary={file.fileName}\r\n                            secondary={`Error: ${file.error}`}\r\n                            primaryTypographyProps={{ fontFamily: 'monospace', fontSize: '0.875rem' }}\r\n                            secondaryTypographyProps={{ color: 'error' }}\r\n                          />\r\n                        </ListItem>\r\n                      ))}\r\n                    </List>\r\n                  </Paper>\r\n                </Box>\r\n              )}\r\n\r\n              <Alert severity=\"info\">\r\n                <Typography variant=\"body2\">\r\n                  File processing converts uploaded .md files into the Big Book knowledge base. \r\n                  Enable secure storage for encrypted file storage using eCryptfs mounting.\r\n                </Typography>\r\n              </Alert>\r\n            </Stack>\r\n          </AccordionDetails>\r\n        </Accordion>\r\n\r\n        {/* Action Buttons */}\r\n        <Paper sx={{ p: 2 }}>\r\n          <Stack direction=\"row\" spacing={2} justifyContent=\"flex-end\">\r\n            <Button\r\n              variant=\"outlined\"\r\n              startIcon={<ResetIcon />}\r\n              onClick={handleReset}\r\n            >\r\n              Reset to Defaults\r\n            </Button>\r\n            <Button\r\n              variant=\"contained\"\r\n              startIcon={<SaveIcon />}\r\n              onClick={handleSave}\r\n              disabled={!hasChanges}\r\n            >\r\n              Save Settings\r\n            </Button>\r\n          </Stack>\r\n        </Paper>\r\n      </Stack>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default BigBookSettings;\r\nexport { defaultSettings }; ","import React, { useState } from 'react';\r\nimport {\r\n  Box,\r\n  Grid,\r\n  Paper,\r\n  Typography,\r\n  Stack,\r\n  Button,\r\n  IconButton,\r\n  Tooltip,\r\n  Divider,\r\n  Alert,\r\n  Collapse,\r\n  Tabs,\r\n  Tab\r\n} from '@mui/material';\r\nimport {\r\n  Terminal as TerminalIcon,\r\n  ExpandMore as ExpandMoreIcon,\r\n  ExpandLess as ExpandLessIcon,\r\n  Refresh as RefreshIcon,\r\n  Clear as ClearIcon,\r\n  Settings as SettingsIcon,\r\n  ViewList as ViewListIcon,\r\n  Visibility as ViewIcon\r\n} from '@mui/icons-material';\r\nimport UploadedFileList from './UploadedFileList';\r\nimport FileViewer from './FileViewer';\r\nimport BigBookSettings, { BigBookConsoleSettings, defaultSettings } from './BigBookSettings';\r\n\r\ninterface FileUpload {\r\n  id: string;\r\n  name: string;\r\n  type: 'sql' | 'script' | 'markdown' | 'javascript' | 'shell' | 'python' | 'html' | 'css' | 'json' | 'xml' | 'text' | 'image' | 'video' | 'audio' | 'archive' | 'pdf' | 'other';\r\n  content: string;\r\n  size: number;\r\n  uploadedAt: Date;\r\n  status: 'pending' | 'uploaded' | 'error';\r\n  extension: string;\r\n  mimeType?: string;\r\n  isQuestionnaire?: boolean;\r\n  questionnaireMetadata?: {\r\n    id: string;\r\n    fileName: string;\r\n    title: string;\r\n    description: string;\r\n    ageGroup: string;\r\n    type: string;\r\n    version: string;\r\n    author: string;\r\n    estimatedDuration: number;\r\n    questions: any[];\r\n    metadata: any;\r\n  };\r\n}\r\n\r\ninterface ConsoleOutput {\r\n  id: string;\r\n  timestamp: Date;\r\n  type: 'info' | 'success' | 'error' | 'warning' | 'command';\r\n  message: string;\r\n  details?: string;\r\n}\r\n\r\ninterface BigBookConsolePageProps {\r\n  files: FileUpload[];\r\n  consoleOutput: ConsoleOutput[];\r\n  isExecuting: boolean;\r\n  onFileSelect: (file: FileUpload) => void;\r\n  onFileExecute: (file: FileUpload) => void;\r\n  onFileDelete: (fileId: string) => void;\r\n  onQuestionnairePreview?: (file: FileUpload) => void;\r\n  onClearConsole: () => void;\r\n  selectedFile: FileUpload | null;\r\n}\r\n\r\nconst BigBookConsolePage: React.FC<BigBookConsolePageProps> = ({\r\n  files,\r\n  consoleOutput,\r\n  isExecuting,\r\n  onFileSelect,\r\n  onFileExecute,\r\n  onFileDelete,\r\n  onQuestionnairePreview,\r\n  onClearConsole,\r\n  selectedFile\r\n}) => {\r\n  const [showConsole, setShowConsole] = useState(false);\r\n  const [activeView, setActiveView] = useState<'files' | 'settings'>('files');\r\n  const [settings, setSettings] = useState<BigBookConsoleSettings>(defaultSettings);\r\n\r\n  const toggleConsole = () => {\r\n    setShowConsole(!showConsole);\r\n  };\r\n\r\n  const handleSettingsChange = (newSettings: BigBookConsoleSettings) => {\r\n    setSettings(newSettings);\r\n  };\r\n\r\n  const handleSettingsSave = () => {\r\n    // Save settings to localStorage or API\r\n    localStorage.setItem('bigbook-console-settings', JSON.stringify(settings));\r\n    // You could also save to API here\r\n  };\r\n\r\n  const handleSettingsReset = () => {\r\n    setSettings(defaultSettings);\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ height: '100vh', display: 'flex', flexDirection: 'column' }}>\r\n      {/* Header */}\r\n      <Box sx={{ p: 2, borderBottom: 1, borderColor: 'divider', backgroundColor: 'background.paper' }}>\r\n        <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\">\r\n          <Box>\r\n            <Typography variant=\"h5\" component=\"h1\">\r\n              Big Book Console\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              File explorer and execution console\r\n            </Typography>\r\n          </Box>\r\n          \r\n          <Stack direction=\"row\" spacing={1}>\r\n            <Tooltip title=\"Toggle Console\">\r\n              <IconButton onClick={toggleConsole} color=\"primary\">\r\n                <TerminalIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n            {showConsole && (\r\n              <Tooltip title=\"Clear Console\">\r\n                <IconButton onClick={onClearConsole} color=\"error\">\r\n                  <ClearIcon />\r\n                </IconButton>\r\n              </Tooltip>\r\n            )}\r\n            <Tooltip title=\"Refresh\">\r\n              <IconButton color=\"primary\">\r\n                <RefreshIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n            <Tooltip title=\"Settings\">\r\n              <IconButton \r\n                onClick={() => setActiveView(activeView === 'files' ? 'settings' : 'files')}\r\n                color={activeView === 'settings' ? 'secondary' : 'primary'}\r\n              >\r\n                <SettingsIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </Stack>\r\n        </Stack>\r\n      </Box>\r\n\r\n      {/* Main Content */}\r\n      <Box sx={{ flex: 1, display: 'flex', flexDirection: 'column', overflow: 'hidden' }}>\r\n        {activeView === 'files' ? (\r\n          /* File List and Viewer */\r\n          <Box sx={{ flex: 1, display: 'flex', overflow: 'hidden' }}>\r\n            {/* File List Panel */}\r\n            <Box sx={{ width: '30%', minWidth: 300, borderRight: 1, borderColor: 'divider' }}>\r\n              <UploadedFileList\r\n                files={files}\r\n                selectedFile={selectedFile}\r\n                onFileSelect={onFileSelect}\r\n                onFileExecute={onFileExecute}\r\n                onFileDelete={onFileDelete}\r\n                onQuestionnairePreview={onQuestionnairePreview}\r\n                isExecuting={isExecuting}\r\n                settings={settings}\r\n              />\r\n            </Box>\r\n\r\n            {/* File Viewer Panel */}\r\n            <Box sx={{ flex: 1 }}>\r\n              <FileViewer\r\n                file={selectedFile}\r\n                onExecute={onFileExecute}\r\n                isExecuting={isExecuting}\r\n                settings={settings}\r\n              />\r\n            </Box>\r\n          </Box>\r\n        ) : (\r\n          /* Settings Panel */\r\n          <Box sx={{ flex: 1, overflow: 'auto' }}>\r\n            <BigBookSettings\r\n              settings={settings}\r\n              onSettingsChange={handleSettingsChange}\r\n              onSave={handleSettingsSave}\r\n              onReset={handleSettingsReset}\r\n            />\r\n          </Box>\r\n        )}\r\n\r\n        {/* Console Panel */}\r\n        <Collapse in={showConsole}>\r\n          <Box sx={{ height: 300, borderTop: 1, borderColor: 'divider' }}>\r\n            <Box sx={{ \r\n              p: 2, \r\n              borderBottom: 1, \r\n              borderColor: 'divider',\r\n              backgroundColor: 'grey.50',\r\n              display: 'flex',\r\n              justifyContent: 'space-between',\r\n              alignItems: 'center'\r\n            }}>\r\n              <Typography variant=\"h6\" sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                <TerminalIcon fontSize=\"small\" />\r\n                Console Output\r\n              </Typography>\r\n              <Stack direction=\"row\" spacing={1}>\r\n                <Typography variant=\"caption\" color=\"text.secondary\">\r\n                  {consoleOutput.length} messages\r\n                </Typography>\r\n                <Button\r\n                  size=\"small\"\r\n                  startIcon={<ClearIcon />}\r\n                  onClick={onClearConsole}\r\n                  variant=\"outlined\"\r\n                >\r\n                  Clear\r\n                </Button>\r\n              </Stack>\r\n            </Box>\r\n            \r\n            <Box sx={{ \r\n              height: 250, \r\n              overflow: 'auto',\r\n              p: 2,\r\n              backgroundColor: settings.darkModeConsole ? '#1e1e1e' : '#f8f9fa',\r\n              color: settings.darkModeConsole ? '#ffffff' : '#212529',\r\n              fontFamily: 'monospace',\r\n              fontSize: '0.875rem'\r\n            }}>\r\n              {consoleOutput.length === 0 ? (\r\n                <Box sx={{ \r\n                  display: 'flex', \r\n                  alignItems: 'center', \r\n                  justifyContent: 'center',\r\n                  height: '100%'\r\n                }}>\r\n                  <Typography color=\"grey.500\" textAlign=\"center\">\r\n                    No console output yet. Execute files to see results.\r\n                  </Typography>\r\n                </Box>\r\n              ) : (\r\n                consoleOutput.map((output) => (\r\n                  <Box key={output.id} sx={{ mb: 1 }}>\r\n                    <Typography\r\n                      component=\"span\"\r\n                      sx={{\r\n                        color: output.type === 'error' ? '#ff6b6b' :\r\n                               output.type === 'success' ? '#51cf66' :\r\n                               output.type === 'warning' ? '#ffd43b' :\r\n                               output.type === 'command' ? '#74c0fc' : '#ffffff',\r\n                        fontWeight: output.type === 'command' ? 'bold' : 'normal'\r\n                      }}\r\n                    >\r\n                      [{formatTimeOnly(output.timestamp)}] {output.message}\r\n                    </Typography>\r\n                    {output.details && (\r\n                      <Typography\r\n                        component=\"div\"\r\n                        sx={{\r\n                          color: '#adb5bd',\r\n                          ml: 2,\r\n                          mt: 0.5,\r\n                          whiteSpace: 'pre-wrap'\r\n                        }}\r\n                      >\r\n                        {output.details}\r\n                      </Typography>\r\n                    )}\r\n                  </Box>\r\n                ))\r\n              )}\r\n            </Box>\r\n          </Box>\r\n        </Collapse>\r\n      </Box>\r\n\r\n      {/* Status Bar */}\r\n      <Box sx={{ \r\n        p: 1, \r\n        borderTop: 1, \r\n        borderColor: 'divider',\r\n        backgroundColor: 'grey.50',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n      }}>\r\n        <Stack direction=\"row\" spacing={2} alignItems=\"center\">\r\n          <Typography variant=\"caption\" color=\"text.secondary\">\r\n            {files.length} files loaded\r\n          </Typography>\r\n          {selectedFile && (\r\n            <>\r\n              <Typography variant=\"caption\" color=\"text.secondary\">â€¢</Typography>\r\n              <Typography variant=\"caption\" color=\"text.secondary\">\r\n                Selected: {selectedFile.name}\r\n              </Typography>\r\n            </>\r\n          )}\r\n        </Stack>\r\n        \r\n        <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n          {isExecuting && (\r\n            <Alert severity=\"info\" sx={{ py: 0, px: 1 }}>\r\n              Executing...\r\n            </Alert>\r\n          )}\r\n          <Typography variant=\"caption\" color=\"text.secondary\">\r\n            {consoleOutput.length} console messages\r\n          </Typography>\r\n        </Stack>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default BigBookConsolePage; ","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  Typography,\r\n  Button,\r\n  Box,\r\n  Alert,\r\n  Chip,\r\n  Stack,\r\n  Divider,\r\n  IconButton,\r\n  Tooltip,\r\n  CircularProgress,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  ListItemSecondaryAction\r\n} from '@mui/material';\r\nimport {\r\n  Storage as StorageIcon,\r\n  Lock as LockIcon,\r\n  LockOpen as LockOpenIcon,\r\n  Refresh as RefreshIcon,\r\n  Security as SecurityIcon,\r\n  Key as KeyIcon,\r\n  CheckCircle as CheckCircleIcon,\r\n  Error as ErrorIcon,\r\n  Warning as WarningIcon,\r\n  Info as InfoIcon,\r\n  CloudUpload as CloudUploadIcon,\r\n  CloudDownload as CloudDownloadIcon,\r\n  Delete as DeleteIcon\r\n} from '@mui/icons-material';\r\n\r\ninterface StorageStatus {\r\n  isMounted: boolean;\r\n  mountPath: string;\r\n  sourcePath: string;\r\n  fileCount: number;\r\n  totalSize: number;\r\n  lastChecked: string;\r\n  error?: string;\r\n}\r\n\r\ninterface StorageFile {\r\n  fileId: string;\r\n  encryptedPath: string;\r\n  relativePath: string;\r\n  originalName: string;\r\n  size: number;\r\n  modifiedAt: string;\r\n  createdAt: string;\r\n}\r\n\r\nconst EncryptedStoragePanel: React.FC = () => {\r\n  const [status, setStatus] = useState<StorageStatus | null>(null);\r\n  const [files, setFiles] = useState<StorageFile[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string>('');\r\n\r\n  const loadStatus = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const response = await fetch('/api/bigbook/storage/status');\r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        setStatus(result.status);\r\n      } else {\r\n        setError(result.error || 'Failed to load storage status');\r\n      }\r\n    } catch (error) {\r\n      setError(error instanceof Error ? error.message : 'Failed to load storage status');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const loadFiles = async () => {\r\n    if (!status?.isMounted) return;\r\n    \r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const response = await fetch('/api/bigbook/storage/files');\r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        setFiles(result.files);\r\n      } else {\r\n        setError(result.error || 'Failed to load files');\r\n      }\r\n    } catch (error) {\r\n      setError(error instanceof Error ? error.message : 'Failed to load files');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const mountVolume = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const response = await fetch('/api/bigbook/storage/mount', { method: 'POST' });\r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        await loadStatus();\r\n        await loadFiles();\r\n      } else {\r\n        setError(result.error || 'Failed to mount volume');\r\n      }\r\n    } catch (error) {\r\n      setError(error instanceof Error ? error.message : 'Failed to mount volume');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const unmountVolume = async () => {\r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const response = await fetch('/api/bigbook/storage/unmount', { method: 'POST' });\r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        await loadStatus();\r\n        setFiles([]);\r\n      } else {\r\n        setError(result.error || 'Failed to unmount volume');\r\n      }\r\n    } catch (error) {\r\n      setError(error instanceof Error ? error.message : 'Failed to unmount volume');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const rotateKey = async () => {\r\n    if (!window.confirm('Are you sure you want to rotate the encryption key? This will require remounting the volume.')) {\r\n      return;\r\n    }\r\n    \r\n    setLoading(true);\r\n    setError('');\r\n    \r\n    try {\r\n      const response = await fetch('/api/bigbook/storage/rotate-key', { method: 'POST' });\r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        await loadStatus();\r\n        await loadFiles();\r\n      } else {\r\n        setError(result.error || 'Failed to rotate key');\r\n      }\r\n    } catch (error) {\r\n      setError(error instanceof Error ? error.message : 'Failed to rotate key');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadStatus();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (status?.isMounted) {\r\n      loadFiles();\r\n    }\r\n  }, [status?.isMounted]);\r\n\r\n  const formatBytes = (bytes: number) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  const getStatusIcon = () => {\r\n    if (!status) return <InfoIcon />;\r\n    if (status.error) return <ErrorIcon />;\r\n    if (status.isMounted) return <CheckCircleIcon />;\r\n    return <WarningIcon />;\r\n  };\r\n\r\n  const getStatusColor = () => {\r\n    if (!status) return 'default';\r\n    if (status.error) return 'error';\r\n    if (status.isMounted) return 'success';\r\n    return 'warning';\r\n  };\r\n\r\n  const getStatusText = () => {\r\n    if (!status) return 'Unknown';\r\n    if (status.error) return 'Error';\r\n    if (status.isMounted) return 'Mounted';\r\n    return 'Not Mounted';\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ p: 3 }}>\r\n      <Typography variant=\"h4\" gutterBottom>\r\n        <StorageIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n        Encrypted Storage Management\r\n      </Typography>\r\n\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Status Card */}\r\n      <Card sx={{ mb: 3 }}>\r\n        <CardContent>\r\n          <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2 }}>\r\n            <Typography variant=\"h6\">\r\n              Storage Status\r\n            </Typography>\r\n            <Box>\r\n              <Tooltip title=\"Refresh Status\">\r\n                <IconButton onClick={loadStatus} disabled={loading}>\r\n                  <RefreshIcon />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </Box>\r\n          </Box>\r\n\r\n          {loading ? (\r\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', py: 2 }}>\r\n              <CircularProgress size={24} sx={{ mr: 1 }} />\r\n              <Typography>Loading...</Typography>\r\n            </Box>\r\n          ) : status ? (\r\n            <Stack spacing={2}>\r\n              <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                <Chip\r\n                  icon={getStatusIcon()}\r\n                  label={getStatusText()}\r\n                  color={getStatusColor()}\r\n                  variant=\"outlined\"\r\n                />\r\n                {status.isMounted && (\r\n                  <Chip\r\n                    icon={<LockOpenIcon />}\r\n                    label=\"Unlocked\"\r\n                    color=\"success\"\r\n                    variant=\"outlined\"\r\n                  />\r\n                )}\r\n              </Box>\r\n\r\n              <Box sx={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 2 }}>\r\n                <Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">Mount Path</Typography>\r\n                  <Typography variant=\"body1\" fontFamily=\"monospace\">{status.mountPath}</Typography>\r\n                </Box>\r\n                <Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">Source Path</Typography>\r\n                  <Typography variant=\"body1\" fontFamily=\"monospace\">{status.sourcePath}</Typography>\r\n                </Box>\r\n                <Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">File Count</Typography>\r\n                  <Typography variant=\"body1\">{status.fileCount}</Typography>\r\n                </Box>\r\n                <Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">Total Size</Typography>\r\n                  <Typography variant=\"body1\">{formatBytes(status.totalSize)}</Typography>\r\n                </Box>\r\n              </Box>\r\n\r\n              <Divider />\r\n\r\n              <Box sx={{ display: 'flex', gap: 1 }}>\r\n                {!status.isMounted ? (\r\n                  <Button\r\n                    variant=\"contained\"\r\n                    startIcon={<LockOpenIcon />}\r\n                    onClick={mountVolume}\r\n                    disabled={loading}\r\n                  >\r\n                    Mount Volume\r\n                  </Button>\r\n                ) : (\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    startIcon={<LockIcon />}\r\n                    onClick={unmountVolume}\r\n                    disabled={loading}\r\n                  >\r\n                    Unmount Volume\r\n                  </Button>\r\n                )}\r\n                \r\n                <Button\r\n                  variant=\"outlined\"\r\n                  startIcon={<KeyIcon />}\r\n                  onClick={rotateKey}\r\n                  disabled={loading || !status.isMounted}\r\n                >\r\n                  Rotate Key\r\n                </Button>\r\n              </Box>\r\n            </Stack>\r\n          ) : (\r\n            <Typography color=\"text.secondary\">No status available</Typography>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Files List */}\r\n      {status?.isMounted && (\r\n        <Card>\r\n          <CardContent>\r\n            <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between', mb: 2 }}>\r\n              <Typography variant=\"h6\">\r\n                Stored Files ({files.length})\r\n              </Typography>\r\n              <Tooltip title=\"Refresh Files\">\r\n                <IconButton onClick={loadFiles} disabled={loading}>\r\n                  <RefreshIcon />\r\n                </IconButton>\r\n              </Tooltip>\r\n            </Box>\r\n\r\n            {loading ? (\r\n              <Box sx={{ display: 'flex', alignItems: 'center', justifyContent: 'center', py: 2 }}>\r\n                <CircularProgress size={24} sx={{ mr: 1 }} />\r\n                <Typography>Loading files...</Typography>\r\n              </Box>\r\n            ) : files.length > 0 ? (\r\n              <List>\r\n                {files.map((file) => (\r\n                  <ListItem key={file.fileId} divider>\r\n                    <ListItemIcon>\r\n                      <StorageIcon />\r\n                    </ListItemIcon>\r\n                    <ListItemText\r\n                      primary={file.originalName}\r\n                      secondary={\r\n                        <Box>\r\n                          <Typography variant=\"body2\" color=\"text.secondary\">\r\n                            ID: {file.fileId}\r\n                          </Typography>\r\n                          <Typography variant=\"body2\" color=\"text.secondary\">\r\n                            Size: {formatBytes(file.size)} | Created: {new Date(file.createdAt).toLocaleString()}\r\n                          </Typography>\r\n                          <Typography variant=\"body2\" color=\"text.secondary\" fontFamily=\"monospace\" fontSize=\"0.75rem\">\r\n                            {file.relativePath}\r\n                          </Typography>\r\n                        </Box>\r\n                      }\r\n                    />\r\n                    <ListItemSecondaryAction>\r\n                      <Stack direction=\"row\" spacing={1}>\r\n                        <Tooltip title=\"Download\">\r\n                          <IconButton size=\"small\">\r\n                            <CloudDownloadIcon />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title=\"Delete\">\r\n                          <IconButton size=\"small\" color=\"error\">\r\n                            <DeleteIcon />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                      </Stack>\r\n                    </ListItemSecondaryAction>\r\n                  </ListItem>\r\n                ))}\r\n              </List>\r\n            ) : (\r\n              <Typography color=\"text.secondary\" textAlign=\"center\" py={2}>\r\n                No files stored in encrypted storage\r\n              </Typography>\r\n            )}\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* Security Information */}\r\n      <Card sx={{ mt: 3 }}>\r\n        <CardContent>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            <SecurityIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n            Security Information\r\n          </Typography>\r\n          \r\n          <Stack spacing={1}>\r\n            <Typography variant=\"body2\">\r\n              â€¢ Files are encrypted using eCryptFS with AES-256 encryption\r\n            </Typography>\r\n            <Typography variant=\"body2\">\r\n              â€¢ Encryption keys are stored securely and never exposed in plaintext\r\n            </Typography>\r\n            <Typography variant=\"body2\">\r\n              â€¢ Files are only accessible through the Big Book Viewer interface\r\n            </Typography>\r\n            <Typography variant=\"body2\">\r\n              â€¢ Direct filesystem access is blocked via restrictive permissions\r\n            </Typography>\r\n            <Typography variant=\"body2\">\r\n              â€¢ Volume auto-locks when unmounted or service stops\r\n            </Typography>\r\n          </Stack>\r\n        </CardContent>\r\n      </Card>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default EncryptedStoragePanel; ","import React, { useState, useRef, useEffect } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n  Chip,\r\n  Alert,\r\n  CircularProgress,\r\n  IconButton,\r\n  Tooltip,\r\n  Stack,\r\n  Card,\r\n  CardContent,\r\n  Divider\r\n} from '@mui/material';\r\nimport {\r\n  Close as CloseIcon,\r\n  PlayArrow as PlayIcon,\r\n  Save as SaveIcon,\r\n  Send as SendIcon,\r\n  Security as SecurityIcon,\r\n  Psychology as PsychologyIcon,\r\n  Timer as TimerIcon,\r\n  Group as GroupIcon\r\n} from '@mui/icons-material';\r\n\r\n// Types for questionnaire responses\r\ninterface QuestionnaireResponse {\r\n  questionId: string;\r\n  answer: any;\r\n  timestamp: Date;\r\n}\r\n\r\ninterface QuestionnaireSubmission {\r\n  questionnaireId: string;\r\n  userId?: number;\r\n  responses: QuestionnaireResponse[];\r\n  ageGroup?: string;\r\n  questionnaireTitle?: string;\r\n  progressPercent: number;\r\n  isCompleted: boolean;\r\n}\r\n\r\ninterface FileUpload {\r\n  id: string;\r\n  name: string;\r\n  content: string;\r\n  isQuestionnaire?: boolean;\r\n  questionnaireMetadata?: {\r\n    id: string;\r\n    fileName: string;\r\n    title: string;\r\n    description: string;\r\n    ageGroup: string;\r\n    type: string;\r\n    version: string;\r\n    author: string;\r\n    estimatedDuration: number;\r\n    questions: any[];\r\n    metadata: any;\r\n  };\r\n}\r\n\r\ninterface QuestionnairePreviewProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  file: FileUpload | null;\r\n  onSubmit: (submission: QuestionnaireSubmission) => void;\r\n}\r\n\r\nconst QuestionnairePreview: React.FC<QuestionnairePreviewProps> = ({\r\n  open,\r\n  onClose,\r\n  file,\r\n  onSubmit\r\n}) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string>('');\r\n  const [responses, setResponses] = useState<{ [key: string]: any }>({});\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [renderError, setRenderError] = useState<string>('');\r\n  const iframeRef = useRef<HTMLIFrameElement>(null);\r\n\r\n  // Security validation\r\n  const validateTSXContent = (content: string): { isValid: boolean; issues: string[] } => {\r\n    const issues: string[] = [];\r\n    \r\n    // Check for dangerous patterns\r\n    const dangerousPatterns = [\r\n      { pattern: /eval\\s*\\(/, message: 'eval() calls are not allowed' },\r\n      { pattern: /Function\\s*\\(/, message: 'Function constructor is not allowed' },\r\n      { pattern: /innerHTML\\s*=/, message: 'innerHTML is not allowed' },\r\n      { pattern: /dangerouslySetInnerHTML/, message: 'dangerouslySetInnerHTML is not allowed' },\r\n      { pattern: /document\\.write/, message: 'document.write is not allowed' },\r\n      { pattern: /window\\./, message: 'Direct window access is restricted' },\r\n      { pattern: /fetch\\s*\\(/, message: 'fetch calls should be validated' },\r\n      { pattern: /XMLHttpRequest/, message: 'XMLHttpRequest is not allowed' }\r\n    ];\r\n\r\n    for (const { pattern, message } of dangerousPatterns) {\r\n      if (pattern.test(content)) {\r\n        issues.push(message);\r\n      }\r\n    }\r\n\r\n    return {\r\n      isValid: issues.length === 0,\r\n      issues\r\n    };\r\n  };\r\n\r\n  // Create secure sandbox for component rendering\r\n  const createSecureSandbox = (content: string): string => {\r\n    // Remove dangerous imports and replace with safe alternatives\r\n    const sanitizedContent = content\r\n      .replace(/import\\s+.*?from\\s+['\"][^'\"]*?['\"];?/g, '') // Remove imports\r\n      .replace(/export\\s+default\\s+/, '') // Remove export default\r\n      .replace(/export\\s+/, ''); // Remove other exports\r\n\r\n    // Create sandbox wrapper\r\n    return `\r\n      (function() {\r\n        'use strict';\r\n        \r\n        // Restricted globals\r\n        const window = undefined;\r\n        const document = undefined;\r\n        const global = undefined;\r\n        const process = undefined;\r\n        const require = undefined;\r\n        const module = undefined;\r\n        const exports = undefined;\r\n        \r\n        // Safe React context\r\n        const React = {\r\n          useState: parent.React.useState,\r\n          useEffect: parent.React.useEffect,\r\n          useCallback: parent.React.useCallback,\r\n          useMemo: parent.React.useMemo,\r\n          createElement: parent.React.createElement,\r\n          Fragment: parent.React.Fragment\r\n        };\r\n        \r\n        // Safe UI components (limited subset)\r\n        const { \r\n          Box, \r\n          Typography, \r\n          Button, \r\n          TextField, \r\n          Radio, \r\n          RadioGroup, \r\n          FormControl, \r\n          FormLabel, \r\n          FormControlLabel,\r\n          Checkbox,\r\n          Select,\r\n          MenuItem,\r\n          Slider,\r\n          Stack,\r\n          Card,\r\n          CardContent\r\n        } = parent.MUI;\r\n        \r\n        // Response handler\r\n        const handleResponse = (questionId, answer) => {\r\n          parent.postMessage({\r\n            type: 'QUESTIONNAIRE_RESPONSE',\r\n            data: { questionId, answer }\r\n          }, '*');\r\n        };\r\n        \r\n        // Component code\r\n        ${sanitizedContent}\r\n        \r\n        // Render the component\r\n        try {\r\n          const component = typeof Questionnaire === 'function' \r\n            ? React.createElement(Questionnaire, { onResponse: handleResponse })\r\n            : React.createElement('div', {}, 'Invalid questionnaire component');\r\n          \r\n          parent.ReactDOM.render(component, document.getElementById('questionnaire-root'));\r\n        } catch (error) {\r\n          parent.postMessage({\r\n            type: 'QUESTIONNAIRE_ERROR',\r\n            data: { message: error.message }\r\n          }, '*');\r\n        }\r\n      })();\r\n    `;\r\n  };\r\n\r\n  // Handle component rendering\r\n  const renderComponent = () => {\r\n    if (!file || !file.isQuestionnaire || !file.content) {\r\n      setRenderError('Invalid questionnaire file');\r\n      return;\r\n    }\r\n\r\n    const validation = validateTSXContent(file.content);\r\n    if (!validation.isValid) {\r\n      setRenderError(`Security validation failed: ${validation.issues.join(', ')}`);\r\n      return;\r\n    }\r\n\r\n    setIsLoading(true);\r\n    setRenderError('');\r\n\r\n    try {\r\n      const sandboxCode = createSecureSandbox(file.content);\r\n      \r\n      // Create sandboxed iframe content\r\n      const iframeContent = `\r\n        <!DOCTYPE html>\r\n        <html>\r\n        <head>\r\n          <meta charset=\"utf-8\">\r\n          <title>Questionnaire Preview</title>\r\n          <style>\r\n            body { \r\n              font-family: 'Roboto', sans-serif; \r\n              margin: 16px; \r\n              background: #fafafa;\r\n            }\r\n            #questionnaire-root { \r\n              max-width: 800px; \r\n              margin: 0 auto; \r\n              background: white;\r\n              border-radius: 8px;\r\n              padding: 24px;\r\n              box-shadow: 0 2px 8px rgba(0,0,0,0.1);\r\n            }\r\n          </style>\r\n          <script crossorigin src=\"https://unpkg.com/react@18/umd/react.development.js\"></script>\r\n          <script crossorigin src=\"https://unpkg.com/react-dom@18/umd/react-dom.development.js\"></script>\r\n          <script crossorigin src=\"https://unpkg.com/@mui/material@latest/umd/material-ui.development.js\"></script>\r\n        </head>\r\n        <body>\r\n          <div id=\"questionnaire-root\">\r\n            <div style=\"text-align: center; padding: 40px;\">\r\n              <div style=\"font-size: 18px; color: #666;\">Loading questionnaire...</div>\r\n            </div>\r\n          </div>\r\n          <script>\r\n            // Set up communication\r\n            window.addEventListener('message', function(event) {\r\n              if (event.data.type === 'QUESTIONNAIRE_RESPONSE') {\r\n                parent.postMessage(event.data, '*');\r\n              } else if (event.data.type === 'QUESTIONNAIRE_ERROR') {\r\n                parent.postMessage(event.data, '*');\r\n              }\r\n            });\r\n            \r\n            // Make React and MUI available\r\n            window.React = React;\r\n            window.ReactDOM = ReactDOM;\r\n            window.MUI = MaterialUI;\r\n            \r\n            // Execute sandboxed component\r\n            ${sandboxCode}\r\n          </script>\r\n        </body>\r\n        </html>\r\n      `;\r\n\r\n      if (iframeRef.current) {\r\n        const iframe = iframeRef.current;\r\n        iframe.srcdoc = iframeContent;\r\n      }\r\n\r\n      setIsLoading(false);\r\n    } catch (error) {\r\n      setRenderError(`Failed to render component: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Handle messages from iframe\r\n  useEffect(() => {\r\n    const handleMessage = (event: MessageEvent) => {\r\n      if (event.data.type === 'QUESTIONNAIRE_RESPONSE') {\r\n        const { questionId, answer } = event.data.data;\r\n        setResponses(prev => ({\r\n          ...prev,\r\n          [questionId]: {\r\n            answer,\r\n            timestamp: new Date()\r\n          }\r\n        }));\r\n      } else if (event.data.type === 'QUESTIONNAIRE_ERROR') {\r\n        setRenderError(event.data.data.message);\r\n      }\r\n    };\r\n\r\n    window.addEventListener('message', handleMessage);\r\n    return () => window.removeEventListener('message', handleMessage);\r\n  }, []);\r\n\r\n  // Render component when file changes\r\n  useEffect(() => {\r\n    if (open && file && file.isQuestionnaire) {\r\n      renderComponent();\r\n    }\r\n  }, [open, file]);\r\n\r\n  // Handle submission\r\n  const handleSubmit = async () => {\r\n    if (!file?.questionnaireMetadata) return;\r\n\r\n    setIsSubmitting(true);\r\n    try {\r\n      const submission: QuestionnaireSubmission = {\r\n        questionnaireId: file.questionnaireMetadata.id,\r\n        responses: Object.entries(responses).map(([questionId, response]) => ({\r\n          questionId,\r\n          answer: response.answer,\r\n          timestamp: response.timestamp\r\n        })),\r\n        ageGroup: file.questionnaireMetadata.ageGroup,\r\n        questionnaireTitle: file.questionnaireMetadata.title,\r\n        progressPercent: Object.keys(responses).length > 0 ? 100 : 0,\r\n        isCompleted: true\r\n      };\r\n\r\n      await onSubmit(submission);\r\n      onClose();\r\n    } catch (error) {\r\n      setError(error instanceof Error ? error.message : 'Submission failed');\r\n    }\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  const responseCount = Object.keys(responses).length;\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      maxWidth=\"lg\"\r\n      fullWidth\r\n      PaperProps={{\r\n        sx: { height: '90vh', display: 'flex', flexDirection: 'column' }\r\n      }}\r\n    >\r\n      <DialogTitle sx={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>\r\n        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n          <PsychologyIcon color=\"primary\" />\r\n          <Typography variant=\"h6\">\r\n            {file?.questionnaireMetadata?.title || 'Questionnaire Preview'}\r\n          </Typography>\r\n        </Box>\r\n        <IconButton onClick={onClose} size=\"small\">\r\n          <CloseIcon />\r\n        </IconButton>\r\n      </DialogTitle>\r\n\r\n      <DialogContent sx={{ flex: 1, display: 'flex', flexDirection: 'column', p: 0 }}>\r\n        {/* Metadata Header */}\r\n        {file?.questionnaireMetadata && (\r\n          <Card sx={{ m: 2, mb: 1 }} variant=\"outlined\">\r\n            <CardContent sx={{ py: 2 }}>\r\n              <Stack direction=\"row\" spacing={2} alignItems=\"center\" flexWrap=\"wrap\">\r\n                <Chip \r\n                  icon={<GroupIcon />} \r\n                  label={file.questionnaireMetadata.ageGroup} \r\n                  size=\"small\" \r\n                  color=\"primary\" \r\n                />\r\n                <Chip \r\n                  icon={<TimerIcon />} \r\n                  label={`${file.questionnaireMetadata.estimatedDuration} min`} \r\n                  size=\"small\" \r\n                  color=\"secondary\" \r\n                />\r\n                <Chip \r\n                  icon={<SecurityIcon />} \r\n                  label=\"Sandboxed\" \r\n                  size=\"small\" \r\n                  color=\"success\" \r\n                />\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  v{file.questionnaireMetadata.version} by {file.questionnaireMetadata.author}\r\n                </Typography>\r\n              </Stack>\r\n              {file.questionnaireMetadata.description && (\r\n                <Typography variant=\"body2\" sx={{ mt: 1 }}>\r\n                  {file.questionnaireMetadata.description}\r\n                </Typography>\r\n              )}\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n\r\n        {/* Error Display */}\r\n        {(error || renderError) && (\r\n          <Alert severity=\"error\" sx={{ m: 2 }}>\r\n            {error || renderError}\r\n          </Alert>\r\n        )}\r\n\r\n        {/* Loading State */}\r\n        {isLoading && (\r\n          <Box sx={{ display: 'flex', justifyContent: 'center', alignItems: 'center', flex: 1 }}>\r\n            <Stack alignItems=\"center\" spacing={2}>\r\n              <CircularProgress />\r\n              <Typography>Loading questionnaire...</Typography>\r\n            </Stack>\r\n          </Box>\r\n        )}\r\n\r\n        {/* Component Preview */}\r\n        {!isLoading && !error && !renderError && (\r\n          <Box sx={{ flex: 1, border: 1, borderColor: 'divider', m: 2, borderRadius: 1 }}>\r\n            <iframe\r\n              ref={iframeRef}\r\n              style={{\r\n                width: '100%',\r\n                height: '100%',\r\n                border: 'none',\r\n                borderRadius: '4px'\r\n              }}\r\n              sandbox=\"allow-scripts allow-same-origin\"\r\n              title=\"Questionnaire Preview\"\r\n            />\r\n          </Box>\r\n        )}\r\n\r\n        {/* Response Summary */}\r\n        {responseCount > 0 && (\r\n          <Card sx={{ m: 2, mt: 0 }} variant=\"outlined\">\r\n            <CardContent sx={{ py: 2 }}>\r\n              <Typography variant=\"subtitle2\" gutterBottom>\r\n                Responses Collected: {responseCount}\r\n              </Typography>\r\n              <Box sx={{ maxHeight: 100, overflow: 'auto' }}>\r\n                {Object.entries(responses).map(([questionId, response]) => (\r\n                  <Typography key={questionId} variant=\"body2\" color=\"text.secondary\">\r\n                    {questionId}: {JSON.stringify(response.answer).substring(0, 50)}...\r\n                  </Typography>\r\n                ))}\r\n              </Box>\r\n            </CardContent>\r\n          </Card>\r\n        )}\r\n      </DialogContent>\r\n\r\n      <DialogActions sx={{ p: 2, borderTop: 1, borderColor: 'divider' }}>\r\n        <Button onClick={onClose} disabled={isSubmitting}>\r\n          Cancel\r\n        </Button>\r\n        <Button\r\n          onClick={handleSubmit}\r\n          variant=\"contained\"\r\n          disabled={responseCount === 0 || isSubmitting}\r\n          startIcon={isSubmitting ? <CircularProgress size={16} /> : <SendIcon />}\r\n        >\r\n          {isSubmitting ? 'Submitting...' : 'Submit Responses'}\r\n        </Button>\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default QuestionnairePreview; ","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  Typography,\r\n  Button,\r\n  Box,\r\n  Grid,\r\n  Chip,\r\n  LinearProgress,\r\n  Alert,\r\n  Paper,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemSecondaryAction,\r\n  IconButton,\r\n  Divider,\r\n  CircularProgress,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Accordion,\r\n  AccordionSummary,\r\n  AccordionDetails,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Badge,\r\n  Tooltip\r\n} from '@mui/material';\r\nimport {\r\n  Search as SearchIcon,\r\n  Refresh as RefreshIcon,\r\n  PlayArrow as StartIcon,\r\n  Stop as StopIcon,\r\n  Schedule as ScheduleIcon,\r\n  Folder as FolderIcon,\r\n  Description as FileIcon,\r\n  Code as CodeIcon,\r\n  Security as SecurityIcon,\r\n  Info as InfoIcon,\r\n  ExpandMore as ExpandMoreIcon,\r\n  Visibility as ViewIcon,\r\n  Assessment as StatsIcon,\r\n  Timeline as TimelineIcon,\r\n  AutoMode as AutoIcon\r\n} from '@mui/icons-material';\r\n\r\ninterface DiscoveryStatus {\r\n  status: string;\r\n  version?: string;\r\n  totalFiles?: number;\r\n  categories?: number;\r\n  lastDiscovery?: string;\r\n  indexPath?: string;\r\n  message?: string;\r\n  error?: string;\r\n}\r\n\r\ninterface DiscoverySummary {\r\n  timestamp: string;\r\n  totalFiles: number;\r\n  categories: Record<string, number>;\r\n  types: Record<string, number>;\r\n  topCategories: Array<{ category: string; count: number }>;\r\n  averageFileSize: number;\r\n  totalSize: number;\r\n}\r\n\r\ninterface BigBookIndex {\r\n  version: string;\r\n  createdAt: string;\r\n  totalFiles: number;\r\n  categories: Record<string, { files: any[]; count: number }>;\r\n  files: Record<string, any>;\r\n}\r\n\r\ninterface FileMetadata {\r\n  id: string;\r\n  originalPath: string;\r\n  name: string;\r\n  extension: string;\r\n  size: number;\r\n  classification: {\r\n    type: string;\r\n    category: string;\r\n    confidence: number;\r\n  };\r\n  metadata: {\r\n    fileStats: {\r\n      lines: number;\r\n      characters: number;\r\n      words: number;\r\n    };\r\n    dependencies: any[];\r\n    security: {\r\n      findings: any[];\r\n      hasSecurityIssues: boolean;\r\n    };\r\n    complexity: any;\r\n  };\r\n}\r\n\r\nconst OMAIDiscoveryPanel: React.FC = () => {\r\n  const [status, setStatus] = useState<DiscoveryStatus | null>(null);\r\n  const [summary, setSummary] = useState<DiscoverySummary | null>(null);\r\n  const [index, setIndex] = useState<BigBookIndex | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [discovering, setDiscovering] = useState(false);\r\n  const [selectedCategory, setSelectedCategory] = useState<string | null>(null);\r\n  const [categoryFiles, setCategoryFiles] = useState<any[]>([]);\r\n  const [selectedFile, setSelectedFile] = useState<FileMetadata | null>(null);\r\n  const [fileContent, setFileContent] = useState<string>('');\r\n  const [fileDialogOpen, setFileDialogOpen] = useState(false);\r\n  const [scheduleDialogOpen, setScheduleDialogOpen] = useState(false);\r\n  const [scheduleHours, setScheduleHours] = useState(24);\r\n  const [learningLoading, setLearningLoading] = useState(false);\r\n  const [learningStatus, setLearningStatus] = useState<any>(null);\r\n  const [learningDialogOpen, setLearningDialogOpen] = useState(false);\r\n\r\n  // Load initial data\r\n  useEffect(() => {\r\n    loadStatus();\r\n    loadSummary();\r\n    loadIndex();\r\n    loadLearningStatus();\r\n  }, []);\r\n\r\n  const loadStatus = async () => {\r\n    try {\r\n      const response = await fetch('/api/bigbook/omai/status');\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setStatus(data.status);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load OMAI status:', error);\r\n    }\r\n  };\r\n\r\n  const loadSummary = async () => {\r\n    try {\r\n      const response = await fetch('/api/bigbook/omai/summary');\r\n      const data = await response.json();\r\n      if (data.success && data.summary) {\r\n        setSummary(data.summary);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load discovery summary:', error);\r\n    }\r\n  };\r\n\r\n  const loadIndex = async () => {\r\n    try {\r\n      const response = await fetch('/api/bigbook/omai/index');\r\n      const data = await response.json();\r\n      if (data.success && data.index) {\r\n        setIndex(data.index);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load Big Book index:', error);\r\n    }\r\n  };\r\n\r\n  const initializeOMAI = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await fetch('/api/bigbook/omai/initialize', {\r\n        method: 'POST'\r\n      });\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        await loadStatus();\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to initialize OMAI:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const startDiscovery = async () => {\r\n    setDiscovering(true);\r\n    try {\r\n      const response = await fetch('/api/bigbook/omai/discover', {\r\n        method: 'POST'\r\n      });\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        // Poll for completion\r\n        const pollInterval = setInterval(async () => {\r\n          await loadStatus();\r\n          await loadSummary();\r\n          await loadIndex();\r\n        }, 5000);\r\n\r\n        // Stop polling after 5 minutes\r\n        setTimeout(() => {\r\n          clearInterval(pollInterval);\r\n          setDiscovering(false);\r\n        }, 300000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to start discovery:', error);\r\n      setDiscovering(false);\r\n    }\r\n  };\r\n\r\n  const loadCategoryFiles = async (category: string) => {\r\n    try {\r\n      const encodedCategory = category.toLowerCase().replace(/[^a-z0-9]/g, '_');\r\n      const response = await fetch(`/api/bigbook/omai/category/${encodedCategory}`);\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setCategoryFiles(data.files);\r\n        setSelectedCategory(category);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load category files:', error);\r\n    }\r\n  };\r\n\r\n  const loadFileDetails = async (fileId: string) => {\r\n    try {\r\n      const [metadataResponse, contentResponse] = await Promise.all([\r\n        fetch(`/api/bigbook/omai/file/${fileId}`),\r\n        fetch(`/api/bigbook/omai/file/${fileId}/content`)\r\n      ]);\r\n\r\n      const metadataData = await metadataResponse.json();\r\n      const contentData = await contentResponse.json();\r\n\r\n      if (metadataData.success && contentData.success) {\r\n        setSelectedFile(metadataData.file);\r\n        setFileContent(contentData.content);\r\n        setFileDialogOpen(true);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load file details:', error);\r\n    }\r\n  };\r\n\r\n  const scheduleDiscovery = async () => {\r\n    try {\r\n      const response = await fetch('/api/bigbook/omai/schedule', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ intervalHours: scheduleHours })\r\n      });\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setScheduleDialogOpen(false);\r\n        await loadStatus();\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to schedule discovery:', error);\r\n    }\r\n  };\r\n\r\n  const loadLearningStatus = async () => {\r\n    try {\r\n      const response = await fetch('/api/omai/learning-status');\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setLearningStatus(data);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load learning status:', error);\r\n    }\r\n  };\r\n\r\n  const refreshLearning = async () => {\r\n    setLearningLoading(true);\r\n    try {\r\n      const response = await fetch('/api/omai/learn-now', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ forceRefresh: true })\r\n      });\r\n      const data = await response.json();\r\n      \r\n      if (data.success) {\r\n        setLearningDialogOpen(true);\r\n        await loadLearningStatus();\r\n      } else {\r\n        console.error('Learning refresh failed:', data.error);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to refresh learning:', error);\r\n    } finally {\r\n      setLearningLoading(false);\r\n    }\r\n  };\r\n\r\n  const formatFileSize = (bytes: number) => {\r\n    if (bytes === 0) return '0 Bytes';\r\n    const k = 1024;\r\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\r\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\r\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\r\n  };\r\n\r\n  const getStatusColor = (status: string) => {\r\n    switch (status) {\r\n      case 'ready': return 'success';\r\n      case 'not_initialized': return 'warning';\r\n      case 'error': return 'error';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const getCategoryIcon = (category: string) => {\r\n    if (category.includes('DevOps')) return <CodeIcon />;\r\n    if (category.includes('Documentation')) return <FileIcon />;\r\n    if (category.includes('Backend')) return <CodeIcon />;\r\n    if (category.includes('Frontend')) return <CodeIcon />;\r\n    return <FolderIcon />;\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ p: 3 }}>\r\n      {/* Header */}\r\n      <Card sx={{ mb: 3 }}>\r\n        <CardContent>\r\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\r\n            <Typography variant=\"h5\" component=\"h2\">\r\n              <AutoIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n              OMAI Path Discovery\r\n            </Typography>\r\n            <Box>\r\n              <Button\r\n                variant=\"outlined\"\r\n                startIcon={<RefreshIcon />}\r\n                onClick={loadStatus}\r\n                sx={{ mr: 1 }}\r\n              >\r\n                Refresh\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                startIcon={learningLoading ? <CircularProgress size={16} /> : <AutoIcon />}\r\n                onClick={refreshLearning}\r\n                disabled={learningLoading}\r\n                sx={{ mr: 1 }}\r\n              >\r\n                {learningLoading ? 'Learning...' : 'Refresh Learning'}\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                startIcon={<ScheduleIcon />}\r\n                onClick={() => setScheduleDialogOpen(true)}\r\n              >\r\n                Schedule\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n\r\n          {/* Status */}\r\n          {status && (\r\n            <Alert \r\n              severity={getStatusColor(status.status) as any}\r\n              sx={{ mb: 2 }}\r\n            >\r\n              <Typography variant=\"body2\">\r\n                <strong>Status:</strong> {status.status}\r\n                {status.message && ` - ${status.message}`}\r\n                {status.totalFiles && ` | ${status.totalFiles} files indexed`}\r\n                {status.lastDiscovery && ` | Last discovery: ${new Date(status.lastDiscovery).toLocaleString()}`}\r\n              </Typography>\r\n            </Alert>\r\n          )}\r\n\r\n          {/* Control Buttons */}\r\n          <Box display=\"flex\" gap={2}>\r\n            {status?.status === 'not_initialized' && (\r\n              <Button\r\n                variant=\"contained\"\r\n                startIcon={<StartIcon />}\r\n                onClick={initializeOMAI}\r\n                disabled={loading}\r\n              >\r\n                {loading ? <CircularProgress size={20} /> : 'Initialize OMAI'}\r\n              </Button>\r\n            )}\r\n            \r\n            {status?.status === 'ready' && (\r\n              <Button\r\n                variant=\"contained\"\r\n                startIcon={discovering ? <CircularProgress size={20} /> : <SearchIcon />}\r\n                onClick={startDiscovery}\r\n                disabled={discovering}\r\n              >\r\n                {discovering ? 'Discovering...' : 'Start Discovery'}\r\n              </Button>\r\n            )}\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Discovery Summary */}\r\n      {summary && (\r\n        <Card sx={{ mb: 3 }}>\r\n          <CardContent>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              <StatsIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n              Discovery Summary\r\n            </Typography>\r\n            \r\n            <Grid container spacing={3}>\r\n              <Grid item xs={12} sm={6} md={3}>\r\n                <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                  <Typography variant=\"h4\" color=\"primary\">\r\n                    {summary.totalFiles}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Total Files\r\n                  </Typography>\r\n                </Paper>\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} sm={6} md={3}>\r\n                <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                  <Typography variant=\"h4\" color=\"success.main\">\r\n                    {Object.keys(summary.categories).length}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Categories\r\n                  </Typography>\r\n                </Paper>\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} sm={6} md={3}>\r\n                <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                  <Typography variant=\"h4\" color=\"info.main\">\r\n                    {formatFileSize(summary.totalSize)}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Total Size\r\n                  </Typography>\r\n                </Paper>\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} sm={6} md={3}>\r\n                <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                  <Typography variant=\"h4\" color=\"warning.main\">\r\n                    {formatFileSize(summary.averageFileSize)}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Avg File Size\r\n                  </Typography>\r\n                </Paper>\r\n              </Grid>\r\n            </Grid>\r\n\r\n            {/* Top Categories */}\r\n            <Box mt={3}>\r\n              <Typography variant=\"subtitle1\" gutterBottom>\r\n                Top Categories\r\n              </Typography>\r\n              <Grid container spacing={1}>\r\n                {summary.topCategories.slice(0, 6).map((category, index) => (\r\n                  <Grid item key={index}>\r\n                    <Chip\r\n                      label={`${category.category}: ${category.count}`}\r\n                      variant=\"outlined\"\r\n                      size=\"small\"\r\n                      clickable\r\n                      onClick={() => loadCategoryFiles(category.category)}\r\n                    />\r\n                  </Grid>\r\n                ))}\r\n              </Grid>\r\n            </Box>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* File Index */}\r\n      {index && (\r\n        <Card>\r\n          <CardContent>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              <FolderIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n              File Index - {index.totalFiles} Files\r\n            </Typography>\r\n\r\n            {/* Categories */}\r\n            <Box mb={2}>\r\n              {Object.entries(index.categories).map(([category, data]) => (\r\n                <Accordion key={category}>\r\n                  <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                    <Box display=\"flex\" alignItems=\"center\" width=\"100%\">\r\n                      {getCategoryIcon(category)}\r\n                      <Typography sx={{ ml: 1, flex: 1 }}>\r\n                        {category}\r\n                      </Typography>\r\n                      <Badge badgeContent={data.count} color=\"primary\" sx={{ mr: 2 }} />\r\n                    </Box>\r\n                  </AccordionSummary>\r\n                  <AccordionDetails>\r\n                    <TableContainer>\r\n                      <Table size=\"small\">\r\n                        <TableHead>\r\n                          <TableRow>\r\n                            <TableCell>Name</TableCell>\r\n                            <TableCell>Type</TableCell>\r\n                            <TableCell>Size</TableCell>\r\n                            <TableCell>Modified</TableCell>\r\n                            <TableCell>Actions</TableCell>\r\n                          </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                          {data.files.slice(0, 10).map((file) => (\r\n                            <TableRow key={file.id}>\r\n                              <TableCell>\r\n                                <Typography variant=\"body2\" noWrap>\r\n                                  {file.name}\r\n                                </Typography>\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <Chip label={file.type} size=\"small\" variant=\"outlined\" />\r\n                              </TableCell>\r\n                              <TableCell>{formatFileSize(file.size)}</TableCell>\r\n                              <TableCell>\r\n                                {new Date(file.modified).toLocaleDateString()}\r\n                              </TableCell>\r\n                              <TableCell>\r\n                                <IconButton\r\n                                  size=\"small\"\r\n                                  onClick={() => loadFileDetails(file.id)}\r\n                                >\r\n                                  <ViewIcon />\r\n                                </IconButton>\r\n                              </TableCell>\r\n                            </TableRow>\r\n                          ))}\r\n                        </TableBody>\r\n                      </Table>\r\n                    </TableContainer>\r\n                    {data.files.length > 10 && (\r\n                      <Typography variant=\"caption\" sx={{ mt: 1, display: 'block' }}>\r\n                        Showing 10 of {data.files.length} files\r\n                      </Typography>\r\n                    )}\r\n                  </AccordionDetails>\r\n                </Accordion>\r\n              ))}\r\n            </Box>\r\n          </CardContent>\r\n        </Card>\r\n      )}\r\n\r\n      {/* File Details Dialog */}\r\n      <Dialog \r\n        open={fileDialogOpen} \r\n        onClose={() => setFileDialogOpen(false)}\r\n        maxWidth=\"lg\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>\r\n          {selectedFile?.name}\r\n          {selectedFile?.metadata.security.hasSecurityIssues && (\r\n            <Chip\r\n              icon={<SecurityIcon />}\r\n              label=\"Security Redacted\"\r\n              color=\"warning\"\r\n              size=\"small\"\r\n              sx={{ ml: 2 }}\r\n            />\r\n          )}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {selectedFile && (\r\n            <Box>\r\n              {/* Metadata */}\r\n              <Grid container spacing={2} mb={3}>\r\n                <Grid item xs={12} sm={6}>\r\n                  <Typography variant=\"subtitle2\">Classification</Typography>\r\n                  <Typography variant=\"body2\">{selectedFile.classification.type}</Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    {selectedFile.classification.category}\r\n                  </Typography>\r\n                </Grid>\r\n                <Grid item xs={12} sm={6}>\r\n                  <Typography variant=\"subtitle2\">File Stats</Typography>\r\n                  <Typography variant=\"body2\">\r\n                    {selectedFile.metadata.fileStats.lines} lines, {' '}\r\n                    {selectedFile.metadata.fileStats.words} words, {' '}\r\n                    {formatFileSize(selectedFile.size)}\r\n                  </Typography>\r\n                </Grid>\r\n              </Grid>\r\n\r\n              {/* Content */}\r\n              <Typography variant=\"subtitle2\" gutterBottom>\r\n                Content Preview\r\n              </Typography>\r\n              <TextField\r\n                multiline\r\n                rows={20}\r\n                fullWidth\r\n                variant=\"outlined\"\r\n                value={fileContent}\r\n                InputProps={{\r\n                  readOnly: true,\r\n                  sx: { fontFamily: 'monospace', fontSize: '0.875rem' }\r\n                }}\r\n              />\r\n            </Box>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setFileDialogOpen(false)}>Close</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Learning Status Dialog */}\r\n      <Dialog \r\n        open={learningDialogOpen} \r\n        onClose={() => setLearningDialogOpen(false)}\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>\r\n          <AutoIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n          OMAI Learning Refresh Complete\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {learningStatus && (\r\n            <Box>\r\n              <Alert severity=\"success\" sx={{ mb: 2 }}>\r\n                Learning refresh completed successfully! OMAI has updated its knowledge base.\r\n              </Alert>\r\n              \r\n              <Grid container spacing={2}>\r\n                <Grid item xs={12} sm={6}>\r\n                  <Typography variant=\"subtitle2\" gutterBottom>Learning Status</Typography>\r\n                  <Typography variant=\"body2\">\r\n                    Active: {learningStatus.learning?.isActive ? 'Yes' : 'No'}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    Last Run: {learningStatus.learning?.lastRun ? \r\n                      new Date(learningStatus.learning.lastRun).toLocaleString() : 'Never'}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    Files Processed: {learningStatus.learning?.totalFilesProcessed || 0}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    Memory Cache: {learningStatus.learning?.memoryCacheSize || 0} entries\r\n                  </Typography>\r\n                </Grid>\r\n                \r\n                <Grid item xs={12} sm={6}>\r\n                  <Typography variant=\"subtitle2\" gutterBottom>Learning Sources</Typography>\r\n                  <List dense>\r\n                    {learningStatus.sources && Object.entries(learningStatus.sources).map(([key, source]: [string, any]) => (\r\n                      <ListItem key={key} divider>\r\n                        <ListItemText \r\n                          primary={source.path}\r\n                          secondary={`${source.type} (${source.priority} priority)`}\r\n                        />\r\n                      </ListItem>\r\n                    ))}\r\n                  </List>\r\n                </Grid>\r\n              </Grid>\r\n              \r\n              <Box mt={2}>\r\n                <Typography variant=\"subtitle2\" gutterBottom>Registered OMAI Agents</Typography>\r\n                <Box>\r\n                  {learningStatus.agents?.registered?.map((agentId: string) => (\r\n                    <Chip key={agentId} label={agentId} size=\"small\" sx={{ mr: 1, mb: 1 }} />\r\n                  ))}\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setLearningDialogOpen(false)}>Close</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Schedule Dialog */}\r\n      <Dialog open={scheduleDialogOpen} onClose={() => setScheduleDialogOpen(false)}>\r\n        <DialogTitle>Schedule Discovery</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            autoFocus\r\n            margin=\"dense\"\r\n            label=\"Interval (hours)\"\r\n            type=\"number\"\r\n            fullWidth\r\n            variant=\"outlined\"\r\n            value={scheduleHours}\r\n            onChange={(e) => setScheduleHours(parseInt(e.target.value) || 24)}\r\n            helperText=\"How often should OMAI scan for new/changed files?\"\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setScheduleDialogOpen(false)}>Cancel</Button>\r\n          <Button onClick={scheduleDiscovery} variant=\"contained\">\r\n            Schedule\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default OMAIDiscoveryPanel; ","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Button,\r\n  TextField,\r\n  FormControl,\r\n  FormLabel,\r\n  FormControlLabel,\r\n  Switch,\r\n  Box,\r\n  Typography,\r\n  Alert,\r\n  Stepper,\r\n  Step,\r\n  StepLabel,\r\n  CircularProgress,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  Chip,\r\n  Divider,\r\n  Card,\r\n  CardContent,\r\n  Grid,\r\n  Paper,\r\n  Accordion,\r\n  AccordionSummary,\r\n  AccordionDetails\r\n} from '@mui/material';\r\nimport {\r\n  Extension as ComponentIcon,\r\n  Folder as FolderIcon,\r\n  GetApp as InstallIcon,\r\n  Visibility as PreviewIcon,\r\n  Warning as WarningIcon,\r\n  CheckCircle as CheckIcon,\r\n  Error as ErrorIcon,\r\n  Code as CodeIcon,\r\n  Storage as RegistryIcon,\r\n  ExpandMore as ExpandMoreIcon\r\n} from '@mui/icons-material';\r\n\r\ninterface TSXComponentInfo {\r\n  fileName: string;\r\n  componentName: string;\r\n  isDefaultExport: boolean;\r\n  imports: string[];\r\n  content: string;\r\n  size: number;\r\n  isValid: boolean;\r\n  errors: string[];\r\n  warnings: string[];\r\n  missingPackages: string[];\r\n  hasJSX: boolean;\r\n  hasHooks: boolean;\r\n  dependencies: string[];\r\n}\r\n\r\ninterface InstallationOptions {\r\n  targetDirectory: string;\r\n  installMissingPackages: boolean;\r\n  registerInRegistry: boolean;\r\n  openPreview: boolean;\r\n  overwriteExisting: boolean;\r\n  bigBookAutoInstall: boolean;\r\n}\r\n\r\ninterface TSXComponentInstallWizardProps {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  file: File | null;\r\n  onInstallComplete: (result: any) => void;\r\n  onConsoleMessage: (type: 'info' | 'success' | 'error' | 'warning', message: string) => void;\r\n}\r\n\r\nconst TSXComponentInstallWizard: React.FC<TSXComponentInstallWizardProps> = ({\r\n  open,\r\n  onClose,\r\n  file,\r\n  onInstallComplete,\r\n  onConsoleMessage\r\n}) => {\r\n  const [activeStep, setActiveStep] = useState(0);\r\n  const [componentInfo, setComponentInfo] = useState<TSXComponentInfo | null>(null);\r\n  const [loading, setLoading] = useState(false);\r\n  const [installOptions, setInstallOptions] = useState<InstallationOptions>({\r\n    targetDirectory: 'src/components/',\r\n    installMissingPackages: true,\r\n    registerInRegistry: true,\r\n    openPreview: true,\r\n    overwriteExisting: false,\r\n    bigBookAutoInstall: false\r\n  });\r\n  const [installationResult, setInstallationResult] = useState<any>(null);\r\n  const [availableDirectories, setAvailableDirectories] = useState<string[]>([\r\n    'src/components/',\r\n    'src/components/admin/',\r\n    '@/shared/ui/',\r\n    'src/components/custom/',\r\n    'src/pages/',\r\n    'src/views/',\r\n    'src/addons/'\r\n  ]);\r\n\r\n  const steps = ['Parse & Validate', 'Configure Installation', 'Install Component'];\r\n\r\n  // Parse the .tsx file when dialog opens\r\n  useEffect(() => {\r\n    if (open && file && activeStep === 0) {\r\n      parseComponentFile();\r\n    }\r\n  }, [open, file, activeStep]);\r\n\r\n  const parseComponentFile = async () => {\r\n    if (!file) return;\r\n\r\n    setLoading(true);\r\n    onConsoleMessage('info', `ðŸ” Parsing .tsx file: ${file.name}`);\r\n\r\n    try {\r\n      const content = await file.text();\r\n      \r\n      const response = await fetch('/api/bigbook/parse-tsx-component', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        credentials: 'include',\r\n        body: JSON.stringify({\r\n          fileName: file.name,\r\n          content: content\r\n        })\r\n      });\r\n\r\n      // Check for authentication errors first\r\n      if (response.status === 401 || response.status === 403) {\r\n        onConsoleMessage('error', `ðŸ” Authentication required: Please log in as super_admin or editor to use Big Book auto-install`);\r\n        return;\r\n      }\r\n\r\n      // Check for other HTTP errors\r\n      if (!response.ok) {\r\n        onConsoleMessage('error', `âŒ Server error: HTTP ${response.status} - ${response.statusText}`);\r\n        return;\r\n      }\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        setComponentInfo(result.componentInfo);\r\n        onConsoleMessage('success', `âœ… Component parsed successfully: ${result.componentInfo.componentName}`);\r\n        \r\n        if (result.componentInfo.warnings.length > 0) {\r\n          result.componentInfo.warnings.forEach((warning: string) => {\r\n            onConsoleMessage('warning', `âš ï¸ ${warning}`);\r\n          });\r\n        }\r\n        \r\n        setActiveStep(1); // Move to configuration step\r\n      } else {\r\n        onConsoleMessage('error', `âŒ Failed to parse component: ${result.error}`);\r\n        result.errors?.forEach((error: string) => {\r\n          onConsoleMessage('error', `âŒ ${error}`);\r\n        });\r\n      }\r\n    } catch (error) {\r\n      onConsoleMessage('error', `âŒ Parse error: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleInstallComponent = async () => {\r\n    if (!componentInfo) return;\r\n\r\n    setLoading(true);\r\n    setActiveStep(2);\r\n    onConsoleMessage('info', `ðŸš€ Installing component: ${componentInfo.componentName}`);\r\n\r\n    try {\r\n      // Choose installation endpoint based on Big Book auto-install option\r\n      const endpoint = installOptions.bigBookAutoInstall \r\n        ? '/api/bigbook/install-bigbook-component'\r\n        : '/api/bigbook/install-tsx-component';\r\n      \r\n      onConsoleMessage('info', installOptions.bigBookAutoInstall \r\n        ? 'ðŸ“š Installing as Big Book custom component with auto-menu integration...'\r\n        : 'ðŸ§© Installing as standard TSX component...');\r\n\r\n      const response = await fetch(endpoint, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        credentials: 'include',\r\n        body: JSON.stringify({\r\n          componentInfo,\r\n          installOptions\r\n        })\r\n      });\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        setInstallationResult(result);\r\n        onConsoleMessage('success', `ðŸŽ‰ Component installed successfully!`);\r\n        onConsoleMessage('info', `ðŸ“ Location: ${result.installedPath}`);\r\n        \r\n        if (result.packagesInstalled && result.packagesInstalled.length > 0) {\r\n          onConsoleMessage('success', `ðŸ“¦ Packages installed: ${result.packagesInstalled.join(', ')}`);\r\n        }\r\n        \r\n        if (result.registryUpdated) {\r\n          onConsoleMessage('success', `ðŸ“ Component registered in registry`);\r\n        }\r\n        \r\n        if (result.menuUpdated) {\r\n          onConsoleMessage('success', `ðŸ§© Component added to Big Book sidebar menu`);\r\n        }\r\n        \r\n        if (installOptions.openPreview && result.previewUrl) {\r\n          onConsoleMessage('info', `ðŸ”— Preview available at: ${result.previewUrl}`);\r\n        }\r\n        \r\n        onInstallComplete(result);\r\n      } else {\r\n        onConsoleMessage('error', `âŒ Installation failed: ${result.error}`);\r\n      }\r\n    } catch (error) {\r\n      onConsoleMessage('error', `âŒ Installation error: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRemoveComponent = async () => {\r\n    if (!installationResult) return;\r\n\r\n    setLoading(true);\r\n    onConsoleMessage('info', `ðŸ—‘ï¸ Removing component: ${componentInfo?.componentName}`);\r\n\r\n    try {\r\n      // Choose removal endpoint based on installation type\r\n      const endpoint = installOptions.bigBookAutoInstall \r\n        ? '/api/bigbook/remove-bigbook-component'\r\n        : '/api/bigbook/remove-tsx-component';\r\n      \r\n      const response = await fetch(endpoint, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        credentials: 'include',\r\n        body: JSON.stringify({\r\n          installationResult\r\n        })\r\n      });\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        onConsoleMessage('success', `âœ… Component removed successfully`);\r\n        setInstallationResult(null);\r\n        setActiveStep(1); // Back to configuration\r\n      } else {\r\n        onConsoleMessage('error', `âŒ Removal failed: ${result.error}`);\r\n      }\r\n    } catch (error) {\r\n      onConsoleMessage('error', `âŒ Removal error: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const renderParseStep = () => (\r\n    <Box sx={{ mt: 2 }}>\r\n      {loading ? (\r\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" py={4}>\r\n          <CircularProgress sx={{ mr: 2 }} />\r\n          <Typography>Parsing component file...</Typography>\r\n        </Box>\r\n      ) : componentInfo ? (\r\n        <Box>\r\n          <Alert severity={componentInfo.isValid ? \"success\" : \"error\"} sx={{ mb: 2 }}>\r\n            <Typography variant=\"h6\">\r\n              {componentInfo.isValid ? \"Valid React Component\" : \"Invalid Component\"}\r\n            </Typography>\r\n            <Typography variant=\"body2\">\r\n              {componentInfo.componentName} ({componentInfo.size} bytes)\r\n            </Typography>\r\n          </Alert>\r\n\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={6}>\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"h6\" gutterBottom>\r\n                    <CodeIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n                    Component Details\r\n                  </Typography>\r\n                  <List dense>\r\n                    <ListItem>\r\n                      <ListItemText \r\n                        primary=\"Component Name\" \r\n                        secondary={componentInfo.componentName}\r\n                      />\r\n                    </ListItem>\r\n                    <ListItem>\r\n                      <ListItemText \r\n                        primary=\"Export Type\" \r\n                        secondary={componentInfo.isDefaultExport ? \"Default Export\" : \"Named Export\"}\r\n                      />\r\n                    </ListItem>\r\n                    <ListItem>\r\n                      <ListItemText \r\n                        primary=\"Uses JSX\" \r\n                        secondary={componentInfo.hasJSX ? \"Yes\" : \"No\"}\r\n                      />\r\n                    </ListItem>\r\n                    <ListItem>\r\n                      <ListItemText \r\n                        primary=\"Uses Hooks\" \r\n                        secondary={componentInfo.hasHooks ? \"Yes\" : \"No\"}\r\n                      />\r\n                    </ListItem>\r\n                  </List>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={6}>\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"h6\" gutterBottom>\r\n                    <InstallIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n                    Dependencies\r\n                  </Typography>\r\n                  \r\n                  {componentInfo.imports.length > 0 ? (\r\n                    <Box sx={{ mb: 2 }}>\r\n                      <Typography variant=\"subtitle2\" gutterBottom>Imports:</Typography>\r\n                      {componentInfo.imports.map((imp, index) => (\r\n                        <Chip key={index} label={imp} size=\"small\" sx={{ mr: 0.5, mb: 0.5 }} />\r\n                      ))}\r\n                    </Box>\r\n                  ) : null}\r\n                  \r\n                  {componentInfo.missingPackages.length > 0 ? (\r\n                    <Box>\r\n                      <Typography variant=\"subtitle2\" gutterBottom color=\"warning.main\">\r\n                        Missing Packages:\r\n                      </Typography>\r\n                      {componentInfo.missingPackages.map((pkg, index) => (\r\n                        <Chip \r\n                          key={index} \r\n                          label={pkg} \r\n                          size=\"small\" \r\n                          color=\"warning\" \r\n                          sx={{ mr: 0.5, mb: 0.5 }} \r\n                        />\r\n                      ))}\r\n                    </Box>\r\n                  ) : (\r\n                    <Typography variant=\"body2\" color=\"success.main\">\r\n                      All dependencies available\r\n                    </Typography>\r\n                  )}\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {(componentInfo.errors.length > 0 || componentInfo.warnings.length > 0) && (\r\n            <Accordion sx={{ mt: 2 }}>\r\n              <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n                <Typography>\r\n                  Issues ({componentInfo.errors.length} errors, {componentInfo.warnings.length} warnings)\r\n                </Typography>\r\n              </AccordionSummary>\r\n              <AccordionDetails>\r\n                {componentInfo.errors.map((error, index) => (\r\n                  <Alert key={index} severity=\"error\" sx={{ mb: 1 }}>\r\n                    {error}\r\n                  </Alert>\r\n                ))}\r\n                {componentInfo.warnings.map((warning, index) => (\r\n                  <Alert key={index} severity=\"warning\" sx={{ mb: 1 }}>\r\n                    {warning}\r\n                  </Alert>\r\n                ))}\r\n              </AccordionDetails>\r\n            </Accordion>\r\n          )}\r\n        </Box>\r\n      ) : (\r\n        <Alert severity=\"info\">\r\n          Drop a .tsx file to begin parsing...\r\n        </Alert>\r\n      )}\r\n    </Box>\r\n  );\r\n\r\n  const renderConfigStep = () => (\r\n    <Box sx={{ mt: 2 }}>\r\n      <Typography variant=\"h6\" gutterBottom>\r\n        Installation Configuration\r\n      </Typography>\r\n\r\n      <Grid container spacing={3}>\r\n        <Grid item xs={12}>\r\n          <Paper sx={{ p: 2, mb: 2, bgcolor: 'primary.50', border: '1px solid', borderColor: 'primary.200' }}>\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={installOptions.bigBookAutoInstall}\r\n                  onChange={(e) => {\r\n                    const isEnabled = e.target.checked;\r\n                    setInstallOptions(prev => ({ \r\n                      ...prev, \r\n                      bigBookAutoInstall: isEnabled,\r\n                      targetDirectory: isEnabled ? 'src/components/bigbook/custom' : 'src/components/',\r\n                      registerInRegistry: true // Always register for Big Book components\r\n                    }));\r\n                  }}\r\n                  color=\"primary\"\r\n                />\r\n              }\r\n              label={\r\n                <Box>\r\n                  <Typography variant=\"subtitle1\" fontWeight={600} color=\"primary.main\">\r\n                    ðŸš€ Big Book Auto-Install Mode\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Install as Big Book custom component with automatic menu integration and routing\r\n                  </Typography>\r\n                </Box>\r\n              }\r\n            />\r\n          </Paper>\r\n        </Grid>\r\n\r\n        <Grid item xs={12}>\r\n          <FormControl fullWidth>\r\n            <FormLabel>Target Directory</FormLabel>\r\n            <TextField\r\n              select\r\n              value={installOptions.targetDirectory}\r\n              onChange={(e) => setInstallOptions(prev => ({ ...prev, targetDirectory: e.target.value }))}\r\n              SelectProps={{ native: true }}\r\n              sx={{ mt: 1 }}\r\n              disabled={installOptions.bigBookAutoInstall}\r\n              helperText={installOptions.bigBookAutoInstall ? \"Directory is automatically set for Big Book components\" : \"Choose where to install the component\"}\r\n            >\r\n              {availableDirectories.map((dir) => (\r\n                <option key={dir} value={dir}>{dir}</option>\r\n              ))}\r\n            </TextField>\r\n          </FormControl>\r\n        </Grid>\r\n\r\n        <Grid item xs={12}>\r\n          <Paper sx={{ p: 2 }}>\r\n            <Typography variant=\"subtitle1\" gutterBottom>Installation Options</Typography>\r\n            \r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={installOptions.installMissingPackages}\r\n                  onChange={(e) => setInstallOptions(prev => ({ ...prev, installMissingPackages: e.target.checked }))}\r\n                />\r\n              }\r\n              label={\r\n                <Box>\r\n                  <Typography variant=\"body2\">Install Missing NPM Packages</Typography>\r\n                  <Typography variant=\"caption\" color=\"text.secondary\">\r\n                    Automatically install any missing dependencies\r\n                  </Typography>\r\n                </Box>\r\n              }\r\n            />\r\n\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={installOptions.registerInRegistry}\r\n                  onChange={(e) => setInstallOptions(prev => ({ ...prev, registerInRegistry: e.target.checked }))}\r\n                />\r\n              }\r\n              label={\r\n                <Box>\r\n                  <Typography variant=\"body2\">Register in Component Registry</Typography>\r\n                  <Typography variant=\"caption\" color=\"text.secondary\">\r\n                    Add component to the system registry for discovery\r\n                  </Typography>\r\n                </Box>\r\n              }\r\n            />\r\n\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={installOptions.openPreview}\r\n                  onChange={(e) => setInstallOptions(prev => ({ ...prev, openPreview: e.target.checked }))}\r\n                />\r\n              }\r\n              label={\r\n                <Box>\r\n                  <Typography variant=\"body2\">Open Component Preview</Typography>\r\n                  <Typography variant=\"caption\" color=\"text.secondary\">\r\n                    Launch component preview after installation\r\n                  </Typography>\r\n                </Box>\r\n              }\r\n            />\r\n\r\n            <FormControlLabel\r\n              control={\r\n                <Switch\r\n                  checked={installOptions.overwriteExisting}\r\n                  onChange={(e) => setInstallOptions(prev => ({ ...prev, overwriteExisting: e.target.checked }))}\r\n                />\r\n              }\r\n              label={\r\n                <Box>\r\n                  <Typography variant=\"body2\">Overwrite Existing Files</Typography>\r\n                  <Typography variant=\"caption\" color=\"text.secondary\">\r\n                    Replace files if they already exist\r\n                  </Typography>\r\n                </Box>\r\n              }\r\n            />\r\n          </Paper>\r\n        </Grid>\r\n      </Grid>\r\n    </Box>\r\n  );\r\n\r\n  const renderInstallStep = () => (\r\n    <Box sx={{ mt: 2 }}>\r\n      {loading ? (\r\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"center\" py={4}>\r\n          <CircularProgress sx={{ mr: 2 }} />\r\n          <Typography>Installing component...</Typography>\r\n        </Box>\r\n      ) : installationResult ? (\r\n        <Box>\r\n          <Alert severity=\"success\" sx={{ mb: 2 }}>\r\n            <Typography variant=\"h6\">Component Installed Successfully!</Typography>\r\n            <Typography variant=\"body2\">\r\n              {componentInfo?.componentName} has been installed to {installationResult.installedPath}\r\n            </Typography>\r\n          </Alert>\r\n\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={6}>\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"h6\" gutterBottom>Installation Summary</Typography>\r\n                  <List dense>\r\n                    <ListItem>\r\n                      <ListItemIcon><FolderIcon /></ListItemIcon>\r\n                      <ListItemText \r\n                        primary=\"Installed to\" \r\n                        secondary={installationResult.installedPath}\r\n                      />\r\n                    </ListItem>\r\n                    {installationResult.packagesInstalled?.length > 0 && (\r\n                      <ListItem>\r\n                        <ListItemIcon><InstallIcon /></ListItemIcon>\r\n                        <ListItemText \r\n                          primary=\"Packages Installed\" \r\n                          secondary={installationResult.packagesInstalled.join(', ')}\r\n                        />\r\n                      </ListItem>\r\n                    )}\r\n                    {installationResult.registryUpdated && (\r\n                      <ListItem>\r\n                        <ListItemIcon><RegistryIcon /></ListItemIcon>\r\n                        <ListItemText \r\n                          primary=\"Registry Updated\" \r\n                          secondary=\"Component added to registry\"\r\n                        />\r\n                      </ListItem>\r\n                    )}\r\n                  </List>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n\r\n            <Grid item xs={12} md={6}>\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"h6\" gutterBottom>Quick Actions</Typography>\r\n                  <Box sx={{ display: 'flex', flexDirection: 'column', gap: 1 }}>\r\n                    {installationResult.previewUrl && (\r\n                      <Button\r\n                        variant=\"outlined\"\r\n                        startIcon={<PreviewIcon />}\r\n                        onClick={() => window.open(installationResult.previewUrl, '_blank')}\r\n                      >\r\n                        View Component Preview\r\n                      </Button>\r\n                    )}\r\n                    <Button\r\n                      variant=\"outlined\"\r\n                      color=\"error\"\r\n                      startIcon={<ErrorIcon />}\r\n                      onClick={handleRemoveComponent}\r\n                      disabled={loading}\r\n                    >\r\n                      Remove Component\r\n                    </Button>\r\n                  </Box>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          </Grid>\r\n        </Box>\r\n      ) : (\r\n        <Alert severity=\"info\">\r\n          Ready to install component...\r\n        </Alert>\r\n      )}\r\n    </Box>\r\n  );\r\n\r\n  return (\r\n    <Dialog open={open} onClose={onClose} maxWidth=\"md\" fullWidth>\r\n      <DialogTitle>\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          <ComponentIcon sx={{ mr: 1 }} />\r\n          TSX Component Installation\r\n        </Box>\r\n      </DialogTitle>\r\n\r\n      <DialogContent>\r\n        <Stepper activeStep={activeStep} sx={{ mb: 3 }}>\r\n          {steps.map((label) => (\r\n            <Step key={label}>\r\n              <StepLabel>{label}</StepLabel>\r\n            </Step>\r\n          ))}\r\n        </Stepper>\r\n\r\n        {activeStep === 0 && renderParseStep()}\r\n        {activeStep === 1 && renderConfigStep()}\r\n        {activeStep === 2 && renderInstallStep()}\r\n      </DialogContent>\r\n\r\n      <DialogActions>\r\n        <Button onClick={onClose}>\r\n          {installationResult ? 'Close' : 'Cancel'}\r\n        </Button>\r\n        \r\n        {/* Previous button */}\r\n        {activeStep > 0 && !installationResult && (\r\n          <Button onClick={() => setActiveStep(activeStep - 1)}>\r\n            Previous\r\n          </Button>\r\n        )}\r\n        \r\n        {/* Parse button for step 0 */}\r\n        {activeStep === 0 && !componentInfo && (\r\n          <Button\r\n            variant=\"contained\"\r\n            onClick={parseComponentFile}\r\n            disabled={loading || !file}\r\n            startIcon={loading ? <CircularProgress size={20} /> : <CodeIcon />}\r\n          >\r\n            Parse Component\r\n          </Button>\r\n        )}\r\n        \r\n        {/* Next button from step 0 to step 1 (after parsing) */}\r\n        {activeStep === 0 && componentInfo?.isValid && (\r\n          <Button\r\n            variant=\"contained\"\r\n            onClick={() => setActiveStep(1)}\r\n          >\r\n            Next: Configure\r\n          </Button>\r\n        )}\r\n        \r\n        {/* Next button from step 1 to step 2 (configure to install) */}\r\n        {activeStep === 1 && componentInfo && (\r\n          <Button\r\n            variant=\"contained\"\r\n            onClick={() => setActiveStep(2)}\r\n            disabled={!componentInfo.isValid}\r\n          >\r\n            Next: Install Component\r\n          </Button>\r\n        )}\r\n        \r\n        {/* Install button for step 2 */}\r\n        {activeStep === 2 && componentInfo?.isValid && !installationResult && (\r\n          <Button\r\n            variant=\"contained\"\r\n            onClick={handleInstallComponent}\r\n            disabled={loading}\r\n            startIcon={loading ? <CircularProgress size={20} /> : <InstallIcon />}\r\n            color=\"primary\"\r\n          >\r\n            Install Component\r\n          </Button>\r\n        )}\r\n      </DialogActions>\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default TSXComponentInstallWizard; ","import React, { useState, useEffect, Suspense, Component } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Alert,\r\n  CircularProgress,\r\n  Paper,\r\n  Breadcrumbs,\r\n  Link,\r\n  IconButton,\r\n  Tooltip\r\n} from '@mui/material';\r\nimport {\r\n  ArrowBack as ArrowBackIcon,\r\n  Refresh as RefreshIcon,\r\n  Error as ErrorIcon\r\n} from '@mui/icons-material';\r\n\r\n// Simple Error Boundary component\r\nclass ErrorBoundary extends Component<\r\n  { children: React.ReactNode; fallback: React.ReactNode },\r\n  { hasError: boolean }\r\n> {\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: any) {\r\n    return { hasError: true };\r\n  }\r\n\r\n  componentDidCatch(error: any, errorInfo: any) {\r\n    console.error('ErrorBoundary caught an error:', error, errorInfo);\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return this.props.fallback;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\ninterface BigBookCustomComponentViewerProps {\r\n  componentName: string;\r\n  onBack: () => void;\r\n  onError?: (error: string) => void;\r\n}\r\n\r\ninterface CustomComponentRegistry {\r\n  components: Record<string, {\r\n    id: string;\r\n    name: string;\r\n    path: string;\r\n    route: string;\r\n    displayName: string;\r\n    description?: string;\r\n    installedAt: string;\r\n    autoInstalled: boolean;\r\n    isDefaultExport: boolean;\r\n    hasJSX: boolean;\r\n    hasHooks: boolean;\r\n    dependencies: string[];\r\n  }>;\r\n  routes: Record<string, string>;\r\n  menu: Array<{\r\n    id: string;\r\n    name: string;\r\n    displayName: string;\r\n    route: string;\r\n    icon?: string;\r\n  }>;\r\n  lastUpdated: string | null;\r\n  version: string;\r\n}\r\n\r\nconst BigBookCustomComponentViewer: React.FC<BigBookCustomComponentViewerProps> = ({\r\n  componentName,\r\n  onBack,\r\n  onError\r\n}) => {\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [componentInfo, setComponentInfo] = useState<any>(null);\r\n  const [CustomComponent, setCustomComponent] = useState<React.ComponentType | null>(null);\r\n\r\n  useEffect(() => {\r\n    loadCustomComponent();\r\n  }, [componentName]);\r\n\r\n  const loadCustomComponent = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      // Load the custom component registry\r\n      const response = await fetch('/api/bigbook/custom-components-registry', {\r\n        credentials: 'include'\r\n      });\r\n      if (!response.ok) {\r\n        throw new Error('Failed to load custom components registry');\r\n      }\r\n\r\n      const registry: CustomComponentRegistry = await response.json();\r\n      const component = registry.components[componentName];\r\n\r\n      if (!component) {\r\n        throw new Error(`Component \"${componentName}\" not found in registry`);\r\n      }\r\n\r\n      setComponentInfo(component);\r\n\r\n      // Dynamically import the component\r\n      try {\r\n        // Convert the server path to a relative import path (matching BigBookDynamicRoute pattern)\r\n        const importPath = component.path.replace('src/', '../');\r\n        console.log(`ðŸ“¦ Importing component from: ${importPath}`);\r\n        \r\n        const module = await import(/* @vite-ignore */ importPath);\r\n        \r\n        let ComponentToRender;\r\n        if (component.isDefaultExport) {\r\n          ComponentToRender = module.default;\r\n        } else {\r\n          ComponentToRender = module[component.name];\r\n        }\r\n        \r\n        if (!ComponentToRender) {\r\n          throw new Error(`Component \"${componentName}\" not found in module`);\r\n        }\r\n\r\n        console.log('ðŸŽ‰ Component imported successfully');\r\n        setCustomComponent(() => ComponentToRender);\r\n      } catch (importError) {\r\n        console.error('Component import error:', importError);\r\n        throw new Error(`Failed to load component: ${importError instanceof Error ? importError.message : 'Unknown error'}`);\r\n      }\r\n\r\n    } catch (err) {\r\n      const errorMessage = err instanceof Error ? err.message : 'Unknown error occurred';\r\n      setError(errorMessage);\r\n      onError?.(errorMessage);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleRefresh = () => {\r\n    loadCustomComponent();\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Box \r\n        display=\"flex\" \r\n        justifyContent=\"center\" \r\n        alignItems=\"center\" \r\n        minHeight={300}\r\n        flexDirection=\"column\"\r\n        gap={2}\r\n      >\r\n        <CircularProgress />\r\n        <Typography variant=\"body2\" color=\"text.secondary\">\r\n          Loading custom component: {componentName}\r\n        </Typography>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <Box sx={{ p: 3 }}>\r\n        <Box display=\"flex\" alignItems=\"center\" gap={1} mb={2}>\r\n          <IconButton onClick={onBack} size=\"small\">\r\n            <ArrowBackIcon />\r\n          </IconButton>\r\n          <Typography variant=\"h6\">\r\n            Custom Component Error\r\n          </Typography>\r\n        </Box>\r\n        \r\n        <Alert \r\n          severity=\"error\" \r\n          sx={{ mb: 2 }}\r\n          action={\r\n            <Tooltip title=\"Retry loading component\">\r\n              <IconButton\r\n                color=\"inherit\"\r\n                size=\"small\"\r\n                onClick={handleRefresh}\r\n              >\r\n                <RefreshIcon fontSize=\"inherit\" />\r\n              </IconButton>\r\n            </Tooltip>\r\n          }\r\n        >\r\n          <Typography variant=\"subtitle2\" gutterBottom>\r\n            Failed to load component: {componentName}\r\n          </Typography>\r\n          <Typography variant=\"body2\">\r\n            {error}\r\n          </Typography>\r\n        </Alert>\r\n\r\n        <Typography variant=\"body2\" color=\"text.secondary\">\r\n          This usually happens when:\r\n        </Typography>\r\n        <Box component=\"ul\" sx={{ mt: 1, mb: 2 }}>\r\n          <li>The component file was moved or deleted</li>\r\n          <li>There are syntax errors in the component</li>\r\n          <li>Required dependencies are missing</li>\r\n          <li>The component export doesn't match the registry</li>\r\n        </Box>\r\n      </Box>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Box sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n      {/* Header with navigation */}\r\n      <Paper sx={{ p: 2, mb: 2 }}>\r\n        <Box display=\"flex\" alignItems=\"center\" justifyContent=\"space-between\">\r\n          <Box display=\"flex\" alignItems=\"center\" gap={1}>\r\n            <IconButton onClick={onBack} size=\"small\">\r\n              <ArrowBackIcon />\r\n            </IconButton>\r\n            \r\n            <Breadcrumbs>\r\n              <Link \r\n                color=\"inherit\" \r\n                href=\"#\" \r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  onBack();\r\n                }}\r\n                sx={{ cursor: 'pointer' }}\r\n              >\r\n                Big Book\r\n              </Link>\r\n              <Typography color=\"text.primary\">\r\n                Custom Components\r\n              </Typography>\r\n              <Typography color=\"text.primary\" fontWeight={600}>\r\n                {componentInfo?.displayName || componentName}\r\n              </Typography>\r\n            </Breadcrumbs>\r\n          </Box>\r\n\r\n          <Box display=\"flex\" alignItems=\"center\" gap={1}>\r\n            <Tooltip title=\"Refresh component\">\r\n              <IconButton onClick={handleRefresh} size=\"small\">\r\n                <RefreshIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </Box>\r\n        </Box>\r\n\r\n        {componentInfo?.description && (\r\n          <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 1 }}>\r\n            {componentInfo.description}\r\n          </Typography>\r\n        )}\r\n      </Paper>\r\n\r\n      {/* Component container */}\r\n      <Paper sx={{ flex: 1, p: 2, overflow: 'auto' }}>\r\n        <Suspense \r\n          fallback={\r\n            <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight={200}>\r\n              <CircularProgress />\r\n            </Box>\r\n          }\r\n        >\r\n          {CustomComponent ? (\r\n            <ErrorBoundary\r\n              fallback={\r\n                <Alert severity=\"error\" sx={{ mt: 2 }}>\r\n                  <Typography variant=\"subtitle2\" gutterBottom>\r\n                    Component Runtime Error\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    The component \"{componentName}\" encountered an error during rendering.\r\n                    Check the browser console for more details.\r\n                  </Typography>\r\n                </Alert>\r\n              }\r\n            >\r\n              <CustomComponent />\r\n            </ErrorBoundary>\r\n          ) : (\r\n            <Alert severity=\"warning\">\r\n              <Typography variant=\"body2\">\r\n                Component \"{componentName}\" loaded but is not renderable.\r\n              </Typography>\r\n            </Alert>\r\n          )}\r\n        </Suspense>\r\n      </Paper>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default BigBookCustomComponentViewer; ","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Card,\r\n  CardContent,\r\n  Button,\r\n  TextField,\r\n  Select,\r\n  MenuItem,\r\n  FormControl,\r\n  InputLabel,\r\n  Chip,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  IconButton,\r\n  Grid,\r\n  Alert,\r\n  CircularProgress,\r\n  Pagination,\r\n  Stack,\r\n  Tooltip,\r\n  Badge,\r\n  Divider,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  ListItemSecondaryAction\r\n} from '@mui/material';\r\nimport {\r\n  Add as AddIcon,\r\n  Edit as EditIcon,\r\n  Delete as DeleteIcon,\r\n  Memory as MemoryIcon,\r\n  Search as SearchIcon,\r\n  FilterList as FilterIcon,\r\n  Sort as SortIcon,\r\n  Star as StarIcon,\r\n  StarBorder as StarBorderIcon,\r\n  Label as LabelIcon,\r\n  Folder as FolderIcon,\r\n  Visibility as ViewIcon,\r\n  Refresh as RefreshIcon\r\n} from '@mui/icons-material';\r\n\r\ninterface Memory {\r\n  id: string;\r\n  title: string;\r\n  content: string;\r\n  category: string;\r\n  priority: 'low' | 'medium' | 'high' | 'critical';\r\n  tags: string[];\r\n  access_level: 'private' | 'shared' | 'public';\r\n  expires_at?: string;\r\n  usage_count: number;\r\n  last_accessed_at?: string;\r\n  is_active: boolean;\r\n  created_at: string;\r\n  updated_at: string;\r\n}\r\n\r\ninterface MemoryFilters {\r\n  category?: string;\r\n  priority?: string;\r\n  tags?: string[];\r\n  search?: string;\r\n  is_active?: boolean;\r\n}\r\n\r\nconst MemoryManager: React.FC = () => {\r\n  const [memories, setMemories] = useState<Memory[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [filters, setFilters] = useState<MemoryFilters>({});\r\n  const [page, setPage] = useState(1);\r\n  const [totalPages, setTotalPages] = useState(1);\r\n  const [selectedMemory, setSelectedMemory] = useState<Memory | null>(null);\r\n  const [dialogOpen, setDialogOpen] = useState(false);\r\n  const [dialogMode, setDialogMode] = useState<'create' | 'edit' | 'view'>('create');\r\n\r\n  // Form state\r\n  const [formData, setFormData] = useState({\r\n    title: '',\r\n    content: '',\r\n    category: '',\r\n    priority: 'medium',\r\n    tags: [] as string[],\r\n    access_level: 'private',\r\n    expires_at: ''\r\n  });\r\n\r\n  const categories = ['learning', 'user_preference', 'system', 'analytics', 'tasks', 'knowledge'];\r\n  const priorities = ['low', 'medium', 'high', 'critical'];\r\n  const accessLevels = ['private', 'shared', 'public'];\r\n\r\n  useEffect(() => {\r\n    loadMemories();\r\n  }, [filters, page]);\r\n\r\n  const loadMemories = async () => {\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    try {\r\n      // Mock API call - replace with actual API\r\n      console.log('Loading OMAI memories...', { filters, page });\r\n      \r\n      // Simulate API delay\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n      \r\n      // Mock data\r\n      const mockMemories: Memory[] = [\r\n        {\r\n          id: '1',\r\n          title: 'User prefers dark mode',\r\n          content: 'The user consistently chooses dark mode themes and mentions preference for low-light interfaces.',\r\n          category: 'user_preference',\r\n          priority: 'medium',\r\n          tags: ['ui', 'theme', 'accessibility'],\r\n          access_level: 'private',\r\n          usage_count: 15,\r\n          last_accessed_at: '2025-01-29T10:30:00Z',\r\n          is_active: true,\r\n          created_at: '2025-01-20T09:00:00Z',\r\n          updated_at: '2025-01-29T10:30:00Z'\r\n        },\r\n        {\r\n          id: '2',\r\n          title: 'Church management workflow insights',\r\n          content: 'User frequently manages multiple churches and prefers bulk operations for administrative tasks.',\r\n          category: 'learning',\r\n          priority: 'high',\r\n          tags: ['workflow', 'admin', 'churches'],\r\n          access_level: 'shared',\r\n          usage_count: 8,\r\n          last_accessed_at: '2025-01-28T14:20:00Z',\r\n          is_active: true,\r\n          created_at: '2025-01-15T11:00:00Z',\r\n          updated_at: '2025-01-28T14:20:00Z'\r\n        },\r\n        {\r\n          id: '3',\r\n          title: 'OMAI training progress checkpoint',\r\n          content: 'Completed Phase 1 foundation training with 85% accuracy on site understanding tasks.',\r\n          category: 'system',\r\n          priority: 'high',\r\n          tags: ['training', 'checkpoint', 'progress'],\r\n          access_level: 'private',\r\n          usage_count: 3,\r\n          is_active: true,\r\n          created_at: '2025-01-25T16:45:00Z',\r\n          updated_at: '2025-01-25T16:45:00Z'\r\n        }\r\n      ];\r\n      \r\n      setMemories(mockMemories);\r\n      setTotalPages(1);\r\n      \r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to load memories');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleCreateMemory = () => {\r\n    setFormData({\r\n      title: '',\r\n      content: '',\r\n      category: '',\r\n      priority: 'medium',\r\n      tags: [],\r\n      access_level: 'private',\r\n      expires_at: ''\r\n    });\r\n    setDialogMode('create');\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  const handleEditMemory = (memory: Memory) => {\r\n    setFormData({\r\n      title: memory.title,\r\n      content: memory.content,\r\n      category: memory.category,\r\n      priority: memory.priority,\r\n      tags: memory.tags,\r\n      access_level: memory.access_level,\r\n      expires_at: memory.expires_at || ''\r\n    });\r\n    setSelectedMemory(memory);\r\n    setDialogMode('edit');\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  const handleViewMemory = (memory: Memory) => {\r\n    setSelectedMemory(memory);\r\n    setDialogMode('view');\r\n    setDialogOpen(true);\r\n  };\r\n\r\n  const handleSaveMemory = async () => {\r\n    try {\r\n      console.log('Saving memory:', formData);\r\n      // Simulate API call\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n      \r\n      setDialogOpen(false);\r\n      loadMemories();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to save memory');\r\n    }\r\n  };\r\n\r\n  const handleDeleteMemory = async (memoryId: string) => {\r\n    if (!confirm('Are you sure you want to delete this memory?')) return;\r\n    \r\n    try {\r\n      console.log('Deleting memory:', memoryId);\r\n      // Simulate API call\r\n      await new Promise(resolve => setTimeout(resolve, 500));\r\n      \r\n      loadMemories();\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : 'Failed to delete memory');\r\n    }\r\n  };\r\n\r\n  const getPriorityColor = (priority: string) => {\r\n    switch (priority) {\r\n      case 'critical': return 'error';\r\n      case 'high': return 'warning';\r\n      case 'medium': return 'info';\r\n      case 'low': return 'default';\r\n      default: return 'default';\r\n    }\r\n  };\r\n\r\n  const getAccessLevelIcon = (level: string) => {\r\n    switch (level) {\r\n      case 'public': return 'ðŸŒ';\r\n      case 'shared': return 'ðŸ‘¥';\r\n      case 'private': return 'ðŸ”’';\r\n      default: return 'ðŸ“„';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ p: 3 }}>\r\n      {/* Header */}\r\n      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\r\n        <Box>\r\n          <Typography variant=\"h5\" component=\"h2\" gutterBottom>\r\n            <MemoryIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n            OMAI Memory Management\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            Store and manage OMAI's learning memories, preferences, and knowledge\r\n          </Typography>\r\n        </Box>\r\n        <Stack direction=\"row\" spacing={2}>\r\n          <Button\r\n            variant=\"outlined\"\r\n            startIcon={<RefreshIcon />}\r\n            onClick={loadMemories}\r\n            disabled={loading}\r\n          >\r\n            Refresh\r\n          </Button>\r\n          <Button\r\n            variant=\"contained\"\r\n            startIcon={<AddIcon />}\r\n            onClick={handleCreateMemory}\r\n          >\r\n            Add Memory\r\n          </Button>\r\n        </Stack>\r\n      </Box>\r\n\r\n      {/* Filters */}\r\n      <Card sx={{ mb: 3 }}>\r\n        <CardContent>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            <FilterIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n            Filters\r\n          </Typography>\r\n          <Grid container spacing={2}>\r\n            <Grid item xs={12} md={3}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Search\"\r\n                placeholder=\"Search memories...\"\r\n                value={filters.search || ''}\r\n                onChange={(e) => setFilters({ ...filters, search: e.target.value })}\r\n                InputProps={{\r\n                  startAdornment: <SearchIcon sx={{ mr: 1, color: 'text.secondary' }} />\r\n                }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} md={3}>\r\n              <FormControl fullWidth>\r\n                <InputLabel>Category</InputLabel>\r\n                <Select\r\n                  value={filters.category || ''}\r\n                  label=\"Category\"\r\n                  onChange={(e) => setFilters({ ...filters, category: e.target.value })}\r\n                >\r\n                  <MenuItem value=\"\">All Categories</MenuItem>\r\n                  {categories.map(cat => (\r\n                    <MenuItem key={cat} value={cat}>{cat}</MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12} md={3}>\r\n              <FormControl fullWidth>\r\n                <InputLabel>Priority</InputLabel>\r\n                <Select\r\n                  value={filters.priority || ''}\r\n                  label=\"Priority\"\r\n                  onChange={(e) => setFilters({ ...filters, priority: e.target.value })}\r\n                >\r\n                  <MenuItem value=\"\">All Priorities</MenuItem>\r\n                  {priorities.map(priority => (\r\n                    <MenuItem key={priority} value={priority}>{priority}</MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n            <Grid item xs={12} md={3}>\r\n              <FormControl fullWidth>\r\n                <InputLabel>Status</InputLabel>\r\n                <Select\r\n                  value={filters.is_active === undefined ? '' : filters.is_active ? 'active' : 'inactive'}\r\n                  label=\"Status\"\r\n                  onChange={(e) => setFilters({ \r\n                    ...filters, \r\n                    is_active: e.target.value === '' ? undefined : e.target.value === 'active' \r\n                  })}\r\n                >\r\n                  <MenuItem value=\"\">All</MenuItem>\r\n                  <MenuItem value=\"active\">Active</MenuItem>\r\n                  <MenuItem value=\"inactive\">Inactive</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Grid>\r\n          </Grid>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Error Alert */}\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }} onClose={() => setError(null)}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n\r\n      {/* Memories List */}\r\n      {loading ? (\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"300px\">\r\n          <CircularProgress />\r\n          <Typography variant=\"body1\" sx={{ ml: 2 }}>Loading memories...</Typography>\r\n        </Box>\r\n      ) : (\r\n        <>\r\n          <Grid container spacing={2}>\r\n            {memories.map((memory) => (\r\n              <Grid item xs={12} md={6} lg={4} key={memory.id}>\r\n                <Card>\r\n                  <CardContent>\r\n                    <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"flex-start\" mb={2}>\r\n                      <Typography variant=\"h6\" component=\"h3\" noWrap sx={{ flex: 1, mr: 1 }}>\r\n                        {memory.title}\r\n                      </Typography>\r\n                      <Box display=\"flex\" gap={0.5}>\r\n                        <Tooltip title=\"View Memory\">\r\n                          <IconButton size=\"small\" onClick={() => handleViewMemory(memory)}>\r\n                            <ViewIcon />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title=\"Edit Memory\">\r\n                          <IconButton size=\"small\" onClick={() => handleEditMemory(memory)}>\r\n                            <EditIcon />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                        <Tooltip title=\"Delete Memory\">\r\n                          <IconButton size=\"small\" onClick={() => handleDeleteMemory(memory.id)}>\r\n                            <DeleteIcon />\r\n                          </IconButton>\r\n                        </Tooltip>\r\n                      </Box>\r\n                    </Box>\r\n                    \r\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\r\n                      {memory.content.length > 100 \r\n                        ? `${memory.content.substring(0, 100)}...` \r\n                        : memory.content\r\n                      }\r\n                    </Typography>\r\n\r\n                    <Box display=\"flex\" flexWrap=\"wrap\" gap={1} mb={2}>\r\n                      <Chip \r\n                        label={memory.category} \r\n                        size=\"small\" \r\n                        icon={<FolderIcon />} \r\n                        variant=\"outlined\" \r\n                      />\r\n                      <Chip \r\n                        label={memory.priority} \r\n                        size=\"small\" \r\n                        color={getPriorityColor(memory.priority) as any}\r\n                      />\r\n                      <Chip \r\n                        label={`${getAccessLevelIcon(memory.access_level)} ${memory.access_level}`} \r\n                        size=\"small\" \r\n                        variant=\"outlined\"\r\n                      />\r\n                    </Box>\r\n\r\n                    <Box display=\"flex\" flexWrap=\"wrap\" gap={0.5} mb={2}>\r\n                      {memory.tags.map((tag) => (\r\n                        <Chip \r\n                          key={tag} \r\n                          label={tag} \r\n                          size=\"small\" \r\n                          icon={<LabelIcon />}\r\n                          variant=\"outlined\"\r\n                        />\r\n                      ))}\r\n                    </Box>\r\n\r\n                    <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\">\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        Used {memory.usage_count} times\r\n                      </Typography>\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        {new Date(memory.created_at).toLocaleDateString()}\r\n                      </Typography>\r\n                    </Box>\r\n                  </CardContent>\r\n                </Card>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n\r\n          {memories.length === 0 && !loading && (\r\n            <Box textAlign=\"center\" py={6}>\r\n              <MemoryIcon sx={{ fontSize: 64, color: 'text.secondary', mb: 2 }} />\r\n              <Typography variant=\"h6\" color=\"text.secondary\" gutterBottom>\r\n                No memories found\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 3 }}>\r\n                Start by creating your first OMAI memory to help the system learn and remember important information.\r\n              </Typography>\r\n              <Button variant=\"contained\" startIcon={<AddIcon />} onClick={handleCreateMemory}>\r\n                Create First Memory\r\n              </Button>\r\n            </Box>\r\n          )}\r\n\r\n          {totalPages > 1 && (\r\n            <Box display=\"flex\" justifyContent=\"center\" mt={3}>\r\n              <Pagination\r\n                count={totalPages}\r\n                page={page}\r\n                onChange={(_, newPage) => setPage(newPage)}\r\n                color=\"primary\"\r\n              />\r\n            </Box>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* Memory Dialog */}\r\n      <Dialog open={dialogOpen} onClose={() => setDialogOpen(false)} maxWidth=\"md\" fullWidth>\r\n        <DialogTitle>\r\n          {dialogMode === 'create' && 'Create New Memory'}\r\n          {dialogMode === 'edit' && 'Edit Memory'}\r\n          {dialogMode === 'view' && 'Memory Details'}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {dialogMode === 'view' && selectedMemory ? (\r\n            <Box>\r\n              <Typography variant=\"h6\" gutterBottom>{selectedMemory.title}</Typography>\r\n              <Typography variant=\"body1\" paragraph>{selectedMemory.content}</Typography>\r\n              \r\n              <Divider sx={{ my: 2 }} />\r\n              \r\n              <Grid container spacing={2}>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\">Category</Typography>\r\n                  <Typography variant=\"body2\">{selectedMemory.category}</Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\">Priority</Typography>\r\n                  <Typography variant=\"body2\">{selectedMemory.priority}</Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\">Access Level</Typography>\r\n                  <Typography variant=\"body2\">{selectedMemory.access_level}</Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\">Usage Count</Typography>\r\n                  <Typography variant=\"body2\">{selectedMemory.usage_count}</Typography>\r\n                </Grid>\r\n              </Grid>\r\n              \r\n              <Box mt={2}>\r\n                <Typography variant=\"subtitle2\">Tags</Typography>\r\n                <Box display=\"flex\" flexWrap=\"wrap\" gap={1} mt={1}>\r\n                  {selectedMemory.tags.map((tag) => (\r\n                    <Chip key={tag} label={tag} size=\"small\" />\r\n                  ))}\r\n                </Box>\r\n              </Box>\r\n            </Box>\r\n          ) : (\r\n            <Stack spacing={3} sx={{ mt: 2 }}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Title\"\r\n                value={formData.title}\r\n                onChange={(e) => setFormData({ ...formData, title: e.target.value })}\r\n                disabled={dialogMode === 'view'}\r\n              />\r\n              \r\n              <TextField\r\n                fullWidth\r\n                label=\"Content\"\r\n                multiline\r\n                rows={4}\r\n                value={formData.content}\r\n                onChange={(e) => setFormData({ ...formData, content: e.target.value })}\r\n                disabled={dialogMode === 'view'}\r\n              />\r\n              \r\n              <Grid container spacing={2}>\r\n                <Grid item xs={6}>\r\n                  <FormControl fullWidth>\r\n                    <InputLabel>Category</InputLabel>\r\n                    <Select\r\n                      value={formData.category}\r\n                      label=\"Category\"\r\n                      onChange={(e) => setFormData({ ...formData, category: e.target.value })}\r\n                      disabled={dialogMode === 'view'}\r\n                    >\r\n                      {categories.map(cat => (\r\n                        <MenuItem key={cat} value={cat}>{cat}</MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  </FormControl>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <FormControl fullWidth>\r\n                    <InputLabel>Priority</InputLabel>\r\n                    <Select\r\n                      value={formData.priority}\r\n                      label=\"Priority\"\r\n                      onChange={(e) => setFormData({ ...formData, priority: e.target.value })}\r\n                      disabled={dialogMode === 'view'}\r\n                    >\r\n                      {priorities.map(priority => (\r\n                        <MenuItem key={priority} value={priority}>{priority}</MenuItem>\r\n                      ))}\r\n                    </Select>\r\n                  </FormControl>\r\n                </Grid>\r\n              </Grid>\r\n              \r\n              <FormControl fullWidth>\r\n                <InputLabel>Access Level</InputLabel>\r\n                <Select\r\n                  value={formData.access_level}\r\n                  label=\"Access Level\"\r\n                  onChange={(e) => setFormData({ ...formData, access_level: e.target.value })}\r\n                  disabled={dialogMode === 'view'}\r\n                >\r\n                  {accessLevels.map(level => (\r\n                    <MenuItem key={level} value={level}>{level}</MenuItem>\r\n                  ))}\r\n                </Select>\r\n              </FormControl>\r\n              \r\n              <TextField\r\n                fullWidth\r\n                label=\"Tags (comma-separated)\"\r\n                value={formData.tags.join(', ')}\r\n                onChange={(e) => setFormData({ \r\n                  ...formData, \r\n                  tags: e.target.value.split(',').map(tag => tag.trim()).filter(Boolean)\r\n                })}\r\n                disabled={dialogMode === 'view'}\r\n                helperText=\"Enter tags separated by commas\"\r\n              />\r\n            </Stack>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setDialogOpen(false)}>\r\n            {dialogMode === 'view' ? 'Close' : 'Cancel'}\r\n          </Button>\r\n          {dialogMode !== 'view' && (\r\n            <Button variant=\"contained\" onClick={handleSaveMemory}>\r\n              {dialogMode === 'create' ? 'Create' : 'Save'}\r\n            </Button>\r\n          )}\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default MemoryManager;","import React, { useState, useRef, useCallback, useEffect } from 'react';\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  Typography,\r\n  Grid,\r\n  Button,\r\n  TextField,\r\n  FormControl,\r\n  FormLabel,\r\n  Tabs,\r\n  Tab,\r\n  Box,\r\n  Alert,\r\n  Chip,\r\n  Paper,\r\n  Divider,\r\n  Stack,\r\n  IconButton,\r\n  Tooltip,\r\n  Switch,\r\n  FormControlLabel,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  ListItemSecondaryAction,\r\n  Accordion,\r\n  AccordionSummary,\r\n  AccordionDetails,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  CircularProgress,\r\n  LinearProgress,\r\n  Badge,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions\r\n} from '@mui/material';\r\nimport BigBookConsolePage from './BigBookConsolePage';\r\nimport { BigBookConsoleSettings, defaultSettings } from './BigBookSettings';\r\nimport EncryptedStoragePanel from './EncryptedStoragePanel';\r\nimport QuestionnairePreview from './QuestionnairePreview';\r\nimport OMAIDiscoveryPanel from './OMAIDiscoveryPanel';\r\nimport TSXComponentInstallWizard from './TSXComponentInstallWizard';\r\nimport BigBookCustomComponentViewer from './BigBookCustomComponentViewer';\r\nimport MemoryManager from './MemoryManager';\r\nimport {\r\n  Upload as UploadIcon,\r\n  PlayArrow as PlayIcon,\r\n  Stop as StopIcon,\r\n  Delete as Trash2Icon,\r\n  Settings as SettingsIcon,\r\n  Description as FileTextIcon,\r\n  Code as CodeIcon,\r\n  Storage as DatabaseIcon,\r\n  Terminal as TerminalIcon,\r\n  Save as SaveIcon,\r\n  Refresh as RefreshCwIcon,\r\n  CloudUpload as CloudUploadIcon,\r\n  FolderOpen as FolderOpenIcon,\r\n  Article as ArticleIcon,\r\n  Javascript as JavaScriptIcon,\r\n  Code as ShellScriptIcon,\r\n  Code as PythonIcon,\r\n  ExpandMore as ExpandMoreIcon,\r\n  Extension as AddonIcon,\r\n  Article as DocIcon,\r\n  Tune as ConfigIcon,\r\n  Archive as DataIcon,\r\n  Visibility as ViewIcon,\r\n  Html as HtmlIcon,\r\n  Css as CssIcon,\r\n  DataObject as JsonIcon,\r\n  Code as XmlIcon,\r\n  Image as ImageIcon,\r\n  VideoFile as VideoIcon,\r\n  AudioFile as AudioIcon,\r\n  Archive as ArchiveIcon,\r\n  PictureAsPdf as PdfIcon,\r\n  TextSnippet as TextIcon,\r\n  // New OMAI-specific icons\r\n  Memory as MemoryIcon,\r\n  School as LearningIcon,\r\n  Analytics as AnalyticsIcon,\r\n  Timeline as ProgressIcon,\r\n  AutoMode as AIIcon,\r\n  Assessment as MetricsIcon,\r\n  TrendingUp as TrendingUpIcon,\r\n  Psychology as PsychologyIcon,\r\n  History as HistoryIcon,\r\n  Assignment as TaskIcon,\r\n  Speed as PerformanceIcon,\r\n  Insights as InsightsIcon,\r\n  Lightbulb as EthicsIcon,\r\n  Balance as MoralIcon,\r\n  QuestionAnswer as ReasoningIcon\r\n} from '@mui/icons-material';\r\n\r\ninterface FileUpload {\r\n  id: string;\r\n  name: string;\r\n  size: number;\r\n  type: string;\r\n  content?: string;\r\n  uploaded: Date;\r\n  processed: boolean;\r\n  status: 'pending' | 'processing' | 'completed' | 'error';\r\n  result?: {\r\n    success: boolean;\r\n    output?: string;\r\n    error?: string;\r\n    executionTime?: number;\r\n  };\r\n}\r\n\r\ninterface ConsoleOutput {\r\n  id: string;\r\n  timestamp: Date;\r\n  type: 'command' | 'output' | 'error' | 'info';\r\n  content: string;\r\n  source?: string;\r\n}\r\n\r\ninterface BigBookSettings {\r\n  databaseUser: string;\r\n  databasePassword: string;\r\n  useSudo: boolean;\r\n  sudoPassword: string;\r\n  defaultDatabase: string;\r\n  scriptTimeout: number;\r\n  maxFileSize: number;\r\n}\r\n\r\n// New OMAI-specific interfaces\r\ninterface LearningProgress {\r\n  totalSessions: number;\r\n  completedSessions: number;\r\n  currentPhase: string;\r\n  overallProgress: number;\r\n  lastActivity: string;\r\n  knowledgePoints: number;\r\n  memoriesCreated: number;\r\n  filesProcessed: number;\r\n}\r\n\r\ninterface TrainingSession {\r\n  id: string;\r\n  name: string;\r\n  phase: string;\r\n  status: 'pending' | 'running' | 'completed' | 'failed';\r\n  progress: number;\r\n  startTime?: string;\r\n  endTime?: string;\r\n  duration?: number;\r\n  results?: {\r\n    filesProcessed: number;\r\n    memoriesCreated: number;\r\n    knowledgeExtracted: number;\r\n    errors: number;\r\n  };\r\n}\r\n\r\ninterface KnowledgeMetrics {\r\n  totalMemories: number;\r\n  categoriesDistribution: Record<string, number>;\r\n  priorityDistribution: Record<string, number>;\r\n  usagePatterns: {\r\n    mostUsed: Array<{ title: string; count: number }>;\r\n    recentlyAccessed: Array<{ title: string; lastAccessed: string }>;\r\n    trending: Array<{ title: string; trend: number }>;\r\n  };\r\n  learningVelocity: {\r\n    memoriesPerWeek: number;\r\n    knowledgeGrowthRate: number;\r\n    activeHours: number;\r\n  };\r\n}\r\n\r\n// OMLearn Ethics & Reasoning interfaces\r\ninterface EthicalFoundation {\r\n  id: string;\r\n  gradeGroup: 'kindergarten-2nd' | '3rd-5th' | '6th-8th' | '9th-12th';\r\n  category: 'moral_development' | 'ethical_thinking' | 'reasoning_patterns' | 'philosophical_concepts';\r\n  question: string;\r\n  userResponse: string;\r\n  reasoning: string;\r\n  confidence: number;\r\n  weight: number;\r\n  appliedContexts: string[];\r\n  createdAt: string;\r\n  lastReferenced?: string;\r\n}\r\n\r\ninterface EthicsProgress {\r\n  totalSurveys: number;\r\n  completedSurveys: number;\r\n  gradeGroupsCompleted: string[];\r\n  ethicalFoundationsCount: number;\r\n  moralComplexityScore: number;\r\n  reasoningMaturityLevel: string;\r\n  lastAssessment: string;\r\n}\r\n\r\ninterface OMLearnSurvey {\r\n  id: string;\r\n  gradeGroup: string;\r\n  title: string;\r\n  description: string;\r\n  totalQuestions: number;\r\n  completedQuestions: number;\r\n  status: 'not_started' | 'in_progress' | 'completed';\r\n  ageRange: string;\r\n  focus: string;\r\n}\r\n\r\nconst OMBigBook: React.FC = () => {\r\n  const [activeTab, setActiveTab] = useState(0);\r\n  \r\n  // Existing state\r\n  const [uploadedFiles, setUploadedFiles] = useState<FileUpload[]>([]);\r\n  const [consoleOutput, setConsoleOutput] = useState<ConsoleOutput[]>([]);\r\n  const [isExecuting, setIsExecuting] = useState(false);\r\n  const [selectedFile, setSelectedFile] = useState<FileUpload | null>(null);\r\n  const [showSettings, setShowSettings] = useState(false);\r\n  const [settings, setSettings] = useState<BigBookSettings>({\r\n    databaseUser: 'root',\r\n    databasePassword: '',\r\n    useSudo: true,\r\n    sudoPassword: '',\r\n    defaultDatabase: 'omai_db',\r\n    scriptTimeout: 30000,\r\n    maxFileSize: 10485760 // 10MB\r\n  });\r\n  const [consoleSettings, setConsoleSettings] = useState<BigBookConsoleSettings>(defaultSettings);\r\n  const [questionnairePreviewOpen, setQuestionnairePreviewOpen] = useState(false);\r\n  const [previewFile, setPreviewFile] = useState<FileUpload | null>(null);\r\n  const [registries, setRegistries] = useState<any>(null);\r\n  const [registriesLoading, setRegistriesLoading] = useState(false);\r\n  const [registriesError, setRegistriesError] = useState<string | null>(null);\r\n  const [tsxWizardOpen, setTsxWizardOpen] = useState(false);\r\n  const [tsxFile, setTsxFile] = useState<File | null>(null);\r\n  const [customComponents, setCustomComponents] = useState<any>(null);\r\n  const [customComponentsLoading, setCustomComponentsLoading] = useState(false);\r\n  const [selectedCustomComponent, setSelectedCustomComponent] = useState<string | null>(null);\r\n  \r\n  // New OMAI state\r\n  const [learningProgress, setLearningProgress] = useState<LearningProgress | null>(null);\r\n  const [trainingSessions, setTrainingSessions] = useState<TrainingSession[]>([]);\r\n  const [knowledgeMetrics, setKnowledgeMetrics] = useState<KnowledgeMetrics | null>(null);\r\n  const [activeTrainingSession, setActiveTrainingSession] = useState<TrainingSession | null>(null);\r\n  const [trainingDialogOpen, setTrainingDialogOpen] = useState(false);\r\n  const [selectedTrainingPhase, setSelectedTrainingPhase] = useState<string>('foundation');\r\n  const [learningLoading, setLearningLoading] = useState(false);\r\n  \r\n  // Ethics & Reasoning state\r\n  const [ethicsProgress, setEthicsProgress] = useState<EthicsProgress | null>(null);\r\n  const [ethicalFoundations, setEthicalFoundations] = useState<EthicalFoundation[]>([]);\r\n  const [omlearnSurveys, setOmlearnSurveys] = useState<OMLearnSurvey[]>([]);\r\n  const [ethicsLoading, setEthicsLoading] = useState(false);\r\n  const [selectedFoundation, setSelectedFoundation] = useState<EthicalFoundation | null>(null);\r\n  const [foundationDialogOpen, setFoundationDialogOpen] = useState(false);\r\n  \r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const consoleRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Auto-scroll console to bottom\r\n  const scrollToBottom = useCallback(() => {\r\n    if (consoleRef.current) {\r\n      consoleRef.current.scrollTop = consoleRef.current.scrollHeight;\r\n    }\r\n  }, []);\r\n\r\n  React.useEffect(() => {\r\n    scrollToBottom();\r\n  }, [consoleOutput, scrollToBottom]);\r\n\r\n  // Load OMAI data on component mount\r\n  useEffect(() => {\r\n    loadLearningProgress();\r\n    loadTrainingSessions();\r\n    loadKnowledgeMetrics();\r\n    loadEthicsProgress();\r\n    loadEthicalFoundations();\r\n    loadOMLearnSurveys();\r\n  }, []);\r\n\r\n  // New OMAI-specific functions\r\n  const loadLearningProgress = async () => {\r\n    try {\r\n      const response = await fetch('/api/omai/learning-progress');\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setLearningProgress(data.progress);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load learning progress:', error);\r\n    }\r\n  };\r\n\r\n  const loadTrainingSessions = async () => {\r\n    try {\r\n      const response = await fetch('/api/omai/training-sessions');\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setTrainingSessions(data.sessions);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load training sessions:', error);\r\n    }\r\n  };\r\n\r\n  const loadKnowledgeMetrics = async () => {\r\n    try {\r\n      const response = await fetch('/api/omai/knowledge-metrics');\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setKnowledgeMetrics(data.metrics);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load knowledge metrics:', error);\r\n    }\r\n  };\r\n\r\n  const startTrainingSession = async (phase: string) => {\r\n    setLearningLoading(true);\r\n    try {\r\n      const response = await fetch('/api/omai/start-training', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ phase })\r\n      });\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setActiveTrainingSession(data.session);\r\n        setTrainingDialogOpen(false);\r\n        // Poll for progress updates\r\n        const interval = setInterval(() => {\r\n          loadTrainingSessions();\r\n          loadLearningProgress();\r\n        }, 5000);\r\n        \r\n        // Stop polling after 30 minutes\r\n        setTimeout(() => clearInterval(interval), 30 * 60 * 1000);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to start training session:', error);\r\n    } finally {\r\n      setLearningLoading(false);\r\n    }\r\n  };\r\n\r\n  const stopTrainingSession = async () => {\r\n    if (!activeTrainingSession) return;\r\n    \r\n    try {\r\n      const response = await fetch(`/api/omai/stop-training/${activeTrainingSession.id}`, {\r\n        method: 'POST'\r\n      });\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setActiveTrainingSession(null);\r\n        loadTrainingSessions();\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to stop training session:', error);\r\n    }\r\n  };\r\n\r\n  const refreshOMAIData = async () => {\r\n    setLearningLoading(true);\r\n    try {\r\n      await Promise.all([\r\n        loadLearningProgress(),\r\n        loadTrainingSessions(),\r\n        loadKnowledgeMetrics(),\r\n        loadEthicsProgress(),\r\n        loadEthicalFoundations()\r\n      ]);\r\n    } finally {\r\n      setLearningLoading(false);\r\n    }\r\n  };\r\n\r\n  // Ethics & Reasoning functions\r\n  const loadEthicsProgress = async () => {\r\n    try {\r\n      const response = await fetch('/api/omai/ethics-progress');\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setEthicsProgress(data.progress);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load ethics progress:', error);\r\n    }\r\n  };\r\n\r\n  const loadEthicalFoundations = async () => {\r\n    try {\r\n      const response = await fetch('/api/omai/ethical-foundations');\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setEthicalFoundations(data.foundations);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load ethical foundations:', error);\r\n    }\r\n  };\r\n\r\n  const loadOMLearnSurveys = async () => {\r\n    try {\r\n      const response = await fetch('/api/omai/omlearn-surveys');\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        setOmlearnSurveys(data.surveys);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to load OMLearn surveys:', error);\r\n    }\r\n  };\r\n\r\n  const importOMLearnResponses = async (responses: any) => {\r\n    setEthicsLoading(true);\r\n    try {\r\n      const response = await fetch('/api/omai/import-omlearn', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(responses)\r\n      });\r\n      const data = await response.json();\r\n      if (data.success) {\r\n        await loadEthicalFoundations();\r\n        await loadEthicsProgress();\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to import OMLearn responses:', error);\r\n    } finally {\r\n      setEthicsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Load registries when tab is opened\r\n  useEffect(() => {\r\n    if (activeTab === 5) {\r\n      loadRegistries();\r\n    }\r\n    if (activeTab === 6) {\r\n      loadCustomComponents();\r\n    }\r\n  }, [activeTab]);\r\n\r\n  // Load registries function\r\n  const loadRegistries = async () => {\r\n    setRegistriesLoading(true);\r\n    setRegistriesError(null);\r\n    \r\n    try {\r\n      const response = await fetch('/api/bigbook/registries', {\r\n        credentials: 'include'\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        setRegistries(result.registries);\r\n      } else {\r\n        throw new Error(result.error || 'Failed to load registries');\r\n      }\r\n    } catch (error) {\r\n      setRegistriesError(error instanceof Error ? error.message : 'Unknown error');\r\n      addConsoleMessage('error', `Failed to load registries: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    } finally {\r\n      setRegistriesLoading(false);\r\n    }\r\n  };\r\n\r\n  // Load custom components function\r\n  const loadCustomComponents = async () => {\r\n    setCustomComponentsLoading(true);\r\n    \r\n    try {\r\n      const response = await fetch('/api/bigbook/custom-components-registry', {\r\n        credentials: 'include'\r\n      });\r\n\r\n      if (response.ok) {\r\n        const data = await response.json();\r\n        setCustomComponents(data);\r\n        addConsoleMessage('success', `Loaded ${Object.keys(data.components || {}).length} custom components`);\r\n      } else {\r\n        throw new Error('Failed to load custom components');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading custom components:', error);\r\n      addConsoleMessage('error', `Failed to load custom components: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    } finally {\r\n      setCustomComponentsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Remove custom component function\r\n  const handleRemoveCustomComponent = async (component: any) => {\r\n    if (!window.confirm(`Are you sure you want to remove the component \"${component.displayName || component.name}\"? This action cannot be undone.`)) {\r\n      return;\r\n    }\r\n\r\n    addConsoleMessage('info', `ðŸ—‘ï¸ Removing custom component: ${component.name}`);\r\n\r\n    try {\r\n      // Create installation result object for removal API\r\n      const installationResult = {\r\n        componentName: component.name,\r\n        installedPath: component.path,\r\n        route: component.route,\r\n        displayName: component.displayName,\r\n        registryUpdated: true,\r\n        menuUpdated: true\r\n      };\r\n\r\n      const response = await fetch('/api/bigbook/remove-bigbook-component', {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        credentials: 'include',\r\n        body: JSON.stringify({\r\n          installationResult\r\n        })\r\n      });\r\n\r\n      const result = await response.json();\r\n\r\n      if (result.success) {\r\n        addConsoleMessage('success', `âœ… Component \"${component.name}\" removed successfully`);\r\n        if (result.menuUpdated) {\r\n          addConsoleMessage('success', `ðŸ§© Component removed from Big Book sidebar menu`);\r\n        }\r\n        \r\n        // Reload custom components to refresh the list\r\n        await loadCustomComponents();\r\n        \r\n        // If we're currently viewing the removed component, go back\r\n        if (selectedCustomComponent === component.name) {\r\n          setSelectedCustomComponent(null);\r\n        }\r\n      } else {\r\n        throw new Error(result.error || 'Failed to remove component');\r\n      }\r\n    } catch (error) {\r\n      addConsoleMessage('error', `âŒ Failed to remove component: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  };\r\n\r\n  // Toggle item status\r\n  const toggleItemStatus = async (type: string, id: string, enabled: boolean) => {\r\n    try {\r\n      const response = await fetch(`/api/bigbook/toggle-item/${type}/${id}`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ enabled }),\r\n        credentials: 'include'\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(`HTTP ${response.status}: ${response.statusText}`);\r\n      }\r\n      \r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        // Update local registry state\r\n        setRegistries((prev: any) => ({\r\n          ...prev,\r\n          [type]: {\r\n            ...prev[type],\r\n            items: {\r\n              ...prev[type].items,\r\n              [id]: result.item\r\n            }\r\n          }\r\n        }));\r\n        \r\n        addConsoleMessage('success', `Item ${enabled ? 'enabled' : 'disabled'}: ${result.item.name || result.item.displayName || id}`);\r\n      } else {\r\n        throw new Error(result.error || 'Failed to toggle item');\r\n      }\r\n    } catch (error) {\r\n      addConsoleMessage('error', `Failed to toggle item: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  };\r\n\r\n  // Add console message\r\n  const addConsoleMessage = (type: ConsoleOutput['type'], message: string, details?: string) => {\r\n    const newMessage: ConsoleOutput = {\r\n      id: Date.now().toString(),\r\n      timestamp: new Date(),\r\n      type,\r\n      content: message,\r\n      source: type === 'command' ? 'User' : 'System'\r\n    };\r\n    setConsoleOutput(prev => [...prev, newMessage]);\r\n  };\r\n\r\n  // Handle file drop\r\n  const handleFileDrop = useCallback(async (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    const files = Array.from(e.dataTransfer.files);\r\n    \r\n    for (const file of files) {\r\n      try {\r\n        const extension = file.name.split('.').pop()?.toLowerCase() || '';\r\n        \r\n        // Special handling for Parish Map zip files\r\n        if (extension === 'zip' && (\r\n          file.name.toLowerCase().includes('parish-map') || \r\n          file.name.toLowerCase().includes('parishmap') ||\r\n          file.name.toLowerCase() === '_workspace_dist_parish-map.zip'\r\n        )) {\r\n          addConsoleMessage('info', `ðŸ—ºï¸ Parish Map zip detected: ${file.name}. Starting auto-installation...`);\r\n          \r\n          try {\r\n            const formData = new FormData();\r\n            formData.append('parishMapZip', file);\r\n            \r\n            const response = await fetch('/api/bigbook/upload-parish-map', {\r\n              method: 'POST',\r\n              body: formData,\r\n              credentials: 'include'\r\n            });\r\n            \r\n            const result = await response.json();\r\n            \r\n            if (result.success) {\r\n              addConsoleMessage('success', `ðŸŽ‰ Parish Map installed successfully!`);\r\n              addConsoleMessage('info', `ðŸ“ Component: ${result.addon.displayName}`);\r\n              addConsoleMessage('info', `ðŸ”— Available at: orthodoxmetrics.com${result.addon.route}`);\r\n              addConsoleMessage('info', `ðŸ“ Updated Big Book Components Index`);\r\n              addConsoleMessage('success', `ðŸ§© Added to sidebar navigation under \"Components\" section`);\r\n              addConsoleMessage('info', `ðŸ”„ Refresh the page to see the new menu item in the sidebar`);\r\n              \r\n              // Add link to visit the component\r\n              setTimeout(() => {\r\n                addConsoleMessage('info', `Click here to visit: ${window.location.origin}${result.addon.route}`);\r\n              }, 1000);\r\n              \r\n            } else {\r\n              addConsoleMessage('error', `âŒ Parish Map installation failed: ${result.error}`);\r\n            }\r\n          } catch (error) {\r\n            addConsoleMessage('error', `âŒ Parish Map installation error: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n          }\r\n          \r\n          continue; // Skip normal file processing for parish map zips\r\n        }\r\n        \r\n        // Special handling for .tsx component files\r\n        if (extension === 'tsx') {\r\n          addConsoleMessage('info', `ðŸ§© TSX Component detected: ${file.name}. Opening installation wizard...`);\r\n          setTsxFile(file);\r\n          setTsxWizardOpen(true);\r\n          continue; // Skip normal file processing for tsx files\r\n        }\r\n        \r\n        // Centralized file processing using new ingestion system\r\n        const supportedTypes = ['.zip', '.js', '.json', '.md', '.sh'];\r\n        if (!supportedTypes.includes(`.${extension}`)) {\r\n          // Fallback to encrypted storage for unsupported types\r\n          const reader = new FileReader();\r\n          reader.onload = async (e) => {\r\n            const content = e.target?.result as string;\r\n            const fileType = getFileTypeFromExtension(extension);\r\n            \r\n            // Create temporary file object\r\n            const tempFile: FileUpload = {\r\n              id: Date.now().toString() + Math.random(),\r\n              name: file.name,\r\n              type: fileType,\r\n              content,\r\n              size: file.size,\r\n              uploaded: new Date(),\r\n              processed: false,\r\n              status: 'pending'\r\n            };\r\n            \r\n            setUploadedFiles(prev => [...prev, tempFile]);\r\n            addConsoleMessage('info', `Uploading to encrypted storage: ${file.name} (${fileType})`);\r\n            \r\n            // Upload to encrypted storage (fallback)\r\n            try {\r\n              const response = await fetch('/api/bigbook/upload', {\r\n                method: 'POST',\r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                  fileName: file.name,\r\n                  content,\r\n                  fileType\r\n                }),\r\n              });\r\n\r\n              const result = await response.json();\r\n              \r\n              if (result.success) {\r\n                setUploadedFiles(prev => prev.map(f => \r\n                  f.id === tempFile.id \r\n                    ? { \r\n                        ...f, \r\n                        status: 'completed',\r\n                        result: { success: true, output: 'File uploaded successfully' }\r\n                      }\r\n                    : f\r\n                ));\r\n                const fileTypeMessage = result.isQuestionnaire \r\n                  ? `questionnaire (${result.questionnaireMetadata?.title || 'Unknown'})`\r\n                  : 'file';\r\n                addConsoleMessage('success', `${fileTypeMessage} uploaded to encrypted storage: ${file.name}`);\r\n                \r\n                if (result.isQuestionnaire) {\r\n                  addConsoleMessage('info', `Questionnaire detected: ${result.questionnaireMetadata?.ageGroup || 'Unknown age group'} - ${result.questionnaireMetadata?.estimatedDuration || 0} minutes`);\r\n                }\r\n              } else {\r\n                setUploadedFiles(prev => prev.map(f => \r\n                  f.id === tempFile.id ? { ...f, status: 'error', result: { success: false, error: result.error } } : f\r\n                ));\r\n                addConsoleMessage('error', `Upload failed: ${file.name} - ${result.error}`);\r\n              }\r\n            } catch (error) {\r\n              setUploadedFiles(prev => prev.map(f => \r\n                f.id === tempFile.id ? { ...f, status: 'error', result: { success: false, error: error instanceof Error ? error.message : 'Unknown error' } } : f\r\n              ));\r\n              addConsoleMessage('error', `Upload error: ${file.name} - ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n            }\r\n          };\r\n          \r\n          reader.readAsText(file);\r\n          continue;\r\n        }\r\n        \r\n        // Use centralized ingestion system for supported file types\r\n        const fileTypeIcons: Record<string, string> = {\r\n          zip: 'ðŸ“¦',\r\n          js: 'âš¡',\r\n          json: 'âš™ï¸',\r\n          md: 'ðŸ“',\r\n          sh: 'ðŸ”§'\r\n        };\r\n        \r\n        const fileIcon = fileTypeIcons[extension] || 'ðŸ“„';\r\n        addConsoleMessage('info', `${fileIcon} Processing ${extension.toUpperCase()} file: ${file.name}`);\r\n        \r\n        try {\r\n          const formData = new FormData();\r\n          formData.append('file', file);\r\n          \r\n          // Add OMAI notification flag if user wants it\r\n          const notifyOMAI = extension === 'md' || extension === 'js'; // Auto-notify for docs and code\r\n          if (notifyOMAI) {\r\n            formData.append('notifyOMAI', 'true');\r\n          }\r\n          \r\n          addConsoleMessage('info', `ðŸ”„ Sending to centralized ingestion system...`);\r\n          \r\n          const response = await fetch('/api/bigbook/ingest-file', {\r\n            method: 'POST',\r\n            body: formData,\r\n            credentials: 'include'\r\n          });\r\n          \r\n          addConsoleMessage('info', `ðŸ“¡ Response status: ${response.status} ${response.statusText}`);\r\n          \r\n          if (!response.ok) {\r\n            const errorText = await response.text();\r\n            addConsoleMessage('error', `âŒ HTTP Error ${response.status}: ${errorText}`);\r\n            \r\n            if (response.status === 401) {\r\n              addConsoleMessage('error', `ðŸ” Authentication failed. Please refresh page and try again.`);\r\n              addConsoleMessage('info', `ðŸ’¡ Tip: Make sure you're logged in as super_admin`);\r\n            }\r\n            continue;\r\n          }\r\n          \r\n          const result = await response.json();\r\n          \r\n          if (result.success) {\r\n            const { result: ingestionResult } = result;\r\n            \r\n            addConsoleMessage('success', `âœ… ${ingestionResult.message}`);\r\n            addConsoleMessage('info', `ðŸ“‚ Type: ${ingestionResult.type}/${ingestionResult.category}`);\r\n            \r\n            // Add type-specific messages\r\n            switch (ingestionResult.type) {\r\n              case 'addon':\r\n                addConsoleMessage('info', `ðŸ§© Component available at: ${ingestionResult.item?.route || 'N/A'}`);\r\n                if (ingestionResult.item?.enabled) {\r\n                  addConsoleMessage('success', `âœ… Component enabled and ready to use`);\r\n                } else {\r\n                  addConsoleMessage('warning', `âš ï¸ Component requires manual enable in registry`);\r\n                }\r\n                break;\r\n              case 'doc':\r\n                addConsoleMessage('info', `ðŸ“– Document: ${ingestionResult.item?.title || ingestionResult.item?.name}`);\r\n                if (ingestionResult.item?.webPath) {\r\n                  addConsoleMessage('info', `ðŸ”— Web path: ${ingestionResult.item.webPath}`);\r\n                }\r\n                break;\r\n              case 'script':\r\n                addConsoleMessage('info', `ðŸ”§ Script stored and made executable`);\r\n                addConsoleMessage('warning', `âš ï¸ Script requires manual enable for security`);\r\n                break;\r\n              case 'config':\r\n                addConsoleMessage('info', `âš™ï¸ Configuration active and available`);\r\n                break;\r\n              case 'data':\r\n                addConsoleMessage('info', `ðŸ’¾ Data archived for manual processing`);\r\n                break;\r\n            }\r\n            \r\n            // Show registry update info\r\n            if (result.registries) {\r\n              const registryNames = Object.keys(result.registries);\r\n              addConsoleMessage('info', `ðŸ“Š Updated registries: ${registryNames.join(', ')}`);\r\n            }\r\n            \r\n            // OMAI notification status\r\n            if (notifyOMAI) {\r\n              addConsoleMessage('info', `ðŸ§  OMAI notified for learning`);\r\n            }\r\n            \r\n          } else {\r\n            addConsoleMessage('error', `âŒ Ingestion failed: ${result.error}`);\r\n            if (result.debug) {\r\n              addConsoleMessage('info', `ðŸ” Debug info: ${JSON.stringify(result.debug)}`);\r\n            }\r\n          }\r\n          \r\n        } catch (error) {\r\n          addConsoleMessage('error', `âŒ Ingestion error: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n        }\r\n      } catch (error) {\r\n        addConsoleMessage('error', `File processing error: ${file.name} - ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n      }\r\n    }\r\n  }, []);\r\n\r\n  const handleDragOver = (e: React.DragEvent) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const handleFileInputChange = async (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const files = Array.from(e.target.files || []);\r\n    \r\n    for (const file of files) {\r\n      try {\r\n        const extension = file.name.split('.').pop()?.toLowerCase() || '';\r\n        \r\n        // Special handling for Parish Map zip files\r\n        if (extension === 'zip' && (\r\n          file.name.toLowerCase().includes('parish-map') || \r\n          file.name.toLowerCase().includes('parishmap') ||\r\n          file.name.toLowerCase() === '_workspace_dist_parish-map.zip'\r\n        )) {\r\n          addConsoleMessage('info', `ðŸ—ºï¸ Parish Map zip selected: ${file.name}. Starting auto-installation...`);\r\n          \r\n          try {\r\n            const formData = new FormData();\r\n            formData.append('parishMapZip', file);\r\n            \r\n            addConsoleMessage('info', `ðŸ”„ Sending request to /api/bigbook/upload-parish-map...`);\r\n            \r\n            const response = await fetch('/api/bigbook/upload-parish-map', {\r\n              method: 'POST',\r\n              body: formData,\r\n              credentials: 'include',\r\n              headers: {\r\n                // Don't set Content-Type for FormData - let browser set it with boundary\r\n              }\r\n            });\r\n            \r\n            addConsoleMessage('info', `ðŸ“¡ Response status: ${response.status} ${response.statusText}`);\r\n            \r\n            if (!response.ok) {\r\n              const errorText = await response.text();\r\n              addConsoleMessage('error', `âŒ HTTP Error ${response.status}: ${errorText}`);\r\n              \r\n              if (response.status === 401) {\r\n                addConsoleMessage('error', `ðŸ” Authentication failed. Please refresh page and try again.`);\r\n                addConsoleMessage('info', `ðŸ’¡ Tip: Make sure you're logged in as super_admin`);\r\n              }\r\n              return;\r\n            }\r\n            \r\n            const result = await response.json();\r\n            \r\n            if (result.success) {\r\n              addConsoleMessage('success', `ðŸŽ‰ Parish Map installed successfully!`);\r\n              addConsoleMessage('info', `ðŸ“ Component: ${result.addon.displayName}`);\r\n              addConsoleMessage('info', `ðŸ”— Available at: orthodoxmetrics.com${result.addon.route}`);\r\n              addConsoleMessage('info', `ðŸ“ Updated Big Book Components Index`);\r\n              addConsoleMessage('success', `ðŸ§© Added to sidebar navigation under \"Components\" section`);\r\n              addConsoleMessage('info', `ðŸ”„ Refresh the page to see the new menu item in the sidebar`);\r\n              \r\n              // Add link to visit the component\r\n              setTimeout(() => {\r\n                addConsoleMessage('info', `Click here to visit: ${window.location.origin}${result.addon.route}`);\r\n              }, 1000);\r\n              \r\n            } else {\r\n              addConsoleMessage('error', `âŒ Parish Map installation failed: ${result.error}`);\r\n              if (result.debug) {\r\n                addConsoleMessage('info', `ðŸ” Debug info: ${JSON.stringify(result.debug)}`);\r\n              }\r\n            }\r\n          } catch (error) {\r\n            addConsoleMessage('error', `âŒ Parish Map installation error: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n            console.error('Parish Map upload error:', error);\r\n          }\r\n          \r\n          continue; // Skip normal file processing for parish map zips\r\n        }\r\n        \r\n        // Special handling for .tsx component files\r\n        if (extension === 'tsx') {\r\n          addConsoleMessage('info', `ðŸ§© TSX Component detected: ${file.name}. Opening installation wizard...`);\r\n          setTsxFile(file);\r\n          setTsxWizardOpen(true);\r\n          continue; // Skip normal file processing for tsx files\r\n        }\r\n        \r\n        // Centralized file processing using new ingestion system\r\n        const supportedTypes = ['.zip', '.js', '.json', '.md', '.sh'];\r\n        if (!supportedTypes.includes(`.${extension}`)) {\r\n          // Fallback to encrypted storage for unsupported types\r\n          const reader = new FileReader();\r\n          reader.onload = async (e) => {\r\n            const content = e.target?.result as string;\r\n            const fileType = getFileTypeFromExtension(extension);\r\n            \r\n            // Create temporary file object\r\n            const tempFile: FileUpload = {\r\n              id: Date.now().toString() + Math.random(),\r\n              name: file.name,\r\n              type: fileType,\r\n              content,\r\n              size: file.size,\r\n              uploaded: new Date(),\r\n              processed: false,\r\n              status: 'pending'\r\n            };\r\n            \r\n            setUploadedFiles(prev => [...prev, tempFile]);\r\n            addConsoleMessage('info', `Uploading to encrypted storage: ${file.name} (${fileType})`);\r\n            \r\n            // Upload to encrypted storage (fallback)\r\n            try {\r\n              const response = await fetch('/api/bigbook/upload', {\r\n                method: 'POST',\r\n                headers: {\r\n                  'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                  fileName: file.name,\r\n                  content,\r\n                  fileType\r\n                }),\r\n              });\r\n\r\n              const result = await response.json();\r\n              \r\n              if (result.success) {\r\n                setUploadedFiles(prev => prev.map(f => \r\n                  f.id === tempFile.id \r\n                    ? { \r\n                        ...f, \r\n                        status: 'completed',\r\n                        result: { success: true, output: 'File uploaded successfully' }\r\n                      }\r\n                    : f\r\n                ));\r\n                const fileTypeMessage = result.isQuestionnaire \r\n                  ? `questionnaire (${result.questionnaireMetadata?.title || 'Unknown'})`\r\n                  : 'file';\r\n                addConsoleMessage('success', `${fileTypeMessage} uploaded to encrypted storage: ${file.name}`);\r\n                \r\n                if (result.isQuestionnaire) {\r\n                  addConsoleMessage('info', `Questionnaire detected: ${result.questionnaireMetadata?.ageGroup || 'Unknown age group'} - ${result.questionnaireMetadata?.estimatedDuration || 0} minutes`);\r\n                }\r\n              } else {\r\n                setUploadedFiles(prev => prev.map(f => \r\n                  f.id === tempFile.id ? { ...f, status: 'error', result: { success: false, error: result.error } } : f\r\n                ));\r\n                addConsoleMessage('error', `Upload failed: ${file.name} - ${result.error}`);\r\n              }\r\n            } catch (error) {\r\n              setUploadedFiles(prev => prev.map(f => \r\n                f.id === tempFile.id ? { ...f, status: 'error', result: { success: false, error: error instanceof Error ? error.message : 'Unknown error' } } : f\r\n              ));\r\n              addConsoleMessage('error', `Upload error: ${file.name} - ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n            }\r\n          };\r\n          \r\n          reader.readAsText(file);\r\n          continue;\r\n        }\r\n        \r\n        // Use centralized ingestion system for supported file types\r\n        const fileTypeIcons: Record<string, string> = {\r\n          zip: 'ðŸ“¦',\r\n          js: 'âš¡',\r\n          json: 'âš™ï¸',\r\n          md: 'ðŸ“',\r\n          sh: 'ðŸ”§'\r\n        };\r\n        \r\n        const fileIcon = fileTypeIcons[extension] || 'ðŸ“„';\r\n        addConsoleMessage('info', `${fileIcon} Processing ${extension.toUpperCase()} file: ${file.name}`);\r\n        \r\n        try {\r\n          const formData = new FormData();\r\n          formData.append('file', file);\r\n          \r\n          // Add OMAI notification flag if user wants it\r\n          const notifyOMAI = extension === 'md' || extension === 'js'; // Auto-notify for docs and code\r\n          if (notifyOMAI) {\r\n            formData.append('notifyOMAI', 'true');\r\n          }\r\n          \r\n          addConsoleMessage('info', `ðŸ”„ Sending to centralized ingestion system...`);\r\n          \r\n          const response = await fetch('/api/bigbook/ingest-file', {\r\n            method: 'POST',\r\n            body: formData,\r\n            credentials: 'include'\r\n          });\r\n          \r\n          addConsoleMessage('info', `ðŸ“¡ Response status: ${response.status} ${response.statusText}`);\r\n          \r\n          if (!response.ok) {\r\n            const errorText = await response.text();\r\n            addConsoleMessage('error', `âŒ HTTP Error ${response.status}: ${errorText}`);\r\n            \r\n            if (response.status === 401) {\r\n              addConsoleMessage('error', `ðŸ” Authentication failed. Please refresh page and try again.`);\r\n              addConsoleMessage('info', `ðŸ’¡ Tip: Make sure you're logged in as super_admin`);\r\n            }\r\n            continue;\r\n          }\r\n          \r\n          const result = await response.json();\r\n          \r\n          if (result.success) {\r\n            const { result: ingestionResult } = result;\r\n            \r\n            addConsoleMessage('success', `âœ… ${ingestionResult.message}`);\r\n            addConsoleMessage('info', `ðŸ“‚ Type: ${ingestionResult.type}/${ingestionResult.category}`);\r\n            \r\n            // Add type-specific messages\r\n            switch (ingestionResult.type) {\r\n              case 'addon':\r\n                addConsoleMessage('info', `ðŸ§© Component available at: ${ingestionResult.item?.route || 'N/A'}`);\r\n                if (ingestionResult.item?.enabled) {\r\n                  addConsoleMessage('success', `âœ… Component enabled and ready to use`);\r\n                } else {\r\n                  addConsoleMessage('warning', `âš ï¸ Component requires manual enable in registry`);\r\n                }\r\n                break;\r\n              case 'doc':\r\n                addConsoleMessage('info', `ðŸ“– Document: ${ingestionResult.item?.title || ingestionResult.item?.name}`);\r\n                if (ingestionResult.item?.webPath) {\r\n                  addConsoleMessage('info', `ðŸ”— Web path: ${ingestionResult.item.webPath}`);\r\n                }\r\n                break;\r\n              case 'script':\r\n                addConsoleMessage('info', `ðŸ”§ Script stored and made executable`);\r\n                addConsoleMessage('warning', `âš ï¸ Script requires manual enable for security`);\r\n                break;\r\n              case 'config':\r\n                addConsoleMessage('info', `âš™ï¸ Configuration active and available`);\r\n                break;\r\n              case 'data':\r\n                addConsoleMessage('info', `ðŸ’¾ Data archived for manual processing`);\r\n                break;\r\n            }\r\n            \r\n            // Show registry update info\r\n            if (result.registries) {\r\n              const registryNames = Object.keys(result.registries);\r\n              addConsoleMessage('info', `ðŸ“Š Updated registries: ${registryNames.join(', ')}`);\r\n            }\r\n            \r\n            // OMAI notification status\r\n            if (notifyOMAI) {\r\n              addConsoleMessage('info', `ðŸ§  OMAI notified for learning`);\r\n            }\r\n            \r\n          } else {\r\n            addConsoleMessage('error', `âŒ Ingestion failed: ${result.error}`);\r\n            if (result.debug) {\r\n              addConsoleMessage('info', `ðŸ” Debug info: ${JSON.stringify(result.debug)}`);\r\n            }\r\n          }\r\n          \r\n        } catch (error) {\r\n          addConsoleMessage('error', `âŒ Ingestion error: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n        }\r\n      } catch (error) {\r\n        addConsoleMessage('error', `File processing error: ${file.name} - ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Get file type from extension\r\n  const getFileTypeFromExtension = (extension: string): FileUpload['type'] => {\r\n    switch (extension) {\r\n      case 'sql':\r\n        return 'sql';\r\n      case 'md':\r\n      case 'markdown':\r\n        return 'markdown';\r\n      case 'js':\r\n      case 'jsx':\r\n      case 'ts':\r\n      case 'tsx':\r\n        return 'javascript';\r\n      case 'sh':\r\n      case 'bash':\r\n      case 'zsh':\r\n        return 'shell';\r\n      case 'py':\r\n      case 'python':\r\n        return 'python';\r\n      case 'html':\r\n      case 'htm':\r\n        return 'html';\r\n      case 'css':\r\n      case 'scss':\r\n      case 'sass':\r\n        return 'css';\r\n      case 'json':\r\n        return 'json';\r\n      case 'xml':\r\n        return 'xml';\r\n      case 'txt':\r\n      case 'log':\r\n        return 'text';\r\n      case 'jpg':\r\n      case 'jpeg':\r\n      case 'png':\r\n      case 'gif':\r\n      case 'svg':\r\n      case 'webp':\r\n        return 'image';\r\n      case 'mp4':\r\n      case 'avi':\r\n      case 'mov':\r\n      case 'wmv':\r\n        return 'video';\r\n      case 'mp3':\r\n      case 'wav':\r\n      case 'ogg':\r\n        return 'audio';\r\n      case 'zip':\r\n      case 'tar':\r\n      case 'gz':\r\n      case 'rar':\r\n        return 'archive';\r\n      case 'pdf':\r\n        return 'pdf';\r\n      default:\r\n        return 'other';\r\n    }\r\n  };\r\n\r\n  const executeFile = async (file: FileUpload) => {\r\n    setIsExecuting(true);\r\n    addConsoleMessage('command', `Executing: ${file.name}`);\r\n    \r\n    try {\r\n      // If file is in encrypted storage, retrieve it first\r\n      let content = file.content;\r\n      if (file.encryptedPath) {\r\n        try {\r\n          const retrieveResponse = await fetch(`/api/bigbook/storage/file/${file.id}?encryptedPath=${encodeURIComponent(file.encryptedPath)}`);\r\n          const retrieveResult = await retrieveResponse.json();\r\n          \r\n          if (retrieveResult.success) {\r\n            content = retrieveResult.content;\r\n          } else {\r\n            throw new Error(`Failed to retrieve file from encrypted storage: ${retrieveResult.error}`);\r\n          }\r\n        } catch (retrieveError) {\r\n          addConsoleMessage('error', `Failed to retrieve file from encrypted storage: ${file.name}`, retrieveError instanceof Error ? retrieveError.message : 'Unknown error');\r\n          setIsExecuting(false);\r\n          return;\r\n        }\r\n      }\r\n      \r\n      const response = await fetch('/api/bigbook/execute', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({\r\n          fileId: file.id,\r\n          fileName: file.name,\r\n          content: content,\r\n          type: file.type,\r\n          settings\r\n        }),\r\n      });\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        addConsoleMessage('success', `Execution completed: ${file.name}`, result.output);\r\n      } else {\r\n        addConsoleMessage('error', `Execution failed: ${file.name}`, result.error);\r\n      }\r\n    } catch (error) {\r\n      addConsoleMessage('error', `Execution error: ${file.name}`, error instanceof Error ? error.message : 'Unknown error');\r\n    } finally {\r\n      setIsExecuting(false);\r\n    }\r\n  };\r\n\r\n  const removeFile = async (fileId: string) => {\r\n    const file = uploadedFiles.find(f => f.id === fileId);\r\n    \r\n    if (file?.encryptedPath) {\r\n      try {\r\n        const response = await fetch(`/api/bigbook/storage/file/${fileId}?encryptedPath=${encodeURIComponent(file.encryptedPath)}`, {\r\n          method: 'DELETE',\r\n        });\r\n        \r\n        const result = await response.json();\r\n        \r\n        if (result.success) {\r\n          setUploadedFiles(prev => prev.filter(f => f.id !== fileId));\r\n          addConsoleMessage('success', `File removed from encrypted storage: ${file.name}`);\r\n        } else {\r\n          addConsoleMessage('error', `Failed to remove file from encrypted storage: ${file.name} - ${result.error}`);\r\n        }\r\n      } catch (error) {\r\n        addConsoleMessage('error', `Error removing file from encrypted storage: ${file.name} - ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n      }\r\n    } else {\r\n      // Remove from local list only\r\n      setUploadedFiles(prev => prev.filter(f => f.id !== fileId));\r\n      addConsoleMessage('info', 'File removed from list');\r\n    }\r\n  };\r\n\r\n  const clearConsole = () => {\r\n    setConsoleOutput([]);\r\n  };\r\n\r\n  const saveSettings = async () => {\r\n    try {\r\n      const response = await fetch('/api/bigbook/settings', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(settings),\r\n      });\r\n\r\n      if (response.ok) {\r\n        addConsoleMessage('success', 'Settings saved successfully');\r\n        setShowSettings(false);\r\n      } else {\r\n        addConsoleMessage('error', 'Failed to save settings');\r\n      }\r\n    } catch (error) {\r\n      addConsoleMessage('error', 'Error saving settings');\r\n    }\r\n  };\r\n\r\n  // Handle questionnaire preview\r\n  const handleQuestionnairePreview = (file: FileUpload) => {\r\n    if (!file.isQuestionnaire) {\r\n      addConsoleMessage('warning', 'File is not a questionnaire');\r\n      return;\r\n    }\r\n    setPreviewFile(file);\r\n    setQuestionnairePreviewOpen(true);\r\n    addConsoleMessage('info', `Opening questionnaire preview: ${file.questionnaireMetadata?.title || file.name}`);\r\n  };\r\n\r\n  // Handle questionnaire submission\r\n  const handleQuestionnaireSubmit = async (submission: any) => {\r\n    try {\r\n      addConsoleMessage('info', `Submitting questionnaire responses: ${submission.questionnaireTitle}`);\r\n      \r\n      const response = await fetch('/api/bigbook/submit-response', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify(submission),\r\n      });\r\n\r\n      const result = await response.json();\r\n      \r\n      if (result.success) {\r\n        addConsoleMessage('success', `Questionnaire submitted successfully (${result.action}): ${submission.questionnaireTitle}`, \r\n          `Response ID: ${result.responseId}\\nResponses: ${submission.responses.length} answers`);\r\n      } else {\r\n        addConsoleMessage('error', `Failed to submit questionnaire: ${result.error}`);\r\n      }\r\n    } catch (error) {\r\n      addConsoleMessage('error', `Error submitting questionnaire: ${error instanceof Error ? error.message : 'Unknown error'}`);\r\n    }\r\n  };\r\n\r\n  // Get file icon\r\n  const getFileIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'sql':\r\n        return <DatabaseIcon />;\r\n      case 'markdown':\r\n        return <ArticleIcon />;\r\n      case 'javascript':\r\n        return <JavaScriptIcon />;\r\n      case 'shell':\r\n        return <ShellScriptIcon />;\r\n      case 'python':\r\n        return <PythonIcon />;\r\n      case 'html':\r\n        return <HtmlIcon />;\r\n      case 'css':\r\n        return <CssIcon />;\r\n      case 'json':\r\n        return <JsonIcon />;\r\n      case 'xml':\r\n        return <XmlIcon />;\r\n      case 'text':\r\n        return <TextIcon />;\r\n      case 'image':\r\n        return <ImageIcon />;\r\n      case 'video':\r\n        return <VideoIcon />;\r\n      case 'audio':\r\n        return <AudioIcon />;\r\n      case 'archive':\r\n        return <ArchiveIcon />;\r\n      case 'pdf':\r\n        return <PdfIcon />;\r\n      case 'script':\r\n        return <CodeIcon />;\r\n      default:\r\n        return <FileTextIcon />;\r\n    }\r\n  };\r\n\r\n  // Get file type chip color\r\n  const getFileTypeChip = (type: string) => {\r\n    switch (type) {\r\n      case 'sql':\r\n        return <Chip label=\"SQL\" size=\"small\" color=\"primary\" />;\r\n      case 'markdown':\r\n        return <Chip label=\"Markdown\" size=\"small\" color=\"info\" />;\r\n      case 'javascript':\r\n        return <Chip label=\"JavaScript\" size=\"small\" color=\"warning\" />;\r\n      case 'shell':\r\n        return <Chip label=\"Shell\" size=\"small\" color=\"success\" />;\r\n      case 'python':\r\n        return <Chip label=\"Python\" size=\"small\" color=\"secondary\" />;\r\n      case 'html':\r\n        return <Chip label=\"HTML\" size=\"small\" color=\"error\" />;\r\n      case 'css':\r\n        return <Chip label=\"CSS\" size=\"small\" color=\"info\" />;\r\n      case 'json':\r\n        return <Chip label=\"JSON\" size=\"small\" color=\"warning\" />;\r\n      case 'xml':\r\n        return <Chip label=\"XML\" size=\"small\" color=\"secondary\" />;\r\n      case 'text':\r\n        return <Chip label=\"Text\" size=\"small\" color=\"default\" />;\r\n      case 'image':\r\n        return <Chip label=\"Image\" size=\"small\" color=\"success\" />;\r\n      case 'video':\r\n        return <Chip label=\"Video\" size=\"small\" color=\"error\" />;\r\n      case 'audio':\r\n        return <Chip label=\"Audio\" size=\"small\" color=\"info\" />;\r\n      case 'archive':\r\n        return <Chip label=\"Archive\" size=\"small\" color=\"warning\" />;\r\n      case 'pdf':\r\n        return <Chip label=\"PDF\" size=\"small\" color=\"error\" />;\r\n      case 'script':\r\n        return <Chip label=\"Script\" size=\"small\" color=\"secondary\" />;\r\n      default:\r\n        return <Chip label=\"Other\" size=\"small\" color=\"default\" />;\r\n    }\r\n  };\r\n\r\n  const handleTabChange = (event: React.SyntheticEvent, newValue: number) => {\r\n    setActiveTab(newValue);\r\n  };\r\n\r\n  const renderLearningDashboard = () => (\r\n    <Box>\r\n      {/* Learning Progress Overview */}\r\n      <Card sx={{ mb: 3 }}>\r\n        <CardContent>\r\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\r\n            <Typography variant=\"h5\" component=\"h2\">\r\n              <PsychologyIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n              OMAI Learning Dashboard\r\n            </Typography>\r\n            <Box>\r\n              <Button\r\n                variant=\"outlined\"\r\n                startIcon={learningLoading ? <CircularProgress size={16} /> : <RefreshCwIcon />}\r\n                onClick={refreshOMAIData}\r\n                disabled={learningLoading}\r\n                sx={{ mr: 1 }}\r\n              >\r\n                Refresh\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                startIcon={<LearningIcon />}\r\n                onClick={() => setTrainingDialogOpen(true)}\r\n                disabled={!!activeTrainingSession}\r\n              >\r\n                Start Training\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n\r\n          {learningProgress && (\r\n            <Grid container spacing={3}>\r\n              <Grid item xs={12} md={3}>\r\n                <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                  <Typography variant=\"h4\" color=\"primary\">\r\n                    {Math.round(learningProgress.overallProgress)}%\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Overall Progress\r\n                  </Typography>\r\n                  <LinearProgress \r\n                    variant=\"determinate\" \r\n                    value={learningProgress.overallProgress} \r\n                    sx={{ mt: 1 }}\r\n                  />\r\n                </Paper>\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} md={3}>\r\n                <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                  <Typography variant=\"h4\" color=\"success.main\">\r\n                    {learningProgress.knowledgePoints}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Knowledge Points\r\n                  </Typography>\r\n                </Paper>\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} md={3}>\r\n                <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                  <Typography variant=\"h4\" color=\"info.main\">\r\n                    {learningProgress.memoriesCreated}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Memories Created\r\n                  </Typography>\r\n                </Paper>\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} md={3}>\r\n                <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                  <Typography variant=\"h4\" color=\"warning.main\">\r\n                    {learningProgress.filesProcessed}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Files Processed\r\n                  </Typography>\r\n                </Paper>\r\n              </Grid>\r\n            </Grid>\r\n          )}\r\n\r\n          {/* Current Phase Status */}\r\n          {learningProgress && (\r\n            <Box mt={3}>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                Current Learning Phase\r\n              </Typography>\r\n              <Alert severity=\"info\" sx={{ mb: 2 }}>\r\n                <Typography variant=\"subtitle1\">\r\n                  <strong>{learningProgress.currentPhase}</strong>\r\n                </Typography>\r\n                <Typography variant=\"body2\">\r\n                  {learningProgress.completedSessions} of {learningProgress.totalSessions} sessions completed\r\n                </Typography>\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  Last Activity: {learningProgress.lastActivity}\r\n                </Typography>\r\n              </Alert>\r\n            </Box>\r\n          )}\r\n\r\n          {/* Active Training Session */}\r\n          {activeTrainingSession && (\r\n            <Box mt={3}>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                Active Training Session\r\n              </Typography>\r\n              <Paper sx={{ p: 2, border: 2, borderColor: 'primary.main' }}>\r\n                <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\r\n                  <Box>\r\n                    <Typography variant=\"subtitle1\" color=\"primary\">\r\n                      {activeTrainingSession.name}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      Phase: {activeTrainingSession.phase}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Button\r\n                    variant=\"outlined\"\r\n                    color=\"error\"\r\n                    startIcon={<StopIcon />}\r\n                    onClick={stopTrainingSession}\r\n                    size=\"small\"\r\n                  >\r\n                    Stop\r\n                  </Button>\r\n                </Box>\r\n                <LinearProgress \r\n                  variant=\"determinate\" \r\n                  value={activeTrainingSession.progress} \r\n                  sx={{ mb: 1 }}\r\n                />\r\n                <Typography variant=\"body2\" align=\"center\">\r\n                  {activeTrainingSession.progress}% Complete\r\n                </Typography>\r\n              </Paper>\r\n            </Box>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n    </Box>\r\n  );\r\n\r\n  const renderTrainingPathways = () => (\r\n    <Box>\r\n      {/* Training Sessions */}\r\n      <Card sx={{ mb: 3 }}>\r\n        <CardContent>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            <TaskIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n            Training Sessions\r\n          </Typography>\r\n          \r\n          {trainingSessions.length === 0 ? (\r\n            <Alert severity=\"info\">\r\n              No training sessions found. Start your first training session to begin OMAI's learning journey.\r\n            </Alert>\r\n          ) : (\r\n            <TableContainer>\r\n              <Table>\r\n                <TableHead>\r\n                  <TableRow>\r\n                    <TableCell>Session Name</TableCell>\r\n                    <TableCell>Phase</TableCell>\r\n                    <TableCell>Status</TableCell>\r\n                    <TableCell>Progress</TableCell>\r\n                    <TableCell>Duration</TableCell>\r\n                    <TableCell>Results</TableCell>\r\n                    <TableCell>Actions</TableCell>\r\n                  </TableRow>\r\n                </TableHead>\r\n                <TableBody>\r\n                  {trainingSessions.map((session) => (\r\n                    <TableRow key={session.id}>\r\n                      <TableCell>{session.name}</TableCell>\r\n                      <TableCell>\r\n                        <Chip \r\n                          label={session.phase} \r\n                          size=\"small\" \r\n                          variant=\"outlined\"\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Chip \r\n                          label={session.status}\r\n                          color={\r\n                            session.status === 'completed' ? 'success' :\r\n                            session.status === 'running' ? 'primary' :\r\n                            session.status === 'failed' ? 'error' : 'default'\r\n                          }\r\n                          size=\"small\"\r\n                        />\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <Box display=\"flex\" alignItems=\"center\">\r\n                          <LinearProgress \r\n                            variant=\"determinate\" \r\n                            value={session.progress} \r\n                            sx={{ width: 100, mr: 1 }}\r\n                          />\r\n                          <Typography variant=\"body2\">\r\n                            {session.progress}%\r\n                          </Typography>\r\n                        </Box>\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {session.duration ? `${Math.round(session.duration / 60)} min` : '-'}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        {session.results && (\r\n                          <Tooltip title={`Files: ${session.results.filesProcessed}, Memories: ${session.results.memoriesCreated}, Knowledge: ${session.results.knowledgeExtracted}`}>\r\n                            <Chip \r\n                              label={`${session.results.filesProcessed} files`} \r\n                              size=\"small\" \r\n                              variant=\"outlined\"\r\n                            />\r\n                          </Tooltip>\r\n                        )}\r\n                      </TableCell>\r\n                      <TableCell>\r\n                        <IconButton size=\"small\">\r\n                          <ViewIcon />\r\n                        </IconButton>\r\n                      </TableCell>\r\n                    </TableRow>\r\n                  ))}\r\n                </TableBody>\r\n              </Table>\r\n            </TableContainer>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Training Phases Overview */}\r\n      <Card>\r\n        <CardContent>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            Training Phases\r\n          </Typography>\r\n          \r\n          <Grid container spacing={2}>\r\n            {[\r\n              { \r\n                id: 'foundation', \r\n                name: 'Foundation Knowledge', \r\n                description: 'Basic system understanding and file structure analysis',\r\n                icon: <CodeIcon />\r\n              },\r\n              { \r\n                id: 'functional', \r\n                name: 'Functional Understanding', \r\n                description: 'API patterns, component relationships, and data flow',\r\n                icon: <AnalyticsIcon />\r\n              },\r\n              { \r\n                id: 'operational', \r\n                name: 'Operational Intelligence', \r\n                description: 'Deployment, monitoring, and performance patterns',\r\n                icon: <PerformanceIcon />\r\n              },\r\n              { \r\n                id: 'resolution', \r\n                name: 'Issue Resolution', \r\n                description: 'Problem-solving patterns and error handling',\r\n                icon: <InsightsIcon />\r\n              },\r\n              { \r\n                id: 'predictive', \r\n                name: 'Predictive Capabilities', \r\n                description: 'Proactive maintenance and optimization',\r\n                icon: <TrendingUpIcon />\r\n              }\r\n            ].map((phase) => (\r\n              <Grid item xs={12} md={6} lg={4} key={phase.id}>\r\n                <Paper \r\n                  sx={{ \r\n                    p: 2, \r\n                    cursor: 'pointer',\r\n                    '&:hover': { elevation: 4 }\r\n                  }}\r\n                  onClick={() => {\r\n                    setSelectedTrainingPhase(phase.id);\r\n                    setTrainingDialogOpen(true);\r\n                  }}\r\n                >\r\n                  <Box display=\"flex\" alignItems=\"center\" mb={1}>\r\n                    {phase.icon}\r\n                    <Typography variant=\"subtitle1\" sx={{ ml: 1 }}>\r\n                      {phase.name}\r\n                    </Typography>\r\n                  </Box>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    {phase.description}\r\n                  </Typography>\r\n                </Paper>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        </CardContent>\r\n      </Card>\r\n    </Box>\r\n  );\r\n\r\n  const renderKnowledgeAnalytics = () => (\r\n    <Box>\r\n      {knowledgeMetrics && (\r\n        <>\r\n          {/* Knowledge Overview */}\r\n          <Card sx={{ mb: 3 }}>\r\n            <CardContent>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                <MetricsIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n                Knowledge Analytics\r\n              </Typography>\r\n              \r\n              <Grid container spacing={3}>\r\n                <Grid item xs={12} md={4}>\r\n                  <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                    <Typography variant=\"h4\" color=\"primary\">\r\n                      {knowledgeMetrics.totalMemories}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      Total Memories\r\n                    </Typography>\r\n                  </Paper>\r\n                </Grid>\r\n                \r\n                <Grid item xs={12} md={4}>\r\n                  <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                    <Typography variant=\"h4\" color=\"success.main\">\r\n                      {knowledgeMetrics.learningVelocity.memoriesPerWeek}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      Memories/Week\r\n                    </Typography>\r\n                  </Paper>\r\n                </Grid>\r\n                \r\n                <Grid item xs={12} md={4}>\r\n                  <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                    <Typography variant=\"h4\" color=\"info.main\">\r\n                      {Math.round(knowledgeMetrics.learningVelocity.knowledgeGrowthRate * 100)}%\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      Growth Rate\r\n                    </Typography>\r\n                  </Paper>\r\n                </Grid>\r\n              </Grid>\r\n            </CardContent>\r\n          </Card>\r\n\r\n          {/* Categories & Priorities Distribution */}\r\n          <Grid container spacing={3} sx={{ mb: 3 }}>\r\n            <Grid item xs={12} md={6}>\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"h6\" gutterBottom>\r\n                    Knowledge Categories\r\n                  </Typography>\r\n                  <List>\r\n                    {Object.entries(knowledgeMetrics.categoriesDistribution).map(([category, count]) => (\r\n                      <ListItem key={category}>\r\n                        <ListItemText primary={category} />\r\n                        <Chip label={count} size=\"small\" />\r\n                      </ListItem>\r\n                    ))}\r\n                  </List>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n            \r\n            <Grid item xs={12} md={6}>\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"h6\" gutterBottom>\r\n                    Priority Distribution\r\n                  </Typography>\r\n                  <List>\r\n                    {Object.entries(knowledgeMetrics.priorityDistribution).map(([priority, count]) => (\r\n                      <ListItem key={priority}>\r\n                        <ListItemText primary={priority} />\r\n                        <Chip \r\n                          label={count} \r\n                          size=\"small\"\r\n                          color={\r\n                            priority === 'critical' ? 'error' :\r\n                            priority === 'high' ? 'warning' :\r\n                            priority === 'medium' ? 'info' : 'default'\r\n                          }\r\n                        />\r\n                      </ListItem>\r\n                    ))}\r\n                  </List>\r\n                </CardContent>\r\n              </Card>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          {/* Usage Patterns */}\r\n          <Card>\r\n            <CardContent>\r\n              <Typography variant=\"h6\" gutterBottom>\r\n                Usage Patterns\r\n              </Typography>\r\n              \r\n              <Grid container spacing={3}>\r\n                <Grid item xs={12} md={4}>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>\r\n                    Most Used Memories\r\n                  </Typography>\r\n                  <List dense>\r\n                    {knowledgeMetrics.usagePatterns.mostUsed.map((memory, index) => (\r\n                      <ListItem key={index}>\r\n                        <ListItemText \r\n                          primary={memory.title}\r\n                          secondary={`Used ${memory.count} times`}\r\n                        />\r\n                      </ListItem>\r\n                    ))}\r\n                  </List>\r\n                </Grid>\r\n                \r\n                <Grid item xs={12} md={4}>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>\r\n                    Recently Accessed\r\n                  </Typography>\r\n                  <List dense>\r\n                    {knowledgeMetrics.usagePatterns.recentlyAccessed.map((memory, index) => (\r\n                      <ListItem key={index}>\r\n                        <ListItemText \r\n                          primary={memory.title}\r\n                          secondary={new Date(memory.lastAccessed).toLocaleString()}\r\n                        />\r\n                      </ListItem>\r\n                    ))}\r\n                  </List>\r\n                </Grid>\r\n                \r\n                <Grid item xs={12} md={4}>\r\n                  <Typography variant=\"subtitle1\" gutterBottom>\r\n                    Trending Memories\r\n                  </Typography>\r\n                  <List dense>\r\n                    {knowledgeMetrics.usagePatterns.trending.map((memory, index) => (\r\n                      <ListItem key={index}>\r\n                        <ListItemText \r\n                          primary={memory.title}\r\n                          secondary={\r\n                            <Box display=\"flex\" alignItems=\"center\">\r\n                              <TrendingUpIcon sx={{ fontSize: 16, mr: 0.5 }} />\r\n                              {memory.trend > 0 ? '+' : ''}{memory.trend}%\r\n                            </Box>\r\n                          }\r\n                        />\r\n                      </ListItem>\r\n                    ))}\r\n                  </List>\r\n                </Grid>\r\n              </Grid>\r\n            </CardContent>\r\n          </Card>\r\n        </>\r\n      )}\r\n    </Box>\r\n  );\r\n\r\n  const renderEthicsReasoning = () => (\r\n    <Box>\r\n      {/* Ethics Progress Overview */}\r\n      <Card sx={{ mb: 3 }}>\r\n        <CardContent>\r\n          <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={2}>\r\n            <Typography variant=\"h5\" component=\"h2\">\r\n              <PsychologyIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n              OMAI Ethics & Reasoning Foundation\r\n            </Typography>\r\n            <Box>\r\n              <Button\r\n                variant=\"outlined\"\r\n                startIcon={ethicsLoading ? <CircularProgress size={16} /> : <RefreshCwIcon />}\r\n                onClick={refreshOMAIData}\r\n                disabled={ethicsLoading}\r\n                sx={{ mr: 1 }}\r\n              >\r\n                Refresh\r\n              </Button>\r\n              <Button\r\n                variant=\"contained\"\r\n                startIcon={<EthicsIcon />}\r\n                onClick={() => window.open('/omlearn', '_blank')}\r\n              >\r\n                Open OMLearn\r\n              </Button>\r\n            </Box>\r\n          </Box>\r\n\r\n          {ethicsProgress && (\r\n            <Grid container spacing={3}>\r\n              <Grid item xs={12} md={3}>\r\n                <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                  <Typography variant=\"h4\" color=\"primary\">\r\n                    {ethicsProgress.completedSurveys}/{ethicsProgress.totalSurveys}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Surveys Completed\r\n                  </Typography>\r\n                  <LinearProgress \r\n                    variant=\"determinate\" \r\n                    value={(ethicsProgress.completedSurveys / ethicsProgress.totalSurveys) * 100} \r\n                    sx={{ mt: 1 }}\r\n                  />\r\n                </Paper>\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} md={3}>\r\n                <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                  <Typography variant=\"h4\" color=\"success.main\">\r\n                    {ethicsProgress.ethicalFoundationsCount}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Ethical Foundations\r\n                  </Typography>\r\n                </Paper>\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} md={3}>\r\n                <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                  <Typography variant=\"h4\" color=\"info.main\">\r\n                    {Math.round(ethicsProgress.moralComplexityScore)}%\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Moral Complexity\r\n                  </Typography>\r\n                </Paper>\r\n              </Grid>\r\n              \r\n              <Grid item xs={12} md={3}>\r\n                <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                  <Typography variant=\"h4\" color=\"warning.main\">\r\n                    {ethicsProgress.reasoningMaturityLevel}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Reasoning Level\r\n                  </Typography>\r\n                </Paper>\r\n              </Grid>\r\n            </Grid>\r\n          )}\r\n\r\n          {/* OMLearn Integration Status */}\r\n          <Box mt={3}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              OMLearn Survey Progress\r\n            </Typography>\r\n            {omlearnSurveys.length > 0 ? (\r\n              <Grid container spacing={2}>\r\n                {omlearnSurveys.map((survey) => (\r\n                  <Grid item xs={12} md={6} key={survey.id}>\r\n                    <Paper sx={{ p: 2 }}>\r\n                      <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"start\" mb={1}>\r\n                        <Typography variant=\"subtitle1\">\r\n                          {survey.title}\r\n                        </Typography>\r\n                        <Chip \r\n                          label={survey.status.replace('_', ' ')}\r\n                          color={\r\n                            survey.status === 'completed' ? 'success' :\r\n                            survey.status === 'in_progress' ? 'primary' : 'default'\r\n                          }\r\n                          size=\"small\"\r\n                        />\r\n                      </Box>\r\n                      <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                        {survey.ageRange} â€¢ {survey.focus}\r\n                      </Typography>\r\n                      <Box display=\"flex\" alignItems=\"center\" mb={1}>\r\n                        <LinearProgress \r\n                          variant=\"determinate\" \r\n                          value={(survey.completedQuestions / survey.totalQuestions) * 100} \r\n                          sx={{ width: '100%', mr: 1 }}\r\n                        />\r\n                        <Typography variant=\"body2\">\r\n                          {survey.completedQuestions}/{survey.totalQuestions}\r\n                        </Typography>\r\n                      </Box>\r\n                    </Paper>\r\n                  </Grid>\r\n                ))}\r\n              </Grid>\r\n            ) : (\r\n              <Alert severity=\"info\">\r\n                No OMLearn surveys found. Complete OMLearn assessments to establish OMAI's ethical foundation.\r\n              </Alert>\r\n            )}\r\n          </Box>\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Ethical Foundations */}\r\n      <Card sx={{ mb: 3 }}>\r\n        <CardContent>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            <MoralIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n            Ethical Foundations\r\n          </Typography>\r\n          \r\n          {ethicalFoundations.length > 0 ? (\r\n            <Grid container spacing={2}>\r\n              {ethicalFoundations.slice(0, 6).map((foundation) => (\r\n                <Grid item xs={12} md={6} lg={4} key={foundation.id}>\r\n                  <Paper \r\n                    sx={{ \r\n                      p: 2, \r\n                      cursor: 'pointer',\r\n                      '&:hover': { elevation: 4 }\r\n                    }}\r\n                    onClick={() => {\r\n                      setSelectedFoundation(foundation);\r\n                      setFoundationDialogOpen(true);\r\n                    }}\r\n                  >\r\n                    <Box display=\"flex\" justifyContent=\"between\" alignItems=\"start\" mb={1}>\r\n                      <Typography variant=\"subtitle2\" sx={{ flexGrow: 1, mr: 1 }}>\r\n                        {foundation.question.length > 80 \r\n                          ? `${foundation.question.substring(0, 80)}...` \r\n                          : foundation.question}\r\n                      </Typography>\r\n                      <Chip \r\n                        label={foundation.gradeGroup}\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                      />\r\n                    </Box>\r\n                    \r\n                    <Typography \r\n                      variant=\"body2\" \r\n                      color=\"text.secondary\" \r\n                      sx={{ \r\n                        display: '-webkit-box',\r\n                        WebkitLineClamp: 2,\r\n                        WebkitBoxOrient: 'vertical',\r\n                        overflow: 'hidden',\r\n                        mb: 1\r\n                      }}\r\n                    >\r\n                      {foundation.userResponse}\r\n                    </Typography>\r\n                    \r\n                    <Box display=\"flex\" justifyContent=\"between\" alignItems=\"center\">\r\n                      <Chip \r\n                        label={foundation.category.replace('_', ' ')}\r\n                        size=\"small\"\r\n                        color={\r\n                          foundation.category === 'moral_development' ? 'primary' :\r\n                          foundation.category === 'ethical_thinking' ? 'success' :\r\n                          foundation.category === 'reasoning_patterns' ? 'info' : 'default'\r\n                        }\r\n                      />\r\n                      <Typography variant=\"caption\" color=\"text.secondary\">\r\n                        Weight: {foundation.weight}\r\n                      </Typography>\r\n                    </Box>\r\n                  </Paper>\r\n                </Grid>\r\n              ))}\r\n            </Grid>\r\n          ) : (\r\n            <Alert severity=\"warning\">\r\n              No ethical foundations established yet. Complete OMLearn surveys to build OMAI's moral reasoning framework.\r\n            </Alert>\r\n          )}\r\n\r\n          {ethicalFoundations.length > 6 && (\r\n            <Box textAlign=\"center\" mt={2}>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                Showing 6 of {ethicalFoundations.length} ethical foundations\r\n              </Typography>\r\n            </Box>\r\n          )}\r\n        </CardContent>\r\n      </Card>\r\n\r\n      {/* Moral Reasoning Categories */}\r\n      <Card>\r\n        <CardContent>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            <ReasoningIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n            Moral Reasoning Categories\r\n          </Typography>\r\n          \r\n          <Grid container spacing={3}>\r\n            {[\r\n              { \r\n                category: 'moral_development', \r\n                name: 'Moral Development', \r\n                description: 'Basic moral concepts and value formation',\r\n                icon: 'ðŸŒ±',\r\n                color: 'primary'\r\n              },\r\n              { \r\n                category: 'ethical_thinking', \r\n                name: 'Ethical Thinking', \r\n                description: 'Applied ethics and moral decision-making',\r\n                icon: 'ðŸ¤”',\r\n                color: 'success'\r\n              },\r\n              { \r\n                category: 'reasoning_patterns', \r\n                name: 'Reasoning Patterns', \r\n                description: 'Logical structures and thought processes',\r\n                icon: 'ðŸ§©',\r\n                color: 'info'\r\n              },\r\n              { \r\n                category: 'philosophical_concepts', \r\n                name: 'Philosophical Concepts', \r\n                description: 'Abstract moral and philosophical understanding',\r\n                icon: 'ðŸŽ­',\r\n                color: 'secondary'\r\n              }\r\n            ].map((category) => {\r\n              const foundationsInCategory = ethicalFoundations.filter(f => f.category === category.category);\r\n              return (\r\n                <Grid item xs={12} md={6} key={category.category}>\r\n                  <Paper sx={{ p: 2, textAlign: 'center' }}>\r\n                    <Typography variant=\"h2\" sx={{ mb: 1 }}>\r\n                      {category.icon}\r\n                    </Typography>\r\n                    <Typography variant=\"h6\" color={`${category.color}.main`} gutterBottom>\r\n                      {category.name}\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                      {category.description}\r\n                    </Typography>\r\n                    <Typography variant=\"h4\" color={`${category.color}.main`}>\r\n                      {foundationsInCategory.length}\r\n                    </Typography>\r\n                    <Typography variant=\"caption\" color=\"text.secondary\">\r\n                      foundations established\r\n                    </Typography>\r\n                  </Paper>\r\n                </Grid>\r\n              );\r\n            })}\r\n          </Grid>\r\n        </CardContent>\r\n      </Card>\r\n    </Box>\r\n  );\r\n\r\n  return (\r\n    <Box sx={{ p: 3 }}>\r\n      <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\" sx={{ mb: 3 }}>\r\n        <Box>\r\n          <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n            <AIIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n            OMAI Learning Hub\r\n          </Typography>\r\n          <Typography variant=\"body1\" color=\"text.secondary\">\r\n            Comprehensive OMAI learning, memory management, and progress tracking\r\n          </Typography>\r\n        </Box>\r\n        <Button\r\n          variant=\"outlined\"\r\n          startIcon={<SettingsIcon />}\r\n          onClick={() => setShowSettings(!showSettings)}\r\n        >\r\n          Settings\r\n        </Button>\r\n      </Stack>\r\n\r\n      <Paper sx={{ width: '100%' }}>\r\n        <Tabs value={activeTab} onChange={handleTabChange} sx={{ borderBottom: 1, borderColor: 'divider' }}>\r\n          <Tab \r\n            label=\"Learning Dashboard\" \r\n            icon={<PsychologyIcon />}\r\n            iconPosition=\"start\"\r\n          />\r\n          <Tab \r\n            label=\"Training Pathways\" \r\n            icon={<LearningIcon />}\r\n            iconPosition=\"start\"\r\n          />\r\n          <Tab \r\n            label=\"Memory Management\" \r\n            icon={<MemoryIcon />}\r\n            iconPosition=\"start\"\r\n          />\r\n          <Tab \r\n            label=\"Knowledge Analytics\" \r\n            icon={<AnalyticsIcon />}\r\n            iconPosition=\"start\"\r\n          />\r\n          <Tab \r\n            label=\"Ethics & Reasoning\" \r\n            icon={<PsychologyIcon />}\r\n            iconPosition=\"start\"\r\n          />\r\n          <Tab \r\n            label=\"OMAI Discovery\" \r\n            icon={<AIIcon />}\r\n            iconPosition=\"start\"\r\n          />\r\n          <Tab label=\"Imports & Scripts\" />\r\n          <Tab label=\"File Console\" />\r\n          <Tab label=\"Console\" />\r\n          <Tab label=\"Encrypted Storage\" />\r\n          <Tab label=\"Registry Management\" />\r\n          <Tab label=\"Custom Components\" />\r\n        </Tabs>\r\n\r\n        <Box sx={{ p: 3 }}>\r\n          {activeTab === 0 && renderLearningDashboard()}\r\n          {activeTab === 1 && renderTrainingPathways()}\r\n          {activeTab === 2 && <MemoryManager />}\r\n          {activeTab === 3 && renderKnowledgeAnalytics()}\r\n          {activeTab === 4 && renderEthicsReasoning()}\r\n          {activeTab === 5 && <OMAIDiscoveryPanel />}\r\n          \r\n          {/* Keep existing tabs content - just moved to higher numbers */}\r\n          {activeTab === 6 && (\r\n            <Stack spacing={3}>\r\n              {/* Settings Panel */}\r\n              {showSettings && (\r\n                <Card>\r\n                  <CardContent>\r\n                    <Typography variant=\"h6\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                      <SettingsIcon />\r\n                      Big Book Settings\r\n                    </Typography>\r\n                                         <Stack spacing={3}>\r\n                       <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap' }}>\r\n                         <TextField\r\n                           sx={{ flex: 1, minWidth: 250 }}\r\n                           label=\"Database User\"\r\n                           value={settings.databaseUser}\r\n                           onChange={(e) => setSettings(prev => ({ ...prev, databaseUser: e.target.value }))}\r\n                           placeholder=\"root\"\r\n                         />\r\n                         <TextField\r\n                           sx={{ flex: 1, minWidth: 250 }}\r\n                           type=\"password\"\r\n                           label=\"Database Password\"\r\n                           value={settings.databasePassword}\r\n                           onChange={(e) => setSettings(prev => ({ ...prev, databasePassword: e.target.value }))}\r\n                           placeholder=\"Enter database password\"\r\n                         />\r\n                       </Box>\r\n                       <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap' }}>\r\n                         <TextField\r\n                           sx={{ flex: 1, minWidth: 250 }}\r\n                           label=\"Default Database\"\r\n                           value={settings.defaultDatabase}\r\n                           onChange={(e) => setSettings(prev => ({ ...prev, defaultDatabase: e.target.value }))}\r\n                           placeholder=\"omai_db\"\r\n                         />\r\n                         <TextField\r\n                           sx={{ flex: 1, minWidth: 250 }}\r\n                           type=\"number\"\r\n                           label=\"Script Timeout (ms)\"\r\n                           value={settings.scriptTimeout}\r\n                           onChange={(e) => setSettings(prev => ({ ...prev, scriptTimeout: parseInt(e.target.value) }))}\r\n                         />\r\n                       </Box>\r\n                       <FormControlLabel\r\n                         control={\r\n                           <Switch\r\n                             checked={settings.useSudo}\r\n                             onChange={(e) => setSettings(prev => ({ ...prev, useSudo: e.target.checked }))}\r\n                           />\r\n                         }\r\n                         label=\"Use Sudo for Script Execution\"\r\n                       />\r\n                       {settings.useSudo && (\r\n                         <TextField\r\n                           fullWidth\r\n                           type=\"password\"\r\n                           label=\"Sudo Password\"\r\n                           value={settings.sudoPassword}\r\n                           onChange={(e) => setSettings(prev => ({ ...prev, sudoPassword: e.target.value }))}\r\n                           placeholder=\"Enter sudo password\"\r\n                         />\r\n                       )}\r\n                       <Button\r\n                         variant=\"contained\"\r\n                         startIcon={<SaveIcon />}\r\n                         onClick={saveSettings}\r\n                       >\r\n                         Save Settings\r\n                       </Button>\r\n                     </Stack>\r\n                  </CardContent>\r\n                </Card>\r\n              )}\r\n\r\n              {/* File Upload Area */}\r\n              <Card>\r\n                <CardContent>\r\n                  <Typography variant=\"h6\" gutterBottom>\r\n                    File Upload\r\n                  </Typography>\r\n                  <Box\r\n                    sx={{\r\n                      border: '2px dashed',\r\n                      borderColor: 'grey.300',\r\n                      borderRadius: 2,\r\n                      p: 4,\r\n                      textAlign: 'center',\r\n                      cursor: 'pointer',\r\n                      '&:hover': {\r\n                        borderColor: 'primary.main',\r\n                        backgroundColor: 'action.hover'\r\n                      }\r\n                    }}\r\n                    onDrop={handleFileDrop}\r\n                    onDragOver={handleDragOver}\r\n                    onClick={() => fileInputRef.current?.click()}\r\n                  >\r\n                    <CloudUploadIcon sx={{ fontSize: 48, color: 'grey.500', mb: 2 }} />\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                      Drop files here or click to upload\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"text.secondary\">\r\n                      Supports all file types: .md, .js, .sh, .py, .sql, .html, .css, .json, .xml, .txt, .pdf, images, videos, audio, archives (max 10MB)\r\n                    </Typography>\r\n                    <Typography variant=\"body2\" color=\"primary.main\" sx={{ mt: 1, fontWeight: 'bold' }}>\r\n                      ðŸ—ºï¸ Special: Drop Parish Map .zip files for auto-installation!\r\n                    </Typography>\r\n                    <input\r\n                      ref={fileInputRef}\r\n                      type=\"file\"\r\n                      multiple\r\n                      accept=\".md,.js,.jsx,.ts,.tsx,.sh,.bash,.py,.sql,.html,.htm,.css,.scss,.sass,.json,.xml,.txt,.log,.pdf,.jpg,.jpeg,.png,.gif,.svg,.webp,.mp4,.avi,.mov,.wmv,.mp3,.wav,.ogg,.zip,.tar,.gz,.rar\"\r\n                      onChange={handleFileInputChange}\r\n                      style={{ display: 'none' }}\r\n                    />\r\n                  </Box>\r\n                </CardContent>\r\n              </Card>\r\n\r\n              {/* Uploaded Files List */}\r\n              {uploadedFiles.length > 0 && (\r\n                <Card>\r\n                  <CardContent>\r\n                    <Typography variant=\"h6\" gutterBottom>\r\n                      Uploaded Files\r\n                    </Typography>\r\n                    <List>\r\n                      {uploadedFiles.map((file) => (\r\n                        <ListItem key={file.id} divider>\r\n                          <ListItemIcon>\r\n                            {getFileIcon(file.type)}\r\n                          </ListItemIcon>\r\n                          <ListItemText\r\n                            primary={file.name}\r\n                            secondary={`${(file.size / 1024).toFixed(1)} KB â€¢ ${file.uploaded.toLocaleString()}`}\r\n                          />\r\n                          <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                            {getFileTypeChip(file.type)}\r\n                            <Tooltip title=\"Execute\">\r\n                              <IconButton\r\n                                onClick={() => executeFile(file)}\r\n                                disabled={isExecuting}\r\n                                color=\"primary\"\r\n                              >\r\n                                <PlayIcon />\r\n                              </IconButton>\r\n                            </Tooltip>\r\n                            <Tooltip title=\"Remove\">\r\n                              <IconButton\r\n                                onClick={() => removeFile(file.id)}\r\n                                color=\"error\"\r\n                              >\r\n                                <Trash2Icon />\r\n                              </IconButton>\r\n                            </Tooltip>\r\n                          </Box>\r\n                        </ListItem>\r\n                      ))}\r\n                    </List>\r\n                  </CardContent>\r\n                </Card>\r\n              )}\r\n            </Stack>\r\n          )}\r\n\r\n          {activeTab === 7 && (\r\n            <BigBookConsolePage\r\n              files={uploadedFiles}\r\n              consoleOutput={consoleOutput}\r\n              isExecuting={isExecuting}\r\n              onFileSelect={setSelectedFile}\r\n              onFileExecute={executeFile}\r\n              onFileDelete={removeFile}\r\n              onQuestionnairePreview={handleQuestionnairePreview}\r\n              onClearConsole={clearConsole}\r\n              selectedFile={selectedFile}\r\n            />\r\n          )}\r\n\r\n          {activeTab === 8 && (\r\n            <Box>\r\n              <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\" sx={{ mb: 2 }}>\r\n                <Typography variant=\"h6\">\r\n                  Console Output\r\n                </Typography>\r\n                <Button\r\n                  variant=\"outlined\"\r\n                  startIcon={<RefreshCwIcon />}\r\n                  onClick={clearConsole}\r\n                  size=\"small\"\r\n                >\r\n                  Clear Console\r\n                </Button>\r\n              </Stack>\r\n              \r\n              <Paper\r\n                ref={consoleRef}\r\n                sx={{\r\n                  height: 400,\r\n                  overflow: 'auto',\r\n                  p: 2,\r\n                  backgroundColor: '#1e1e1e',\r\n                  color: '#ffffff',\r\n                  fontFamily: 'monospace',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n              >\r\n                {consoleOutput.length === 0 ? (\r\n                  <Typography color=\"grey.500\" textAlign=\"center\">\r\n                    No console output yet. Upload and execute files to see results.\r\n                  </Typography>\r\n                ) : (\r\n                  consoleOutput.map((output) => (\r\n                    <Box key={output.id} sx={{ mb: 1 }}>\r\n                      <Typography\r\n                        component=\"span\"\r\n                        sx={{\r\n                          color: output.type === 'error' ? '#ff6b6b' :\r\n                                 output.type === 'success' ? '#51cf66' :\r\n                                 output.type === 'warning' ? '#ffd43b' :\r\n                                 output.type === 'command' ? '#74c0fc' : '#ffffff',\r\n                          fontWeight: output.type === 'command' ? 'bold' : 'normal'\r\n                        }}\r\n                      >\r\n                        [{output.timestamp.toLocaleTimeString()}] {output.content}\r\n                      </Typography>\r\n                      {output.source && (\r\n                        <Typography variant=\"caption\" color=\"text.secondary\" sx={{ ml: 2 }}>\r\n                          ({output.source})\r\n                        </Typography>\r\n                      )}\r\n                    </Box>\r\n                  ))\r\n                )}\r\n              </Paper>\r\n            </Box>\r\n          )}\r\n\r\n          {activeTab === 9 && <EncryptedStoragePanel />}\r\n\r\n          {activeTab === 10 && (\r\n            <RegistryManagementPanel />\r\n          )}\r\n\r\n          {activeTab === 11 && <CustomComponentsPanel />}\r\n        </Box>\r\n      </Paper>\r\n\r\n      {/* Questionnaire Preview Modal */}\r\n      <QuestionnairePreview\r\n        open={questionnairePreviewOpen}\r\n        onClose={() => {\r\n          setQuestionnairePreviewOpen(false);\r\n          setPreviewFile(null);\r\n        }}\r\n        file={previewFile}\r\n        onSubmit={handleQuestionnaireSubmit}\r\n      />\r\n\r\n      {/* TSX Component Installation Wizard */}\r\n      <TSXComponentInstallWizard\r\n        open={tsxWizardOpen}\r\n        onClose={() => {\r\n          setTsxWizardOpen(false);\r\n          setTsxFile(null);\r\n        }}\r\n        file={tsxFile}\r\n        onInstallComplete={(result) => {\r\n          addConsoleMessage('success', `Component installation completed: ${result.componentName}`);\r\n          if (result.previewUrl) {\r\n            addConsoleMessage('info', `Preview available at: ${result.previewUrl}`);\r\n          }\r\n        }}\r\n        onConsoleMessage={addConsoleMessage}\r\n      />\r\n\r\n      {/* Start Training Dialog */}\r\n      <Dialog \r\n        open={trainingDialogOpen} \r\n        onClose={() => setTrainingDialogOpen(false)}\r\n        maxWidth=\"sm\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>\r\n          <LearningIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n          Start OMAI Training Session\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"body1\" paragraph>\r\n            Select a training phase to begin OMAI's learning session. Each phase builds upon previous knowledge.\r\n          </Typography>\r\n          \r\n          <FormControl fullWidth>\r\n            <FormLabel>Training Phase</FormLabel>\r\n            <Box mt={1}>\r\n              {[\r\n                { id: 'foundation', name: 'Foundation Knowledge', icon: 'ðŸ—ï¸' },\r\n                { id: 'functional', name: 'Functional Understanding', icon: 'âš™ï¸' },\r\n                { id: 'operational', name: 'Operational Intelligence', icon: 'ðŸ”§' },\r\n                { id: 'resolution', name: 'Issue Resolution', icon: 'ðŸ› ï¸' },\r\n                { id: 'predictive', name: 'Predictive Capabilities', icon: 'ðŸ”®' }\r\n              ].map((phase) => (\r\n                <Paper \r\n                  key={phase.id}\r\n                  sx={{ \r\n                    p: 2, \r\n                    mb: 1, \r\n                    cursor: 'pointer',\r\n                    border: selectedTrainingPhase === phase.id ? 2 : 1,\r\n                    borderColor: selectedTrainingPhase === phase.id ? 'primary.main' : 'divider'\r\n                  }}\r\n                  onClick={() => setSelectedTrainingPhase(phase.id)}\r\n                >\r\n                  <Typography variant=\"subtitle1\">\r\n                    {phase.icon} {phase.name}\r\n                  </Typography>\r\n                </Paper>\r\n              ))}\r\n            </Box>\r\n          </FormControl>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setTrainingDialogOpen(false)}>Cancel</Button>\r\n          <Button \r\n            onClick={() => startTrainingSession(selectedTrainingPhase)}\r\n            variant=\"contained\"\r\n            disabled={learningLoading}\r\n            startIcon={learningLoading ? <CircularProgress size={16} /> : <PlayIcon />}\r\n          >\r\n            {learningLoading ? 'Starting...' : 'Start Training'}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n\r\n      {/* Ethical Foundation Details Dialog */}\r\n      <Dialog \r\n        open={foundationDialogOpen} \r\n        onClose={() => setFoundationDialogOpen(false)}\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>\r\n          {selectedFoundation && (\r\n            <>\r\n              <PsychologyIcon sx={{ mr: 1, verticalAlign: 'middle' }} />\r\n              Ethical Foundation Details\r\n              <Chip \r\n                label={selectedFoundation.gradeGroup}\r\n                size=\"small\"\r\n                sx={{ ml: 2 }}\r\n              />\r\n            </>\r\n          )}\r\n        </DialogTitle>\r\n        <DialogContent>\r\n          {selectedFoundation && (\r\n            <Box>\r\n              <Typography variant=\"h6\" gutterBottom color=\"primary\">\r\n                Question\r\n              </Typography>\r\n              <Typography variant=\"body1\" paragraph>\r\n                {selectedFoundation.question}\r\n              </Typography>\r\n              \r\n              <Typography variant=\"h6\" gutterBottom color=\"primary\">\r\n                Your Response\r\n              </Typography>\r\n              <Typography variant=\"body1\" paragraph>\r\n                {selectedFoundation.userResponse}\r\n              </Typography>\r\n              \r\n              <Typography variant=\"h6\" gutterBottom color=\"primary\">\r\n                Reasoning\r\n              </Typography>\r\n              <Typography variant=\"body1\" paragraph>\r\n                {selectedFoundation.reasoning}\r\n              </Typography>\r\n              \r\n              <Divider sx={{ my: 2 }} />\r\n              \r\n              <Grid container spacing={2}>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\" color=\"primary\">Category</Typography>\r\n                  <Typography variant=\"body2\">\r\n                    {selectedFoundation.category.replace('_', ' ')}\r\n                  </Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\" color=\"primary\">Weight</Typography>\r\n                  <Typography variant=\"body2\">{selectedFoundation.weight}</Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\" color=\"primary\">Confidence</Typography>\r\n                  <Typography variant=\"body2\">{selectedFoundation.confidence}%</Typography>\r\n                </Grid>\r\n                <Grid item xs={6}>\r\n                  <Typography variant=\"subtitle2\" color=\"primary\">Created</Typography>\r\n                  <Typography variant=\"body2\">\r\n                    {new Date(selectedFoundation.createdAt).toLocaleString()}\r\n                  </Typography>\r\n                </Grid>\r\n              </Grid>\r\n              \r\n              {selectedFoundation.appliedContexts.length > 0 && (\r\n                <>\r\n                  <Divider sx={{ my: 2 }} />\r\n                  <Typography variant=\"subtitle2\" color=\"primary\" gutterBottom>\r\n                    Applied Contexts\r\n                  </Typography>\r\n                  <Box display=\"flex\" flexWrap=\"wrap\" gap={1}>\r\n                    {selectedFoundation.appliedContexts.map((context, index) => (\r\n                      <Chip\r\n                        key={index}\r\n                        label={context}\r\n                        size=\"small\"\r\n                        variant=\"outlined\"\r\n                      />\r\n                    ))}\r\n                  </Box>\r\n                </>\r\n              )}\r\n              \r\n              {selectedFoundation.lastReferenced && (\r\n                <>\r\n                  <Divider sx={{ my: 2 }} />\r\n                  <Typography variant=\"subtitle2\" color=\"primary\">\r\n                    Last Referenced\r\n                  </Typography>\r\n                  <Typography variant=\"body2\">\r\n                    {new Date(selectedFoundation.lastReferenced).toLocaleString()}\r\n                  </Typography>\r\n                </>\r\n              )}\r\n            </Box>\r\n          )}\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={() => setFoundationDialogOpen(false)}>Close</Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </Box>\r\n  );\r\n\r\n  // Custom Components Panel Component\r\n  const CustomComponentsPanel: React.FC = () => {\r\n    if (selectedCustomComponent) {\r\n      return (\r\n        <BigBookCustomComponentViewer\r\n          componentName={selectedCustomComponent}\r\n          onBack={() => setSelectedCustomComponent(null)}\r\n          onError={(error) => {\r\n            addConsoleMessage('error', `Component viewer error: ${error}`);\r\n            setSelectedCustomComponent(null);\r\n          }}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (customComponentsLoading) {\r\n      return (\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"400px\">\r\n          <CircularProgress />\r\n          <Typography variant=\"body1\" sx={{ ml: 2 }}>Loading custom components...</Typography>\r\n        </Box>\r\n      );\r\n    }\r\n\r\n    const componentCount = customComponents ? Object.keys(customComponents.components || {}).length : 0;\r\n\r\n    return (\r\n      <Box sx={{ p: 3 }}>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\r\n          <Box>\r\n            <Typography variant=\"h5\" gutterBottom>\r\n              Custom Components\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\">\r\n              Big Book custom components with automatic menu integration ({componentCount} components)\r\n            </Typography>\r\n          </Box>\r\n          <Button \r\n            variant=\"outlined\" \r\n            startIcon={<RefreshCwIcon />}\r\n            onClick={loadCustomComponents}\r\n          >\r\n            Refresh\r\n          </Button>\r\n        </Box>\r\n\r\n        {componentCount === 0 ? (\r\n          <Alert severity=\"info\" sx={{ mb: 2 }}>\r\n            <Typography variant=\"subtitle2\" gutterBottom>\r\n              No Custom Components Found\r\n            </Typography>\r\n            <Typography variant=\"body2\">\r\n              Use the TSX Component Installation Wizard with \"Big Book Auto-Install Mode\" to add custom components with automatic menu integration.\r\n            </Typography>\r\n          </Alert>\r\n        ) : (\r\n          <Grid container spacing={2}>\r\n            {Object.entries(customComponents.components || {}).map(([componentId, component]: [string, any]) => (\r\n              <Grid item xs={12} sm={6} md={4} key={componentId}>\r\n                <Card \r\n                  sx={{ \r\n                    cursor: 'pointer', \r\n                    height: '100%',\r\n                    '&:hover': { \r\n                      boxShadow: 3, \r\n                      transform: 'translateY(-2px)',\r\n                      transition: 'all 0.2s ease-in-out'\r\n                    } \r\n                  }}\r\n                  onClick={() => setSelectedCustomComponent(componentId)}\r\n                >\r\n                  <CardContent>\r\n                    <Box display=\"flex\" alignItems=\"center\" mb={1}>\r\n                      <AddonIcon color=\"primary\" sx={{ mr: 1 }} />\r\n                      <Typography variant=\"h6\" component=\"div\">\r\n                        {component.displayName || component.name}\r\n                      </Typography>\r\n                    </Box>\r\n                    \r\n                    <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2, minHeight: '2.5em' }}>\r\n                      {component.description || `Custom Big Book component: ${component.displayName || component.name}`}\r\n                    </Typography>\r\n                    \r\n                    <Box sx={{ mb: 2 }}>\r\n                      <Chip \r\n                        label={component.route} \r\n                        size=\"small\" \r\n                        variant=\"outlined\" \r\n                        sx={{ mr: 1, mb: 1 }}\r\n                      />\r\n                      {component.hasJSX && (\r\n                        <Chip \r\n                          label=\"JSX\" \r\n                          size=\"small\" \r\n                          color=\"primary\" \r\n                          sx={{ mr: 1, mb: 1 }}\r\n                        />\r\n                      )}\r\n                      {component.hasHooks && (\r\n                        <Chip \r\n                          label=\"Hooks\" \r\n                          size=\"small\" \r\n                          color=\"secondary\" \r\n                          sx={{ mr: 1, mb: 1 }}\r\n                        />\r\n                      )}\r\n                    </Box>\r\n                    \r\n                    <Typography variant=\"caption\" color=\"text.secondary\">\r\n                      Installed: {new Date(component.installedAt).toLocaleDateString()}\r\n                    </Typography>\r\n                    \r\n                    <Box sx={{ mt: 2, display: 'flex', gap: 1 }}>\r\n                      <Button \r\n                        size=\"small\" \r\n                        variant=\"outlined\"\r\n                        startIcon={<ViewIcon />}\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          setSelectedCustomComponent(componentId);\r\n                        }}\r\n                      >\r\n                        View\r\n                      </Button>\r\n                      <Button \r\n                        size=\"small\" \r\n                        variant=\"outlined\"\r\n                        color=\"error\"\r\n                        startIcon={<Trash2Icon />}\r\n                        onClick={(e) => {\r\n                          e.stopPropagation();\r\n                          handleRemoveCustomComponent(component);\r\n                        }}\r\n                      >\r\n                        Remove\r\n                      </Button>\r\n                    </Box>\r\n                  </CardContent>\r\n                </Card>\r\n              </Grid>\r\n            ))}\r\n          </Grid>\r\n        )}\r\n\r\n        {customComponents?.menu && customComponents.menu.length > 0 && (\r\n          <Box sx={{ mt: 4 }}>\r\n            <Typography variant=\"h6\" gutterBottom>\r\n              Sidebar Menu Items\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mb: 2 }}>\r\n              These components are automatically added to the Big Book sidebar navigation\r\n            </Typography>\r\n            <List>\r\n              {customComponents.menu.map((menuItem: any) => (\r\n                <ListItem key={menuItem.id} divider>\r\n                  <ListItemIcon>\r\n                    <AddonIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText\r\n                    primary={menuItem.displayName}\r\n                    secondary={`Route: ${menuItem.route}`}\r\n                  />\r\n                  <ListItemSecondaryAction>\r\n                    <Button\r\n                      size=\"small\"\r\n                      onClick={() => setSelectedCustomComponent(menuItem.id)}\r\n                    >\r\n                      Open\r\n                    </Button>\r\n                  </ListItemSecondaryAction>\r\n                </ListItem>\r\n              ))}\r\n            </List>\r\n          </Box>\r\n        )}\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  // Registry Management Panel Component\r\n  const RegistryManagementPanel: React.FC = () => {\r\n    const getRegistryIcon = (type: string) => {\r\n      switch (type) {\r\n        case 'addons': return <AddonIcon />;\r\n        case 'scripts': return <TerminalIcon />;\r\n        case 'docs': return <DocIcon />;\r\n        case 'configs': return <ConfigIcon />;\r\n        case 'data': return <DataIcon />;\r\n        default: return <FileTextIcon />;\r\n      }\r\n    };\r\n\r\n    const getItemIcon = (item: any) => {\r\n      if (item.type?.includes('component') || item.type?.includes('javascript')) return <CodeIcon />;\r\n      if (item.type?.includes('script')) return <TerminalIcon />;\r\n      if (item.type?.includes('doc')) return <DocIcon />;\r\n      if (item.type?.includes('config')) return <ConfigIcon />;\r\n      if (item.type?.includes('zip')) return <DataIcon />;\r\n      return <FileTextIcon />;\r\n    };\r\n\r\n    const formatDate = (dateString: string) => {\r\n      return new Date(dateString).toLocaleString();\r\n    };\r\n\r\n    const getItemPath = (item: any) => {\r\n      return item.route || item.webPath || item.storagePath || item.path || 'N/A';\r\n    };\r\n\r\n    if (registriesLoading) {\r\n      return (\r\n        <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"400px\">\r\n          <CircularProgress />\r\n          <Typography variant=\"body1\" sx={{ ml: 2 }}>Loading registries...</Typography>\r\n        </Box>\r\n      );\r\n    }\r\n\r\n    if (registriesError) {\r\n      return (\r\n        <Box p={3}>\r\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n            Failed to load registries: {registriesError}\r\n          </Alert>\r\n          <Button variant=\"contained\" onClick={loadRegistries}>\r\n            Retry\r\n          </Button>\r\n        </Box>\r\n      );\r\n    }\r\n\r\n    if (!registries) {\r\n      return (\r\n        <Box p={3}>\r\n          <Alert severity=\"info\">\r\n            No registry data available. Try loading some files first.\r\n          </Alert>\r\n        </Box>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <Box p={3}>\r\n        <Box display=\"flex\" justifyContent=\"space-between\" alignItems=\"center\" mb={3}>\r\n          <Typography variant=\"h5\">Registry Management</Typography>\r\n          <Button \r\n            variant=\"outlined\" \r\n            startIcon={<RefreshCwIcon />}\r\n            onClick={loadRegistries}\r\n          >\r\n            Refresh\r\n          </Button>\r\n        </Box>\r\n\r\n        {Object.entries(registries).map(([registryType, registry]: [string, any]) => (\r\n          <Accordion key={registryType} defaultExpanded={Object.keys(registry.items || {}).length > 0}>\r\n            <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n              <Box display=\"flex\" alignItems=\"center\" gap={1}>\r\n                {getRegistryIcon(registryType)}\r\n                <Typography variant=\"h6\" sx={{ textTransform: 'capitalize' }}>\r\n                  {registryType} ({Object.keys(registry.items || {}).length} items)\r\n                </Typography>\r\n                <Chip \r\n                  label={`v${registry?.version || '1.0'}`} \r\n                  size=\"small\" \r\n                  variant=\"outlined\" \r\n                />\r\n              </Box>\r\n            </AccordionSummary>\r\n            <AccordionDetails>\r\n              {Object.keys(registry.items || {}).length === 0 ? (\r\n                <Typography color=\"text.secondary\">\r\n                  No {registryType} registered yet.\r\n                </Typography>\r\n              ) : (\r\n                <TableContainer component={Paper} variant=\"outlined\">\r\n                  <Table size=\"small\">\r\n                    <TableHead>\r\n                      <TableRow>\r\n                        <TableCell>Name</TableCell>\r\n                        <TableCell>Type</TableCell>\r\n                        <TableCell>Path/Route</TableCell>\r\n                        <TableCell>Status</TableCell>\r\n                        <TableCell>Created</TableCell>\r\n                        <TableCell>Actions</TableCell>\r\n                      </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                      {Object.entries(registry.items || {})\r\n                        .filter(([, item]) => item !== null && item !== undefined)\r\n                        .map(([itemId, item]: [string, any]) => (\r\n                        <TableRow key={itemId}>\r\n                          <TableCell>\r\n                            <Box display=\"flex\" alignItems=\"center\" gap={1}>\r\n                              {getItemIcon(item)}\r\n                              <Box>\r\n                                <Typography variant=\"body2\" fontWeight=\"medium\">\r\n                                  {item.displayName || item.title || item.name || 'Unnamed'}\r\n                                </Typography>\r\n                                {item.description && (\r\n                                  <Typography variant=\"caption\" color=\"text.secondary\">\r\n                                    {item.description}\r\n                                  </Typography>\r\n                                )}\r\n                              </Box>\r\n                            </Box>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Chip \r\n                              label={item.type || 'unknown'} \r\n                              size=\"small\" \r\n                              variant=\"outlined\"\r\n                              color={item.enabled ? 'success' : 'default'}\r\n                            />\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Typography variant=\"body2\" fontFamily=\"monospace\">\r\n                              {getItemPath(item)}\r\n                            </Typography>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Chip \r\n                              label={item.enabled ? 'Enabled' : 'Disabled'} \r\n                              size=\"small\"\r\n                              color={item.enabled ? 'success' : 'warning'}\r\n                              variant={item.enabled ? 'filled' : 'outlined'}\r\n                            />\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Typography variant=\"caption\">\r\n                              {item.createdAt ? formatDate(item.createdAt) : 'Unknown'}\r\n                            </Typography>\r\n                          </TableCell>\r\n                          <TableCell>\r\n                            <Switch\r\n                              checked={item.enabled || false}\r\n                              onChange={(e) => toggleItemStatus(registryType, itemId, e.target.checked)}\r\n                              size=\"small\"\r\n                            />\r\n                            {item.route && (\r\n                              <Tooltip title=\"Open in new tab\">\r\n                                <IconButton \r\n                                  size=\"small\" \r\n                                  onClick={() => window.open(item.route, '_blank')}\r\n                                  sx={{ ml: 1 }}\r\n                                >\r\n                                  <ViewIcon fontSize=\"small\" />\r\n                                </IconButton>\r\n                              </Tooltip>\r\n                            )}\r\n                          </TableCell>\r\n                        </TableRow>\r\n                      ))}\r\n                    </TableBody>\r\n                  </Table>\r\n                </TableContainer>\r\n              )}\r\n              \r\n              {registry?.lastUpdated && (\r\n                <Typography variant=\"caption\" color=\"text.secondary\" sx={{ mt: 2, display: 'block' }}>\r\n                  Last updated: {formatDate(registry.lastUpdated)}\r\n                </Typography>\r\n              )}\r\n            </AccordionDetails>\r\n          </Accordion>\r\n        ))}\r\n\r\n        {Object.keys(registries).length === 0 && (\r\n          <Alert severity=\"info\">\r\n            No registries found. Upload some files to populate the registries.\r\n          </Alert>\r\n        )}\r\n      </Box>\r\n    );\r\n  };\r\n};\r\n\r\nexport default OMBigBook; "],"names":["UploadedFileList","files","selectedFile","onFileSelect","onFileExecute","onFileDelete","onQuestionnairePreview","isExecuting","settings","searchTerm","setSearchTerm","React","getFileIcon","type","FileTextIcon","JavaScriptIcon","DatabaseIcon","ShellScriptIcon","PythonIcon","HtmlIcon","CssIcon","JsonIcon","XmlIcon","ImageIcon","VideoIcon","AudioIcon","ArchiveIcon","PdfIcon","CodeIcon","getFileTypeChip","colorMap","jsx","Chip","filteredFiles","file","formatFileSize","bytes","k","sizes","i","formatDate","date","jsxs","Paper","Box","Typography","Stack","FolderOpenIcon","TextField","e","InputAdornment","SearchIcon","List","index","ListItem","ListItemButton","ListItemIcon","ListItemText","Tooltip","IconButton","PsychologyIcon","PlayIcon","Trash2Icon","Divider","FileViewer","onExecute","copyToClipboard","__async","err","downloadFile","blob","url","a","renderMarkdown","content","line","renderJson","parsed","formattedJson","error","Alert","renderCode","language","useDarkTheme","useSyntaxHighlighting","applyBasicSyntaxHighlighting","highlighted","renderContent","fileSizeKB","previewMode","effectiveType","CopyIcon","DownloadIcon","ViewIcon","defaultSettings","BigBookSettings","onSettingsChange","onSave","onReset","hasChanges","setHasChanges","useState","isProcessing","setIsProcessing","isTesting","setIsTesting","processingResult","setProcessingResult","mountTestResult","setMountTestResult","processingProgress","setProcessingProgress","handleSettingChange","key","value","newSettings","__spreadProps","__spreadValues","handleSave","handleReset","handleProcessAllFiles","result","handleTestSecureMount","SettingsIcon","Button","Accordion","AccordionSummary","ExpandMoreIcon","AccordionDetails","FormControl","InputLabel","Select","MenuItem","FormControlLabel","Switch","ExecuteIcon","UIIcon","OMAIIcon","FileProcessingIcon","CircularProgress","ProcessIcon","TestIcon","LinearProgress","SecurityIcon","ResetIcon","SaveIcon","BigBookConsolePage","consoleOutput","onClearConsole","showConsole","setShowConsole","activeView","setActiveView","setSettings","toggleConsole","handleSettingsChange","handleSettingsSave","handleSettingsReset","TerminalIcon","ClearIcon","RefreshIcon","Collapse","output","Fragment","EncryptedStoragePanel","status","setStatus","setFiles","loading","setLoading","setError","loadStatus","loadFiles","mountVolume","unmountVolume","rotateKey","useEffect","formatBytes","getStatusIcon","ErrorIcon","CheckCircleIcon","WarningIcon","InfoIcon","getStatusColor","getStatusText","StorageIcon","Card","CardContent","LockOpenIcon","LockIcon","KeyIcon","ListItemSecondaryAction","CloudDownloadIcon","DeleteIcon","QuestionnairePreview","open","onClose","onSubmit","isLoading","setIsLoading","responses","setResponses","isSubmitting","setIsSubmitting","renderError","setRenderError","iframeRef","useRef","validateTSXContent","issues","dangerousPatterns","pattern","message","createSecureSandbox","renderComponent","validation","iframeContent","iframe","handleMessage","event","questionId","answer","prev","handleSubmit","submission","response","responseCount","Dialog","DialogTitle","_a","CloseIcon","DialogContent","GroupIcon","TimerIcon","DialogActions","SendIcon","OMAIDiscoveryPanel","summary","setSummary","setIndex","discovering","setDiscovering","selectedCategory","setSelectedCategory","categoryFiles","setCategoryFiles","setSelectedFile","fileContent","setFileContent","fileDialogOpen","setFileDialogOpen","scheduleDialogOpen","setScheduleDialogOpen","scheduleHours","setScheduleHours","learningLoading","setLearningLoading","learningStatus","setLearningStatus","learningDialogOpen","setLearningDialogOpen","loadSummary","loadIndex","loadLearningStatus","data","initializeOMAI","startDiscovery","pollInterval","loadCategoryFiles","category","encodedCategory","loadFileDetails","fileId","metadataResponse","contentResponse","metadataData","contentData","scheduleDiscovery","refreshLearning","getCategoryIcon","FileIcon","FolderIcon","AutoIcon","ScheduleIcon","StartIcon","StatsIcon","Grid","Badge","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","_b","_c","_d","source","_f","_e","agentId","TSXComponentInstallWizard","onInstallComplete","onConsoleMessage","activeStep","setActiveStep","componentInfo","setComponentInfo","installOptions","setInstallOptions","installationResult","setInstallationResult","availableDirectories","setAvailableDirectories","steps","parseComponentFile","warning","handleInstallComponent","endpoint","handleRemoveComponent","renderParseStep","InstallIcon","imp","pkg","renderConfigStep","isEnabled","FormLabel","dir","renderInstallStep","RegistryIcon","PreviewIcon","ComponentIcon","Stepper","label","Step","StepLabel","ErrorBoundary","Component","props","errorInfo","BigBookCustomComponentViewer","componentName","onBack","onError","CustomComponent","setCustomComponent","loadCustomComponent","component","importPath","module","ComponentToRender","importError","errorMessage","handleRefresh","ArrowBackIcon","Breadcrumbs","Link","Suspense","MemoryManager","memories","setMemories","filters","setFilters","page","setPage","totalPages","setTotalPages","selectedMemory","setSelectedMemory","dialogOpen","setDialogOpen","dialogMode","setDialogMode","formData","setFormData","categories","priorities","accessLevels","loadMemories","resolve","handleCreateMemory","handleEditMemory","memory","handleViewMemory","handleSaveMemory","handleDeleteMemory","memoryId","getPriorityColor","priority","getAccessLevelIcon","level","MemoryIcon","AddIcon","FilterIcon","cat","EditIcon","tag","LabelIcon","Pagination","_","newPage","OMBigBook","activeTab","setActiveTab","uploadedFiles","setUploadedFiles","setConsoleOutput","setIsExecuting","showSettings","setShowSettings","consoleSettings","setConsoleSettings","questionnairePreviewOpen","setQuestionnairePreviewOpen","previewFile","setPreviewFile","registries","setRegistries","registriesLoading","setRegistriesLoading","registriesError","setRegistriesError","tsxWizardOpen","setTsxWizardOpen","tsxFile","setTsxFile","customComponents","setCustomComponents","customComponentsLoading","setCustomComponentsLoading","selectedCustomComponent","setSelectedCustomComponent","learningProgress","setLearningProgress","trainingSessions","setTrainingSessions","knowledgeMetrics","setKnowledgeMetrics","activeTrainingSession","setActiveTrainingSession","trainingDialogOpen","setTrainingDialogOpen","selectedTrainingPhase","setSelectedTrainingPhase","ethicsProgress","setEthicsProgress","ethicalFoundations","setEthicalFoundations","omlearnSurveys","setOmlearnSurveys","ethicsLoading","setEthicsLoading","selectedFoundation","setSelectedFoundation","foundationDialogOpen","setFoundationDialogOpen","fileInputRef","consoleRef","scrollToBottom","useCallback","loadLearningProgress","loadTrainingSessions","loadKnowledgeMetrics","loadEthicsProgress","loadEthicalFoundations","loadOMLearnSurveys","startTrainingSession","phase","interval","stopTrainingSession","refreshOMAIData","loadRegistries","loadCustomComponents","addConsoleMessage","handleRemoveCustomComponent","toggleItemStatus","id","enabled","details","newMessage","handleFileDrop","extension","reader","fileType","getFileTypeFromExtension","tempFile","f","fileTypeMessage","fileIcon","notifyOMAI","errorText","ingestionResult","registryNames","handleDragOver","handleFileInputChange","executeFile","retrieveResult","retrieveError","removeFile","clearConsole","saveSettings","handleQuestionnairePreview","handleQuestionnaireSubmit","ArticleIcon","TextIcon","handleTabChange","newValue","renderLearningDashboard","RefreshCwIcon","LearningIcon","StopIcon","renderTrainingPathways","TaskIcon","session","AnalyticsIcon","PerformanceIcon","InsightsIcon","TrendingUpIcon","renderKnowledgeAnalytics","MetricsIcon","count","renderEthicsReasoning","EthicsIcon","survey","MoralIcon","foundation","ReasoningIcon","foundationsInCategory","AIIcon","Tabs","Tab","CloudUploadIcon","RegistryManagementPanel","CustomComponentsPanel","context"],"mappings":"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"}