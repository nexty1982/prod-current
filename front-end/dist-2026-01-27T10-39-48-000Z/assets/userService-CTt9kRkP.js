var w=Object.defineProperty,p=Object.defineProperties;var y=Object.getOwnPropertyDescriptors;var f=Object.getOwnPropertySymbols;var E=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var l=(a,s,e)=>s in a?w(a,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[s]=e,h=(a,s)=>{for(var e in s||(s={}))E.call(s,e)&&l(a,e,s[e]);if(f)for(var e of f(s))M.call(s,e)&&l(a,e,s[e]);return a},g=(a,s)=>p(a,y(s));var m=(a,s,e)=>l(a,typeof s!="symbol"?s+"":s,e);var i=(a,s,e)=>new Promise((r,t)=>{var n=o=>{try{c(e.next(o))}catch(d){t(d)}},u=o=>{try{c(e.throw(o))}catch(d){t(d)}},c=o=>o.done?r(o.value):Promise.resolve(o.value).then(n,u);c((e=e.apply(a,s)).next())});class U{constructor(){m(this,"baseUrl","/api/admin")}getUsers(){return i(this,null,function*(){try{const s=yield fetch(`${this.baseUrl}/users`,{credentials:"include"});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const e=yield s.json();return{success:e.success,users:e.users||[],message:e.message}}catch(s){return console.error("Error fetching users:",s),{success:!1,message:"Failed to fetch users",users:[]}}})}createUser(s){return i(this,null,function*(){try{const e=yield fetch(`${this.baseUrl}/users`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(g(h({},s),{church_id:s.church_id||null}))}),r=yield e.json();if(!e.ok)throw new Error(r.message||"Failed to create user");return{success:r.success,message:r.message,tempPassword:r.tempPassword}}catch(e){return console.error("Error creating user:",e),{success:!1,message:e instanceof Error?e.message:"Failed to create user"}}})}updateUser(s,e){return i(this,null,function*(){try{const r=yield fetch(`${this.baseUrl}/users/${s}`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(g(h({},e),{church_id:e.church_id||null}))}),t=yield r.json();if(!r.ok)throw new Error(t.message||"Failed to update user");return{success:t.success,message:t.message}}catch(r){return console.error("Error updating user:",r),{success:!1,message:r instanceof Error?r.message:"Failed to update user"}}})}deleteUser(s){return i(this,null,function*(){try{const e=yield fetch(`${this.baseUrl}/users/${s}`,{method:"DELETE",credentials:"include"}),r=yield e.json();if(!e.ok)throw new Error(r.message||"Failed to delete user");return{success:r.success,message:r.message}}catch(e){return console.error("Error deleting user:",e),{success:!1,message:e instanceof Error?e.message:"Failed to delete user"}}})}toggleUserStatus(s){return i(this,null,function*(){try{const e=yield fetch(`${this.baseUrl}/users/${s}/toggle-status`,{method:"PUT",credentials:"include"}),r=yield e.json();if(!e.ok)throw new Error(r.message||"Failed to update user status");return{success:r.success,message:r.message}}catch(e){return console.error("Error toggling user status:",e),{success:!1,message:e instanceof Error?e.message:"Failed to update user status"}}})}resetPassword(s,e){return i(this,null,function*(){try{const r=yield fetch(`${this.baseUrl}/users/${s}/reset-password`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(e||{})}),t=yield r.json();if(!r.ok)throw new Error(t.message||"Failed to reset password");return{success:t.success,message:t.message,newPassword:t.newPassword}}catch(r){return console.error("Error resetting password:",r),{success:!1,message:r instanceof Error?r.message:"Failed to reset password"}}})}getChurches(){return i(this,null,function*(){try{const s=yield fetch("/api/admin/churches",{credentials:"include"});if(!s.ok)throw new Error(`HTTP error! status: ${s.status}`);const e=yield s.json();return{success:e.success,churches:e.churches||[],message:e.message}}catch(s){return console.error("Error fetching churches:",s),{success:!1,message:"Failed to fetch churches",churches:[]}}})}formatLastLogin(s){if(!s)return"Never";const e=new Date(s),t=new Date().getTime()-e.getTime(),n=Math.floor(t/(1e3*60*60*24));if(n===0){const u=Math.floor(t/36e5);if(u===0){const c=Math.floor(t/6e4);return c<=1?"Just now":`${c} minutes ago`}return u===1?"1 hour ago":`${u} hours ago`}else return n===1?"Yesterday":n<7?`${n} days ago`:e.toLocaleDateString()}getRoleBadgeColor(s){switch(s){case"super_admin":return"error";case"admin":return"warning";case"priest":return"primary";case"deacon":return"info";case"manager":return"secondary";case"user":return"default";case"viewer":return"default";default:return"default"}}generateSecurePassword(){const e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789!@#$%^&*";let r="";const t="abcdefghijklmnopqrstuvwxyz",n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",u="0123456789",c="!@#$%^&*";r+=t[Math.floor(Math.random()*t.length)],r+=n[Math.floor(Math.random()*n.length)],r+=u[Math.floor(Math.random()*u.length)],r+=c[Math.floor(Math.random()*c.length)];for(let o=4;o<16;o++)r+=e[Math.floor(Math.random()*e.length)];return r.split("").sort(()=>Math.random()-.5).join("")}}const T=new U;export{T as u};
//# sourceMappingURL=userService-CTt9kRkP.js.map
