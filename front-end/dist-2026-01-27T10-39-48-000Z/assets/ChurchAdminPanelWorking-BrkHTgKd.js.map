{"version":3,"file":"ChurchAdminPanelWorking-BrkHTgKd.js","sources":["../../src/features/admin/admin/ChurchAdminPanelWorking.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n    Box,\r\n    Typography,\r\n    Card,\r\n    CardContent,\r\n    Chip,\r\n    Button,\r\n    Alert,\r\n    CircularProgress\r\n} from '@mui/material';\r\nimport PageContainer from '@/shared/ui/PageContainer';\r\n\r\ninterface ChurchData {\r\n    id: number;\r\n    name: string;\r\n    email: string;\r\n    databaseName: string;\r\n    isActive: boolean;\r\n  \r\n}\r\n\r\nconst ChurchAdminPanelWorking: React.FC = () => {\r\n    const { id: churchId } = useParams<{ id: string }>();\r\n    const navigate = useNavigate();\r\n    const [churchData, setChurchData] = useState<ChurchData | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const loadChurchData = async () => {\r\n        if (!churchId) return;\r\n        \r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            \r\n            const response = await fetch(`/api/admin/church/${churchId}/overview`, {\r\n                credentials: 'include'\r\n            });\r\n            \r\n            if (response.ok) {\r\n                const data = await response.json();\r\n                if (data.metadata) {\r\n                    // Map the API response to our interface\r\n                    const churchInfo: ChurchData = {\r\n                        id: data.metadata.id,\r\n                        name: data.metadata.name,\r\n                        email: data.metadata.email || data.info?.email || '',\r\n                        databaseName: data.metadata.database_name,\r\n                        isActive: data.metadata.is_active,\r\n                        totalOcrJobs: (data.counts?.baptisms || 0) + (data.counts?.marriages || 0) + (data.counts?.funerals || 0)\r\n                    };\r\n                    setChurchData(churchInfo);\r\n                } else {\r\n                    throw new Error('Invalid response format');\r\n                }\r\n            } else {\r\n                throw new Error(`HTTP ${response.status}: Failed to load church data`);\r\n            }\r\n        } catch (err) {\r\n            setError(err instanceof Error ? err.message : 'An error occurred');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleOpenOcrPanel = () => {\r\n        navigate(`/admin/church/${churchId}/ocr`);\r\n    };\r\n\r\n    useEffect(() => {\r\n        loadChurchData();\r\n    }, [churchId]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <PageContainer title=\"Church Admin Panel\" description=\"Church administration\">\r\n                <Box display=\"flex\" justifyContent=\"center\" alignItems=\"center\" minHeight=\"200px\">\r\n                    <CircularProgress />\r\n                </Box>\r\n            </PageContainer>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <PageContainer title=\"Church Admin Panel\" description=\"Church administration\">\r\n                <Alert severity=\"error\" sx={{ mt: 2 }}>\r\n                    {error}\r\n                </Alert>\r\n            </PageContainer>\r\n        );\r\n    }\r\n\r\n    if (!churchData) {\r\n        return (\r\n            <PageContainer title=\"Church Admin Panel\" description=\"Church administration\">\r\n                <Alert severity=\"warning\" sx={{ mt: 2 }}>\r\n                    Church not found\r\n                </Alert>\r\n            </PageContainer>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <PageContainer title=\"Church Admin Panel\" description=\"Church administration\">\r\n            <Box sx={{ p: 3 }}>\r\n                <Typography variant=\"h4\" gutterBottom>\r\n                    Church Administration\r\n                </Typography>\r\n                \r\n                <Box sx={{ display: 'flex', flexDirection: 'column', gap: 3 }}>\r\n                    {/* Church Information Card */}\r\n                    <Box sx={{ display: 'flex', gap: 3, flexWrap: 'wrap' }}>\r\n                        <Box sx={{ flex: '2 1 300px' }}>\r\n                            <Card>\r\n                                <CardContent>\r\n                                    <Typography variant=\"h6\" gutterBottom>\r\n                                        {churchData.name}\r\n                                    </Typography>\r\n                                    <Box sx={{ mb: 2 }}>\r\n                                        <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                            <strong>Email:</strong> {churchData.email}\r\n                                        </Typography>\r\n                                        <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                            <strong>Database:</strong> {churchData.databaseName}\r\n                                        </Typography>\r\n                                        <Box sx={{ mt: 1 }}>\r\n                                            <Chip \r\n                                                label={churchData.isActive ? 'Active' : 'Inactive'} \r\n                                                color={churchData.isActive ? 'success' : 'error'}\r\n                                                size=\"small\"\r\n                                            />\r\n                                        </Box>\r\n                                    </Box>\r\n                                </CardContent>\r\n                            </Card>\r\n                        </Box>\r\n\r\n                        {/* Quick Actions Card */}\r\n                        <Box sx={{ flex: '1 1 250px' }}>\r\n                            <Card>\r\n                                <CardContent>\r\n                                    <Typography variant=\"h6\" gutterBottom>\r\n                                        Quick Actions\r\n                                    </Typography>\r\n                                    <Box sx={{ display: 'flex', flexDirection: 'column', gap: 2 }}>\r\n                                        <Button \r\n                                            variant=\"contained\" \r\n                                            color=\"primary\"\r\n                                            onClick={handleOpenOcrPanel}\r\n                                            fullWidth\r\n                                        >\r\n                                            Open OCR Data Panel\r\n                                        </Button>\r\n                                        <Button \r\n                                            variant=\"outlined\"\r\n                                            onClick={loadChurchData}\r\n                                            fullWidth\r\n                                        >\r\n                                            Refresh Data\r\n                                        </Button>\r\n                                    </Box>\r\n                                </CardContent>\r\n                            </Card>\r\n                        </Box>\r\n                    </Box>\r\n\r\n                    {/* OCR Statistics Card */}\r\n                    <Card>\r\n                        <CardContent>\r\n                            <Typography variant=\"h6\" gutterBottom>\r\n                                Church Statistics\r\n                            </Typography>\r\n                            <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap' }}>\r\n                                <Chip \r\n                                    label={`Total Records: ${churchData.totalOcrJobs || 0}`}\r\n                                    color=\"primary\"\r\n                                    variant=\"outlined\"\r\n                                />\r\n                            </Box>\r\n                        </CardContent>\r\n                    </Card>\r\n                </Box>\r\n            </Box>\r\n        </PageContainer>\r\n    );\r\n};\r\n\r\nexport default ChurchAdminPanelWorking;\r\n"],"names":["ChurchAdminPanelWorking","churchId","useParams","navigate","useNavigate","churchData","setChurchData","useState","loading","setLoading","error","setError","loadChurchData","__async","response","data","churchInfo","_a","_b","_c","_d","err","handleOpenOcrPanel","useEffect","PageContainer","Box","jsx","CircularProgress","Alert","jsxs","Typography","Card","CardContent","Chip","Button"],"mappings":"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"}