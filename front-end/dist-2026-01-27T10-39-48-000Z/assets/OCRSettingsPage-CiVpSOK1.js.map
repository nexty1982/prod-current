{"version":3,"file":"OCRSettingsPage-CiVpSOK1.js","sources":["../../src/features/devel-tools/om-ocr/pages/OCRSettingsPage.tsx"],"sourcesContent":["/**\r\n * OCR Settings Page\r\n * Document processing and deletion settings matching redesigned OCR interface\r\n */\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport {\r\n  Box,\r\n  Typography,\r\n  Paper,\r\n  Tabs,\r\n  Tab,\r\n  Stack,\r\n  FormControl,\r\n  InputLabel,\r\n  Select,\r\n  MenuItem,\r\n  TextField,\r\n  Button,\r\n  Alert,\r\n  Chip,\r\n  Divider,\r\n} from '@mui/material';\r\nimport {\r\n  IconFileDescription,\r\n  IconCode,\r\n  IconUser,\r\n} from '@tabler/icons-react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { apiClient } from '@/shared/lib/axiosInstance';\r\n\r\ninterface TabPanelProps {\r\n  children?: React.ReactNode;\r\n  index: number;\r\n  value: number;\r\n}\r\n\r\nfunction TabPanel(props: TabPanelProps) {\r\n  const { children, value, index, ...other } = props;\r\n  return (\r\n    <div\r\n      role=\"tabpanel\"\r\n      hidden={value !== index}\r\n      id={`ocr-settings-tabpanel-${index}`}\r\n      aria-labelledby={`ocr-settings-tab-${index}`}\r\n      {...other}\r\n    >\r\n      {value === index && <Box sx={{ py: 3 }}>{children}</Box>}\r\n    </div>\r\n  );\r\n}\r\n\r\ninterface DocumentProcessingSettings {\r\n  spellingCorrection: 'exact' | 'fix';\r\n  extractAllText: 'yes' | 'no';\r\n  improveFormatting: 'yes' | 'no';\r\n}\r\n\r\ninterface DocumentDeletionSettings {\r\n  deleteAfter: number;\r\n  deleteUnit: 'minutes' | 'hours' | 'days';\r\n}\r\n\r\ninterface OCRSettingsData {\r\n  documentProcessing: DocumentProcessingSettings;\r\n  documentDeletion: DocumentDeletionSettings;\r\n}\r\n\r\nconst OCRSettingsPage: React.FC = () => {\r\n  const { user } = useAuth();\r\n  const [activeTab, setActiveTab] = useState(0);\r\n  const [loading, setLoading] = useState(false);\r\n  const [saving, setSaving] = useState(false);\r\n  const [saveSuccess, setSaveSuccess] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  \r\n  const [settings, setSettings] = useState<OCRSettingsData>({\r\n    documentProcessing: {\r\n      spellingCorrection: 'fix',\r\n      extractAllText: 'yes',\r\n      improveFormatting: 'yes',\r\n    },\r\n    documentDeletion: {\r\n      deleteAfter: 7,\r\n      deleteUnit: 'days',\r\n    },\r\n  });\r\n\r\n  // Load settings on mount\r\n  useEffect(() => {\r\n    loadSettings();\r\n  }, []);\r\n\r\n  const loadSettings = useCallback(async () => {\r\n    if (!user?.church_id) return;\r\n    \r\n    setLoading(true);\r\n    try {\r\n      const response = await apiClient.get(`/api/church/${user.church_id}/ocr/settings`);\r\n      const data = response.data?.settings || response.data;\r\n      \r\n      if (data) {\r\n        setSettings({\r\n          documentProcessing: {\r\n            spellingCorrection: data.documentProcessing?.spellingCorrection || 'fix',\r\n            extractAllText: data.documentProcessing?.extractAllText || 'yes',\r\n            improveFormatting: data.documentProcessing?.improveFormatting || 'yes',\r\n          },\r\n          documentDeletion: {\r\n            deleteAfter: data.documentDeletion?.deleteAfter || 7,\r\n            deleteUnit: data.documentDeletion?.deleteUnit || 'days',\r\n          },\r\n        });\r\n      }\r\n    } catch (err: any) {\r\n      console.error('[OCRSettingsPage] Failed to load settings:', err);\r\n      // Don't show error - use defaults\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [user?.church_id]);\r\n\r\n  const handleSave = useCallback(async () => {\r\n    if (!user?.church_id) {\r\n      setError('Church ID not available');\r\n      return;\r\n    }\r\n\r\n    setSaving(true);\r\n    setError(null);\r\n    setSaveSuccess(false);\r\n\r\n    try {\r\n      // Validate deletion settings\r\n      const deleteAfterMinutes = settings.documentDeletion.deleteUnit === 'minutes'\r\n        ? settings.documentDeletion.deleteAfter\r\n        : settings.documentDeletion.deleteUnit === 'hours'\r\n        ? settings.documentDeletion.deleteAfter * 60\r\n        : settings.documentDeletion.deleteAfter * 24 * 60;\r\n\r\n      if (deleteAfterMinutes < 10) {\r\n        setError('Minimum deletion time is 10 minutes');\r\n        setSaving(false);\r\n        return;\r\n      }\r\n\r\n      if (deleteAfterMinutes > 14 * 24 * 60) {\r\n        setError('Maximum deletion time is 14 days');\r\n        setSaving(false);\r\n        return;\r\n      }\r\n\r\n      // Save settings - only send document processing and deletion settings\r\n      // Backend will merge with existing settings\r\n      await apiClient.put(`/api/church/${user.church_id}/ocr/settings`, {\r\n        documentProcessing: settings.documentProcessing,\r\n        documentDeletion: settings.documentDeletion,\r\n      });\r\n\r\n      setSaveSuccess(true);\r\n      setTimeout(() => setSaveSuccess(false), 3000);\r\n    } catch (err: any) {\r\n      console.error('[OCRSettingsPage] Failed to save settings:', err);\r\n      setError(err.response?.data?.message || 'Failed to save settings');\r\n    } finally {\r\n      setSaving(false);\r\n    }\r\n  }, [settings, user?.church_id]);\r\n\r\n  const handleTabChange = (_event: React.SyntheticEvent, newValue: number) => {\r\n    setActiveTab(newValue);\r\n  };\r\n\r\n  return (\r\n    <Box sx={{ p: 3, maxWidth: 1200, mx: 'auto' }}>\r\n      {/* Header */}\r\n      <Stack direction=\"row\" justifyContent=\"space-between\" alignItems=\"center\" sx={{ mb: 3 }}>\r\n        <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n          <IconFileDescription size={24} />\r\n          <Typography variant=\"h5\" fontWeight={600}>\r\n            Settings\r\n          </Typography>\r\n        </Stack>\r\n        <Select\r\n          value=\"account\"\r\n          size=\"small\"\r\n          sx={{ minWidth: 120 }}\r\n        >\r\n          <MenuItem value=\"account\">Account</MenuItem>\r\n        </Select>\r\n      </Stack>\r\n\r\n      {/* Credit Warning Banner (placeholder - can be removed if not needed) */}\r\n      {/* Uncomment if credit system is implemented\r\n      <Alert severity=\"warning\" sx={{ mb: 3 }}>\r\n        <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n          <span>You have used all of your page credits. To process more documents, please <a href=\"#\" style={{ textDecoration: 'underline' }}>buy credits</a>.</span>\r\n        </Stack>\r\n      </Alert>\r\n      */}\r\n\r\n      {/* Tabs */}\r\n      <Paper sx={{ mb: 3 }}>\r\n        <Tabs\r\n          value={activeTab}\r\n          onChange={handleTabChange}\r\n          sx={{\r\n            borderBottom: '1px solid',\r\n            borderColor: 'divider',\r\n            '& .MuiTab-root': {\r\n              textTransform: 'none',\r\n              minHeight: 64,\r\n            },\r\n          }}\r\n        >\r\n          <Tab\r\n            icon={<IconFileDescription size={20} />}\r\n            iconPosition=\"start\"\r\n            label=\"Documents\"\r\n            id=\"ocr-settings-tab-0\"\r\n            aria-controls=\"ocr-settings-tabpanel-0\"\r\n          />\r\n          <Tab\r\n            icon={<IconCode size={20} />}\r\n            iconPosition=\"start\"\r\n            label=\"API\"\r\n            id=\"ocr-settings-tab-1\"\r\n            aria-controls=\"ocr-settings-tabpanel-1\"\r\n          />\r\n          <Tab\r\n            icon={<IconUser size={20} />}\r\n            iconPosition=\"start\"\r\n            label=\"Profile\"\r\n            id=\"ocr-settings-tab-2\"\r\n            aria-controls=\"ocr-settings-tabpanel-2\"\r\n          />\r\n        </Tabs>\r\n      </Paper>\r\n\r\n      {/* Tab Panels */}\r\n      <Paper sx={{ p: 3 }}>\r\n        {/* Documents Tab */}\r\n        <TabPanel value={activeTab} index={0}>\r\n          {/* Document Processing Section */}\r\n          <Box sx={{ mb: 4 }}>\r\n            <Typography variant=\"h6\" fontWeight={600} gutterBottom>\r\n              Document processing\r\n            </Typography>\r\n            \r\n            <Stack direction=\"row\" spacing={1} alignItems=\"center\" sx={{ mb: 3 }}>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                Customize AI\r\n              </Typography>\r\n              <Chip\r\n                label=\"Experimental\"\r\n                size=\"small\"\r\n                color=\"default\"\r\n                sx={{ height: 20, fontSize: '0.7rem' }}\r\n              />\r\n            </Stack>\r\n\r\n            <Stack spacing={3}>\r\n              {/* Fix spelling mistakes */}\r\n              <FormControl fullWidth>\r\n                <InputLabel id=\"spelling-correction-label\">Fix spelling mistakes</InputLabel>\r\n                <Select\r\n                  labelId=\"spelling-correction-label\"\r\n                  id=\"spelling-correction\"\r\n                  value={settings.documentProcessing.spellingCorrection}\r\n                  label=\"Fix spelling mistakes\"\r\n                  onChange={(e) =>\r\n                    setSettings((prev) => ({\r\n                      ...prev,\r\n                      documentProcessing: {\r\n                        ...prev.documentProcessing,\r\n                        spellingCorrection: e.target.value as 'exact' | 'fix',\r\n                      },\r\n                    }))\r\n                  }\r\n                >\r\n                  <MenuItem value=\"exact\">Transcribe exactly as written</MenuItem>\r\n                  <MenuItem value=\"fix\">Fix spelling mistakes</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n\r\n              {/* Extract all text */}\r\n              <FormControl fullWidth>\r\n                <InputLabel id=\"extract-all-text-label\">Extract all text</InputLabel>\r\n                <Select\r\n                  labelId=\"extract-all-text-label\"\r\n                  id=\"extract-all-text\"\r\n                  value={settings.documentProcessing.extractAllText}\r\n                  label=\"Extract all text\"\r\n                  onChange={(e) =>\r\n                    setSettings((prev) => ({\r\n                      ...prev,\r\n                      documentProcessing: {\r\n                        ...prev.documentProcessing,\r\n                        extractAllText: e.target.value as 'yes' | 'no',\r\n                      },\r\n                    }))\r\n                  }\r\n                >\r\n                  <MenuItem value=\"yes\">Yes</MenuItem>\r\n                  <MenuItem value=\"no\">No</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n\r\n              {/* Improve formatting */}\r\n              <FormControl fullWidth>\r\n                <InputLabel id=\"improve-formatting-label\">Improving formatting for better readability</InputLabel>\r\n                <Select\r\n                  labelId=\"improve-formatting-label\"\r\n                  id=\"improve-formatting\"\r\n                  value={settings.documentProcessing.improveFormatting}\r\n                  label=\"Improving formatting for better readability\"\r\n                  onChange={(e) =>\r\n                    setSettings((prev) => ({\r\n                      ...prev,\r\n                      documentProcessing: {\r\n                        ...prev.documentProcessing,\r\n                        improveFormatting: e.target.value as 'yes' | 'no',\r\n                      },\r\n                    }))\r\n                  }\r\n                >\r\n                  <MenuItem value=\"yes\">Yes</MenuItem>\r\n                  <MenuItem value=\"no\">No</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Stack>\r\n\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={handleSave}\r\n              disabled={saving || loading}\r\n              sx={{ mt: 3 }}\r\n            >\r\n              {saving ? 'Saving...' : 'Save changes'}\r\n            </Button>\r\n          </Box>\r\n\r\n          <Divider sx={{ my: 4 }} />\r\n\r\n          {/* Document Deletion Section */}\r\n          <Box>\r\n            <Typography variant=\"h6\" fontWeight={600} gutterBottom>\r\n              Document deletion\r\n            </Typography>\r\n            <Typography variant=\"body2\" color=\"text.secondary\" paragraph>\r\n              Control how quickly your documents are automatically deleted from our server.\r\n            </Typography>\r\n\r\n            <Stack direction=\"row\" spacing={2} alignItems=\"center\" sx={{ mt: 2, mb: 2 }}>\r\n              <Typography variant=\"body2\">Delete files after</Typography>\r\n              <TextField\r\n                type=\"number\"\r\n                value={settings.documentDeletion.deleteAfter}\r\n                onChange={(e) => {\r\n                  const value = parseInt(e.target.value, 10);\r\n                  if (!isNaN(value) && value > 0) {\r\n                    setSettings((prev) => ({\r\n                      ...prev,\r\n                      documentDeletion: {\r\n                        ...prev.documentDeletion,\r\n                        deleteAfter: value,\r\n                      },\r\n                    }));\r\n                  }\r\n                }}\r\n                inputProps={{ min: 1 }}\r\n                sx={{ width: 100 }}\r\n                size=\"small\"\r\n              />\r\n              <FormControl size=\"small\" sx={{ minWidth: 100 }}>\r\n                <Select\r\n                  value={settings.documentDeletion.deleteUnit}\r\n                  onChange={(e) =>\r\n                    setSettings((prev) => ({\r\n                      ...prev,\r\n                      documentDeletion: {\r\n                        ...prev.documentDeletion,\r\n                        deleteUnit: e.target.value as 'minutes' | 'hours' | 'days',\r\n                      },\r\n                    }))\r\n                  }\r\n                >\r\n                  <MenuItem value=\"minutes\">minutes</MenuItem>\r\n                  <MenuItem value=\"hours\">hours</MenuItem>\r\n                  <MenuItem value=\"days\">day</MenuItem>\r\n                </Select>\r\n              </FormControl>\r\n            </Stack>\r\n\r\n            <Typography variant=\"caption\" color=\"text.secondary\" sx={{ display: 'block', mt: 1 }}>\r\n              Minimum 10 minutes. Maximum 14 days. Files will be deleted automatically after the selected period. Changes will not apply to existing documents.\r\n            </Typography>\r\n\r\n            <Button\r\n              variant=\"outlined\"\r\n              onClick={handleSave}\r\n              disabled={saving || loading}\r\n              sx={{ mt: 2 }}\r\n            >\r\n              {saving ? 'Saving...' : 'Save changes'}\r\n            </Button>\r\n          </Box>\r\n        </TabPanel>\r\n\r\n        {/* API Tab */}\r\n        <TabPanel value={activeTab} index={1}>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            API Settings\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            API configuration and access tokens will be available here.\r\n          </Typography>\r\n        </TabPanel>\r\n\r\n        {/* Profile Tab */}\r\n        <TabPanel value={activeTab} index={2}>\r\n          <Typography variant=\"h6\" gutterBottom>\r\n            Profile Settings\r\n          </Typography>\r\n          <Typography variant=\"body2\" color=\"text.secondary\">\r\n            User profile settings will be available here.\r\n          </Typography>\r\n        </TabPanel>\r\n      </Paper>\r\n\r\n      {/* Success/Error Messages */}\r\n      {saveSuccess && (\r\n        <Alert severity=\"success\" sx={{ mt: 2 }} onClose={() => setSaveSuccess(false)}>\r\n          Settings saved successfully!\r\n        </Alert>\r\n      )}\r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mt: 2 }} onClose={() => setError(null)}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default OCRSettingsPage;\r\n\r\n"],"names":["TabPanel","props","_a","children","value","index","other","__objRest","jsx","__spreadProps","__spreadValues","Box","OCRSettingsPage","user","useAuth","activeTab","setActiveTab","useState","loading","setLoading","saving","setSaving","saveSuccess","setSaveSuccess","error","setError","settings","setSettings","useEffect","loadSettings","useCallback","__async","response","apiClient","data","_b","_c","_d","_e","_f","err","handleSave","deleteAfterMinutes","handleTabChange","_event","newValue","jsxs","Stack","IconFileDescription","Typography","Select","MenuItem","Paper","Tabs","Tab","IconCode","IconUser","Chip","FormControl","InputLabel","e","prev","Button","Divider","TextField","Alert"],"mappings":"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"}