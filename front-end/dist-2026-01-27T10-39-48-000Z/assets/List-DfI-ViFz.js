var we=Object.defineProperty,Me=Object.defineProperties;var ke=Object.getOwnPropertyDescriptors;var J=Object.getOwnPropertySymbols;var Le=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var V=(t,l,c)=>l in t?we(t,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):t[l]=c,z=(t,l)=>{for(var c in l||(l={}))Le.call(l,c)&&V(t,c,l[c]);if(J)for(var c of J(l))Ae.call(l,c)&&V(t,c,l[c]);return t},F=(t,l)=>Me(t,ke(l));var _=(t,l,c)=>new Promise((w,f)=>{var D=p=>{try{y(c.next(p))}catch(M){f(M)}},u=p=>{try{y(c.throw(p))}catch(M){f(M)}},y=p=>p.done?w(p.value):Promise.resolve(p.value).then(D,u);y((c=c.apply(t,l)).next())});import{c as re,j as e,$ as Se,d as s,e as S,aI as Ee,B as o,S as g,L as P,U as C,Q as I,O as Pe,a0 as K,a1 as Q,a2 as X,f as x,C as Te,aJ as Y,h as De,T as R,I as U,M as ze,J as Fe,Y as Re,K as Ue,a3 as We,A as Be}from"./index-CNFXvQ6i.js";import{B as Oe}from"./Breadcrumb-COvnK_QX.js";import{P as $e}from"./PageContainer-jzGZZ3Dt.js";import{b as q,r as v}from"./vendor-DgfDxsY7.js";import{u as Ne,I as Ge}from"./index-BN1hrhI4.js";import{l as i}from"./logger-Du9b5RCj.js";import{I as He}from"./IconDownload-dS1bPbvH.js";import{I as Z}from"./IconPlus-MD6k0QmK.js";import{I as W}from"./IconEdit-BeKYqWN2.js";import{I as te}from"./IconClock-Do4w3CnN.js";import{I as ie}from"./IconCheck-DIkpgZMD.js";import{I as oe}from"./IconAlertCircle-CVtGKA0Y.js";import{I as Je}from"./InputAdornment-v70Ylxh4.js";import{I as Ve}from"./IconSearch-Bzvm3Td3.js";import{T as Ke,a as Qe,b as Xe,c as ee,d as Ye}from"./TableRow-AyUKSpjR.js";import{T as a}from"./TableCell-DwyxNY3j.js";import{f as ne}from"./index-B8Cm0CAq.js";import{I as qe}from"./IconEye-D23pS7kv.js";import{I as Ze}from"./IconDots-Ct5a3S6S.js";import{P as en}from"./Pagination-DJpUiJlQ.js";import{L as T}from"./ListItemText-Do-rLMnZ.js";import{I as nn}from"./IconMail-BNOoKzVw.js";import{I as rn}from"./IconTrash-ByQmiQ4q.js";import{F as tn}from"./Fab-CcDsHThN.js";import{B as on}from"./BlankCard-IhFlsdkf.js";import"./Breadcrumbs-C2lu88Wm.js";import"./Link-CFOV57Jo.js";import"./Helmet-DNWYwtrp.js";import"./index-BvdvJza9.js";import"./typeof-QjJsDpFa.js";import"./index-B9SIr0Qh.js";import"./LastPage-DyorFB-E.js";/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=[["path",{d:"M3 5m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z",key:"svg-0"}],["path",{d:"M3 10l18 0",key:"svg-1"}],["path",{d:"M7 15l.01 0",key:"svg-2"}],["path",{d:"M11 15l2 0",key:"svg-3"}]],cn=re("outline","credit-card","CreditCard",sn);/**
 * @license @tabler/icons-react v3.34.1 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const an=[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 7l1 0",key:"svg-2"}],["path",{d:"M9 13l6 0",key:"svg-3"}],["path",{d:"M13 17l2 0",key:"svg-4"}]],B=re("outline","file-invoice","FileInvoice",an),ln=t=>{switch(t){case"paid":return"success";case"pending":return"warning";case"overdue":return"error";case"draft":return"info";case"cancelled":return"default";default:return"default"}},dn=t=>{switch(t){case"paid":return e.jsx(ie,{size:16});case"pending":return e.jsx(te,{size:16});case"overdue":return e.jsx(oe,{size:16});case"draft":return e.jsx(W,{size:16});case"cancelled":return e.jsx(Be,{size:16});default:return e.jsx(B,{size:16})}},hn=()=>{const{invoices:t,loading:l,error:c,totalCount:w,currentPage:f,setCurrentPage:D,filters:u,setFilters:y,fetchInvoices:p,deleteInvoice:M,markInvoiceAsPaid:se,generateInvoicePDF:ce,sendInvoiceEmail:ae,exportInvoices:le}=Ne();q.useEffect(()=>(i.componentMount("Invoice List - Modern"),i.info("Invoice List - Modern","Component mounted",{totalInvoices:t.length,currentPage:f,filters:u}),()=>{i.componentUnmount("Invoice List - Modern")}),[]),q.useEffect(()=>{t.length>0&&i.info("Invoice List - Modern","Invoices data loaded",{totalCount:t.length,statuses:t.reduce((n,r)=>(n[r.status]=(n[r.status]||0)+1,n),{})})},[t]);const[de,he]=v.useState(""),[m,O]=v.useState([]),[$,N]=v.useState(null),[h,G]=v.useState(null),[xe,E]=v.useState(!1),[H,ue]=v.useState("all"),[j,me]=v.useState("xlsx"),k={total:w,draft:t.filter(n=>n.status==="draft").length,pending:t.filter(n=>n.status==="pending").length,paid:t.filter(n=>n.status==="paid").length,overdue:t.filter(n=>n.status==="overdue").length},pe=n=>{const r=n.target.value;he(r),i.userAction("Invoice List - Modern","search_performed",{searchTerm:r,searchLength:r.length,currentPage:u.page});const d=setTimeout(()=>{y(F(z({},u),{search:r||void 0,page:1}))},300);return()=>clearTimeout(d)},b=n=>{ue(n),i.userAction("Invoice List - Modern","status_filter_changed",{previousStatus:H,newStatus:n,currentPage:u.page}),y(F(z({},u),{status:n==="all"?void 0:n,page:1}))},ge=(n,r)=>{i.userAction("Invoice List - Modern","page_changed",{previousPage:f,newPage:r,totalPages:Math.ceil(w/(u.limit||10))}),D(r)},je=n=>{const r=m.includes(n);i.userAction("Invoice List - Modern","invoice_selected",{invoiceId:n,action:r?"deselect":"select",totalSelected:r?m.length-1:m.length+1}),O(d=>d.includes(n)?d.filter(A=>A!==n):[...d,n])},ve=()=>{const n=m.length===t.length;i.userAction("Invoice List - Modern","select_all_toggled",{action:n?"deselect_all":"select_all",totalInvoices:t.length,previouslySelected:m.length}),O(m.length===t.length?[]:t.map(r=>r.id))},Ie=(n,r)=>{i.userAction("Invoice List - Modern","action_menu_opened",{invoiceId:r}),N(n.currentTarget),G(r)},L=()=>{h&&i.userAction("Invoice List - Modern","action_menu_closed",{invoiceId:h}),N(null),G(null)},fe=n=>_(void 0,null,function*(){try{i.userAction("Invoice List - Modern","mark_as_paid_attempted",{invoiceId:n}),yield se(n),i.userAction("Invoice List - Modern","mark_as_paid_success",{invoiceId:n})}catch(r){i.error("Invoice List - Modern","mark_as_paid_failed",{invoiceId:n,error:r instanceof Error?r.message:"Unknown error"})}L()}),ye=n=>_(void 0,null,function*(){try{i.userAction("Invoice List - Modern","generate_pdf_attempted",{invoiceId:n});const r=yield ce(n);if(r){const d=window.URL.createObjectURL(r),A=document.createElement("a");A.href=d,A.download=`invoice-${n}.pdf`,A.click(),window.URL.revokeObjectURL(d),i.userAction("Invoice List - Modern","generate_pdf_success",{invoiceId:n,fileSize:r.size})}}catch(r){i.error("Invoice List - Modern","generate_pdf_failed",{invoiceId:n,error:r instanceof Error?r.message:"Unknown error"})}L()}),be=n=>_(void 0,null,function*(){try{const r=window.prompt("Enter email address:");r?(i.userAction("Invoice List - Modern","send_email_attempted",{invoiceId:n,recipientEmail:r}),yield ae(n,r),i.userAction("Invoice List - Modern","send_email_success",{invoiceId:n,recipientEmail:r})):i.userAction("Invoice List - Modern","send_email_cancelled",{invoiceId:n})}catch(r){i.error("Invoice List - Modern","send_email_failed",{invoiceId:n,error:r instanceof Error?r.message:"Unknown error"})}L()}),_e=n=>_(void 0,null,function*(){try{i.userAction("Invoice List - Modern","delete_invoice_attempted",{invoiceId:n}),yield M(n),i.userAction("Invoice List - Modern","delete_invoice_success",{invoiceId:n})}catch(r){i.error("Invoice List - Modern","delete_invoice_failed",{invoiceId:n,error:r instanceof Error?r.message:"Unknown error"})}E(!1),L()}),Ce=()=>_(void 0,null,function*(){try{i.userAction("Invoice List - Modern","export_attempted",{format:j,totalInvoices:t.length,selectedInvoices:m.length,filters:u});const n=yield le(j);if(n){const r=window.URL.createObjectURL(n),d=document.createElement("a");d.href=r,d.download=`invoices-export.${j}`,d.click(),window.URL.revokeObjectURL(r),i.userAction("Invoice List - Modern","export_success",{format:j,fileSize:n.size,totalInvoices:t.length})}}catch(n){i.error("Invoice List - Modern","export_failed",{format:j,error:n instanceof Error?n.message:"Unknown error"})}});return c?e.jsxs(Se,{severity:"error",children:[e.jsx(s,{variant:"h6",children:"Error loading invoices"}),e.jsx(s,{children:c.message}),e.jsx(S,{onClick:p,startIcon:e.jsx(Ee,{}),children:"Retry"})]}):e.jsxs(o,{children:[e.jsxs(o,{mb:3,children:[e.jsxs(g,{direction:"row",justifyContent:"space-between",alignItems:"center",mb:2,children:[e.jsx(s,{variant:"h4",fontWeight:"bold",children:"Invoices"}),e.jsxs(g,{direction:"row",spacing:2,children:[e.jsx(S,{variant:"outlined",startIcon:e.jsx(He,{}),onClick:Ce,children:"Export"}),e.jsx(S,{variant:"contained",startIcon:e.jsx(Z,{}),component:P,to:"/apps/invoice/create",onClick:()=>{i.userAction("Invoice List - Modern","create_invoice_clicked",{currentPage:u.page,totalInvoices:t.length})},children:"Create Invoice"})]})]}),e.jsxs(o,{sx:{display:"flex",gap:3,mb:3,flexWrap:"wrap"},children:[e.jsx(o,{sx:{flex:{xs:"1 1 100%",sm:"1 1 45%",md:"1 1 18%"}},children:e.jsx(C,{sx:{bgcolor:"primary.light",cursor:"pointer","&:hover":{bgcolor:"primary.main","& .MuiTypography-root":{color:"white"}}},onClick:()=>b("all"),children:e.jsx(I,{children:e.jsxs(g,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(o,{sx:{width:48,height:48,bgcolor:"primary.main",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(B,{})}),e.jsxs(o,{children:[e.jsx(s,{variant:"h4",fontWeight:"bold",children:k.total}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Total Invoices"})]})]})})})}),e.jsx(o,{sx:{flex:{xs:"1 1 100%",sm:"1 1 45%",md:"1 1 18%"}},children:e.jsx(C,{sx:{bgcolor:"info.light",cursor:"pointer","&:hover":{bgcolor:"info.main","& .MuiTypography-root":{color:"white"}}},onClick:()=>b("draft"),children:e.jsx(I,{children:e.jsxs(g,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(o,{sx:{width:48,height:48,bgcolor:"info.main",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(W,{})}),e.jsxs(o,{children:[e.jsx(s,{variant:"h4",fontWeight:"bold",children:k.draft}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Draft"})]})]})})})}),e.jsx(o,{sx:{flex:{xs:"1 1 100%",sm:"1 1 45%",md:"1 1 18%"}},children:e.jsx(C,{sx:{bgcolor:"warning.light",cursor:"pointer","&:hover":{bgcolor:"warning.main","& .MuiTypography-root":{color:"white"}}},onClick:()=>b("pending"),children:e.jsx(I,{children:e.jsxs(g,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(o,{sx:{width:48,height:48,bgcolor:"warning.main",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(te,{})}),e.jsxs(o,{children:[e.jsx(s,{variant:"h4",fontWeight:"bold",children:k.pending}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Pending"})]})]})})})}),e.jsx(o,{sx:{flex:{xs:"1 1 100%",sm:"1 1 45%",md:"1 1 18%"}},children:e.jsx(C,{sx:{bgcolor:"success.light",cursor:"pointer","&:hover":{bgcolor:"success.main","& .MuiTypography-root":{color:"white"}}},onClick:()=>b("paid"),children:e.jsx(I,{children:e.jsxs(g,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(o,{sx:{width:48,height:48,bgcolor:"success.main",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(ie,{})}),e.jsxs(o,{children:[e.jsx(s,{variant:"h4",fontWeight:"bold",children:k.paid}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Paid"})]})]})})})}),e.jsx(o,{sx:{flex:{xs:"1 1 100%",sm:"1 1 45%",md:"1 1 18%"}},children:e.jsx(C,{sx:{bgcolor:"error.light",cursor:"pointer","&:hover":{bgcolor:"error.main","& .MuiTypography-root":{color:"white"}}},onClick:()=>b("overdue"),children:e.jsx(I,{children:e.jsxs(g,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(o,{sx:{width:48,height:48,bgcolor:"error.main",borderRadius:1,display:"flex",alignItems:"center",justifyContent:"center",color:"white"},children:e.jsx(oe,{})}),e.jsxs(o,{children:[e.jsx(s,{variant:"h4",fontWeight:"bold",children:k.overdue}),e.jsx(s,{variant:"body2",color:"text.secondary",children:"Overdue"})]})]})})})})]}),e.jsxs(g,{direction:"row",spacing:2,mb:3,children:[e.jsx(Pe,{placeholder:"Search invoices...",variant:"outlined",value:de,onChange:pe,sx:{minWidth:300},InputProps:{startAdornment:e.jsx(Je,{position:"start",children:e.jsx(Ve,{size:20})})}}),e.jsxs(K,{sx:{minWidth:120},children:[e.jsx(Q,{children:"Status"}),e.jsxs(X,{value:H,label:"Status",onChange:n=>b(n.target.value),children:[e.jsx(x,{value:"all",children:"All"}),e.jsx(x,{value:"draft",children:"Draft"}),e.jsx(x,{value:"pending",children:"Pending"}),e.jsx(x,{value:"paid",children:"Paid"}),e.jsx(x,{value:"overdue",children:"Overdue"}),e.jsx(x,{value:"cancelled",children:"Cancelled"})]})]}),e.jsxs(K,{sx:{minWidth:120},children:[e.jsx(Q,{children:"Export Format"}),e.jsxs(X,{value:j,label:"Export Format",onChange:n=>{const r=n.target.value;i.userAction("Invoice List - Modern","export_format_changed",{previousFormat:j,newFormat:r}),me(r)},children:[e.jsx(x,{value:"csv",children:"CSV"}),e.jsx(x,{value:"xlsx",children:"Excel"}),e.jsx(x,{value:"pdf",children:"PDF"})]})]})]})]}),e.jsx(C,{children:e.jsx(I,{children:l?e.jsx(o,{display:"flex",justifyContent:"center",py:4,children:e.jsx(Te,{})}):e.jsxs(e.Fragment,{children:[e.jsx(Ke,{children:e.jsxs(Qe,{children:[e.jsx(Xe,{children:e.jsxs(ee,{children:[e.jsx(a,{padding:"checkbox",children:e.jsx(Y,{checked:m.length===t.length,indeterminate:m.length>0&&m.length<t.length,onChange:ve})}),e.jsx(a,{children:"Invoice #"}),e.jsx(a,{children:"Church"}),e.jsx(a,{children:"Customer ID"}),e.jsx(a,{children:"Amount"}),e.jsx(a,{children:"Status"}),e.jsx(a,{children:"Issue Date"}),e.jsx(a,{children:"Due Date"}),e.jsx(a,{children:"Actions"})]})}),e.jsx(Ye,{children:t.map(n=>{var r;return e.jsxs(ee,{hover:!0,sx:{"&:hover":{bgcolor:"action.hover"}},children:[e.jsx(a,{padding:"checkbox",children:e.jsx(Y,{checked:m.includes(n.id),onChange:()=>je(n.id)})}),e.jsx(a,{children:e.jsx(s,{variant:"body2",fontWeight:"bold",children:n.invoice_number})}),e.jsx(a,{children:e.jsx(s,{variant:"body2",children:n.church_name})}),e.jsx(a,{children:e.jsx(s,{variant:"body2",fontWeight:"medium",color:"primary.main",children:((r=n.church)==null?void 0:r.customer_id)||"N/A"})}),e.jsx(a,{children:e.jsxs(s,{variant:"body2",fontWeight:"bold",children:[n.total_amount," ",n.currency]})}),e.jsx(a,{children:e.jsx(De,{icon:dn(n.status),label:n.status.toUpperCase(),color:ln(n.status),size:"small"})}),e.jsx(a,{children:e.jsx(s,{variant:"body2",children:ne(new Date(n.issue_date),"MMM dd, yyyy")})}),e.jsx(a,{children:e.jsx(s,{variant:"body2",children:ne(new Date(n.due_date),"MMM dd, yyyy")})}),e.jsx(a,{children:e.jsxs(g,{direction:"row",spacing:1,children:[e.jsx(R,{title:"View",children:e.jsx(U,{size:"small",component:P,to:`/apps/invoice/view/${n.invoice_number}`,children:e.jsx(qe,{size:18})})}),e.jsx(R,{title:"Edit",children:e.jsx(U,{size:"small",component:P,to:`/apps/invoice/edit/${n.invoice_number}`,children:e.jsx(W,{size:18})})}),e.jsx(R,{title:"More actions",children:e.jsx(U,{size:"small",onClick:d=>Ie(d,n.id),children:e.jsx(Ze,{size:18})})})]})})]},n.id)})})]})}),e.jsx(o,{display:"flex",justifyContent:"center",mt:3,children:e.jsx(en,{count:Math.ceil(w/(u.limit||10)),page:f,onChange:ge,color:"primary"})})]})})}),e.jsxs(ze,{anchorEl:$,open:!!$,onClose:L,children:[e.jsxs(x,{onClick:()=>h&&fe(h),children:[e.jsx(cn,{size:18}),e.jsx(T,{primary:"Mark as Paid",sx:{ml:1}})]}),e.jsxs(x,{onClick:()=>h&&ye(h),children:[e.jsx(B,{size:18}),e.jsx(T,{primary:"Generate PDF",sx:{ml:1}})]}),e.jsxs(x,{onClick:()=>h&&be(h),children:[e.jsx(nn,{size:18}),e.jsx(T,{primary:"Send Email",sx:{ml:1}})]}),e.jsxs(x,{onClick:()=>{i.userAction("Invoice List - Modern","delete_dialog_opened",{invoiceId:h}),E(!0)},sx:{color:"error.main"},children:[e.jsx(rn,{size:18}),e.jsx(T,{primary:"Delete",sx:{ml:1}})]})]}),e.jsxs(Fe,{open:xe,onClose:()=>{i.userAction("Invoice List - Modern","delete_dialog_cancelled",{invoiceId:h}),E(!1)},children:[e.jsx(Re,{children:"Delete Invoice"}),e.jsx(Ue,{children:"Are you sure you want to delete this invoice? This action cannot be undone."}),e.jsxs(We,{children:[e.jsx(S,{onClick:()=>{i.userAction("Invoice List - Modern","delete_dialog_cancelled",{invoiceId:h}),E(!1)},children:"Cancel"}),e.jsx(S,{onClick:()=>h&&_e(h),color:"error",children:"Delete"})]})]}),e.jsx(tn,{color:"primary","aria-label":"add",sx:{position:"fixed",bottom:16,right:16},component:P,to:"/apps/invoice/create",onClick:()=>{i.userAction("Invoice List - Modern","create_invoice_fab_clicked",{currentPage:u.page,totalInvoices:t.length})},children:e.jsx(Z,{})})]})},xn=[{to:"/",title:"Home"},{title:"Invoice List"}],Jn=()=>e.jsx(Ge,{children:e.jsxs($e,{title:"Invoice List",description:"this is Invoice List",children:[e.jsx(Oe,{title:"Invoice List",items:xn}),e.jsx(on,{children:e.jsx(I,{children:e.jsx(hn,{})})})]})});export{Jn as default};
//# sourceMappingURL=List-DfI-ViFz.js.map
